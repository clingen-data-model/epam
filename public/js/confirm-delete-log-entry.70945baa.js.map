{"version":3,"sources":["webpack:///./src/http/is_validation_error.js","webpack:///./node_modules/core-js/modules/es.array.flat.js","webpack:///./src/components/log_entries/ConfirmDeleteLogEntry.vue","webpack:///./src/components/log_entries/ConfirmDeleteLogEntry.vue?7e46","webpack:///./node_modules/core-js/modules/es.array.unscopables.flat.js","webpack:///./src/components/next_actions/ConfirmDeleteNextAction.vue?63b8","webpack:///./src/components/log_entries/ConfirmDeleteLogEntry.vue?369b","webpack:///./node_modules/core-js/internals/flatten-into-array.js","webpack:///./src/components/next_actions/ConfirmDeleteNextAction.vue","webpack:///./src/components/next_actions/ConfirmDeleteNextAction.vue?aa7c"],"names":["error","response","status","data","errors","$","flattenIntoArray","toObject","toLength","toInteger","arraySpeciesCreate","target","proto","flat","depthArg","arguments","length","undefined","O","this","sourceLen","A","class","logEntry","description","causer","name","logDate","flattenedErrors","err","idx","key","$router","go","deleteEntry","submitText","props","id","required","type","String","computed","application","log_entries","find","entry","properties","log_date","Object","values","watch","immediate","handler","console","info","methods","$store","dispatch","is_validation_error","a","message","render","addToUnscopables","isArray","bind","original","source","start","depth","mapper","thisArg","element","targetIndex","sourceIndex","mapFn","TypeError","module","exports","nextAction","formatDate","created_at","assignee","assigned_to_name","target_date","commitDelete","uuid","next_actions","next_action","na","targetDate","date","log"],"mappings":"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","file":"js/confirm-delete-log-entry.70945baa.js","sourcesContent":["export default function (error) {\n    return error.response && error.response.status == 422 && error.response.data.errors\n}","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://tc39.es/ecma262/#sec-array.prototype.flat\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n","<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n<template>\n    <div>\n        <h2>You are about to delete the following log entry:</h2>\n\n        <div class=\"border-y py-2\">\n        <blockquote>\n            <div v-html=\"logEntry.description\"></div>\n        </blockquote>\n        <div class=\"ml-4 mt-2 mb-4 text-gray-700 text-sm\" v-if=\"logEntry.causer\">Logged by {{logEntry.causer.name}}, {{logDate}}</div>\n        </div>\n\n        <div>This can not be undone. Are you sure you want to continue?</div>\n\n        <div v-if=\"flattenedErrors.length > 0\" class=\"bg-red-200 text-red-900 rounded p-2 my-2\">\n            <ul>\n                <li v-for=\"(err,idx) in flattenedErrors\" :key=\"idx\">\n                    {{err}}\n                </li>\n            </ul> \n        </div>\n        \n        <button-row @canceled=\"$router.go(-1)\" @submitted=\"deleteEntry\" submitText=\"Delete Log Entry\"></button-row>\n    </div>\n</template>\n<script>\nimport {mapGetters} from 'vuex'\nimport { formatDate } from '../../date_utils'\nimport is_validation_error from '../../http/is_validation_error'\n\n\nexport default {\n    name: 'ConfirmDeleteLogEntry',\n    props: {\n        id: {\n            required: true,\n            type: String,\n        }\n    },\n    data() {\n        return {\n            errors: {}\n        }\n    },\n    computed: {\n        ...mapGetters({\n            application: 'applications/currentItem'\n        }),\n        logEntry () {\n            const logEntry = this.application.log_entries.find(entry => entry.id == this.id);\n            return logEntry || {};\n        },\n        logDate () {\n            return formatDate(this.logEntry.properties.log_date)\n        },\n        flattenedErrors () {\n            return Object.values(this.errors).flat();\n        }\n    },\n    watch: {\n        logEntry: {\n            immediate: true,\n            handler: function () {\n                console.info('logEntry watch handler', this.logEntry.id)\n                if (!this.logEntry.id) {\n                    this.$router.go(-1);\n                }\n            }\n        }\n    },\n    methods: {\n        async deleteEntry()\n        {\n            try {\n                await this.$store.dispatch('applications/deleteLogEntry', {application: this.application, logEntry: this.logEntry});\n                this.$router.go(-1);\n            } catch ( error ) {\n                if (is_validation_error(error)) {\n                    this.errors = error.response.data.errors;\n                }\n                this.errors = {a: error.message};\n                \n            }\n        }\n    }\n}\n</script>","import { render } from \"./ConfirmDeleteLogEntry.vue?vue&type=template&id=07fe3a0a\"\nimport script from \"./ConfirmDeleteLogEntry.vue?vue&type=script&lang=js\"\nexport * from \"./ConfirmDeleteLogEntry.vue?vue&type=script&lang=js\"\n\nimport \"./ConfirmDeleteLogEntry.vue?vue&type=style&index=0&id=07fe3a0a&lang=postcss&scope=true\"\nscript.render = render\n\nexport default script","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flat');\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ConfirmDeleteNextAction.vue?vue&type=style&index=0&id=5d3e3213&lang=postcss&scope=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ConfirmDeleteLogEntry.vue?vue&type=style&index=0&id=07fe3a0a&lang=postcss&scope=true\"","'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","<template>\n    <div>            \n        <h2>You are about to delete the following next action:</h2>\n        <div class=\"border-y py-2\" v-if=\"nextAction\">\n            <div class=\"ml-4 my-3 text-sm\">\n                Created on: <strong>{{formatDate(nextAction.created_at)}}</strong>\n            </div>\n            <blockquote class=\"mb-4\">\n                <div v-html=\"nextAction.entry\"></div>\n            </blockquote>\n            <div class=\"ml-4 my-1 text-sm\" v-if=\"nextAction.assignee\">\n                Assigned to: \n                <strong>\n                    <span v-if=\"nextAction.assigned_to_name\">{{nextAction.assigned_to_name}} in </span> \n                    {{nextAction.assignee.name}}\n                </strong>\n            </div>\n            <div class=\"ml-4 mt-1 mb-4 text-sm\" v-if=\"nextAction.target_date\">\n                Target Date: <strong>{{formatDate(nextAction.target_date)}}</strong>\n            </div>\n        </div>\n\n    <div>This can not be undone. Are you sure you want to continue?</div>\n        \n    <button-row @canceled=\"$router.go(-1)\" @submitted=\"commitDelete\" submitText=\"Delete Log Entry\"></button-row>\n    </div>\n</template>\n<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n<script>\nimport {mapGetters} from 'vuex'\nimport { formatDate } from '../../date_utils'\nimport is_validation_error from '../../http/is_validation_error'\n\nexport default {\n    name: 'ConfirmDeleteNextAction',\n    props: {\n        uuid: {\n            required: true,\n            type: String\n        },\n        id: {\n            required: true,\n            type: String,\n        }\n    },\n    data() {\n        return {\n            errors: {}\n        }\n    },\n    computed: {\n        ...mapGetters({\n            application: 'applications/currentItem'\n        }),\n        nextAction () {\n            if (!this.application.next_actions) {\n                return {};\n            }\n            const next_action = this.application.next_actions.find(na => na.id == this.id);\n            return next_action || {};\n        },\n        flattenedErrors () {\n            return Object.values(this.errors).flat();\n        },\n        targetDate() {\n            return formatDate(this.nextAction.targetDate);\n        }\n    },\n    watch: {\n        nextAction: {\n            immediate: true,\n            handler: function () {\n                if (!this.nextAction.id) {\n                    this.$router.go(-1);\n                }\n            }\n        }\n    },\n    methods: {\n        formatDate(date) {\n            return formatDate(date);\n        },\n        async commitDelete()\n        {\n            console.log('committing delete');\n            try {\n                await this.$store.dispatch('applications/deleteNextAction', \n                                    {\n                                        application: this.application, \n                                        nextAction: this.nextAction\n                                    });\n                this.$router.go(-1);\n            } catch ( error ) {\n                if (is_validation_error(error)) {\n                    this.errors = error.response.data.errors;\n                }\n                this.errors = {a: error.message};\n                \n            }\n        }\n    }\n}\n</script>","import { render } from \"./ConfirmDeleteNextAction.vue?vue&type=template&id=5d3e3213\"\nimport script from \"./ConfirmDeleteNextAction.vue?vue&type=script&lang=js\"\nexport * from \"./ConfirmDeleteNextAction.vue?vue&type=script&lang=js\"\n\nimport \"./ConfirmDeleteNextAction.vue?vue&type=style&index=0&id=5d3e3213&lang=postcss&scope=true\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}