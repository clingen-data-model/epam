(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9c33442"],{"30d0":function(e,t,r){"use strict";r.r(t);r("4e82"),r("4de4"),r("d3b7");var n=r("7a23"),i=Object(n["createElementVNode"])("h1",null,"People",-1),o={class:"block mb-2",for:"filter-input"},c=Object(n["createTextVNode"])("Filter:Â ");function a(e,t,r,a,l,s){var u=Object(n["resolveComponent"])("data-table");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[i,Object(n["createVNode"])(u,{fields:l.fields,data:s.filteredPeople,class:"width-full","row-click-handler":s.goToPerson,"row-class":"cursor-pointer",sort:a.sort,"onUpdate:sort":t[1]||(t[1]=function(e){return a.sort=e}),paginated:""},{header:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("label",o,[c,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.filter=e}),placeholder:"filter"},null,512),[[n["vModelText"],a.filter]])])]})),_:1},8,["fields","data","row-click-handler","sort"])])}var l=r("5530"),s=(r("b0c0"),r("4d63"),r("c607"),r("ac1f"),r("2c3e"),r("25f0"),r("466d"),r("5502")),u=r("5257"),d=r("f933"),f=[{name:"name",sortable:!0,type:String},{name:"email",sortable:!0,type:String},{name:"institution.name",label:"Institution",sortable:!0,type:String,resolveSort:function(e){return e.institution?e.institution.name:""}}],p={components:{},props:{},data:function(){return{fields:f}},computed:Object(l["a"])(Object(l["a"])({},Object(s["b"])({people:"people/all",currentUser:"currentUser"})),{},{filteredPeople:function(){if(!this.filter)return this.people;var e=new RegExp(".*".concat(this.filter,".*"),"i");return this.people.filter((function(t){return t.name.match(e)||t.email.match(e)||t.institution&&t.institution.name.match(e)}))}}),watch:{filter:{immediate:!0,handler:function(){this.currentPage=0}},sort:{immediate:!0,handler:function(){this.currentPage=0}}},methods:{goToPerson:function(e){this.$router.push("/people/"+e.uuid)},goToEditPerson:function(e){this.$router.push("/people/".concat(e.uuid,"/edit"))},canEdit:function(e){return!!this.hasPermission("people-manage")||this.currentUser.id==e.user_id}},mounted:function(){this.$store.dispatch("people/all",{})},setup:function(){var e=Object(u["a"])(),t=e.sort,r=e.filter;return{sort:t,filter:r,pageSize:d["c"],currentPage:d["a"],getPageItems:d["b"]}}},b=r("6b0d"),m=r.n(b);const h=m()(p,[["render",a]]);t["default"]=h},5257:function(e,t,r){"use strict";var n=r("5530"),i=(r("caad"),r("2532"),r("b64b"),r("ac1f"),r("5319"),r("4de4"),r("d3b7"),r("6c02")),o=r("7a23");t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(i["d"])(),r=Object(i["c"])();e||(console.log('Warning: defaultSort is deprecated.  Please provide a sort object: {field: "fieldname", desc: boolean}'),e=e||{field:"name",desc:!1});var c=Object(o["computed"])({immediate:!0,get:function(){return Object.keys(r.query).includes("sort-field")?{field:r.query["sort-field"],desc:Boolean(parseInt(r.query["sort-desc"]))}:e},set:function(e){var i={"sort-field":e.field,"sort-desc":e.desc?1:0},o=Object(n["a"])(Object(n["a"])({},r.query),i);t.replace({path:r.path,query:o})}}),a=Object(o["computed"])({set:function(e){var i=r.query,o=r.path,c=Object(n["a"])({},i);e?c=Object(n["a"])(Object(n["a"])({},i),{filter:e}):delete c.filter,t.replace({path:o,query:c})},get:function(){return r.query.filter},immediate:!0});return{sort:c,filter:a}}}}]);
//# sourceMappingURL=chunk-b9c33442.e54fd75c.js.map