(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["application-detail~group-detail","log-entry-form"],{2242:function(e,t,n){"use strict";var o=n("7a23"),r=function(e){return Object(o["pushScopeId"])("data-v-52f06f94"),e=e(),Object(o["popScopeId"])(),e},c=r((function(){return Object(o["createElementVNode"])("h3",{class:"pb-2"},"EP Progress",-1)})),a={class:"flex flex-row space-x-1"};function i(e,t,n,r,i,l){var s=Object(o["resolveComponent"])("progress-step");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[c,Object(o["createElementVNode"])("div",a,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(l.steps,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:e,step:e,application:n.application},null,8,["step","application"])})),128))])])}var l={class:"flex-1"},s={class:"flex flex-row-reverse justify-between bg-transparent mt-1"},p={key:0};function u(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["progress-step",a.displayClass])},null,2),Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])({"-mr-10":!a.isLastStep})},Object(o["toDisplayString"])(a.approvalDate),3),a.isFirstStep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",p,Object(o["toDisplayString"])(a.dateInitiated),1)):Object(o["createCommentVNode"])("",!0)])])}n("a9e3"),n("a15b");var d=n("e328"),m={props:{step:{type:Number,required:!0},application:{type:Object,required:!0}},data:function(){return{}},computed:{dateInitiated:function(){return Object(d["b"])(this.application.date_initiated)},approvalDate:function(){return this.application.approvalDateForStep(this.step)?Object(d["b"])(this.application.approvalDateForStep(this.step)):" "},displayClass:function(){var e=[];return this.isApproved?e.push("approved"):this.isCurrentStep&&e.push("active"),this.isFirstStep&&e.push("rounded-l"),this.isLastStep&&e.push("rounded-r"),e.join(" ")},isCurrentStep:function(){return this.application.current_step==this.step},isApproved:function(){return this.application.stepIsApproved(this.step)},isFirstStep:function(){return 1==this.step},isLastStep:function(){var e=Math.max.apply(Math,this.application.steps);return this.step==e}},methods:{}},b=(n("b89c"),n("6b0d")),f=n.n(b);const j=f()(m,[["render",u]]);var O=j,v={components:{ProgressStep:O},props:{application:{required:!0,type:Object}},computed:{steps:function(){return this.application.steps}}};n("672f");const h=f()(v,[["render",i],["__scopeId","data-v-52f06f94"]]);t["a"]=h},5832:function(e,t,n){"use strict";n("4e82"),n("a4d3"),n("e01a");var o=n("7a23"),r={key:0,class:"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200"},c={class:"flex space-x-1"},a=["innerHTML"];function i(e,t,n,i,l,s){var p=Object(o["resolveComponent"])("icon-edit"),u=Object(o["resolveComponent"])("router-link"),d=Object(o["resolveComponent"])("icon-trash"),m=Object(o["resolveComponent"])("data-table"),b=Object(o["resolveComponent"])("log-entry-form"),f=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[s.hasLogEntries?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:1,fields:s.fields,data:s.filteredLogEntries,sort:l.sort,"onUpdate:sort":t[0]||(t[0]=function(e){return l.sort=e})},{"cell-id":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(u,{to:{name:"EditLogEntry",params:{id:t.id}},class:"btn btn-xs inline-block"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{width:"12"})]})),_:2},1032,["to"]),null===t.activity_type?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,to:{name:"ConfirmDeleteLogEntry",params:{id:t.id}},class:"btn btn-xs inline-block"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{width:"12"})]})),_:2},1032,["to"])):Object(o["createCommentVNode"])("",!0)])]})),"cell-description":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",{innerHTML:t.description,class:"links-blue"},null,8,a)]})),_:1},8,["fields","data","sort"])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,Object(o["toDisplayString"])(s.noResultsMessage),1)),Object(o["createVNode"])(f,{modelValue:l.editingEntry,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.editingEntry=e}),title:"Edit log entry"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b)]})),_:1},8,["modelValue"])])}var l=n("1da1"),s=(n("96cf"),n("a9e3"),n("d81d"),n("b0c0"),n("caad"),n("2532"),n("a434"),n("4de4"),n("d3b7"),n("5502")),p=n("598d"),u=n("831e"),d=[{name:"created_at",label:"Created",sortName:"created_at",sortable:!0,type:Date},{name:"description",label:"Entry",sortable:!0,type:String},{name:"causer.name",label:"User",sortable:!0},{name:"id",label:"",sortable:!1}],m={components:{LogEntryForm:p["default"]},props:{step:{required:!1,type:Number}},data:function(){return{sort:{field:"created_at",desc:!0},selectedLogEntry:{},editingEntry:!1}},computed:{fields:function(){return console.log(d.map((function(e){return e.name}))),4!=this.group.group_type_id||d.map((function(e){return e.name})).includes("step")||d.splice(2,0,{name:"step",sortable:!0}),d},hasLogEntries:function(){return this.filteredLogEntries.length>0},filteredLogEntries:function(){var e=this;return this.logEntries&&this.step?this.logEntries.filter((function(t){return t.step==e.step})):this.logEntries?this.logEntries:[]},noResultsMessage:function(){return"number"==typeof this.step?"No progress log entries have been entered for step ".concat(this.step):"There are no log entries for this application"}},methods:{getLogEntries:function(){return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})))()},editLogEntry:function(e){this.editingEntry=!0,this.selectedLogEntry=e}},mounted:function(){},setup:function(){var e=Object(s["d"])(),t=Object(o["computed"])((function(){return e.getters["groups/currentItemOrNew"]})),n=Object(o["computed"])((function(){return t.value.expert_panel}));return Object(o["watch"])(t,(function(){t.value.uuid&&Object(u["b"])("/api/groups/".concat(t.value.uuid,"/activity-logs"))}),{immediate:!0}),{group:t,application:n,logEntries:u["c"]}}},b=(n("a70d"),n("6b0d")),f=n.n(b);const j=f()(m,[["render",i]]);t["a"]=j},"598d":function(e,t,n){"use strict";n.r(t);var o=n("7a23");function r(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("step-input"),s=Object(o["resolveComponent"])("rich-text-editor"),p=Object(o["resolveComponent"])("button-row"),u=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(u,{class:"log-entry-form",ref:"form-container"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{label:"Log Date",modelValue:c.newEntry.log_date,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.newEntry.log_date=e}),errors:c.errors.log_date,type:"date",ref:"logdate"},null,8,["modelValue","errors"]),2==a.application.expert_panel_type_id?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,modelValue:c.newEntry.step,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.newEntry.step=e}),errors:c.errors.step},null,8,["modelValue","errors"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(i,{label:"Entry",errors:c.errors.entry},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:c.newEntry.entry,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.newEntry.entry=e})},null,8,["modelValue"])]})),_:1},8,["errors"]),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[3]||(t[3]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[4]||(t[4]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]})),_:1},512)}var c=n("1da1"),a=n("5530"),i=(n("96cf"),n("7db0"),n("d3b7"),n("a4d3"),n("e01a"),n("99af"),n("5502")),l=n("e328"),s=n("a06a"),p=n("85fe"),u=n("831e"),d={name:"LogEntryForm",components:{StepInput:s["default"],RichTextEditor:p["default"]},props:{id:{required:!1,default:null}},data:function(){return{newEntry:{log_date:new Date,step:null,entry:""},errors:{}}},computed:Object(a["a"])(Object(a["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),watch:{id:{immediate:!0,handler:function(){var e=this.findEntry();e&&this.syncEntry(e)}},application:{immediate:!0,handler:function(){var e=this.findEntry();e&&this.syncEntry(e)}}},methods:{findEntry:function(){var e=this;return null===this.id?null:this.logEntries?this.logEntries.find((function(t){return t.id==e.id})):void 0},initNewEntry:function(){this.newEntry={log_date:Object(l["b"])(new Date),step:null,entry:""}},syncEntry:function(e){e&&(this.newEntry={id:e.id,log_date:Object(l["b"])(new Date(Date.parse(e.created_at))),step:parseInt(e.step),entry:e.description})},cancel:function(){this.initNewEntry(),this.$emit("canceled")},save:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e.newEntry.id?Object(u["e"])("/api/groups/".concat(e.group.uuid,"/activity-logs/").concat(e.newEntry.id),e.newEntry):Object(u["d"])("/api/groups/".concat(e.group.uuid,"/activity-logs"),e.newEntry),e.initNewEntry(),e.$emit("saved"),t.next=11;break;case 6:if(t.prev=6,t.t0=t["catch"](0),!t.t0.response||422!=t.t0.response.status||!t.t0.response.data.errors){t.next=11;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},mounted:function(){this.$el.querySelectorAll("input")[0].focus()},setup:function(){return{logEntries:u["c"]}}},m=n("6b0d"),b=n.n(m);const f=b()(d,[["render",r]]);t["default"]=f},"672f":function(e,t,n){"use strict";n("a1da")},"7cd7":function(e,t,n){},"831e":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return u}));var o=n("1da1"),r=(n("c740"),n("99af"),n("a434"),n("96cf"),n("7a23")),c=n("f96b"),a=Object(r["ref"])([]),i=Object(r["computed"])((function(){return a.value})),l=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].get(t).then((function(e){return e.data.data}));case 2:a.value=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].post(t,n).then((function(e){return a.value.push(e.data),e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].put(t,n).then((function(e){var t=a.value.findIndex((function(t){return t.id==e.data.id}));return a.value[t]=e.data,e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].delete("".concat(t,"/").concat(n)).then((function(e){var t=a.value.findIndex((function(e){return e.id==n}));return a.value.splice(t,1),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},"83a1":function(e,t,n){"use strict";n("d81d"),n("b0c0"),n("a15b");var o={name:"ApplicationStepReview",props:{},data:function(){return{}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},expertPanel:function(){return this.group.expert_panel},isGcep:function(){return this.group.isGcep()},isVcep:function(){return this.group.isVcep()},members:function(){var e=this;return this.group.members.map((function(t){return{id:t.id,name:t.person.name,institution:t.person.institution?t.person.institution.name:null,credentials:t.person.credentials,expertise:t.expertise,roles:t.roles.map((function(e){return e.name})).join(", "),coi_completed:e.formatDate(t.coi_last_completed)}}))}},methods:{}};const r=o;t["a"]=r},"898d":function(e,t,n){},a1da:function(e,t,n){},a70d:function(e,t,n){"use strict";n("898d")},b89c:function(e,t,n){"use strict";n("7cd7")},d5fa:function(e,t,n){"use strict";n("b0c0"),n("a15b"),n("d81d");var o=n("7a23"),r={class:"application-review bg-gray-100 p-2"},c=Object(o["createElementVNode"])("h2",null,"Basic Information",-1),a=Object(o["createElementVNode"])("h2",null,"Membership",-1),i={key:0,class:"mt-6"},l=Object(o["createElementVNode"])("h4",null,"Expertise of VCEP members",-1),s=Object(o["createElementVNode"])("h2",null,"Scope of Work",-1),p=Object(o["createElementVNode"])("h3",null,"Genes",-1),u={class:"mb-6"},d={key:0},m=Object(o["createElementVNode"])("h3",null,"Description of scope",-1),b={key:0},f=Object(o["createElementVNode"])("h2",null,"Plans for Ongoing Review and Descrepency Resolution",-1),j={class:"flex-none"},O={key:0,class:"mt-1"},v=Object(o["createElementVNode"])("em",null,"Details:",-1),h={key:1},w=Object(o["createElementVNode"])("h2",null,"Attestations",-1),g={key:2},y=Object(o["createElementVNode"])("h2",null,"Attestations",-1);function V(e,t,n,V,C,N){var k=this,x=Object(o["resolveComponent"])("object-dictionary"),D=Object(o["resolveComponent"])("dictionary-row"),E=Object(o["resolveComponent"])("simple-table"),S=Object(o["resolveComponent"])("markdown-block");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[Object(o["createElementVNode"])("section",null,[c,Object(o["createVNode"])(x,{obj:N.basicInfo,"label-class":"w-40 font-bold"},null,8,["obj"]),Object(o["createVNode"])(D,{label:"CDWG","label-class":"w-40 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(k.group.parent?k.group.parent.name:"--"),1)]})),_:1})]),Object(o["createElementVNode"])("section",null,[a,Object(o["createVNode"])(E,{data:e.members,"key-by":"id",class:"print:text-xs text-sm"},null,8,["data"]),e.isVcep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,[l,Object(o["createElementVNode"])("blockquote",null,[Object(o["createVNode"])(S,{markdown:e.expertPanel.membership_description},null,8,["markdown"])])])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("section",null,[s,p,Object(o["createElementVNode"])("div",u,[e.isGcep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",d,Object(o["toDisplayString"])(e.expertPanel.genes.map((function(e){return e.gene_symbol})).join(", ")),1)):Object(o["createCommentVNode"])("",!0),e.isVcep?(Object(o["openBlock"])(),Object(o["createBlock"])(E,{key:1,data:e.expertPanel.genes.map((function(e){return{id:e.id,gene:e.gene_symbol,disease:e.disease_name}})),"key-by":"id","hide-columns":["id"]},null,8,["data"])):Object(o["createCommentVNode"])("",!0)]),m,Object(o["createElementVNode"])("blockquote",null,[Object(o["createVNode"])(S,{markdown:e.expertPanel.scope_description},null,8,["markdown"])])]),e.isGcep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",b,[f,Object(o["createVNode"])(D,{label:"Selected protocol","label-class":"w-48 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",j,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.expertPanel.curation_review_protocol?e.titleCase(e.expertPanel.curation_review_protocol.full_name):null)+" ",1),100==e.expertPanel.curation_review_protocol_id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",O,[v,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.expertPanel.curation_review_protocol_other),1)])):Object(o["createCommentVNode"])("",!0)])]})),_:1})])):Object(o["createCommentVNode"])("",!0),e.isGcep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",h,[w,Object(o["createVNode"])(D,{label:"GCEP Attestation Signed","label-class":"w-52 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.formatDate(e.expertPanel.gcep_attestation_date)),1)]})),_:1}),Object(o["createVNode"])(D,{label:"GCI Training Date","label-class":"w-52 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.formatDate(e.expertPanel.gci_training_date)),1)]})),_:1}),Object(o["createVNode"])(D,{label:"NHGRI Attestation Signed","label-class":"w-52 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.formatDate(e.expertPanel.nhgri_attestation_date)),1)]})),_:1})])):Object(o["createCommentVNode"])("",!0),e.isVcep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",g,[Object(o["createElementVNode"])("section",null,[y,Object(o["createVNode"])(D,{label:"Reanalysis and Descrepency Resolution Attestation Signed","label-class":"w-52 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.formatDate(e.expertPanel.reanalysis_attestation_date)),1)]})),_:1}),Object(o["createVNode"])(D,{label:"NHGRI Attestation Signed","label-class":"w-60 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.formatDate(e.expertPanel.nhgri_attestation_date)),1)]})),_:1})])])):Object(o["createCommentVNode"])("",!0)])}var C=n("83a1"),N={name:"DefinitionReview",extends:C["a"],computed:{basicInfo:function(){return{type:this.group.type.name?this.group.type.name.toUpperCase():"",long_base_name:this.expertPanel.long_base_name,short_base_name:this.expertPanel.short_base_name}}},watch:{group:{immediate:!0,handler:function(e,t){!e.id||t&&e.id==t.id||(this.$store.dispatch("groups/getMembers",this.group),this.$store.dispatch("groups/getGenes",this.group))}}}},k=n("6b0d"),x=n.n(k);const D=x()(N,[["render",V]]);t["a"]=D},f7ba:function(e,t,n){"use strict";n("a15b"),n("d81d"),n("b0c0");var o=n("7a23"),r={class:"application-review p-2 bg-gray-100"},c={key:0},a=Object(o["createElementVNode"])("h2",null,"Plans for Ongoing Review and Descrepency Resolution",-1),i={class:"w-full"},l={key:0,class:"mt-1"},s=Object(o["createElementVNode"])("em",null,"Details:",-1),p={key:1},u=Object(o["createElementVNode"])("h2",null,"Evidence Summaries",-1),d={key:2},m=Object(o["createElementVNode"])("h2",null,"Core Approval Member, Trained Biocurator, and Biocurator Trainer Designation",-1);function b(e,t,n,b,f,j){var O=this,v=Object(o["resolveComponent"])("dictionary-row"),h=Object(o["resolveComponent"])("markdown-block"),w=Object(o["resolveComponent"])("evidence-summary-list");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[e.expertPanel.has_approved_pilot?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",c,[a,Object(o["createVNode"])(v,{label:"Selected protocol",labelWidthClass:"w-48 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",i,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.expertPanel.curation_review_protocol?e.titleCase(e.expertPanel.curation_review_protocol.full_name):null)+" ",1),100==e.expertPanel.curation_review_protocol_id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",l,[s,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.expertPanel.curation_review_protocol_other),1)])):Object(o["createCommentVNode"])("",!0)])]})),_:1}),Object(o["createVNode"])(v,{label:"Notes",labelWidthClass:"w-48 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{markdown:e.expertPanel.curation_review_process_notes},null,8,["markdown"])]})),_:1})])):Object(o["createCommentVNode"])("",!0),e.expertPanel.has_approved_pilot?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",p,[u,Object(o["createVNode"])(w,{readonly:!0})])):Object(o["createCommentVNode"])("",!0),e.expertPanel.has_approved_pilot?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",d,[m,Object(o["createVNode"])(v,{label:"Core Approval Members",labelWidthClass:"w-48 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(O.group.coreApprovalMembers.map((function(e){return e.person.name})).join(", ")),1)]})),_:1}),Object(o["createVNode"])(v,{label:"Biocurator Trainers",labelWidthClass:"w-48 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(O.group.biocuratorTrainers.map((function(e){return e.person.name})).join(", ")),1)]})),_:1}),Object(o["createVNode"])(v,{label:"Trained Biocurators",labelWidthClass:"w-48 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(O.group.trainedBiocurators.map((function(e){return e.person.name})).join(", ")),1)]})),_:1})])):Object(o["createCommentVNode"])("",!0)])}var f=n("83a1"),j=n("324b"),O={name:"SustainedCurationReview",extends:f["a"],components:{EvidenceSummaryList:j["a"]}},v=n("6b0d"),h=n.n(v);const w=h()(O,[["render",b]]);t["a"]=w},f8c8:function(e,t,n){"use strict";var o=n("7a23"),r={key:0};function c(e,t,n,c,a,i){var l=Object(o["resolveComponent"])("step-one"),s=Object(o["resolveComponent"])("tab-item"),p=Object(o["resolveComponent"])("step-two"),u=Object(o["resolveComponent"])("step-three"),d=Object(o["resolveComponent"])("step-four"),m=Object(o["resolveComponent"])("tabs-container");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[i.application.isGcep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[Object(o["createVNode"])(l,{onStepApproved:i.handleApproved,onUpdated:t[0]||(t[0]=function(t){return e.$emit("updated")})},null,8,["onStepApproved"])])):Object(o["createCommentVNode"])("",!0),2==this.application.expert_panel_type_id?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:1,"tab-location":"right",modelValue:i.activeIndex,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.activeIndex=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{label:"Group Definition"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{onStepApproved:i.handleApproved,onUpdated:t[1]||(t[1]=function(t){return e.$emit("updated")})},null,8,["onStepApproved"])]})),_:1}),Object(o["createVNode"])(s,{label:"Draft Specifications"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{onStepApproved:i.handleApproved,onUpdated:t[2]||(t[2]=function(t){return e.$emit("updated")})},null,8,["onStepApproved"])]})),_:1}),Object(o["createVNode"])(s,{label:"Pilot Specfications"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{onStepApproved:i.handleApproved,onUpdated:t[3]||(t[3]=function(t){return e.$emit("updated")})},null,8,["onStepApproved"])]})),_:1}),Object(o["createVNode"])(s,{label:"Sustained Curation"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{onStepApproved:i.handleApproved,onUpdated:t[4]||(t[4]=function(t){return e.$emit("updated")})},null,8,["onStepApproved"])]})),_:1})]})),_:1},8,["modelValue"])):Object(o["createCommentVNode"])("",!0)])}var a=n("5530"),i=n("5502"),l={class:"application-review"};function s(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("definition-review"),s=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createVNode"])(s,{step:1,"document-name":"Scope and Membership Application",title:"Scope and Membership","document-type":1,"document-gets-reviewed":!0,"approve-button-label":"Approve Scope and Membership",onStepApproved:a.handleApproved},{sections:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i)]})),_:1},8,["onStepApproved"])])}var p={class:"overflow-x-auto"},u={class:"mb-6"},d={class:"flex justify-between text-lg font-bold pb-2 mb-2 border-b"},m={class:"flex space-x-2"},b={key:0},f={key:0,class:"flex space-x-1"},j={class:"text-white bg-green-600 rounded-xl px-2"},O={key:1,class:"flex space-x-1"},v=Object(o["createTextVNode"])("   "),h=Object(o["createTextVNode"])("   "),w={key:0},g={class:"mt-4 p-4 border rounded-xl bg-gray-50"},y=Object(o["createElementVNode"])("hr",{class:"border-gray-200 border-4"},null,-1),V=Object(o["createTextVNode"])(" Step sections here! "),C={class:"mb-6 mt-4 border-t pt-4"},N={class:"mb-2"};function k(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("step-approval-control"),l=Object(o["resolveComponent"])("edit-icon-button"),s=Object(o["resolveComponent"])("date-input"),k=Object(o["resolveComponent"])("remove-button"),x=Object(o["resolveComponent"])("document-manager"),D=Object(o["resolveComponent"])("application-log");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",p,[Object(o["createElementVNode"])("div",u,[Object(o["createVNode"])(i,{step:n.step,onUpdated:a.handleUpdated,onRejected:a.handleRejected},null,8,["step","onUpdated","onRejected"]),Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(n.title),1),a.dateApproved?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",b,[c.editApprovalDate?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",O,[Object(o["createVNode"])(s,{modelValue:c.newApprovalDate,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.newApprovalDate=e})},null,8,["modelValue"]),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[1]||(t[1]=function(){return a.updateApprovalDate&&a.updateApprovalDate.apply(a,arguments)})},"Save"),Object(o["createVNode"])(k,{onClick:t[2]||(t[2]=function(e){return c.editApprovalDate=!1})})])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",f,[Object(o["createElementVNode"])("div",j," Approved: "+Object(o["toDisplayString"])(a.dateApproved),1),Object(o["createVNode"])(l,{class:"text-black",onClick:a.initEditApprovalDate},null,8,["onClick"])]))])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[3]||(t[3]=function(){return a.toggleDocuments&&a.toggleDocuments.apply(a,arguments)})},Object(o["toDisplayString"])(a.docsToggleText),1),v,Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[4]||(t[4]=function(){return a.toggleSections&&a.toggleSections.apply(a,arguments)})},Object(o["toDisplayString"])(a.sectionsToggleText),1),h,Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[5]||(t[5]=function(){return a.goToPrintable&&a.goToPrintable.apply(a,arguments)})},"Printable Application")])]),Object(o["createVNode"])(o["Transition"],{name:"slide-fade-down"},{default:Object(o["withCtx"])((function(){return[c.showDocuments?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",w,[Object(o["renderSlot"])(e.$slots,"document",{},(function(){return[Object(o["createElementVNode"])("div",g,[Object(o["createVNode"])(x,{title:n.documentName,application:a.application,"document-type-id":n.documentType,getsReviewd:n.documentGetsReviewed,step:n.step,onUpdated:t[6]||(t[6]=function(t){return e.$emit("updated")})},null,8,["title","application","document-type-id","getsReviewd","step"])])]})),y])):Object(o["createCommentVNode"])("",!0)]})),_:3}),Object(o["createVNode"])(o["Transition"],{name:"slide-fade-down"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[c.showSections?Object(o["renderSlot"])(e.$slots,"sections",{key:0},(function(){return[V]})):Object(o["createCommentVNode"])("",!0)])]})),_:3})]),Object(o["renderSlot"])(e.$slots,"default"),Object(o["renderSlot"])(e.$slots,"log",{},(function(){return[Object(o["createElementVNode"])("div",C,[Object(o["createElementVNode"])("h3",N,"Step "+Object(o["toDisplayString"])(n.step)+" Progress Log",1),Object(o["createVNode"])(D,{step:n.step},null,8,["step"])])]}))])}var x=n("1da1"),D=(n("96cf"),n("a9e3"),n("e328")),E=n("5832"),S={class:"md:flex justify-between"},_={key:0},B={key:1};function A(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("final-document-view"),l=Object(o["resolveComponent"])("document-list"),s=Object(o["resolveComponent"])("document-upload-form"),p=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["renderSlot"])(e.$slots,"title",{},(function(){return[Object(o["createElementVNode"])("div",S,[Object(o["createElementVNode"])("h3",null,Object(o["toDisplayString"])(n.title)+" Documents",1)])]})),n.application.stepIsApproved(n.step)&&n.showVersion?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",_,[Object(o["createVNode"])(i,{application:n.application,"document-type-id":n.documentTypeId,step:n.step},null,8,["application","document-type-id","step"])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",B,[Object(o["createVNode"])(l,{application:n.application,"document-type-id":n.documentTypeId,"show-version":n.showVersion,onUpdated:t[0]||(t[0]=function(t){return e.$emit("updated")})},null,8,["application","document-type-id","show-version"]),Object(o["createElementVNode"])("button",{class:"btn mb-2 btn-sm",onClick:t[1]||(t[1]=function(e){return c.showUploadForm=!0})}," Upload a new "+Object(o["toDisplayString"])(n.showVersion?"version":"document"),1)])),Object(o["createVNode"])(p,{modelValue:c.showUploadForm,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.showUploadForm=e}),onClosed:t[4]||(t[4]=function(t){return e.$refs.uploadform.clearForm()})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{application:n.application,"document-type-id":n.documentTypeId,step:n.step,onCanceled:t[2]||(t[2]=function(e){return c.showUploadForm=!1}),onSaved:a.handleSaved,ref:"uploadform"},null,8,["application","document-type-id","step","onSaved"])]})),_:1},8,["modelValue"])])}n("b0c0"),n("99af");var R={class:"flex space-x-1"},T=["onClick"],F=["onClick"],$={key:1,class:"px-2 py-1 border bg-gray-100 rounded"},I={key:0},U={key:0,class:"mb-3"},P=Object(o["createElementVNode"])("p",null,"Are you sure you want to continue?",-1);function M(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("truncate-expander"),l=Object(o["resolveComponent"])("icon-checkmark"),s=Object(o["resolveComponent"])("icon-download"),p=Object(o["resolveComponent"])("icon-edit"),u=Object(o["resolveComponent"])("trash-button"),d=Object(o["resolveComponent"])("data-table"),m=Object(o["resolveComponent"])("document-edit-form"),b=Object(o["resolveComponent"])("modal-dialog"),f=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[a.filteredDocuments.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,fields:a.filteredFields,data:a.filteredDocuments,sort:{field:a.filteredFields[0].name,desc:!0}},{"cell-notes":Object(o["withCtx"])((function(e){var t=e.value;return[Object(o["createVNode"])(i,{value:t,"truncate-length":50},null,8,["value"])]})),"cell-is_final":Object(o["withCtx"])((function(e){var t=e.item;return[t.is_final?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,onClick:function(e){return a.markFinal(t)},title:"Mark this the final version.",class:"text-gray-300 cursor-pointer inline"},null,8,["onClick"])),t.is_final?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,class:"text-green-600 inline",title:"This is the final document"})):Object(o["createCommentVNode"])("",!0)]})),"cell-id":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",R,[Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.downloadDocument(t)}},[Object(o["createVNode"])(s,{width:"12",height:"16"})],8,T),Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.openEditForm(t)}},[Object(o["createVNode"])(p,{width:"12",height:"16"})],8,F),Object(o["createVNode"])(u,{onClick:function(e){return a.initDelete(t)}},null,8,["onClick"])])]})),_:1},8,["fields","data","sort"])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",$,"No documents uploaded")),Object(o["createVNode"])(b,{modelValue:c.showEditForm,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.showEditForm=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{document:c.activeDocument,application:a.application,onCanceled:t[0]||(t[0]=function(e){return c.showEditForm=!1}),onSaved:a.handleDocumentEdited,onTriggermarkreviewed:a.showMarkReviewed},null,8,["document","application","onSaved","onTriggermarkreviewed"])]})),_:1},8,["modelValue"]),Object(o["createVNode"])(b,{modelValue:c.showDeleteConfirmation,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.showDeleteConfirmation=e}),title:"You are about to delete ".concat(c.activeDocument.type.long_name,", v").concat(c.activeDocument.version)},{default:Object(o["withCtx"])((function(){return[c.activeDocument?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",I,[c.activeDocument.is_final?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",U," This version has been tagged as the final version of the document. ")):Object(o["createCommentVNode"])("",!0),P,Object(o["createVNode"])(f,{"submit-text":"Delete Document",onCanceled:a.cancelDelete,onSubmitted:a.commitDelete},null,8,["onCanceled","onSubmitted"])])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["modelValue","title"])])}var q=n("2909"),L=(n("c740"),n("a434"),n("4de4"),n("d3b7"),n("7db0"),n("5e32")),G={class:"text-lg border-b pb-1 mb-3"};function H(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("input-row"),s=Object(o["resolveComponent"])("button-row"),p=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h2",G,"Edit "+Object(o["toDisplayString"])(a.type)+" version "+Object(o["toDisplayString"])(n.document.version)+" Info",1),Object(o["createVNode"])(i,{label:"File"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.document.filename),1)]})),_:1}),Object(o["createVNode"])(l,{modelValue:c.docProxy.date_received,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.docProxy.date_received=e}),label:"Date Received",type:"date",errors:c.errors.date_received},null,8,["modelValue","errors"]),Object(o["createVNode"])(l,{errors:c.errors.notes,label:"Notes"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.docProxy.notes=e}),cols:"30",rows:"10"},null,512),[[o["vModelText"],c.docProxy.notes]])]})),_:1},8,["errors"]),Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]})),_:1})}n("e9c4");var W=n("033d"),Y={name:"DocumentEditForm",props:{document:{required:!0,type:Object},application:{required:!0,type:Object}},emits:["triggermarkreviewed","updated","saved"],data:function(){return{docProxy:{},errors:{}}},computed:{type:function(){return this.document.type?this.document.type.long_name:""}},watch:{document:{immediate:!0,handler:function(){this.docProxy=JSON.parse(JSON.stringify(this.document))}}},methods:{cancel:function(){this.docProxy={},this.$emit("canceled")},save:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateDocumentInfo",{application:e.application,document:e.docProxy});case 3:e.docProxy={},e.$emit("saved"),e.$emit("updated"),t.next=12;break;case 8:throw t.prev=8,t.t0=t["catch"](0),Object(W["a"])(t.t0)&&(e.errors=t.t0.response.data.errors),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},z=n("6b0d"),J=n.n(z);const K=J()(Y,[["render",H]]);var Q=K,X={components:{DocumentEditForm:Q,TrashButton:L["default"]},props:{documentTypeId:{type:Number,required:!0},getsReviewed:{type:Boolean,required:!1,default:!0},showVersion:{type:Boolean,required:!1,default:!0}},data:function(){return{showDeleteConfirmation:!1,showReviewedForm:!1,showEditForm:!1,activeDocument:{type:{}},fields:[{name:"version",label:"Version",type:Number},{name:"filename",label:"File",type:String,headerClass:["w-1/3"]},{name:"notes",label:"Notes",type:String,sortable:!1,resolveValue:function(e){return e.notes||""},headerClass:["w-1/3"]},{name:"date_received",label:"Date Received",type:Date,headerClass:["w-32"]},{name:"is_final",label:"Final",type:Boolean,sortable:!1,class:["text-center"],headerClass:["text-center","w-12"]},{name:"id",label:"",sortable:!1}]}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.expert_panel},filteredFields:function(){var e=Object(q["a"])(this.fields);if(!this.showVersion){var t=e.findIndex((function(e){return e&&"version"==e.name}));e.splice(t,1);var n=e.findIndex((function(e){return e&&"is_final"==e.name}));e.splice(n,1)}if(!this.getsReviewed){var o=e.findIndex((function(e){return e&&"date_reviewed"==e.name}));e.splice(o,1)}return e},filteredDocuments:function(){var e=this;return this.application.documents?this.application.documents.filter((function(t){return t.document_type_id==e.documentTypeId})):[]},hasFinalVersion:function(){return this.filteredDocuments.findIndex((function(e){return e.is_final}))>-1},finalVersion:function(){return this.filteredDocuments.find((function(e){return e.is_final}))||{}}},methods:{showMarkReviewed:function(e){this.activeDocument=e,this.showReviewedForm=!0},hideReviewedForm:function(){this.showReviewedForm=!1},downloadDocument:function(e){window.location=e.download_url},confirmNewFinal:function(e){var t="There is already a version of this document marked as final.  Only one version can be marked as final.  Do you want to mark this version (version ".concat(e.version,") as final instead of ").concat(this.finalVersion.version);return confirm(t)},markFinal:function(e){this.hasFinalVersion&&!this.confirmNewFinal(e)||this.$store.dispatch("applications/markDocumentVersionFinal",{application:this.application,document:e})},openEditForm:function(e){this.showEditForm=!0,this.activeDocument=e},initDelete:function(e){this.activeDocument=e,this.showDeleteConfirmation=!0},cancelDelete:function(){this.showDeleteConfirmation=!1},handleDocumentEdited:function(){this.showEditForm=!1,this.$emit("updated")},commitDelete:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/deleteDocument",{application:e.application,document:e.activeDocument});case 3:e.showDeleteConfirmation=!1,e.$emit("updated"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),Object(W["a"])(t.t0)&&alert(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}};const Z=J()(X,[["render",M]]);var ee=Z,te={class:"pb-2 border-b mb-4"},ne={type:"file",ref:"fileInput"};function oe(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h2",te,"Upload "+Object(o["toDisplayString"])(e.titleCase(a.documentType.long_name)),1),Object(o["createVNode"])(i,{label:"Document",errors:c.errors.file},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("input",ne,null,512)]})),_:1},8,["errors"]),n.showNotes?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,label:"Date Received",type:"date",modelValue:c.newDocument.date_received,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.newDocument.date_received=e}),errors:c.errors.date_received},null,8,["modelValue","errors"])):Object(o["createCommentVNode"])("",!0),n.showNotes?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:1,errors:c.errors.notes,label:"Notes"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.newDocument.notes=e}),cols:"30",rows:"5"},null,512),[[o["vModelText"],c.newDocument.notes]])]})),_:1},8,["errors"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn white",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]})),_:1})}n("07ac"),n("159b"),n("b64b");var re=n("db04"),ce=n("4a91"),ae={props:{documentTypeId:{type:Number,required:!0},step:{type:Number,required:!1,default:null},showNotes:{type:Boolean,default:!0}},emits:["saved"],data:function(){return{newDocument:{file:null,date_received:(new Date).toISOString(),date_reviewed:null,step:this.step,document_type_id:this.documentTypeId,notes:null},errors:{}}},computed:{docTypes:function(){return ce["documentsTypes"]},group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.expert_panel},isReviewed:function(){return Boolean(this.newDocument.date_reviewed)},documentType:function(){var e=this;return 0==Object.values(this.docTypes).length?{}:Object.values(this.docTypes).find((function(t){return t.id=e.documentTypeId}))}},methods:{save:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=new FormData,Object.keys(e.newDocument).forEach((function(t){var o=e.newDocument[t];null!=o&&n.append(t,o)})),n.append("file",e.$refs.fileInput.files[0]),t.next=6,e.$store.dispatch("groups/addApplicationDocument",{group:e.group,data:n});case 6:e.clearForm(),e.$emit("saved"),t.next=15;break;case 10:if(t.prev=10,t.t0=t["catch"](0),!Object(re["b"])(t.t0)){t.next=15;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},cancel:function(){this.clearForm(),this.$emit("canceled")},clearForm:function(){this.initNewDocument(),this.clearErrors()},initNewDocument:function(){this.$refs.fileInput.value=null,this.newDocument={file:null,date_received:Object(D["b"])(new Date),date_reviewed:null,step:this.step,document_type_id:this.documentTypeId,notes:null}},clearErrors:function(){this.errors={}}},mounted:function(){this.$store.dispatch("doctypes/getItems")}};const ie=J()(ae,[["render",oe]]);var le=ie,se=["href"],pe={key:1};function ue(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("edit-icon-button"),s=Object(o["resolveComponent"])("date-input"),p=Object(o["resolveComponent"])("remove-button"),u=Object(o["resolveComponent"])("document-edit-form"),d=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(i,{label:"Final Document"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[a.finalDocument.filename?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:0,href:a.finalDocument.download_url,class:"text-blue-500 underline"},Object(o["toDisplayString"])(a.finalDocument.filename),9,se)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",pe,"none on file"))])]})),_:1}),Object(o["createVNode"])(i,{label:"Date Received"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.firstDateReceived)+" ",1),Object(o["createVNode"])(l,{onClick:a.initEditReceived},null,8,["onClick"])],512),[[o["vShow"],!c.editDateReceived]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(s,{modelValue:c.newDateReceived,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.newDateReceived=e}),class:"inline-block"},null,8,["modelValue"]),Object(o["createElementVNode"])("button",{class:"btn btn-sm blue",onClick:t[1]||(t[1]=function(){return a.saveDateReceived&&a.saveDateReceived.apply(a,arguments)})},"Save"),Object(o["createVNode"])(p,{class:"ml-1",onClick:t[2]||(t[2]=function(e){return c.editDateReceived=!1})})],512),[[o["vShow"],c.editDateReceived]])]})),_:1}),Object(o["createVNode"])(d,{modelValue:c.showEditForm,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.showEditForm=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{document:a.finalDocument,application:a.application,onCanceled:t[3]||(t[3]=function(e){return c.showEditForm=!1}),onSaved:t[4]||(t[4]=function(e){return c.showEditForm=!1})},null,8,["document","application"])]})),_:1},8,["modelValue"])])}var de=n("222a"),me={components:{DocumentEditForm:Q,RemoveButton:de["default"]},props:{documentTypeId:{type:Number,required:!0},step:{type:Number,required:!1,default:null}},data:function(){return{showEditForm:!1,editDateReceived:!1,newDateReceived:null,editDateReviewed:!1,newDateReviewed:null}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.expert_panel},finalDocument:function(){return this.application.finalDocumentOfType(this.documentTypeId)},firstDocument:function(){return this.application.firstDocumentOfType(this.documentTypeId)},finalDateReviewed:function(){return this.finalDocument.date_reviewed?Object(D["b"])(this.finalDocument.date_reviewed):"--"},firstDateReceived:function(){return this.firstDocument.date_received?Object(D["b"])(this.firstDocument.date_received):"--"}},methods:{initEditReceived:function(){this.editDateReceived=!0,this.newDateReceived=this.firstDateReceived},saveDateReceived:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateDocumentInfo",{application:e.application,document:{uuid:e.firstDocument.uuid,date_received:e.newDateReceived,date_reviewed:e.firstDocument.date_reviewed}});case 3:e.editDateReceived=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(W["a"])(t.t0)&&console.info("saveDateReceived errors: ",t.t0.response.data.errors);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},initEditReviewed:function(){this.editDateReviewed=!0,this.newDateReviewed=this.finalDateReviewed},saveDateReviewed:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateDocumentInfo",{application:e.application,document:{uuid:e.finalDocument.uuid,date_reviewed:e.newDateReviewed,date_received:e.finalDocument.date_received}});case 3:e.editDateReviewed=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(W["a"])(t.t0)&&console.info("saveDateReviewd errors: ",t.t0.response.data.errors);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}};const be=J()(me,[["render",ue]]);var fe=be,je={name:"DocumentManager",components:{DocumentUploadForm:le,FinalDocumentView:fe,DocumentList:ee},emits:["updated"],props:{application:{type:Object,required:!0},documentTypeId:{type:Number,required:!0},getsReviewed:{type:Boolean,required:!1,default:!0},step:{type:Number,required:!1,default:null},showVersion:{type:Boolean,default:!0},title:{type:String,required:!1}},data:function(){return{showUploadForm:!1}},methods:{handleSaved:function(){this.showUploadForm=!1,this.$emit("updated")}}};const Oe=J()(je,[["render",A]]);var ve=Oe,he={key:0,class:"border border-l-0 border-r-0 py-4 mb-6"},we={key:0,class:"border border-l-0 border-r-0 py-4 mb-6"},ge=Object(o["createTextVNode"])(" This step was submitted by "),ye=Object(o["createTextVNode"])(" on "),Ve=Object(o["createTextVNode"])(" with the following notes: "),Ce={class:"flex w-full space-x-4"},Ne=["disabled","title"];function ke(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("static-alert"),l=Object(o["resolveComponent"])("approve-step-form"),s=Object(o["resolveComponent"])("modal-dialog"),p=Object(o["resolveComponent"])("reject-step-form");return a.application.stepIsApproved(n.step)?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",he,[a.application.stepIsApproved(n.step)?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",we,[a.application.hasPendingSubmissionForCurrentStep?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,variant:"info",class:"mb-4"},{default:Object(o["withCtx"])((function(){return[ge,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(a.application.pendingSubmission.submitter.name),1),ye,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.formatDate(a.application.pendingSubmission.created_at)),1),Ve,Object(o["createElementVNode"])("blockquote",null,Object(o["toDisplayString"])(a.application.pendingSubmission.notes),1)]})),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",Ce,[Object(o["createElementVNode"])("button",{class:"btn btn-lg flex-1",onClick:t[0]||(t[0]=function(){return a.startApproveStep&&a.startApproveStep.apply(a,arguments)}),disabled:!a.isCurrentStep,title:a.isCurrentStep?"Approve this step":"You can only approve the application's current step"},Object(o["toDisplayString"])(n.approveLabel),9,Ne),a.application.hasPendingSubmissionForCurrentStep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn btn-lg flex-1",onClick:t[1]||(t[1]=function(){return a.startRejectSubmission&&a.startRejectSubmission.apply(a,arguments)})}," Request revisions ")):Object(o["createCommentVNode"])("",!0)])])),(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(s,{modelValue:c.showApproveForm,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.showApproveForm=e}),size:"xl",onClosed:t[3]||(t[3]=function(t){return e.$refs.approvestepform.clearForm()})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{ref:"approvestepform",onSaved:a.handleApproved,onCanceled:a.hideApproveForm},null,8,["onSaved","onCanceled"])]})),_:1},8,["modelValue"]),Object(o["createVNode"])(s,{title:"Request Revisions to Application",modelValue:c.showRejectForm,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.showRejectForm=e}),size:"xl",onClosed:t[5]||(t[5]=function(t){return e.$refs.rejectsubmissionform.clearForm()})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{ref:"rejectsubmissionform",onSaved:a.handleRejected,onCanceled:a.hideRejectForm},null,8,["onSaved","onCanceled"])]})),_:1},8,["modelValue"])]))]))}var xe={class:"text-sm"},De=Object(o["createElementVNode"])("div",null,"Send notification email to contacts",-1),Ee=Object(o["createTextVNode"])(" The expert panel has not yet submitted the application for approval. "),Se=Object(o["createElementVNode"])("br",null,null,-1),_e=Object(o["createTextVNode"])(' You can approve this application but be aware that it is not part of the "normal" application workflow. '),Be={key:0};function Ae(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("dictionary-row"),s=Object(o["resolveComponent"])("static-alert"),p=Object(o["resolveComponent"])("user-defined-mail-form"),u=Object(o["resolveComponent"])("button-row"),d=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(d,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h2",null,"Approve Step "+Object(o["toDisplayString"])(a.application.current_step),1),Object(o["createVNode"])(i,{modelValue:c.dateApproved,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.dateApproved=e}),type:"date",errors:c.errors.date_approved,label:"Date Approved"},null,8,["modelValue","errors"]),Object(o["createVNode"])(l,{label:""},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("label",xe,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.notifyContacts=e}),value:!0},null,512),[[o["vModelCheckbox"],c.notifyContacts]]),De])])]})),_:1}),a.application.hasPendingSubmissionForCurrentStep?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,variant:"warning"},{default:Object(o["withCtx"])((function(){return[Ee,Se,_e]})),_:1})),Object(o["createVNode"])(o["Transition"],{name:"slide-fade-down"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(p,{modelValue:c.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.email=e})},null,8,["modelValue"]),[[o["vShow"],c.notifyContacts]])]})),_:1}),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[3]||(t[3]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[4]||(t[4]=function(){return a.save&&a.save.apply(a,arguments)})},[Object(o["createTextVNode"])(" Approve step "+Object(o["toDisplayString"])(a.application.current_step)+" ",1),c.notifyContacts?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Be," and notify ")):Object(o["createCommentVNode"])("",!0)])]})),_:1})]})),_:1})}var Re=n("f96b"),Te=n("b6cf"),Fe={1:"App\\Mail\\UserDefinedMailTemplates\\InitialApprovalMailTemplate",2:"App\\Mail\\UserDefinedMailTemplates\\SpecificationDraftMailTemplate",3:"App\\Mail\\UserDefinedMailTemplates\\SpecificationPilotMailTemplate",4:"App\\Mail\\UserDefinedMailTemplates\\SustainedCurationApprovalMailTemplate"},$e={components:{UserDefinedMailForm:Te["default"]},emits:["canceled","saved"],data:function(){return{dateApproved:null,notifyContacts:!1,email:{subject:"",body:"",cc:[],to:[],files:[]},errors:{}}},computed:Object(a["a"])(Object(a["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),watch:{notifyContacts:function(e){var t=this;e&&Re["a"].get("/api/email-drafts/groups/".concat(this.group.uuid),{params:{templateClass:Fe[this.group.expert_panel.current_step]}}).then((function(e){t.email=e.data,t.email["files"]=[]}))}},methods:{clearForm:function(){this.dateApproved=null,this.notifyContacts=!1},cancel:function(){this.clearForm(),this.$emit("canceled")},save:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={group:e.group,dateApproved:e.dateApproved,notifyContacts:e.notifyContacts,subject:e.email.subject,body:e.email.body,attachments:e.email.files},t.prev=1,t.next=4,e.$store.dispatch("groups/approveCurrentStep",n);case 4:e.clearForm(),e.$emit("saved"),t.next=13;break;case 8:if(t.prev=8,t.t0=t["catch"](1),!Object(W["a"])(t.t0)){t.next=13;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},mounted:function(){}};const Ie=J()($e,[["render",Ae]]);var Ue=Ie,Pe={class:"text-sm"},Me=Object(o["createElementVNode"])("div",null,"Send notification email to contacts",-1),qe=Object(o["createTextVNode"])(" The expert panel has not yet submitted the application for approval. "),Le=Object(o["createElementVNode"])("br",null,null,-1),Ge=Object(o["createTextVNode"])(' You can approve this application but be aware that it is not part of the "normal" application workflow. '),He=Object(o["createTextVNode"])(" Request revisions "),We={key:0};function Ye(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("static-alert"),s=Object(o["resolveComponent"])("user-defined-mail-form"),p=Object(o["resolveComponent"])("button-row"),u=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{label:""},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("label",Pe,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.notifyContacts=e}),value:!0},null,512),[[o["vModelCheckbox"],c.notifyContacts]]),Me])])]})),_:1}),a.application.hasPendingSubmissionForCurrentStep?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,variant:"warning"},{default:Object(o["withCtx"])((function(){return[qe,Le,Ge]})),_:1})),Object(o["createVNode"])(o["Transition"],{name:"slide-fade-down"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(s,{modelValue:c.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.email=e})},null,8,["modelValue"]),[[o["vShow"],c.notifyContacts]])]})),_:1}),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.save&&a.save.apply(a,arguments)})},[He,c.notifyContacts?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",We," and notify ")):Object(o["createCommentVNode"])("",!0)])]})),_:1})]})),_:1})}var ze={components:{UserDefinedMailForm:Te["default"]},emits:["canceled","saved"],data:function(){return{notifyContacts:!0,email:{subject:"",body:"",cc:[],to:[],files:[]},errors:{}}},computed:Object(a["a"])(Object(a["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),watch:{notifyContacts:{immediate:!0,handler:function(e){e&&this.getEmailTemplate()}}},methods:{clearForm:function(){this.dateApproved=null,this.notifyContacts=!1},cancel:function(){this.clearForm(),this.$emit("canceled")},save:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var n,o,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n={notify_contacts:e.notifyContacts,subject:e.email.subject,body:e.email.body,attachments:e.email.files},o="/api/groups/".concat(e.group.uuid,"/application/submission/").concat(e.group.expert_panel.pendingSubmission.id,"/rejection"),t.next=5,re["a"].post(o,n).then((function(e){return e.data}));case 5:r=t.sent,console.log(r),c=e.application.submissions.findIndex((function(e){return e.id==r.id})),console.log(c),c>-1&&(e.application.submissions[c]=r),e.clearForm(),e.$emit("saved"),t.next=19;break;case 14:if(t.prev=14,t.t0=t["catch"](0),!Object(W["a"])(t.t0)){t.next=19;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 19:case"end":return t.stop()}}),t,null,[[0,14]])})))()},getEmailTemplate:function(){var e=this;console.log("get template email"),re["a"].get("/api/email-drafts/groups/".concat(this.group.uuid),{params:{templateClass:"App\\Mail\\UserDefinedMailTemplates\\ApplicationRevisionRequestTemplate"}}).then((function(t){console.log("email template got"),e.email=t.data,e.email["files"]=[],console.log(e.email)}))}},mounted:function(){}};const Je=J()(ze,[["render",Ye]]);var Ke=Je,Qe={name:"StepApprovalControl",components:{ApproveStepForm:Ue,RejectStepForm:Ke},props:{step:{type:Number,required:!0},approveLabel:{type:String,required:!1,default:"Approve"}},data:function(){return{showApproveForm:!1,showRejectForm:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel},isCurrentStep:function(){return this.step==this.application.current_step},dateApproved:function(){return this.application.approvalDateForStep(this.step)?this.formatDate(this.application.approvalDateForStep(this.step)):null}}),methods:{startApproveStep:function(){this.showApproveForm=!0},startRejectSubmission:function(){this.showRejectForm=!0},approveStep:function(){this.$store.dispatch("applications/approveCurrentStep",{application:this.application,step:this.step}),this.$emit("stepApproved"),this.$emit("updated")},handleApproved:function(){this.hideApproveForm(),this.$emit("stepApproved"),this.$emit("updated")},hideApproveForm:function(){this.showApproveForm=!1},handleRejected:function(){this.hideRejectForm(),this.$emit("stepRejected"),this.$emit("updated")},hideRejectForm:function(){this.showRejectForm=!1}}};const Xe=J()(Qe,[["render",ke]]);var Ze=Xe,et={components:{ApplicationLog:E["a"],DocumentManager:ve,StepApprovalControl:Ze,RemoveButton:de["default"]},props:{title:{type:String,required:!1,default:"YOU SHOULD SET A TITLE"},step:{type:Number,required:!0},documentName:{type:String,required:!1,default:'Set a document-type attribute if you don\'t use the "document" slot'},documentType:{type:Number,required:!1,default:1},documentGetsReviewed:{type:Boolean,required:!1,default:!0},approveButtonLabel:{type:String,required:!1,default:'Set "approve-button-label" if not overriding slot "approve-button"'}},emits:["documentUploaded","stepApproved","updated"],data:function(){return{showApproveForm:!1,editApprovalDate:!1,newApprovalDate:null,showDocuments:!0,showSections:!0,documentsToggled:!1,sectionsToggled:!1,showRejectForm:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel},isCurrentStep:function(){return this.step==this.application.current_step},dateApproved:function(){return this.application.approvalDateForStep(this.step)?Object(D["b"])(this.application.approvalDateForStep(this.step)):null},docsToggleText:function(){return this.showDocuments?"Hide Documents":"Show Documents"},sectionsToggleText:function(){return this.showSections?"Hide Sections":"Show Sections"}}),watch:{group:{immediate:!0,handler:function(e){e.hasDocumentsOfType(this.documentType)||this.documentsToggled||(this.showDocuments=!1)}}},methods:{toggleDocuments:function(){this.documentsToggled=!0,this.showDocuments=!this.showDocuments},toggleSections:function(){this.sectionsToggled=!0,this.showSections=!this.showSections},goToPrintable:function(){window.open("/groups/".concat(this.group.uuid,"/application/review"))},startApproveStep:function(){this.showApproveForm=!0},startRejectSubmission:function(){},approveStep:function(){this.$store.dispatch("applications/approveCurrentStep",{application:this.application,step:this.step}),this.$emit("stepApproved"),this.$emit("updated")},handleApproved:function(){this.hideApproveForm(),this.$emit("stepApproved"),this.$emit("updated")},handleUpdated:function(){this.hideApproveForm(),this.$emit("updated")},hideApproveForm:function(){this.showApproveForm=!1},handleRejected:function(){this.hideRejectForm(),this.$emit("stepRejected"),this.$emit("updated")},hideRejectForm:function(){this.showRejectForm=!1},initEditApprovalDate:function(){this.editApprovalDate=!0,this.newApprovalDate=this.dateApproved},updateApprovalDate:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("groups/updateApprovalDate",{group:e.group,dateApproved:e.newApprovalDate,step:e.step});case 3:e.editApprovalDate=!1,t.next=11;break;case 6:if(t.prev=6,t.t0=t["catch"](0),!Object(W["a"])(t.t0)){t.next=11;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}};const tt=J()(et,[["render",k]]);var nt=tt,ot=n("d5fa"),rt={name:"StepOne",components:{BaseStep:nt,DefinitionReview:ot["a"]},emits:["stepApproved"],data:function(){return{}},computed:Object(a["a"])(Object(a["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),methods:{handleApproved:function(){this.$emit("stepApproved")}}};const ct=J()(rt,[["render",s]]);var at=ct,it={class:"application-section"},lt=Object(o["createElementVNode"])("h2",null,"Draft Specifications",-1);function st(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("specifications-section"),l=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{step:2,"document-type":2,"document-name":"Draft Specifications","document-gets-reviewed":!1,"approve-button-label":"Approve Draft Specifications",title:"Draft ACMG Guideline Specifications",onStepApproved:t[0]||(t[0]=function(t){return e.$emit("stepApproved")})},{sections:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",it,[lt,Object(o["createVNode"])(i,{"doc-type-id":2})])]})),_:1})}var pt=n("fefd"),ut={name:"StepTwo",components:{BaseStep:nt,SpecificationsSection:pt["a"]},props:{},emits:["stepApproved"],data:function(){return{}},computed:Object(a["a"])(Object(a["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),methods:{}};const dt=J()(ut,[["render",st]]);var mt=dt,bt={class:"mt-4 p-4 border rounded-xl bg-gray-50"},ft={class:"mt-4 p-4 border rounded-xl bg-gray-50"},jt={class:"mt-4 p-4 border rounded-xl bg-gray-50"},Ot={class:"application-section"},vt=Object(o["createElementVNode"])("h2",null,"Pilot Specifications",-1);function ht(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("document-manager"),l=Object(o["resolveComponent"])("specifications-section"),s=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{step:3,"approve-button-label":"Approve Pilot and Specifications",title:"Pilot ACMG Guideline Specificiations",onStepApproved:t[3]||(t[3]=function(t){return e.$emit("stepApproved")})},{document:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",bt,[Object(o["createVNode"])(i,{application:a.application,"document-type-id":3,getsReviewd:!1,step:3,class:"mb-4",title:"Final Specifications",onUpdated:t[0]||(t[0]=function(t){return e.$emit("updated")})},null,8,["application"])]),Object(o["createElementVNode"])("div",ft,[Object(o["createVNode"])(i,{title:"Pilot Classifications",application:a.application,"document-type-id":4,getsReviewd:!1,step:3,onUpdated:t[1]||(t[1]=function(t){return e.$emit("updated")})},null,8,["application"])]),Object(o["createElementVNode"])("div",jt,[Object(o["createVNode"])(i,{title:"Additional Documents",application:a.application,"document-type-id":7,getsReviewd:!1,"show-version":!1,step:3,onUpdated:t[2]||(t[2]=function(t){return e.$emit("updated")})},null,8,["application"])])])]})),sections:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",Ot,[vt,Object(o["createVNode"])(l,{"doc-type-id":[3,4,7]})])]})),_:1})}var wt={name:"StepThree",components:{BaseStep:nt,DocumentManager:ve,SpecificationsSection:pt["a"]},props:{},emits:["stepApproved"],data:function(){return{}},computed:Object(a["a"])(Object(a["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),methods:{formatDate:function(e){return Object(D["b"])(e)}}};const gt=J()(wt,[["render",ht]]);var yt=gt;function Vt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("sustained-curation-review"),l=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{step:4,"document-type":5,"document-name":"Sustained Curation","document-gets-reviewed":!0,"approve-button-label":"Approve Sustained Curation",title:"Sustained Curation",onStepApproved:t[0]||(t[0]=function(t){return e.$emit("stepApproved")})},{sections:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i)]})),_:1})}var Ct=n("f7ba"),Nt={name:"StepFour",components:{BaseStep:nt,SustainedCurationReview:Ct["a"]},props:{},emits:["stepApproved"],data:function(){return{}},computed:Object(a["a"])(Object(a["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),methods:{}};const kt=J()(Nt,[["render",Vt]]);var xt=kt,Dt={components:{StepOne:at,StepTwo:mt,StepThree:yt,StepFour:xt},emits:["stepApproved"],data:function(){return{activeStep:1}},computed:Object(a["a"])(Object(a["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel},activeIndex:{deep:!0,get:function(){return this.application&&this.application.current_step?this.application.current_step-1:0},set:function(e){this.activeStep=e+1}}}),methods:{handleApproved:function(){this.$emit("stepApproved")}}};const Et=J()(Dt,[["render",c]]);t["a"]=Et}}]);
//# sourceMappingURL=application-detail~group-detail.c836ada3.js.map