"use strict";(self["webpackChunkepam"]=self["webpackChunkepam"]||[]).push([[309,517],{9704:function(e,a,n){n.d(a,{b:function(){return u}});const t={approve:"green","approve-after-revisions":"blue","request-revisions":"yellow"},u=e=>e.decision?t[e.decision]:"gray"},9824:function(e,a,n){n.d(a,{A:function(){return h}});var t=n(641),u=n(33);const s={class:"flex space-x-2 items-center mb-3"},r={key:0},i=(0,t.eW)(" has"),l={key:1},o=(0,t.eW)(" an "),d=(0,t.eW)(" due on "),p=(0,t.eW)(". "),c=(0,t.eW)(" Complete the Annual Update ");function m(e,a,n,m,v,f){const g=(0,t.g2)("icon-review"),b=(0,t.g2)("router-link"),h=(0,t.g2)("static-alert");return f.isPending&&v.annualReview.id?((0,t.uX)(),(0,t.Wv)(h,{key:0,variant:f.variant},{default:(0,t.k6)((()=>[(0,t.Lk)("div",s,[(0,t.bF)(g,{height:"30",width:"30"}),(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[n.showGroupName?((0,t.uX)(),(0,t.CE)("span",r,[(0,t.Lk)("strong",null,(0,u.v_)(n.group.displayName),1),i])):((0,t.uX)(),(0,t.CE)("span",l,"You have")),o,(0,t.Lk)("strong",null,"annual update for "+(0,u.v_)(f.window.for_year),1),d,(0,t.Lk)("strong",null,(0,u.v_)(e.formatDate(f.window.end)),1),p]),n.group.uuid?((0,t.uX)(),(0,t.Wv)(b,{key:0,class:"btn font-bold",to:{name:"AnnualUpdate",params:{uuid:n.group.uuid}}},{default:(0,t.k6)((()=>[c])),_:1},8,["to"])):(0,t.Q3)("",!0)])])])),_:1},8,["variant"])):(0,t.Q3)("",!0)}var v=n(696),f={name:"AnnualUpdateAlert",props:{group:{type:Object,required:!0},showGroupName:{type:Boolean,default:!1}},data(){return{annualReview:{},loading:!1}},computed:{window(){return this.annualReview.window?this.annualReview.window:{}},isPending(){return this.annualReview&&!this.annualReview.completed_at},variant(){const e=new Date;if(!this.window.end)return"warning";const a=new Date(Date.parse(this.window.end));return e>this.addDays(a,-7)?"danger":"warning"}},watch:{group:{immediate:!0,handler(){this.getAnnualUpdate()}}},methods:{getAnnualUpdate(){this.group.uuid&&this.group.expert_panel.definition_is_approved&&(this.loading=!0,v.FH.get(`/api/groups/${this.group.uuid}/expert-panel/annual-updates`,{headers:{"X-Ignore-Missing":1}}).then((e=>{this.annualReview=e.data})),this.loading=!1)}}},g=n(6262);const b=(0,g.A)(f,[["render",m]]);var h=b},7627:function(e,a,n){n.r(a),n.d(a,{default:function(){return _a}});n(1339),n(3725),n(5019);var t=n(641),u=n(33),s=n(953),r=n(6278),i=n(6166);function l(e,a,n,t){var u=-1,s=null==e?0:e.length;t&&s&&(n=e[++u]);while(++u<s)n=a(n,e[u],u,e);return n}var o=l;function d(e){return function(a){return null==e?void 0:e[a]}}var p=d,c={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},m=p(c),v=m,f=n(241);function g(e,a){var n=-1,t=null==e?0:e.length,u=Array(t);while(++n<t)u[n]=a(e[n],n,e);return u}var b=g,h=Array.isArray,k=h,w=n(752),_=1/0,y=f.A?f.A.prototype:void 0,x=y?y.toString:void 0;function A(e){if("string"==typeof e)return e;if(k(e))return b(e,A)+"";if((0,w.A)(e))return x?x.call(e):"";var a=e+"";return"0"==a&&1/e==-_?"-0":a}var R=A;function E(e){return null==e?"":R(e)}var C=E,W=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,L="\\u0300-\\u036f",X="\\ufe20-\\ufe2f",D="\\u20d0-\\u20ff",F=L+X+D,U="["+F+"]",I=RegExp(U,"g");function j(e){return e=C(e),e&&e.replace(W,v).replace(I,"")}var S=j,N=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function O(e){return e.match(N)||[]}var G=O,z=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function K(e){return z.test(e)}var Z=K,T="\\ud800-\\udfff",V="\\u0300-\\u036f",Y="\\ufe20-\\ufe2f",Q="\\u20d0-\\u20ff",H=V+Y+Q,P="\\u2700-\\u27bf",q="a-z\\xdf-\\xf6\\xf8-\\xff",M="\\xac\\xb1\\xd7\\xf7",$="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",B="\\u2000-\\u206f",J=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ee="A-Z\\xc0-\\xd6\\xd8-\\xde",ae="\\ufe0e\\ufe0f",ne=M+$+B+J,te="['’]",ue="["+ne+"]",se="["+H+"]",re="\\d+",ie="["+P+"]",le="["+q+"]",oe="[^"+T+ne+re+P+q+ee+"]",de="\\ud83c[\\udffb-\\udfff]",pe="(?:"+se+"|"+de+")",ce="[^"+T+"]",me="(?:\\ud83c[\\udde6-\\uddff]){2}",ve="[\\ud800-\\udbff][\\udc00-\\udfff]",fe="["+ee+"]",ge="\\u200d",be="(?:"+le+"|"+oe+")",he="(?:"+fe+"|"+oe+")",ke="(?:"+te+"(?:d|ll|m|re|s|t|ve))?",we="(?:"+te+"(?:D|LL|M|RE|S|T|VE))?",_e=pe+"?",ye="["+ae+"]?",xe="(?:"+ge+"(?:"+[ce,me,ve].join("|")+")"+ye+_e+")*",Ae="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ee=ye+_e+xe,Ce="(?:"+[ie,me,ve].join("|")+")"+Ee,We=RegExp([fe+"?"+le+"+"+ke+"(?="+[ue,fe,"$"].join("|")+")",he+"+"+we+"(?="+[ue,fe+be,"$"].join("|")+")",fe+"?"+be+"+"+ke,fe+"+"+we,Re,Ae,re,Ce].join("|"),"g");function Le(e){return e.match(We)||[]}var Xe=Le;function De(e,a,n){return e=C(e),a=n?void 0:a,void 0===a?Z(e)?Xe(e):G(e):e.match(a)||[]}var Fe=De,Ue="['’]",Ie=RegExp(Ue,"g");function je(e){return function(a){return o(Fe(S(a).replace(Ie,"")),e,"")}}var Se=je,Ne=Se((function(e,a,n){return e+(n?" ":"")+a.toUpperCase()})),Oe=Ne,Ge=n(8950),ze=n(5554),Ke=n(6747),Ze=n(367),Te=n(7752),Ve=(n(9229),n(2598),n(9704)),Ye=n(696),Qe=n(6563),He=n(6526);const Pe=e=>((0,t.Qi)("data-v-89aeb9c6"),e=e(),(0,t.jt)(),e),qe=Pe((()=>(0,t.Lk)("h2",null,"Application activity",-1))),Me={key:0,class:"alert bg-gray-100 p-2 text-gray-400"},$e={class:"flex space-x-2"},Be={key:0},Je=Pe((()=>(0,t.Lk)("h3",{class:"mb-2"},"Your Decision",-1))),ea={key:0,class:"mt-2",style:{"max-width":"300px"}},aa=Pe((()=>(0,t.Lk)("strong",null,"Notes:",-1))),na=Pe((()=>(0,t.Lk)("hr",null,null,-1))),ta=(0,t.eW)((0,u.v_)("Review")),ua=Pe((()=>(0,t.Lk)("h3",null,"Decisions:",-1))),sa={style:{"max-width":"350px"},class:"text-sm"};var ra={__name:"ApplicationActivity",props:{user:{type:Object,required:!0}},setup(e){const a=e,n=(0,i.rd)(),r=[{name:"name",label:"Group",sortable:!0},{name:"submission.type.name",label:"Submitted Step",sortable:!0},{name:"submission.status.name",label:"Status",sortable:!0},{name:"last_submission_date",label:"Date",sortable:!0,type:Date},{name:"actions",label:"",sortable:!1}],l=(0,s.KR)({field:"name",desc:!1}),o=(0,s.KR)([]),d=async()=>{o.value=await Ye.FH.get("/api/groups/applications").then((e=>e.data.data))},p=e=>{n.push({name:"ApplicationDetail",params:{uuid:e.uuid}})},c=e=>e.submission.judgements&&e.submission.judgements.some((e=>e.person_id==a.user.person.id)),m=e=>e.submission.judgements?e.submission.judgements.find((e=>e.person_id==a.user.person.id)):{};return(0,t.sV)((()=>{d()})),(e,a)=>{const n=(0,t.g2)("icon-checkmark"),i=(0,t.g2)("badge"),d=(0,t.g2)("router-link"),v=(0,t.g2)("popper"),f=(0,t.g2)("data-table");return(0,t.uX)(),(0,t.CE)("div",null,[qe,0==o.value.length?((0,t.uX)(),(0,t.CE)("div",Me," No application activity. ")):((0,t.uX)(),(0,t.Wv)(f,{key:1,data:o.value,fields:r,sort:l.value,"onUpdate:sort":a[0]||(a[0]=e=>l.value=e),class:"text-sm",onRowClick:p,"row-class":"cursor-pointer"},{"cell-actions":(0,t.k6)((({item:e})=>[(0,t.Lk)("div",$e,[c(e)?((0,t.uX)(),(0,t.CE)("div",Be,[(0,t.bF)(v,{hover:"",arrow:"",placement:"right"},{content:(0,t.k6)((()=>[(0,t.Lk)("div",null,[Je,(0,t.bF)(i,{class:"inline-block",color:(0,s.R1)(Ve.b)(m(e)),size:"xs"},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(m(e).decision),1)])),_:2},1032,["color"])]),m(e).notes?((0,t.uX)(),(0,t.CE)("div",ea,[aa,(0,t.eW)(" "+(0,u.v_)(m(e).notes),1)])):(0,t.Q3)("",!0),na,(0,t.bF)(d,{to:{name:"ApplicationDetail",params:{uuid:e.uuid}},class:(0,u.C4)({"btn btn-xs":(0,s.R1)(Qe._m)("ep-applications-approve")})},{default:(0,t.k6)((()=>[ta])),_:2},1032,["to","class"])])),default:(0,t.k6)((()=>[(0,t.bF)(i,{color:(0,s.R1)(Ve.b)(e)},{default:(0,t.k6)((()=>[(0,t.bF)(n,{class:"text-white inline-block",width:"12",height:"12"})])),_:2},1032,["color"])])),_:2},1024)])):((0,t.uX)(),(0,t.Wv)(d,{key:1,to:{name:"ApplicationDetail",params:{uuid:e.uuid}},class:"btn btn-xs"},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)((0,s.R1)(Qe._m)("ep-applications-manage")?"View":"Review"),1)])),_:2},1032,["to"])),(0,t.Lk)("div",null,[(0,s.R1)(He.UE)("chair-review")?((0,t.uX)(),(0,t.Wv)(v,{key:0,hover:"",arrow:""},{content:(0,t.k6)((()=>[ua,(0,t.Lk)("table",sa,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.submission.judgements,(e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id},[(0,t.Lk)("th",null,(0,u.v_)(e.person.name)+":",1),(0,t.Lk)("td",null,[(0,t.bF)(i,{class:"inline-block",color:(0,s.R1)(Ve.b)(e)},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e.decision),1)])),_:2},1032,["color"])])])))),128))])])),default:(0,t.k6)((()=>[(0,s.R1)(Qe._m)("ep-applications-manage")&&"Under Chair Review"==e.submission.status.name?((0,t.uX)(),(0,t.Wv)(i,{key:0,color:3==e.submission.judgements.length?"green":"gray"},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e.submission.judgements.length)+"/3 ",1)])),_:2},1032,["color"])):(0,t.Q3)("",!0)])),_:2},1024)):(0,t.Q3)("",!0)])])])),_:1},8,["data","sort"]))])}}},ia=n(6262);const la=(0,ia.A)(ra,[["__scopeId","data-v-89aeb9c6"]]);var oa=la,da=(n(9838),n(9824)),pa={__name:"DashboardAlerts",props:{user:{type:Object,required:!0}},setup(e){const a=e,n=(0,s.KR)([]),u=async()=>{if(0==r.value.length)return;const e={with:["assignee"],where:{task_type_id:1,assignee_type:"App\\Modules\\Group\\Models\\Group",assignee_id:[...new Set(r.value.map((e=>e.id)))],pending:1}},a=(0,Ye.Sw)(e),t=`/api/tasks${a}`;n.value=await Ye.FH.get(t).then((e=>{const a={};return e.data.forEach((e=>{a[e.assignee_id]=e})),a}))},r=(0,t.EW)((()=>a.user.memberships.filter((e=>e.hasPermission("annual-update-manage"))).map((e=>e.group)).filter((e=>null!==e)).map((e=>new Ze.A(e)))));return(0,t.sV)((()=>{u()})),(a,u)=>{const i=(0,t.g2)("sustained-curation-review-alert"),l=(0,t.g2)("coi-alert");return(0,t.uX)(),(0,t.CE)("div",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.value,(e=>((0,t.uX)(),(0,t.Wv)(i,{key:e.id,group:e.assignee,class:"mb-2"},null,8,["group"])))),128)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,s.R1)(r),(e=>((0,t.uX)(),(0,t.Wv)(da.A,{key:e.id,group:e,"show-group-name":!0,class:"mb-2"},null,8,["group"])))),128)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.user.person.membershipsWithPendingCois,(e=>((0,t.uX)(),(0,t.Wv)(l,{key:e.id,membership:e,class:"mb-2"},null,8,["membership"])))),128))])}}};const ca=pa;var ma=ca,va=n(2693),fa=n(8114);const ga=(0,t.eW)(" Dashboard "),ba={class:"note font-normal"},ha={key:0,class:"well"};var ka={__name:"Dashboard",setup(e){const a=(0,r.Pj)(),n=(0,i.rd)(),l=(0,t.EW)((()=>a.getters["currentUser"])),o=(0,t.EW)((()=>a.getters["people/currentItem"]||new Ke.A)),d=()=>{l.value.id&&l.value.person&&l.value.person.id&&(a.commit("people/addItem",l.value.person),a.commit("people/setCurrentItemIndex",l.value.person))};(0,t.wB)((()=>l),(()=>{d()})),(0,t.sV)((()=>{d()}));const p=(0,t.EW)((()=>l.value.memberships.map((e=>e.group)).filter((e=>null!==e)).map((e=>new Ze.A(e))))),c=(0,s.KR)([{name:"displayName",sortable:!0,type:String},{name:"status.name",label:"Status",sortable:!0,resolveValue:e=>e.status.id==Te.groups.statuses.applying.id?e.status.name+" - "+e.expert_panel.currentStepName:e.status.name,type:String},{name:"type.name",label:"Type",sortable:!0,resolveValue:e=>Oe(e.type.name)}]),m=(0,s.KR)({field:"displayName",desc:!1}),v=e=>{const a={Active:"green",Applying:"blue",Retired:"yellow",Removed:"red"};return a[e]||"blue"},f=(0,t.EW)((()=>(0,Qe._m)("ep-applications-manage")||(0,He.UE)("chair_review")&&(0,Qe.sx)(["ep-applications-comment","ep-applications-approve"])));(0,t.sV)((async()=>{await a.dispatch("forceGetCurrentUser")}));const g=e=>{n.push({name:"GroupDetail",params:{uuid:e.uuid}})};return(e,a)=>{const n=(0,t.g2)("badge"),r=(0,t.g2)("data-table"),i=(0,t.g2)("tab-item"),d=(0,t.g2)("tabs-container");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.Lk)("h1",null,[ga,(0,t.Lk)("div",ba," User ID: "+(0,u.v_)((0,s.R1)(l).id)+" | Person ID: "+(0,u.v_)((0,s.R1)(l).person?(0,s.R1)(l).person.id:"no person!!"),1)]),(0,t.bF)(va["default"],{user:(0,s.R1)(l)},null,8,["user"]),(0,t.bF)(ma,{user:(0,s.R1)(l)},null,8,["user"]),(0,s.R1)(f)?((0,t.uX)(),(0,t.Wv)(oa,{key:0,user:(0,s.R1)(l),class:"screen-block"},null,8,["user"])):(0,t.Q3)("",!0),(0,t.bF)(d,{class:"mt-8"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{label:"Your Groups"},{default:(0,t.k6)((()=>[(0,s.R1)(p).length?((0,t.uX)(),(0,t.Wv)(r,{key:1,data:(0,s.R1)(p),fields:c.value,sort:m.value,"onUpdate:sort":a[0]||(a[0]=e=>m.value=e),onRowClick:g,"row-class":"cursor-pointer"},{"cell-status_name":(0,t.k6)((({value:e})=>[(0,t.bF)(n,{color:v(e)},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e),1)])),_:2},1032,["color"])])),"cell-displayName":(0,t.k6)((({item:e})=>[(0,t.eW)((0,u.v_)(e.name)+" "+(0,u.v_)(e.type.name.toUpperCase()),1)])),_:1},8,["data","fields","sort"])):((0,t.uX)(),(0,t.CE)("div",ha,"You are not assigned to any groups."))])),_:1}),(0,t.bF)(i,{label:"Your Info"},{default:(0,t.k6)((()=>[(0,t.bF)(ze.A,{person:(0,s.R1)(o)},null,8,["person"])])),_:1}),(0,t.bF)(i,{label:"COIs"},{default:(0,t.k6)((()=>[(0,t.bF)(Ge.A,{person:(0,s.R1)(l).person},null,8,["person"])])),_:1}),(0,t.bF)(i,{label:"Demographics"},{default:(0,t.k6)((()=>[(0,t.bF)(fa["default"],{uuid:(0,s.R1)(l).person.uuid},null,8,["uuid"])])),_:1})])),_:1})])}}};const wa=ka;var _a=wa}}]);
//# sourceMappingURL=517.c37d8732.js.map