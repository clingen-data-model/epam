(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["application-index","create-application-form"],{"0049":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a=Object(r["M"])("data-v-74acbfab");Object(r["u"])("data-v-74acbfab");var i={class:"home"},o={class:"mb-2 mt-4"},c={class:"tabs"},l=Object(r["g"])("VCEPS"),u=Object(r["g"])("GCEPS"),s={class:"p-4 border rounded-tr-lg rounded-b-lg bg-white"};Object(r["s"])();var d=a((function(e,t,n,d,p,b){var f=Object(r["z"])("router-link"),h=Object(r["z"])("router-view"),O=Object(r["z"])("create-application-form"),j=Object(r["z"])("modal-dialog");return Object(r["r"])(),Object(r["e"])("div",i,[Object(r["h"])("button",{onClick:t[1]||(t[1]=function(e){return p.showModal=!0}),class:"btn blue"},"Initiate Application"),Object(r["h"])("div",o,[Object(r["h"])("div",c,[Object(r["h"])(f,{to:"/vceps",class:"tab"},{default:a((function(){return[l]})),_:1}),Object(r["h"])(f,{to:"/gceps",class:"tab"},{default:a((function(){return[u]})),_:1})]),Object(r["h"])("div",s,[Object(r["h"])(h)])]),Object(r["h"])(j,{modelValue:p.showModal,"onUpdate:modelValue":t[4]||(t[4]=function(e){return p.showModal=e}),size:"md",onClosed:t[5]||(t[5]=function(t){return e.$refs.initiateform.initForm()})},{default:a((function(){return[Object(r["h"])(O,{name:"modal",onCanceled:t[2]||(t[2]=function(e){return p.showModal=!1}),onSaved:t[3]||(t[3]=function(e){return p.showModal=!1}),ref:"initiateform"},null,512)]})),_:1},8,["modelValue"])])})),p=n("3f17"),b={name:"ApplicationsIndex",components:{CreateApplicationForm:p["default"]},data:function(){return{showModal:!1}},watch:{"this.$route.hash":function(e,t){console.log("to, from",[e,t])}},computed:{}};n("16d8");b.render=d,b.__scopeId="data-v-74acbfab";t["default"]=b},"0cb2":function(e,t,n){var r=n("7b0b"),a=Math.floor,i="".replace,o=/\$([$&'`]|\d\d?|<[^>]*>)/g,c=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,l,u,s){var d=n+e.length,p=l.length,b=c;return void 0!==u&&(u=r(u),b=o),i.call(s,b,(function(r,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":o=u[i.slice(1,-1)];break;default:var c=+i;if(0===c)return r;if(c>p){var s=a(c/10);return 0===s?r:s<=p?void 0===l[s-1]?i.charAt(1):l[s-1]+i.charAt(1):r}o=l[c-1]}return void 0===o?"":o}))}},"16d8":function(e,t,n){"use strict";n("d12f")},"2b61":function(e,t,n){"use strict";n.r(t);var r=n("7a23");function a(e,t,n,a,i,o){var c=Object(r["z"])("applications-table");return Object(r["r"])(),Object(r["e"])("div",null,[Object(r["h"])(c,{"ep-type-id":1})])}var i=n("eb82"),o={components:{ApplicationsTable:i["a"]},props:{},data:function(){return{}}};o.render=a;t["default"]=o},"3f17":function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("7a23"),a=Object(r["h"])("h4",{class:"text-xl font-semibold pb-2 border-b mb-4"},"Initiate Application",-1),i=Object(r["h"])("option",{value:null},"Select...",-1),o=Object(r["g"])("   "),c=Object(r["g"])("   "),l=Object(r["h"])("label",{for:"show-initiation-checkbox"},"Backdate this initiation",-1);function u(e,t,n,u,s,d){var p=this,b=Object(r["z"])("input-row"),f=Object(r["z"])("button-row");return Object(r["r"])(),Object(r["e"])("div",null,[a,Object(r["h"])(b,{label:"Working Name",errors:s.errors.working_name},{default:Object(r["J"])((function(){return[Object(r["K"])(Object(r["h"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(e){return p.app.working_name=e}),placeholder:"A recognizable name"},null,512),[[r["G"],p.app.working_name]])]})),_:1},8,["errors"]),Object(r["h"])(b,{label:"CDWG",errors:s.errors.cdwg_id},{default:Object(r["J"])((function(){return[Object(r["K"])(Object(r["h"])("select",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.app.cdwg_id=e})},[i,(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(s.cdwgs,(function(e){return Object(r["r"])(),Object(r["e"])("option",{key:e.id,value:e.id},Object(r["B"])(e.name),9,["value"])})),128))],512),[[r["F"],s.app.cdwg_id]])]})),_:1},8,["errors"]),Object(r["h"])(b,{label:"EP Type",errors:s.errors.ep_type_id},{default:Object(r["J"])((function(){return[Object(r["h"])("div",null,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(s.epTypes,(function(e){return Object(r["r"])(),Object(r["e"])("div",{key:e.id},[Object(r["K"])(Object(r["h"])("input",{type:"radio",value:e.id,"onUpdate:modelValue":t[3]||(t[3]=function(e){return s.app.ep_type_id=e}),id:"ep-".concat(e.id,"-radio")},null,8,["value","id"]),[[r["E"],s.app.ep_type_id]]),o,Object(r["h"])("label",{for:"ep-".concat(e.id,"-radio")},Object(r["B"])(e.name),9,["for"])])})),128))])]})),_:1},8,["errors"]),Object(r["h"])(b,{errors:s.errors.date_initiated},{default:Object(r["J"])((function(){return[Object(r["h"])("div",null,[Object(r["h"])("div",null,[Object(r["K"])(Object(r["h"])("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=function(e){return s.showInitiationDate=e}),id:"show-initiation-checkbox"},null,512),[[r["D"],s.showInitiationDate]]),c,l]),Object(r["K"])(Object(r["h"])(b,{label:"Initiation Date"},{default:Object(r["J"])((function(){return[Object(r["K"])(Object(r["h"])("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=function(e){return s.app.date_initiated=e})},null,512),[[r["G"],s.app.date_initiated]])]})),_:1},512),[[r["H"],s.showInitiationDate]])])]})),_:1},8,["errors"]),Object(r["h"])(f,null,{default:Object(r["J"])((function(){return[Object(r["h"])("button",{class:"btn",onClick:t[6]||(t[6]=function(){return d.cancel&&d.cancel.apply(d,arguments)})},"Cancel"),Object(r["h"])("button",{class:"btn blue",onClick:t[7]||(t[7]=function(){return d.save&&d.save.apply(d,arguments)})},"Initiate Application")]})),_:1})])}n("b64b"),n("96cf");var s=n("1da1"),d=n("e328"),p={name:"CreateApplicationForm",props:{},emits:["canceled","saved"],data:function(){return{visible:!1,showInitiationDate:!1,app:{working_name:null,cdwg_id:null,ep_type_id:null,date_initiated:Object(d["a"])(new Date)},cdwgs:[{name:"test",id:1},{name:"beans",id:2}],epTypes:[{name:"GCEP",id:1},{name:"VCEP",id:2}],errors:{}}},computed:{hasErrors:function(){return Object.keys(this.errors).length>0}},watch:{"app.working_name":function(){this.clearErrors("working_name")},"app.cdwg_id":function(){this.clearErrors("cdwg_id")},"app.ep_type_id":function(){this.clearErrors("ep_type_id")}},methods:{cancel:function(){this.initForm(),this.$emit("canceled")},save:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("initiateApplication",e.app);case 3:e.$emit("saved"),t.next=12;break;case 6:if(t.prev=6,t.t0=t["catch"](0),!t.t0.response||422!=t.t0.response.status||!t.t0.response.data.errors){t.next=11;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 11:console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,6]])})))()},initForm:function(){this.initErrors(),this.initAppData()},initAppData:function(){this.app={working_name:null,cdwg_id:null,ep_type_id:null,date_initiated:Object(d["a"])(new Date)}},clearErrors:function(e){console.info("clearErrors for ",e),e?delete this.errors[e]:this.initErrors()},initErrors:function(){this.errors={}}}};p.render=u;t["default"]=p},5319:function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),i=n("50c4"),o=n("a691"),c=n("1d80"),l=n("8aa5"),u=n("0cb2"),s=n("14c3"),d=Math.max,p=Math.min,b=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var f=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=r.REPLACE_KEEPS_$0,O=f?"$":"$0";return[function(n,r){var a=c(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!f&&h||"string"===typeof r&&-1===r.indexOf(O)){var c=n(t,e,this,r);if(c.done)return c.value}var j=a(e),m=String(this),v="function"===typeof r;v||(r=String(r));var g=j.global;if(g){var _=j.unicode;j.lastIndex=0}var w=[];while(1){var y=s(j,m);if(null===y)break;if(w.push(y),!g)break;var k=String(y[0]);""===k&&(j.lastIndex=l(m,i(j.lastIndex),_))}for(var $="",x=0,A=0;A<w.length;A++){y=w[A];for(var E=String(y[0]),C=d(p(o(y.index),m.length),0),S=[],I=1;I<y.length;I++)S.push(b(y[I]));var D=y.groups;if(v){var T=[E].concat(S,C,m);void 0!==D&&T.push(D);var U=String(r.apply(void 0,T))}else U=u(E,m,C,S,D,r);C>=x&&($+=m.slice(x,C)+U,x=C+E.length)}return $+m.slice(x)}]}))},d12f:function(e,t,n){},d659:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function a(e,t,n,a,i,o){var c=Object(r["z"])("applications-table");return Object(r["r"])(),Object(r["e"])("div",null,[Object(r["h"])(c,{"ep-type-id":2})])}var i=n("eb82"),o={components:{ApplicationsTable:i["a"]}};o.render=a;t["default"]=o},eb82:function(e,t,n){"use strict";n("4de4");var r=n("7a23"),a={class:"mb-1 flex space-x-2"},i=Object(r["g"])("Filter: "),o=Object(r["g"])(" Show completed ");function c(e,t,n,c,l,u){var s=Object(r["z"])("data-table");return Object(r["r"])(),Object(r["e"])("div",null,[Object(r["h"])("div",a,[Object(r["h"])("label",null,[i,Object(r["K"])(Object(r["h"])("input",{type:"text",class:"sm","onUpdate:modelValue":t[1]||(t[1]=function(e){return u.filter=e}),placeholder:"filter"},null,512),[[r["G"],u.filter]])]),Object(r["h"])("label",null,[Object(r["K"])(Object(r["h"])("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=function(e){return u.showCompleted=e})},null,512),[[r["D"],u.showCompleted]]),o])]),Object(r["h"])(s,{data:u.filteredData,fields:l.fields,"filter-term":u.filter,class:"width-full","row-click-handler":u.goToApplication,"row-class":"cursor-pointer",sort:u.sort,"onUpdate:sort":t[3]||(t[3]=function(e){return u.sort=e})},null,8,["data","fields","filter-term","row-click-handler","sort"])])}n("7db0"),n("caad"),n("b0c0"),n("a9e3"),n("b64b"),n("ac1f"),n("2532"),n("5319");var l=n("5530"),u=n("5502"),s=n("e328"),d={components:{},props:{epTypeId:{type:Number,default:null}},data:function(){return{fields:[{name:"id",label:"ID",type:Number,sortable:!0},{name:"name",label:"Name",type:String,sortable:!0},{name:"cdwg.name",label:"CDWG",type:String,sortable:!0},{name:"current_step",label:"Current Step",type:Number,sortable:!0},{name:"latest_log_entry.created_at",label:"Last Activity",type:String,sortable:!0,resolveValue:function(e){return e&&e.latest_log_entry?Object(s["a"])(e.latest_log_entry.created_at):null},colspan:2},{name:"latest_log_entry.description",label:"Last Activity",type:String,hideHeader:!0},{name:"latest_pending_next_action.entry",label:"Next Action",type:String,sortable:!1}]}},computed:Object(l["a"])(Object(l["a"])({},Object(u["b"])({applications:"applications"})),{},{sort:{immediate:!0,get:function(){var e=this;return Object.keys(this.$route.query).includes("sort-field")?{field:this.fields.find((function(t){return t.name==e.$route.query["sort-field"]})),desc:Boolean(parseInt(this.$route.query["sort-desc"]))}:{field:this.fields.find((function(e){return"name"==e.name})),desc:!1}},set:function(e){var t={"sort-field":e.field.name,"sort-desc":e.desc?1:0},n=Object(l["a"])(Object(l["a"])({},this.$route.query),t);this.$router.replace({path:this.$route.path,query:n})}},filteredData:function(){var e=this;return this.applications.filter((function(t){return!e.epTypeId||t.ep_type_id==e.epTypeId})).filter((function(t){return!!e.showCompleted||null==t.date_completed}))},showCompleted:{set:function(e){var t=this.$route.query,n=this.$route.path,r=Object(l["a"])({},t);e?r=Object(l["a"])(Object(l["a"])({},t),{"show-completed":1}):delete r["show-completed"],this.$router.replace({path:n,query:r})},get:function(){return Boolean(parseInt(this.$route.query["show-completed"]))},immediate:!0},filter:{set:function(e){var t=this.$route.query,n=this.$route.path,r=Object(l["a"])({},t);e?r=Object(l["a"])(Object(l["a"])({},t),{filter:e}):delete r.filter,this.$router.replace({path:n,query:r})},get:function(){return this.$route.query.filter},immediate:!0}}),methods:{getApplications:function(){var e={with:["latestLogEntry","latestPendingNextAction","type"]},t={};Object.keys(t).length>0&&(e.where=t),this.$store.dispatch("getApplications",e)},goToApplication:function(e){this.$router.push({name:"ApplicationDetail",params:{uuid:e.uuid}})}},mounted:function(){this.getApplications()}};d.render=c;t["a"]=d}}]);
//# sourceMappingURL=application-index.eca75be9.js.map