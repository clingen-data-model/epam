(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6d92"],{"73ff":function(e,t,n){"use strict";n.r(t);n("b0c0");var o=n("7a23"),r={class:"pb-4"},a=Object(o["createTextVNode"])("People"),c={class:"flex justify-between items-center"},i=Object(o["createElementVNode"])("strong",null,"Email:",-1),l=Object(o["createElementVNode"])("strong",null,"Institution:",-1),s=Object(o["createTextVNode"])(" docs "),u={key:0,class:"well"},d=["innerHTML"];function b(e,t,n,b,p,m){var j=Object(o["resolveComponent"])("router-link"),O=Object(o["resolveComponent"])("note"),f=Object(o["resolveComponent"])("icon-edit"),h=Object(o["resolveComponent"])("dictionary-row"),w=Object(o["resolveComponent"])("membership-list"),g=Object(o["resolveComponent"])("tab-item"),V=Object(o["resolveComponent"])("person-profile"),N=Object(o["resolveComponent"])("coi-list"),C=Object(o["resolveComponent"])("tabs-container"),v=Object(o["resolveComponent"])("router-view"),x=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("header",r,[Object(o["createVNode"])(j,{class:"note",to:"/people"},{default:Object(o["withCtx"])((function(){return[a]})),_:1}),Object(o["createElementVNode"])("h1",c,[Object(o["createElementVNode"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.person.name)+" ",1),Object(o["createVNode"])(O,null,{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("ID: "+Object(o["toDisplayString"])(e.person.id),1)]})),_:1})]),e.hasPermission("people-manage")||e.userIsPerson(e.person)?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:0,to:"/people/".concat(n.uuid,"/edit"),class:"btn btn-xs flex-grow-0"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{width:"16",heigh:"16"})]})),_:1},8,["to"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(h,{label:"Email"},{label:Object(o["withCtx"])((function(){return[i]})),default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.person.email),1)]})),_:1}),Object(o["createVNode"])(h,{label:"Institution"},{label:Object(o["withCtx"])((function(){return[l]})),default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.person.institution?e.person.institution.name:null),1)]})),_:1})]),Object(o["createVNode"])(C,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{label:"groups"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(w,{person:e.person},null,8,["person"])]})),_:1}),Object(o["createVNode"])(g,{label:"Info"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(V,{person:e.person},null,8,["person"])]})),_:1}),Object(o["createVNode"])(g,{label:"Conflict of Interest"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(N,{person:e.person},null,8,["person"])]})),_:1}),Object(o["createVNode"])(g,{label:"Documents"},{default:Object(o["withCtx"])((function(){return[s]})),_:1}),Object(o["createVNode"])(g,{label:"Email Log"},{default:Object(o["withCtx"])((function(){return[0==m.sortedMailLog.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",u,Object(o["toDisplayString"])(e.titleCase(e.person.first_name))+" has not received any mail via the GPM. ",1)):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(m.sortedMailLog,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"w-3/4 my-4 p-4 border",key:e.id},[Object(o["createVNode"])(h,{label:"Date/Time"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(b.formatDate(e.created_at)),1)]})),_:2},1024),Object(o["createVNode"])(h,{label:"Subject"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.subject),1)]})),_:2},1024),Object(o["createVNode"])(h,{label:"Body"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",{innerHTML:e.body},null,8,d)]})),_:2},1024)])})),128))]})),_:1})]})),_:1}),Object(o["createVNode"])(x,{modelValue:m.showModal,"onUpdate:modelValue":t[0]||(t[0]=function(e){return m.showModal=e}),title:e.$route.meta.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{name:"modal"})]})),_:1},8,["modelValue","title"])])}var p=n("1da1"),m=n("2909"),j=n("5530"),O=(n("96cf"),n("4e82"),n("5502")),f=n("e328"),h=n("b442");function w(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("data-table");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(i,{fields:a.fields,data:c.memberships,sort:a.sort,"onUpdate:sort":t[0]||(t[0]=function(e){return a.sort=e}),rowClickHandler:c.goToGroup,"row-class":function(){return"cursor-pointer"}},null,8,["fields","data","sort","rowClickHandler","row-class"])])}n("a15b"),n("d81d");var g=n("5313"),V={name:"MembershipList",props:{person:{type:Object,required:!0}},data:function(){return{sort:{field:"group.displayName",desc:!1},fields:[{name:"group.displayName",type:String,sortable:!0,label:"Name"},{name:"group.type.name",type:String,sortable:!0,label:"Type"},{name:"roles",type:String,sortable:!1,label:"Roles",resolveValue:function(e){return e.roles.map((function(e){return e.name})).join(", ")}},{name:"permissions",type:String,sortable:!1,label:"Permissions",resolveValue:function(e){return e.permissions.map((function(e){return e.name})).join(", ")}},{name:"start_date",type:Date,sortable:!0,label:"Started"},{name:"end_date",type:Date,sortable:!0,label:"Ended"}]}},computed:{memberships:function(){return this.person.memberships?this.person.memberships.map((function(e){return e.group&&(e.group=new g["b"](e.group)),e})):[]}},methods:{goToGroup:function(e){this.$router.push({name:"GroupDetail",params:{uuid:e.group.uuid}})}}},N=n("6b0d"),C=n.n(N);const v=C()(V,[["render",w]]);var x=v,y=n("c226"),_=n("6a6b"),k={name:"PersonDetail",components:{TabsContainer:h["default"],MembershipList:x,PersonProfile:y["a"],CoiList:_["a"]},props:{uuid:{required:!0,type:String}},data:function(){return{emails:[]}},watch:{uuid:{immediate:!0,handler:function(){this.$store.dispatch("people/getPerson",{uuid:this.uuid})}}},computed:Object(j["a"])(Object(j["a"])({},Object(O["b"])({person:"people/currentItem"})),{},{showModal:{get:function(){return this.$route.meta.showModal},set:function(e){e&&this.$router.push({name:"PersonEdit",params:{uuid:this.person.uuid}}),this.$router.push({name:"PersonDetail",params:{uuid:this.person.uuid}})}},sortedMailLog:function(){return Object(m["a"])(this.person.mailLog).sort((function(e,t){return e.created_at==t.created_at?0:Date.parse(e.created_at)>Date.parse(t.created_at)?-1:1}))}}),methods:{},setup:function(){return{formatDate:f["c"]}},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("people/getPerson",{uuid:e.uuid});case 2:e.$store.dispatch("people/getMail",e.person);case 3:case"end":return t.stop()}}),t)})))()}};const D=C()(k,[["render",b]]);t["default"]=D}}]);
//# sourceMappingURL=chunk-2d0d6d92.a54a2874.js.map