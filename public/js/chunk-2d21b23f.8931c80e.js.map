{"version":3,"sources":["webpack:///./src/views/InviteAdmin.vue","webpack:///./src/views/InviteAdmin.vue?22c5"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_component_note","_hoisted_3","_toDisplayString","$data","type","$event","placeholder","_createBlock","_component_data_table","data","$options","fields","sort","cell-reset","_withCtx","item","redeemed_at","onClick","_hoisted_4","_Teleport","to","_component_modal_dialog","title","first_name","last_name","_hoisted_5","_hoisted_6","_component_button_row","submit-text","onSubmitted","name","props","resettingInvite","tableSort","field","desc","invites","showConfirmation","searchTerm","sortable","Number","label","String","Date","resolveValue","invite","inviter","computed","filteredInvites","this","filter","RegExp","match","email","methods","getInvites","api","get","then","rsp","resetInvite","put","code","response","idx","findIndex","i","id","alert","isValidationError","confirmReset","mounted","__exports__","render"],"mappings":"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","file":"js/chunk-2d21b23f.8931c80e.js","sourcesContent":["<template>\n    <div>\n        <div class=\"flex justify-between\">\n            <div>\n                <note>Admin</note>\n                <h1>Invites</h1>\n            </div>\n            <div>\n                <pre>{{searchTerm}}</pre>\n                <input type=\"text\" v-model=\"searchTerm\" placeholder=\"filter by name or email\">\n            </div>\n        </div>\n        <data-table\n            :data=\"filteredInvites\"\n            :fields=\"fields\"\n            v-model:sort=\"tableSort\"\n            class=\"text-sm\"\n            v-remaining-height\n        >\n            <template v-slot:cell-reset=\"{item}\">\n                <button class=\"btn btn-xs\" @click=\"confirmReset(item)\" v-if=\"item.redeemed_at\">\n                    Reset\n                </button>\n            </template>\n        </data-table>\n        <teleport to=\"body\">\n            <modal-dialog title=\"Reset Invite\" v-model=\"showConfirmation\">\n                <p>You are about to reset the invite for {{resettingInvite.first_name}} {{resettingInvite.last_name}}.</p>\n                <p>This cannot be undone.</p>\n                <p>Do you want to reset the invite?</p>\n                <button-row submit-text=\"Reset Invite\" @submitted=\"resetInvite(resettingInvite)\"></button-row>\n\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nimport {api, isValidationError} from '@/http'\n\nexport default {\n    name: 'InviteAdmin',\n    props: {\n        \n    },\n    data () {\n        return {\n            resettingInvite: {},\n            tableSort: {field: 'id', desc: false},\n            invites: [],\n            showConfirmation: false,\n            searchTerm: null,\n            fields: [\n                {\n                    name: 'id',\n                    sortable: true,\n                    type: Number\n                },\n                {\n                    name: 'person.name',\n                    label: 'Name',\n                    sortable: true,\n                    type: String\n                },\n                {\n                    name: 'person.email',\n                    label: 'Email',\n                    sortable: true,\n                    type: String\n                },\n                {\n                    name: 'redeemed_at',\n                    sortable: true,\n                    type: Date\n                },\n                {\n                    name: 'inviter',\n                    sortable: true,\n                    type: String,\n                    resolveValue: (invite) => {\n                        return invite.inviter ? invite.inviter.name : null\n                    }\n                },\n                {\n                    name: 'code',\n                    sortable: false,\n                    type: String\n                },\n                {\n                    name: 'reset',\n                    sortable: false,\n                    type: String\n                }\n            ]\n        }\n    },\n    computed: {\n        filteredInvites () {\n            if (!this.searchTerm) {\n                return this.invites;\n            }\n            const filter = new RegExp(`.*${this.searchTerm}.*`);\n            return this.invites.filter(invite => {\n                return invite.first_name.match(filter)\n                    || invite.last_name.match(filter)\n                    || `${invite.first_name} ${invite.last_name}`.match(filter)\n                    || invite.email.match(filter);\n            });\n        }\n    },\n    methods: {\n         async getInvites () {\n            this.invites = await api.get('/api/people/invites').then(rsp => rsp.data.data);     \n        }, \n        async resetInvite (invite) {\n            try {\n                const response = await api.put(`/api/people/invites/${invite.code}/reset`);\n                const idx = this.invites.findIndex(i => i.id == invite.id);\n                if (idx == -1) {\n                    alert('what??')\n                }\n                this.invites[idx] = response.data;\n            } catch (error) {\n                if (isValidationError(error)) {\n                    alert('Problem resetting invite!');\n                    return;\n                }\n            }\n            this.showConfirmation = false;\n        },\n        confirmReset(invite) {\n            this.resettingInvite = invite;\n            this.showConfirmation = true;\n        }\n    },\n    mounted () {\n        this.getInvites();\n    }\n}\n</script>","import { render } from \"./InviteAdmin.vue?vue&type=template&id=e06ab9c8\"\nimport script from \"./InviteAdmin.vue?vue&type=script&lang=js\"\nexport * from \"./InviteAdmin.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}