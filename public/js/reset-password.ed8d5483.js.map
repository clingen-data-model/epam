{"version":3,"sources":["webpack:///./src/views/ResetPassword.vue","webpack:///./src/views/ResetPassword.vue?5e8c"],"names":["class","_createBlock","_component_card","title","$data","_createElementBlock","_toDisplayString","_hoisted_2","_createVNode","_component_input_row","$event","type","label","errors","email","$options","password","password_confirmation","_component_button_row","show-cancel","submit-text","onSubmitClicked","props","data","successMessage","computed","hasToken","Boolean","this","$route","query","token","methods","getResetLink","api","post","then","response","status","catch","error","is_validation_error","submitNewPassword","$store","dispatch","$router","replace","submitReset","__exports__","render"],"mappings":"kJAEaA,MAAM,mE,yMADfC,yBAUOC,EAAA,CAVDC,MAAM,sBAAsBH,MAAM,iBAAxC,C,8BACI,iBAEM,CAF6EI,2CAAnFC,gCAEM,MAFN,EAEMC,6BADAF,kBAAc,KADpB,yBAGAC,gCAKM,MAAAE,EAAA,CAJFC,yBAAwFC,EAAA,C,WAApEL,Q,qDAAAA,QAAKM,IAAEC,KAAK,OAAOC,MAAM,QAASC,OAAQT,SAAOU,OAArE,gCACmGC,qCAAnGd,yBAAyHQ,EAAA,C,iBAArGL,W,qDAAAA,WAAQM,IAAEC,KAAK,WAAWC,MAAM,eAAgBC,OAAQT,SAAOY,UAAnF,wEACiID,qCAAjId,yBAAuJQ,EAAA,C,iBAAnIL,wB,qDAAAA,wBAAqBM,IAAEC,KAAK,WAAWC,MAAM,mBAAoBC,OAAQT,SAAOa,uBAApG,wEACAT,yBAAkHU,EAAA,CAArGC,eAAa,EAAOC,cAAY,2BAA4BC,gBAAeN,eAAxF,mC,sDAOG,GACXO,MAAO,GAGPC,KAJW,WAKP,MAAO,CACHT,MAAO,KACPD,OAAQ,GACRG,SAAU,KACVC,sBAAuB,KACvBO,eAAgB,OAGxBC,SAAU,CACNC,SADM,WAEF,OAAOC,QAAQC,KAAKC,OAAOC,MAAMC,SAGzCC,QAAS,CACLC,aADK,WACU,WACXC,OAAIC,KAAK,gCAAiC,CAACrB,MAAOc,KAAKd,QAClDsB,MAAK,SAAAC,GACF,EAAKb,eAAiBa,EAASd,KAAKe,UAEvCC,OAAM,SAAAC,GACCC,eAAoBD,KACpB,EAAK3B,OAAS2B,EAAMH,SAASd,KAAKV,YAIlD6B,kBAZK,WAYgB,WACXnB,EAAO,CACTQ,MAAOH,KAAKC,OAAOC,MAAMC,MACzBjB,MAAOc,KAAKd,MACZE,SAAUY,KAAKZ,SACfC,sBAAuBW,KAAKX,uBAGhCiB,OAAIC,KAAK,sBAAuBZ,GAC3Ba,MAAK,WACF,EAAKO,OAAOC,SAAS,QAAS,CAAC9B,MAAO,EAAKA,MAAOE,SAAU,EAAKA,WAC5DoB,MAAK,WACF,EAAKO,OAAOC,SAAS,kBACrB,EAAKC,QAAQC,QAAQ,WAGhCP,OAAM,SAAAC,GACCC,eAAoBD,KACpB,EAAK3B,OAAS2B,EAAMH,SAASd,KAAKV,YAIlDkC,YAlCK,WAmCGnB,KAAKF,SACLE,KAAKc,oBAITd,KAAKK,kB,qBCrEjB,MAAMe,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/reset-password.ed8d5483.js","sourcesContent":["<template>\n    <card title=\"Reset Your Password\" class=\"w-2/3 mx-auto\">\n        <div class=\"p-2 rounded border border-green-300 bg-green-100 text-green-700\" v-if=\"successMessage\">\n            {{successMessage}}\n        </div>\n        <div v-else>\n            <input-row v-model=\"email\" type=\"text\" label=\"Email\" :errors=\"errors.email\"></input-row>\n            <input-row v-model=\"password\" type=\"password\" label=\"New password\" :errors=\"errors.password\" v-if=\"hasToken\"></input-row>\n            <input-row v-model=\"password_confirmation\" type=\"password\" label=\"Confirm password\" :errors=\"errors.password_confirmation\" v-if=\"hasToken\"></input-row>\n            <button-row :show-cancel=\"false\" submit-text=\"Send Password Reset Link\" @submitClicked=\"submitReset\"></button-row>\n        </div>\n    </card>\n</template>\n<script>\nimport api from '../http/api'\nimport is_validation_error from '../http/is_validation_error'\nexport default {\n    props: {\n        \n    },\n    data() {\n        return {\n            email: null,\n            errors: {},\n            password: null,\n            password_confirmation: null,\n            successMessage: null\n        }\n    },\n    computed: {\n        hasToken () {\n            return Boolean(this.$route.query.token)\n        }\n    },\n    methods: {\n        getResetLink() {\n            api.post('/api/send-reset-password-link', {email: this.email})\n                .then(response => {\n                    this.successMessage = response.data.status;\n                })\n                .catch(error => {\n                    if (is_validation_error(error)) {\n                        this.errors = error.response.data.errors\n                    }\n                });\n        },\n        submitNewPassword () {\n            const data = {\n                token: this.$route.query.token,\n                email: this.email,\n                password: this.password,\n                password_confirmation: this.password_confirmation,\n            };\n\n            api.post('/api/reset-password', data)\n                .then(() => {\n                    this.$store.dispatch('login', {email: this.email, password: this.password})\n                        .then(() => {\n                            this.$store.dispatch('getCurrentUser');\n                            this.$router.replace('/');\n                        })\n                })\n                .catch(error => {\n                    if (is_validation_error(error)) {\n                        this.errors = error.response.data.errors\n                    }\n                })\n        },\n        submitReset() {\n            if (this.hasToken) {\n                this.submitNewPassword()\n                return;\n            }\n\n            this.getResetLink();\n        }\n    }\n}\n</script>","import { render } from \"./ResetPassword.vue?vue&type=template&id=7cf8b14e\"\nimport script from \"./ResetPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ResetPassword.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}