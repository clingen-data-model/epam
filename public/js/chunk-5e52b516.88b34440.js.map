{"version":3,"sources":["webpack:///./src/views/OnboardingWizard.vue?cf5b","webpack:///./src/views/Coi.vue","webpack:///./src/survey.js","webpack:///./src/views/Coi.vue?de94","webpack:///./src/forms/profile_form.js","webpack:///./src/views/OnboardingWizard.vue","webpack:///./src/components/onboarding/OnboardingSteps.vue","webpack:///./src/components/onboarding/OnboardingSteps.vue?b0b1","webpack:///./src/components/onboarding/InviteRedemptionForm.vue","webpack:///./src/domain/onboarding_service.js","webpack:///./src/components/onboarding/InviteRedemptionForm.vue?0394","webpack:///./src/components/onboarding/AccountCreationForm.vue","webpack:///./src/components/onboarding/AccountCreationForm.vue?c8e2","webpack:///./src/components/onboarding/ProfileForm.vue","webpack:///./src/components/onboarding/ProfileForm.vue?d02e","webpack:///./src/views/OnboardingWizard.vue?1e13"],"names":["class","codeIsValid","title","verifying","groupMemberId","coiTitle","saved","epName","$store","getters","isAuthed","redirectCountdown","$router","go","survey","questions","question","key","name","label","question_text","errors","vertical","type","response","options","option","value","showQuestion","show-cancel","storeResponse","saving","Question","this","validationRules","validation","show","YesNoQuestion","makeQuestion","questionDef","Survey","surveyDefinition","_name","_questions","map","q","rsp","forEach","coi","props","code","required","String","data","coiDef","getResponseTemplate","computed","membership","currentUser","person","memberships","find","m","group","expert_panel","coi_code","id","methods","Array","isArray","indexOf","verifyCode","api","get","then","dispatch","coiData","countDownToRedirect","is_validation_error","commit","setInterval","setTimeout","mounted","render","lookups","ref","institutions","countries","timezones","primaryOccupations","races","ethnicities","genders","profileFields","demographicFields","placeholder","primary_occupation_id","race_id","enthnicity_id","gender_id","getLookups","Object","keys","lkup","kebabCase","i","catch","error","console","href","canContinue","style","currentStepWidth","animationDirection","mode","currentStepComponent","invite","handleCodeVerified","goForward","goBack","to","variant","state","user","first_name","inviter","toUpperCase","$emit","emits","for","inviteCode","checkInvite","fetchInvite","redeemInvite","email","password","password_confirmation","put","redeemInviteForExistingUser","components","InputErrors","default","setup","context","syncCode","deep","emit","status","redeemForExistingUser","label-width-class","createAccount","LoginForm","store","syncEmail","fields","profile","goToNext","page","initProfile","attributes","save","uuid","force","validateProfile","returnValue","institution_id","timezone","stepComponents","InviteRedemptionForm","OnboardingSteps","AccountCreationForm","ProfileForm","stepWidths","currentStepIdx","watch","handler","push","Coi","immediate","length","selectStep","$route","query","currentStepIndex","__scopeId"],"mappings":"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","file":"js/chunk-5e52b516.88b34440.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OnboardingWizard.vue?vue&type=style&index=0&id=a7da407c&lang=postcss&scoped=true\"","<template>\n    <div>\n        <card :title=\"verifying ? `Loading COI Form` : `COI Form not found`\" v-if=\"!codeIsValid\">\n            <div v-if=\"!verifying\">We couldn't find this COI.</div>\n        </card>\n        <card title=\"There's a problem\" v-if=\"!groupMemberId\">\n            We can't see to find your membership id.  Please try refreshing.\n        </card>\n        <card :title=\"coiTitle\"  class=\"max-w-xl mx-auto relative\" v-if=\"codeIsValid\">\n            <div v-if=\"saved\">\n                Thanks for completing the conflict of interest form for {{epName}}!\n                <small v-if=\"$store.getters.isAuthed\">\n                    <p>You'll be redirected back in {{redirectCountdown}} seconds.</p>\n                    <button @click=\"$router.go(-1)\" class=\"text-blue-500\">Go back</button>\n                </small>\n            </div>\n            <div v-else class=\"relative\">\n                <div \n                    v-for=\"question in survey.questions\"\n                    :key=\"question.name\"\n                            :class=\"question.class\"\n                >\n                    <transition name=\"slide-fade-down\">\n                        <input-row\n                            :label=\"question.question_text\"\n                            :errors=\"errors[question.name]\"\n                            :vertical=\"true\"\n                            v-show=\"showQuestion(question)\"\n                        >\n                        \n                            <textarea  v-if=\"question.type == 'text'\"\n                                class=\"w-full h-24\"\n                                v-model=\"response[question.name]\"\n                                :name=\"question.name\"\n                            ></textarea>\n\n                            <div v-if=\"question.type == 'multiple-choice'\">\n                                <label v-for=\"option in question.options\" :key=\"option.value\" class=\"mb-1\">\n                                    <input type=\"radio\" \n                                        :value=\"option.value\" \n                                        :name=\"question.name\"\n                                        v-model=\"response[question.name]\"\n                                    >\n                                    <div>{{option.label}}</div>\n                                </label>\n                            </div>\n\n                            <input \n                                type=\"text\" \n                                v-if=\"question.type == 'string'\"\n                                v-model=\"response[question.name]\"\n                                :name=\"question.name\"\n                            >\n                        </input-row>\n                    </transition>\n                </div>\n                <button-row :show-cancel=\"false\" @submitClicked=\"storeResponse()\">\n                    <slot v-if=\"saving\">\n                        Saving...\n                    </slot>\n                </button-row>\n            </div>\n        </card>\n        <note class=\"container\">GroupMemberId: {{groupMemberId}}</note>\n    </div>\n</template>\n<script>\nimport coiDef from '../../../surveys/coi.json'\nimport Survey from '@/survey'\nimport api from '@/http/api'\nimport is_validation_error from '@/http/is_validation_error';\n\nconst survey = new Survey(coiDef);\n\nexport default {\n    props: {\n        code: {\n            required: true,\n            type: String\n        }\n    },\n    data() {\n        return {\n            coiDef: coiDef,\n            survey: survey,\n            response: survey.getResponseTemplate(),\n            errors: {},\n            epName: null,\n            verifying: false,\n            saved: false,\n            saving: false,\n            redirectCountdown: 5\n        }\n    },\n    computed: {\n        codeIsValid() {\n            return this.epName !== null;\n        },\n        coiTitle() {\n            return survey.name+' for '+this.epName;\n        },\n        groupMemberId() {\n            const membership = this.$store.getters.currentUser.person.memberships.find(m => {\n                return m.group.expert_panel\n                    && m.group.expert_panel.coi_code === this.code\n            });\n\n            if (membership) {\n                return membership.id;\n            }\n\n            return null;\n        }\n    },\n    methods: {\n        showQuestion(question) {\n            if (!question.show) {\n                return true;\n            }\n            if (Array.isArray(question.show.value)) {\n                return question.show.value.indexOf(this.response[question.show.name]) > -1;\n            }\n            return (this.response[question.show.name] == question.show.value);\n        },\n        verifyCode() {\n            this.verifying = true;\n            api.get(`/api/coi/${this.code}/application`)\n                .then(response => {\n                    this.epName = response.data.name\n                })\n                .then(() => {\n                    this.verifying = false;\n                })\n        },\n        async storeResponse() {\n            this.saving = true;\n            try {\n                await this.$store.dispatch(\n                    'storeCoi', \n                    {\n                        code: this.code, \n                        groupMemberId: this.groupMemberId,\n                        coiData: this.response, \n                    }\n                );\n                this.saved = true;\n                this.$store.dispatch('forceGetCurrentUser');\n                if (this.$store.getters.isAuthed) {\n                    this.countDownToRedirect()\n                }\n            } catch (error) {\n                if (is_validation_error(error)) {\n                    this.errors = error.response.data.errors\n                } else {\n                    this.$store.commit('pushError', `You can not complete a COI for ${this.epName} because you are not a member.`)\n                }\n            }\n            this.saving = false;\n        },\n        countDownToRedirect () {\n            setInterval(() => {this.redirectCountdown--}, 1000)\n            setTimeout(() => {\n                this.$router.go(-1)\n            }, 5000)\n        }\n    },\n    async mounted() {\n        this.verifyCode();\n        await this.$store.dispatch('getCurrentUser')\n    }\n}\n</script>","class Question {\n    constructor(question) {\n        this.question_text = question.question;\n        this.name = question.name;\n        this.options = question.options;\n        this.validationRules = question.validation;\n        this.type = question.type;\n        this.show = question.show;\n        this.class = question.class;\n    }\n}\n\nclass YesNoQuestion extends Question {\n    constructor(question) {\n        super(question)\n        this.type = 'multiple-choice';\n        this.options = [{\n                label: 'Yes',\n                value: 1\n            },\n            {\n                label: 'No',\n                value: 0\n            }\n        ];\n    }\n\n\n}\n\nfunction makeQuestion(questionDef) {\n    if (questionDef.type == 'yes-no') {\n        return new YesNoQuestion(questionDef);\n    }\n\n    return new Question(questionDef);\n}\n\nclass Survey {\n    constructor(surveyDefinition) {\n        this._name = surveyDefinition.name;\n        this._questions = surveyDefinition.questions.map(q => makeQuestion(q));\n\n    }\n\n    get name() {\n        return this._name;\n    }\n\n    get questions() {\n        return this._questions\n    }\n\n    responseIsValid(response) {\n        response;\n        return true;\n    }\n\n    getResponseTemplate() {\n        const rsp = {};\n        this.questions.forEach(q => {\n            rsp[q.name] = null\n        });\n        return rsp;\n\n    }\n}\n\nexport default Survey","import { render } from \"./Coi.vue?vue&type=template&id=6a4bc61e\"\nimport script from \"./Coi.vue?vue&type=script&lang=js\"\nexport * from \"./Coi.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import {ref, computed} from 'vue';\nimport api from '@/http/api';\nimport {kebabCase} from '@/utils'\n\nexport const lookups = ref({\n    institutions:[],\n    countries:[],\n    timezones:[],\n    primaryOccupations:[],\n    races:[],\n    ethnicities:[],\n    genders:[],\n});\n\nexport const profileFields = computed(() => [\n    { name: 'first_name'},\n    { name: 'last_name'},\n    { name: 'email'},\n    {\n        name: 'institution_id',\n        label: 'Institution',\n        type: 'select',\n        options: lookups.value.institutions\n    },\n    { name: 'credentials', type: 'textarea'},\n    { name: 'biography', type: 'textarea'},\n    { name: 'phone'},\n    { \n        name: 'timezone', \n        label: 'Timezone',\n        type: 'select', \n        options: lookups.value.timezones\n    },\n]);\n\nexport const demographicFields = computed(() => [\n    { \n        name: 'country_id', \n        label: 'Country',\n        type: 'select', \n        options: lookups.value.countries\n    },\n    {\n        name: 'primary_occupation_id',\n        label: 'Primary Occupation',\n        type: 'select',\n        options: lookups.value.primaryOccupations\n    },\n    {\n        name: 'primary_occupation_other',\n        label: ' ',\n        type: 'text',\n        placeholder: 'Details',\n        show: (data) => {\n            return data.primary_occupation_id == 100\n        }\n    },\n    {\n        name: 'race_id',\n        label: 'Race',\n        type: 'select',\n        options: lookups.value.races\n    },\n    {\n        name: 'race_other',\n        label: ' ',\n        type: 'text',\n        placeholder: 'Details',\n        show: (data) => {\n            return data.race_id == 100\n        }\n    },\n    {\n        name: 'ethnicity_id',\n        label: 'Ethnicity',\n        type: 'select',\n        options: lookups.value.ethnicities\n    },\n    {\n        name: 'enthnicity_other',\n        label: ' ',\n        type: 'text',\n        placeholder: 'Details',\n        show: (data) => {\n            return data.enthnicity_id == 100\n        }\n    },\n    {\n        name: 'gender_id',\n        label: 'Gender',\n        type: 'select',\n        options: lookups.value.genders\n    },\n    {\n        name: 'gender_other',\n        label: ' ',\n        type: 'text',\n        placeholder: 'Details',\n        show: (data) => {\n            return data.gender_id == 100\n        }\n    },\n]);\n\nexport const getLookups = () => {\n    Object.keys(lookups.value).forEach(lkup => {\n        if (lkup == 'timezones') {\n            api.get(`/api/people/lookups/timezones`)\n                .then(response => {\n                    lookups.value.timezones = response.data.data.map(i => ({value: i, label: i}));\n                })\n\n            return;\n        }\n        api.get(`/api/people/lookups/${kebabCase(lkup)}`)\n            .then(response => {\n                lookups.value[lkup] = response.data.data.map(i => ({value: i.id, label: i.name}));\n            })\n            .catch(error => console.error(error));\n    })\n}\n\nexport default {\n    profileFields,\n    demographicFields,\n    lookups,\n    getLookups,\n}","<template>\n    <div>\n        <pre>{{}}</pre>\n        <div class=\"flex justify-center\">\n            <static-alert variant=\"info\" v-if=\"!canContinue\" class=\"lg:w-1/4 md:w-1/2\">\n                <p>Hi, {{this.$store.state.user.name}}.</p> \n                \n                <p>\n                    It looks like you've alreay redeemed your invite.\n                </p>\n\n                <p>\n                    <a href=\"/\">Return to your dashboard</a> to see a list of your groups, pending COIs and more.\n                </p>\n            </static-alert>\n            <div v-else>\n                <div class=\"onboarding-container\" :style=\"`width: ${currentStepWidth}`\">\n                    <keep-alive>\n                        <transition :name=\"animationDirection\" mode=\"out-in\">        \n                            <component \n                                :is=\"currentStepComponent\" \n                                v-bind:invite=\"invite\" \n                                v-bind:person=\"invite.person\"\n                                v-bind:code=\"invite.coi_code\"\n                                ref=\"stepForm\"\n                                @codeverified=\"handleCodeVerified\"\n                                @ok=\"goForward\"\n                                @saved=\"goForward\"\n                                @back=\"goBack\"\n                            ></component>\n                        </transition>\n                    </keep-alive>\n                </div>\n                <p>\n                    <router-link class=\"block link pt-2\" :to=\"{name: 'login'}\">&lt; Log In</router-link>\n                </p>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport OnboardingSteps from '@/components/onboarding/OnboardingSteps'\nimport InviteRedemptionForm from '@/components/onboarding/InviteRedemptionForm'\nimport AccountCreationForm from '@/components/onboarding/AccountCreationForm'\nimport ProfileForm from '@/components/onboarding/ProfileForm'\nimport Person from '@/domain/person'\nimport Coi from '@/views/Coi'\n\nconst stepComponents = [\n    InviteRedemptionForm,\n    OnboardingSteps,\n    AccountCreationForm,\n    ProfileForm,\n];\n\nconst stepWidths = [\n    '20rem',\n    '20rem',\n    '20rem',\n    '40rem',\n    '40rem'\n];\n\nexport default {\n    name: 'OverviewWizard',\n    components: {\n        InviteRedemptionForm,\n        OnboardingSteps,\n        AccountCreationForm,\n        ProfileForm,\n    },\n    props: {\n        code: {\n            required: false,\n        }\n    },\n    data() {\n        return {\n            animationDirection: 'forward',\n            currentStepIdx: 0,\n            invite: {\n                person: new Person({})\n            },\n        }\n    },\n    computed: {\n        currentStepComponent () {\n            return stepComponents[this.currentStepIdx]\n        },\n        currentStepWidth () {\n            return stepWidths[this.currentStepIdx]\n        },\n        canContinue () {\n            return !this.$store.getters.isAuthed\n                || (\n                    this.$store.getters.isAuthed && \n                    !this.$store.getters.currentUser.person.timezone\n                );\n        }\n\n    },\n    watch: {\n        invite: {\n            deep: true,\n            handler: function (to) {\n                if (to.inviter) {\n                    stepComponents.push(Coi)\n                }\n            }\n        },\n        code: {\n            immediate: true,\n            handler: function (to) {\n                this.invite.code = to\n            }\n        },\n    },\n    methods: {\n        handleCodeVerified (invite) {\n            this.invite = invite;\n            this.goForward();\n        },\n        goBack () {\n            this.animationDirection = 'fade';\n            if (this.currentStepIdx == 0) {\n                // this.currentStepIdx = stepComponents.length-1;\n                return;\n            }\n            this.currentStepIdx -= 1;\n        },\n        goForward() {\n            this.animationDirection = 'fade';\n            if (this.currentStepIdx == stepComponents.length-1) {\n                this.$router.push({name: 'Dashboard'})\n                return;\n            }\n            this.currentStepIdx += 1;\n        },\n        selectStep() {\n            if (!this.invite.id) {\n                this.currentStepIdx = 0;\n                if (this.$route.query.code) {\n                    this.invite.code = this.$route.query.code;\n                }\n                return;\n            }\n            if (this.invite.id) {\n                if (this.$store.state.user.id) {\n                    this.currentStepIndex = 3\n                    return\n                }\n            }\n        }\n    },\n    mounted () {\n        // this.selectStep();\n    }\n}\n</script>\n<style lang=\"postcss\" scoped>\n    .onboarding-container {\n        @apply shadow-lg border px-4 py-8 mx-auto mt-12 border-gray-300;\n        transition: all .3s;\n        overflow: hidden;\n    }\n    .dev-nav-button {\n        @apply mt-12 p-2 bg-pink-100 mb-8 border border-pink-300;\n    }\n    .forwards-enter-active,\n    .forwards-leave-active,\n    .backwards-enter-active,\n    .backwards-leave-active {\n        transition: all 0.3s ease-out;\n    }\n    \n    .forwards-enter-from{\n        transform: translateX(20rem);\n        /* opacity: 0; */\n    }\n    .forwards-leave-to\n    {\n        transform: translateX(-20rem);\n        /* opacity: 0; */\n    }\n\n    .backwards-enter-from {\n        transform: translateX(-40rem)\n        /* opacity: 0; */\n    }\n    .backwards-leave-to {\n        transform: translateX(40rem)\n        /* opacity: 0; */\n    }\n</style>","<template>\n  <div>\n    <p class=\"text-lg text-center font-bold\">\n        Hi {{invite.first_name}}.\n        <br>\n        You've been invited to join ClinGen<span v-if=\"invite.inviter\">\n          as part of the {{ invite.inviter.name }}\n          {{ invite.inviter.type.name.toUpperCase() }}.</span\n        ><span v-else>.</span>\n    </p>\n\n    <p>There are just a few steps to get you set up:</p>\n    <ol class=\"list-decimal pl-8\">\n      <li>Create an account.</li>\n      <li>Fill out your profile.</li>\n      <li>Share some demographic information.</li>\n      <li v-if=\"invite.inviter\">Complete a Conflict of Interest Survey.</li>\n    </ol>\n    <p>\n      <button class=\"btn btn-lg blue w-full mt-4\" @click=\"$emit('ok')\">\n        Get Started\n      </button>\n    </p>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"OnboardingSteps\",\n  props: {\n      invite: {\n          type: Object,\n          required: true\n      }\n  },\n  emits: ['ok'],\n  data() {\n    return {};\n  },\n  computed: {},\n  methods: {},\n};\n</script>","import { render } from \"./OnboardingSteps.vue?vue&type=template&id=48b6bb58\"\nimport script from \"./OnboardingSteps.vue?vue&type=script&lang=js\"\nexport * from \"./OnboardingSteps.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n    <div class=\"w-64 mx-auto\">\n        <label for=\"invite-code-input\" class=\"text-lg block\">\n            Enter your registration code:\n        </label>\n        <input type=\"text\"\n            id=\"invite-code-input\"\n            v-model=\"inviteCode\" \n            placeholder=\"XXXXXXXXXX\" \n            class=\"w-full\"\n        >\n        <input-errors :errors=\"errors\"></input-errors>\n        <button \n            class=\"btn blue btn-lg block mt-2 w-full\" \n            @click=\"checkInvite\"\n        >\n            Submit\n        </button>\n    </div>\n</template>\n<script>\nimport { ref, toRefs, watch } from 'vue'\nimport {fetchInvite} from '@/domain/onboarding_service'\nimport InputErrors from '@/components/forms/InputErrors'\nimport isValidationError from '@/http/is_validation_error'\n\nexport default {\n    name: 'InviteRedemptionCode',\n    components: {\n        InputErrors\n    },\n    props: {\n        code: {\n            required: false\n        },\n        invite: {\n            type: Object,\n            required: false,\n            default: () => ({})\n        }\n    },\n    data() {\n        return {\n\n        }\n    },\n    setup(props, context) {\n\n        const {invite} = toRefs(props);\n        let inviteCode = ref(null);\n        let errors = ref([]);\n\n        const syncCode = () => {\n            inviteCode.value = props.invite.code\n        }\n\n        watch(invite, () => {\n            syncCode()\n        }, {\n            deep: true\n        })\n\n        watch(inviteCode, () => {\n            errors.value = [];\n        });\n\n        const checkInvite = async () => {\n            try {\n                const invite = await fetchInvite(inviteCode.value);\n                context.emit('codeverified', invite);\n            } catch (error) {\n                if (error.response.status == 404) {\n                    errors.value = ['The code you entered is not valid'];\n                    return;\n                }\n                if (isValidationError(error)) {\n                    errors.value = error.response.data.errors.code\n                }\n            }\n        }\n\n        return {\n            inviteCode,\n            errors,\n            checkInvite,\n            syncCode,\n        }\n   \n    },\n    computed: {\n\n    },\n    methods: {\n    },\n    mounted() {\n        this.syncCode();\n    }\n}\n</script>","import api from '@/http/api'\n// import queryStringFromParams from '@/http/query_string_from_params'\n\nexport const validateCode = async (code) => {\n    try {\n        await api.get(`/api/people/invites/${code}`)\n        return true;\n    } catch(error) {\n        return false;\n    }\n}\n\nexport const fetchInvite = async (code) => {\n    return await api.get(`/api/people/invites/${code}`)\n        .then(response => {\n            return response.data.data;\n        })\n}\n\nexport const redeemInvite = async (invite, email, password, password_confirmation) => {\n    return api.put(`/api/people/invites/${invite.code}`, {email, password, password_confirmation})\n}\n\nexport const redeemInviteForExistingUser = async (invite) => {\n    return api.put(`/api/people/existing-user/invites/${invite.code}`);\n}\n\nexport default {\n    fetchInvite\n}","import { render } from \"./InviteRedemptionForm.vue?vue&type=template&id=fb439528\"\nimport script from \"./InviteRedemptionForm.vue?vue&type=script&lang=js\"\nexport * from \"./InviteRedemptionForm.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n    <div>\n        <div v-if=\"invite.person.user.id\">\n            <login-form @authenticated=\"redeemForExistingUser\"></login-form>\n        </div>\n        <div v-else>\n            <p class=\"text-lg\">Create your account</p>\n            <input-row label=\"Email\" \n                v-model=\"email\" \n                :errors=\"errors.email\" \n                label-width-class=\"w-24\"\n            ></input-row>\n            <input-row label=\"Password\" \n                v-model=\"password\" type=\"password\" \n                :errors=\"errors.password\" \n                label-width-class=\"w-24\"\n            ></input-row>\n            <input-row label=\"Confirm Password\" \n                v-model=\"password_confirmation\" type=\"password\" \n                :errors=\"errors.password_confirmation\" \n                label-width-class=\"w-24\"\n            ></input-row>\n            <div class=\"flex flex-row-reverse\">\n                <button class=\"btn blue\" @click=\"createAccount\">Next</button>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport {ref, onMounted} from 'vue'\nimport {redeemInvite, redeemInviteForExistingUser} from '@/domain/onboarding_service'\nimport isValidationError from '@/http/is_validation_error'\nimport { useStore } from 'vuex'\nimport LoginForm from '@/components/LoginForm'\n\nexport default {\n    name: 'AccountCreationForm',\n    components: {\n        LoginForm\n    },\n    props: {\n        invite: {\n            type: Object,\n            required: true\n        }\n    },\n    setup (props, context) {\n        const store = useStore();\n        let errors = ref({});\n        let email = ref(null);\n        let password = ref(null);\n        let password_confirmation = ref(null);\n\n        const createAccount = async () => {\n            try {\n                await redeemInvite(props.invite, email.value, password.value, password_confirmation.value);\n                await store.dispatch('login', {email: email.value, password: password.value})\n                context.emit('saved')\n            } catch (error) {\n                if (isValidationError(error )) {\n                    errors.value = error.response.data;\n                }\n            }\n        }\n\n        const redeemForExistingUser = async () => {\n            try {\n                await redeemInviteForExistingUser(props.invite);\n                context.emit('saved')\n            } catch (error) {\n                if (isValidationError(error)) {\n                    errors.value = error.response.data\n                }\n            }\n        }\n\n        const syncEmail = () => {\n            email.value = props.invite.person.email\n        }\n\n        onMounted(() => syncEmail());\n\n        return {\n            errors,\n            email,\n            password,\n            password_confirmation,\n            createAccount,\n            redeemForExistingUser,\n        }\n    }\n}\n</script>","import { render } from \"./AccountCreationForm.vue?vue&type=template&id=6e247082\"\nimport script from \"./AccountCreationForm.vue?vue&type=script&lang=js\"\nexport * from \"./AccountCreationForm.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n    <div>\n        <p class=\"text-lg font-bold\">{{title}}</p>\n        <data-form \n            :fields=\"fields\" \n            v-model=\"profile\" \n            :errors=\"errors\"\n        ></data-form>\n        <div class=\"flex flex-row-reverse justify-between\">\n            <button class=\"btn blue\" @click=\"goToNext\">Next &gt;</button>\n            <button class=\"link\" @click=\"page = 'profile'\" v-if=\"page == 'demographics'\">&lt; Back to profile</button>\n        </div>\n        <dev-component class=\"mt-4\">\n            <collapsible>{{person}}</collapsible>\n        </dev-component>\n    </div>\n</template>\n<script>\nimport isValidationError from '@/http/is_validation_error'\nimport {onMounted} from 'vue'\nimport {getLookups, profileFields, demographicFields} from '@/forms/profile_form';\n\nexport default {\n    name: 'ProfileForm',\n    props: {\n        person: {\n            type: Object,\n            required: true\n        }\n    },\n    data() {\n        return {\n            errors: {},\n            profile: {},\n            page: 'profile'\n        }\n    },\n    computed: {\n        fields () {\n            return (this.page == 'profile') ? this.profileFields : this.demographicFields;\n        },\n        title () {\n            return this.page == 'profile' ? 'Please fill out your profile' : 'Please share your demographic information.'\n        }\n    },\n    methods: {\n        initProfile () {\n            this.profile = {...this.$store.getters['people/currentItem'].attributes};\n        },\n        async save () {\n            try {\n                await this.$store.dispatch(\n                        'people/updateProfile', \n                        {uuid: this.person.uuid, attributes: this.profile}\n                    )                \n                    .then(() => {\n                        this.$store.dispatch('getCurrentUser', {force: true})\n                    })\n                    \n                this.$emit('saved');\n            } catch (error) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors;\n                }\n            }\n        },\n        goToNext() {\n            if (this.page == 'profile') {\n                if (!this.validateProfile()) {\n                    return;\n                }\n                this.page = 'demographics';\n                return;\n            }\n            this.save();\n        },\n        validateProfile() {\n            this.errors = {};\n            let returnValue = true;\n            if (!this.profile.institution_id) {\n                this.errors.institution_id = ['This field is required.']\n                returnValue = false;\n            }\n            if (!this.profile.timezone) {\n                this.errors.timezone = ['This field is required'];\n                returnValue = false;\n            }\n\n            return returnValue\n        }\n    },\n    setup () {\n        onMounted(() => getLookups());\n\n        return {\n            profileFields,\n            demographicFields,\n            getLookups,\n        }\n    },\n    async mounted () {\n        await this.$store.dispatch('people/getPerson', {uuid: this.person.uuid})\n        this.initProfile()\n    }\n}\n</script>","import { render } from \"./ProfileForm.vue?vue&type=template&id=6b9fb0a6\"\nimport script from \"./ProfileForm.vue?vue&type=script&lang=js\"\nexport * from \"./ProfileForm.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./OnboardingWizard.vue?vue&type=template&id=a7da407c&scoped=true\"\nimport script from \"./OnboardingWizard.vue?vue&type=script&lang=js\"\nexport * from \"./OnboardingWizard.vue?vue&type=script&lang=js\"\n\nimport \"./OnboardingWizard.vue?vue&type=style&index=0&id=a7da407c&lang=postcss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-a7da407c\"\n\nexport default script"],"sourceRoot":""}