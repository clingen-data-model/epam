(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e9c7f30"],{5257:function(e,t,n){"use strict";var r=n("5530"),a=(n("caad"),n("2532"),n("b64b"),n("ac1f"),n("5319"),n("4de4"),n("d3b7"),n("6c02")),o=n("7a23");t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(a["d"])(),n=Object(a["c"])();e||(console.log('Warning: defaultSort is deprecated.  Please provide a sort object: {field: "fieldname", desc: boolean}'),e=e||{field:"name",desc:!1});var c=Object(o["computed"])({immediate:!0,get:function(){return Object.keys(n.query).includes("sort-field")?{field:n.query["sort-field"],desc:Boolean(parseInt(n.query["sort-desc"]))}:e},set:function(e){var a={"sort-field":e.field,"sort-desc":e.desc?1:0},o=Object(r["a"])(Object(r["a"])({},n.query),a);t.replace({path:n.path,query:o})}}),l=Object(o["computed"])({set:function(e){var a=n.query,o=n.path,c=Object(r["a"])({},a);e?c=Object(r["a"])(Object(r["a"])({},a),{filter:e}):delete c.filter,t.replace({path:o,query:c})},get:function(){return n.query.filter},immediate:!0});return{sort:c,filter:l}}},"8b14":function(e,t,n){"use strict";n("eb8e")},df40:function(e,t,n){"use strict";n.r(t);n("4de4"),n("d3b7"),n("4e82"),n("b0c0");var r=n("7a23"),a=Object(r["createElementVNode"])("h1",null,"Mail Log",-1),o={class:"mb-2"},c=Object(r["createTextVNode"])("Filter: "),l={key:0},i=["onClick"];function s(e,t,n,s,d,u){var b=Object(r["resolveComponent"])("data-table"),f=Object(r["resolveComponent"])("mail-detail"),m=Object(r["resolveComponent"])("modal-dialog"),j=Object(r["resolveComponent"])("custom-email-form");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[a,Object(r["createElementVNode"])("div",o,[c,Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return s.filter=e})},null,512),[[r["vModelText"],s.filter]])]),Object(r["createVNode"])(b,{fields:d.fields,data:d.data,"filter-term":s.filter,"row-class":"cursor-pointer","row-click-handler":u.showMailDetail,sort:s.sort,"onUpdate:sort":t[1]||(t[1]=function(e){return s.sort=e})},{"cell-to":Object(r["withCtx"])((function(e){var t=e.item;return[Object(r["createElementVNode"])("ul",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(t.to,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:e.address},[e.name?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",l,Object(r["toDisplayString"])(e.name)+" - ",1)):Object(r["createCommentVNode"])("",!0),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.address),1)])})),128))])]})),"cell-actions":Object(r["withCtx"])((function(e){var t=e.item;return[Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("button",{class:"btn btn-xs",onClick:Object(r["withModifiers"])((function(e){return u.initResend(t)}),["stop"])},"Resend",8,i)])]})),_:1},8,["fields","data","filter-term","row-click-handler","sort"]),(Object(r["openBlock"])(),Object(r["createBlock"])(r["Teleport"],{to:"body"},[Object(r["createVNode"])(m,{modelValue:d.showDetail,"onUpdate:modelValue":t[3]||(t[3]=function(e){return d.showDetail=e})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{mail:d.currentEmail,onResend:t[2]||(t[2]=function(e){return u.initResend(d.currentEmail)})},null,8,["mail"])]})),_:1},8,["modelValue"]),Object(r["createVNode"])(m,{title:"Resend Email",modelValue:d.showResendDialog,"onUpdate:modelValue":t[4]||(t[4]=function(e){return d.showResendDialog=e})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(j,{"mail-data":d.currentEmail,onSent:u.cleanupResend,onCanceled:u.cleanupResend},null,8,["mail-data","onSent","onCanceled"])]})),_:1},8,["modelValue"])]))])}var d=n("1da1"),u=(n("96cf"),n("b64b"),n("a15b"),n("f96b")),b=n("e328"),f=n("5257"),m={props:{},setup:function(){var e=Object(f["a"])({field:"created_at",desc:!0}),t=e.sort,n=e.filter;return{sort:t,filter:n}},data:function(){return{showDetail:!1,fields:[{name:"to",sortable:!0,type:Array,resolveValue:function(e){var t=Object.keys(e.to);return 0==t.length?"":1==t.length?t[0]:t.join("; ")}},{name:"subject",sortable:!0,type:String},{name:"created_at",label:"Sent at",sortable:!0,resolveValue:function(e){return Object(b["c"])(e.created_at)},resolveSort:function(e){return e.created_at},type:String},{name:"actions",label:"",sortable:!1}],data:[],currentEmail:{},showResendDialog:!1}},computed:{},methods:{getMailLog:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u["a"].get("/api/mail-log").then((function(t){e.data=t.data}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),alert(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},showMailDetail:function(e){this.currentEmail=e,this.showDetail=!0,console.log(this.currentEmail)},initResend:function(e){this.currentEmail=e,this.showResendDialog=!0},cleanupResend:function(){this.currentEmail={},this.showResendDialog=!1,this.getMailLog()}},mounted:function(){this.getMailLog()}},j=(n("8b14"),n("6b0d")),p=n.n(j);const O=p()(m,[["render",s]]);t["default"]=O},eb8e:function(e,t,n){}}]);
//# sourceMappingURL=chunk-7e9c7f30.acd09d68.js.map