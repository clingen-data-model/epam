(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["application-detail~group-detail","log-entry-form"],{"14ed":function(e,t,n){},"1f66":function(e,t,n){},2242:function(e,t,n){"use strict";var o=n("7a23"),r=function(e){return Object(o["pushScopeId"])("data-v-3016494e"),e=e(),Object(o["popScopeId"])(),e},a=r((function(){return Object(o["createElementVNode"])("h3",{class:"pb-2"},"EP Progress",-1)})),c={class:"flex flex-row space-x-1"};function i(e,t,n,r,i,l){var u=Object(o["resolveComponent"])("progress-step");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[a,Object(o["createElementVNode"])("div",c,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(l.steps,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:e,step:e,application:n.application},null,8,["step","application"])})),128))])])}var l={class:"flex-1"},u={class:"flex flex-row-reverse justify-between bg-transparent mt-1"},s={key:0};function p(e,t,n,r,a,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["progress-step",c.displayClass])},null,2),Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])({"-mr-10":!c.isLastStep})},Object(o["toDisplayString"])(c.approvalDate),3),c.isFirstStep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,Object(o["toDisplayString"])(c.dateInitiated),1)):Object(o["createCommentVNode"])("",!0)])])}n("a9e3"),n("a15b");var d=n("e328"),b={props:{step:{type:Number,required:!0},application:{type:Object,required:!0}},data:function(){return{}},computed:{dateInitiated:function(){return Object(d["b"])(this.application.date_initiated)},approvalDate:function(){return this.application.approvalDateForStep(this.step)?Object(d["b"])(this.application.approvalDateForStep(this.step)):" "},displayClass:function(){var e=[];return this.isApproved?e.push("approved"):this.isCurrentStep&&e.push("active"),this.isFirstStep&&e.push("rounded-l"),this.isLastStep&&e.push("rounded-r"),e.join(" ")},isCurrentStep:function(){return this.application.current_step==this.step},isApproved:function(){return this.application.stepIsApproved(this.step)},isFirstStep:function(){return 1==this.step},isLastStep:function(){var e=Math.max.apply(Math,this.application.steps);return this.step==e}},methods:{}},m=(n("b89c"),n("6b0d")),f=n.n(m);const O=f()(b,[["render",p]]);var j=O,h={components:{ProgressStep:j},props:{application:{required:!0,type:Object}},computed:{steps:function(){return this.application.steps}}};n("b12c");const v=f()(h,[["render",i],["__scopeId","data-v-3016494e"]]);t["a"]=v},"268c":function(e,t,n){"use strict";n("b0c0");var o=n("7a23"),r={key:0},a={key:0},c=Object(o["createTextVNode"])(" Affiliation ID "),i=Object(o["createTextVNode"])("admin-only"),l={key:0},u={key:1,class:"text-gray-400"},s={key:1},p={key:2},d=Object(o["createTextVNode"])(" Status: "),b=Object(o["createTextVNode"])("admin-only"),m=Object(o["createTextVNode"])(" Parent group: "),f=Object(o["createTextVNode"])("admin-only");function O(e,t,n,O,j,h){var v=Object(o["resolveComponent"])("input-row"),g=Object(o["resolveComponent"])("dictionary-row"),w=Object(o["resolveComponent"])("note");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[h.canSetType?(Object(o["openBlock"])(),Object(o["createBlock"])(v,{key:0,modelValue:h.group.group_type_id,"onUpdate:modelValue":t[0]||(t[0]=function(e){return h.group.group_type_id=e}),errors:O.errors.group_type_id,type:"select",options:h.typeOptions,label:"Type"},null,8,["modelValue","errors","options"])):(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:1,label:"Type"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(h.typeDisplayName),1)]})),_:1})),Object(o["createVNode"])(o["Transition"],{name:"slide-fade-down",mode:"out-in"},{default:Object(o["withCtx"])((function(){return[h.group.group_type_id>2&&h.group.expert_panel?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[Object(o["createVNode"])(v,{label:"Long Base Name",modelValue:h.group.expert_panel.long_base_name,"onUpdate:modelValue":[t[1]||(t[1]=function(e){return h.group.expert_panel.long_base_name=e}),h.emitUpdate],placeholder:"Long base name",errors:O.errors.long_base_name,"input-class":"w-full"},null,8,["modelValue","onUpdate:modelValue","errors"]),Object(o["createVNode"])(v,{label:"Short Base Name",modelValue:h.group.expert_panel.short_base_name,"onUpdate:modelValue":[t[2]||(t[2]=function(e){return h.group.expert_panel.short_base_name=e}),h.emitUpdate],placeholder:"Short base name",errors:O.errors.short_base_name,"input-class":"w-full"},null,8,["modelValue","onUpdate:modelValue","errors"]),e.hasAnyPermission(["groups-manage"])?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["createVNode"])(v,{label:"Affiliation ID",modelValue:h.group.expert_panel.affiliation_id,"onUpdate:modelValue":[t[3]||(t[3]=function(e){return h.group.expert_panel.affiliation_id=e}),h.emitUpdate],placeholder:h.affiliationIdPlaceholder,errors:O.errors.affiliation_id,"input-class":"w-full"},{label:Object(o["withCtx"])((function(){return[c,Object(o["createVNode"])(w,null,{default:Object(o["withCtx"])((function(){return[i]})),_:1})]})),_:1},8,["modelValue","placeholder","errors","onUpdate:modelValue"])])):(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:1,label:"Affiliation ID"},{default:Object(o["withCtx"])((function(){return[h.group.expert_panel.affiliation_id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",l,Object(o["toDisplayString"])(h.group.expert_panel.affiliation_id),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",u,Object(o["toDisplayString"])("Not yet assigend")))]})),_:1}))])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,[Object(o["createVNode"])(v,{modelValue:h.group.name,"onUpdate:modelValue":[t[4]||(t[4]=function(e){return h.group.name=e}),h.emitUpdate],placeholder:"Name",label:"Name","input-class":"w-full",errors:O.errors.name},null,8,["modelValue","errors","onUpdate:modelValue"])]))]})),_:1}),e.hasPermission("groups-manage")?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",p,[Object(o["createVNode"])(v,{modelValue:h.group.group_status_id,"onUpdate:modelValue":[t[5]||(t[5]=function(e){return h.group.group_status_id=e}),h.emitUpdate],type:"select",options:h.statusOptions,errors:O.errors.group_status_id},{label:Object(o["withCtx"])((function(){return[d,Object(o["createVNode"])(w,null,{default:Object(o["withCtx"])((function(){return[b]})),_:1})]})),_:1},8,["modelValue","options","errors","onUpdate:modelValue"]),Object(o["createVNode"])(v,{modelValue:h.group.parent_id,"onUpdate:modelValue":[t[6]||(t[6]=function(e){return h.group.parent_id=e}),h.emitUpdate],type:"select",options:h.parentOptions,errors:O.errors.parent_id},{label:Object(o["withCtx"])((function(){return[m,Object(o["createVNode"])(w,null,{default:Object(o["withCtx"])((function(){return[f]})),_:1})]})),_:1},8,["modelValue","options","errors","onUpdate:modelValue"])])):Object(o["createCommentVNode"])("",!0)])}var j=n("1da1"),h=(n("96cf"),n("d81d"),n("07ac"),n("d3b7"),n("159b"),n("4de4"),n("3ca3"),n("ddb0"),n("2ef0")),v=n("db04"),g=n("ae23"),w=n("4a91"),y=n("a75a"),V={name:"GroupForm",emits:["canceled","saved","update"],data:function(){return{groupTypes:[{id:1,fullname:"Working Group"},{id:2,fullname:"Clinical Domain Working Group"},{id:3,fullname:"GCEP"},{id:4,fullname:"VCEP"}],groupStatuses:w.groups.statuses,newGroup:new g["a"],parents:[]}},computed:{group:{get:function(){var e=this.$store.getters["groups/currentItem"];return e||this.newGroup},set:function(e){try{this.$store.commit("groups/addItem",e)}catch(t){this.newGroup=e}}},statusOptions:function(){var e=this;return Object.values(this.groupStatuses).map((function(t){return{value:t.id,label:e.titleCase(t.name)}}))},typeOptions:function(){return this.groupTypes.map((function(e){return{value:e.id,label:e.fullname}}))},canSetType:function(){return this.hasPermission("groups-manage")&&!this.group.id},typeDisplayName:function(){return this.group.type?this.group.type.name?this.group.type.id<3?this.group.type.name.toUpperCase():this.group.expert_panel.type.name.toUpperCase():null:"🐇🥚"},affiliationIdPlaceholder:function(){return 5e4},cdwgs:function(){return this.$store.getters["cdwgs/all"]},namesDirty:function(){return this.group.expert_panel.isDirty("long_base_name")||this.group.expert_panel.isDirty("short_base_name")},affiliationIdDirty:function(){return console.log({new:this.group.expert_panel.attributes.affiliation_id,original:this.group.expert_panel.original.affiliation_id}),this.group.expert_panel.isDirty("affiliation_id")},parentOptions:function(){var e=[{value:0,label:"None"}];return this.parents.filter((function(e){return e.type.can_be_parent})).forEach((function(t){e.push({value:t.id,label:t.displayName})})),Object(h["sortBy"])(e,"label")}},methods:{save:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.resetErrors(),t.prev=1,!e.group.id){t.next=7;break}return t.next=5,e.updateGroup();case 5:return e.$emit("saved"),t.abrupt("return");case 7:return t.next=9,e.createGroup().then((function(e){return e.data.data}));case 9:n=t.sent,e.$emit("saved"),e.$store.commit("pushSuccess","Group created."),e.$router.push({name:"AddMember",params:{uuid:n.uuid}}),t.next=19;break;case 15:throw t.prev=15,t.t0=t["catch"](1),Object(v["b"])(t.t0)&&(e.errors=t.t0.response.data.errors),t.t0;case 19:case"end":return t.stop()}}),t,null,[[1,15]])})))()},createGroup:function(){var e=this.group.attributes,t=e.name,n=e.parent_id,o=e.group_type_id,r=e.group_status_id,a=this.group.expert_panel.short_base_name;return null===t&&this.group.expert_panel&&(t=this.group.expert_panel.long_base_name),this.$store.dispatch("groups/create",{name:t,parent_id:n,group_type_id:o,group_status_id:r,short_base_name:a})},updateGroup:function(){var e=[];return e.push(this.saveGroupData()),this.group.expert_panel&&e.push(this.saveEpData()),Promise.all(e)},saveGroupData:function(){var e=[];return this.group.isDirty("parent_id")&&e.push(this.saveParent()),this.group.isDirty("name")&&e.push(this.saveName()),this.group.isDirty("group_status_id")&&e.push(this.saveStatus()),Promise.all(e)},saveEpData:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n,o,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],e.namesDirty&&(o=e.group.expert_panel,r=o.long_base_name,a=o.short_base_name,n.push(e.submitFormData({method:"put",url:"/api/groups/".concat(e.group.uuid,"/expert-panel/name"),data:{long_base_name:r,short_base_name:a}}))),e.affiliationIdDirty&&n.push(e.submitFormData({method:"put",url:"/api/groups/".concat(e.group.uuid,"/expert-panel/affiliation-id"),data:{affiliation_id:e.group.expert_panel.affiliation_id}})),t.next=5,Promise.all(n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))()},isDirty:function(e){return this.group[e]!=this.group[e]},saveParent:function(){return this.submitFormData({method:"put",url:"/api/groups/".concat(this.group.uuid,"/parent"),data:{parent_id:this.group.parent_id}})},saveName:function(){return this.submitFormData({method:"put",url:"/api/groups/".concat(this.group.uuid,"/name"),data:{name:this.group.name}})},saveStatus:function(){return this.submitFormData({method:"put",url:"/api/groups/".concat(this.group.uuid,"/status"),data:{status_id:this.group.group_status_id}})},resetData:function(){this.group.uuid&&this.$store.dispatch("groups/find",this.group.uuid)},cancel:function(){this.group.uuid&&this.resetData(),this.$emit("canceled")},getParentOptions:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={"where[group_type_id]":[1,2],without:["coordinators","expertPanel"]},t.next=3,v["a"].get("/api/groups",{params:n}).then((function(t){return t.data.filter((function(t){return t.id!=e.group.id})).map((function(e){return new g["a"](e)}))}));case 3:e.parents=t.sent;case 4:case"end":return t.stop()}}),t)})))()},emitUpdate:function(){this.$emit("update")}},beforeMount:function(){this.getParentOptions(),this.$store.dispatch("cdwgs/getAll")},setup:function(e,t){var n=Object(y["a"])(e,t),o=n.errors,r=n.submitFormData,a=n.resetErrors;return{errors:o,submitFormData:r,resetErrors:a}}},N=n("6b0d"),x=n.n(N);const k=x()(V,[["render",O]]);t["a"]=k},5832:function(e,t,n){"use strict";n("4e82"),n("a4d3"),n("e01a");var o=n("7a23"),r={key:0,class:"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200"},a={class:"flex space-x-1"},c=["innerHTML"];function i(e,t,n,i,l,u){var s=Object(o["resolveComponent"])("icon-edit"),p=Object(o["resolveComponent"])("router-link"),d=Object(o["resolveComponent"])("icon-trash"),b=Object(o["resolveComponent"])("data-table"),m=Object(o["resolveComponent"])("log-entry-form"),f=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[u.hasLogEntries?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:1,fields:l.fields,data:u.filteredLogEntries,sort:l.sort,"onUpdate:sort":t[0]||(t[0]=function(e){return l.sort=e})},{"cell-id":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",a,[Object(o["createVNode"])(p,{to:{name:"EditLogEntry",params:{id:t.id}},class:"btn btn-xs inline-block"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{width:"12"})]})),_:2},1032,["to"]),null===t.activity_type?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,to:{name:"ConfirmDeleteLogEntry",params:{id:t.id}},class:"btn btn-xs inline-block"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{width:"12"})]})),_:2},1032,["to"])):Object(o["createCommentVNode"])("",!0)])]})),"cell-description":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",{innerHTML:t.description,class:"links-blue"},null,8,c)]})),_:1},8,["fields","data","sort"])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,Object(o["toDisplayString"])(u.noResultsMessage),1)),Object(o["createVNode"])(f,{modelValue:l.editingEntry,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.editingEntry=e}),title:"Edit log entry"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m)]})),_:1},8,["modelValue"])])}var l=n("1da1"),u=(n("96cf"),n("a9e3"),n("4de4"),n("d3b7"),n("5502")),s=n("598d"),p=n("831e"),d=[{name:"created_at",label:"Created",sortName:"created_at",sortable:!0,type:Date},{name:"description",label:"Entry",sortable:!0,type:String},{name:"causer.name",label:"User",sortable:!0},{name:"id",label:"",sortable:!1}],b={components:{LogEntryForm:s["default"]},props:{step:{required:!1,type:Number}},data:function(){return{fields:d,sort:{field:"created_at",desc:!0},selectedLogEntry:{},editingEntry:!1}},computed:{hasLogEntries:function(){return this.filteredLogEntries.length>0},filteredLogEntries:function(){var e=this;return this.logEntries&&this.step?this.logEntries.filter((function(t){return t.step==e.step})):this.logEntries?this.logEntries:[]},noResultsMessage:function(){return"number"==typeof this.step?"No progress log entries have been entered for step ".concat(this.step):"There are no log entries for this application"}},methods:{getLogEntries:function(){return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})))()},editLogEntry:function(e){this.editingEntry=!0,this.selectedLogEntry=e}},mounted:function(){},setup:function(){var e=Object(u["d"])(),t=Object(o["computed"])((function(){return e.getters["groups/currentItemOrNew"]})),n=Object(o["computed"])((function(){return t.value.expert_panel}));return Object(o["watch"])(t,(function(){t.value.uuid&&Object(p["b"])("/api/groups/".concat(t.value.uuid,"/activity-logs"))}),{immediate:!0}),{group:t,application:n,logEntries:p["c"]}}},m=(n("7bab"),n("6b0d")),f=n.n(m);const O=f()(b,[["render",i]]);t["a"]=O},"598d":function(e,t,n){"use strict";n.r(t);var o=n("7a23");function r(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("step-input"),u=Object(o["resolveComponent"])("rich-text-editor"),s=Object(o["resolveComponent"])("button-row"),p=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(p,{class:"log-entry-form",ref:"form-container"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{label:"Log Date",modelValue:a.newEntry.log_date,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.newEntry.log_date=e}),errors:a.errors.log_date,type:"date",ref:"logdate"},null,8,["modelValue","errors"]),2==c.application.expert_panel_type_id?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,modelValue:a.newEntry.step,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.newEntry.step=e}),errors:a.errors.step},null,8,["modelValue","errors"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(i,{label:"Entry",errors:a.errors.entry},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:a.newEntry.entry,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.newEntry.entry=e})},null,8,["modelValue"])]})),_:1},8,["errors"]),Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[3]||(t[3]=function(){return c.cancel&&c.cancel.apply(c,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[4]||(t[4]=function(){return c.save&&c.save.apply(c,arguments)})},"Save")]})),_:1})]})),_:1},512)}var a=n("1da1"),c=n("5530"),i=(n("96cf"),n("7db0"),n("d3b7"),n("a4d3"),n("e01a"),n("99af"),n("5502")),l=n("e328"),u=n("a06a"),s=n("85fe"),p=n("831e"),d={name:"LogEntryForm",components:{StepInput:u["default"],RichTextEditor:s["default"]},props:{id:{required:!1,default:null}},data:function(){return{newEntry:{log_date:new Date,step:null,entry:""},errors:{}}},computed:Object(c["a"])(Object(c["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),watch:{id:{immediate:!0,handler:function(){var e=this.findEntry();e&&this.syncEntry(e)}},application:{immediate:!0,handler:function(){var e=this.findEntry();e&&this.syncEntry(e)}}},methods:{findEntry:function(){var e=this;return null===this.id?null:this.logEntries?this.logEntries.find((function(t){return t.id==e.id})):void 0},initNewEntry:function(){this.newEntry={log_date:Object(l["b"])(new Date),step:null,entry:""}},syncEntry:function(e){e&&(this.newEntry={id:e.id,log_date:Object(l["b"])(new Date(Date.parse(e.created_at))),step:e.properties.step,entry:e.description})},cancel:function(){this.initNewEntry(),this.$emit("canceled")},save:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e.newEntry.id?Object(p["e"])("/api/groups/".concat(e.group.uuid,"/activity-logs/").concat(e.newEntry.id),e.newEntry):Object(p["d"])("/api/groups/".concat(e.group.uuid,"/activity-logs"),e.newEntry),e.initNewEntry(),e.$emit("saved"),t.next=11;break;case 6:if(t.prev=6,t.t0=t["catch"](0),!t.t0.response||422!=t.t0.response.status||!t.t0.response.data.errors){t.next=11;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},mounted:function(){this.$el.querySelectorAll("input")[0].focus()},setup:function(){return{logEntries:p["c"]}}},b=n("6b0d"),m=n.n(b);const f=m()(d,[["render",r]]);t["default"]=f},"7bab":function(e,t,n){"use strict";n("1f66")},"7cd7":function(e,t,n){},"831e":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return p}));var o=n("1da1"),r=(n("c740"),n("99af"),n("a434"),n("96cf"),n("7a23")),a=n("f96b"),c=Object(r["ref"])([]),i=Object(r["computed"])((function(){return c.value})),l=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].get(t).then((function(e){return e.data.data}));case 2:c.value=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(t,n).then((function(e){return c.value.push(e.data),e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),s=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].put(t,n).then((function(e){var t=c.value.findIndex((function(t){return t.id==e.data.id}));return c.value[t]=e.data,e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].delete("".concat(t,"/").concat(n)).then((function(e){var t=c.value.findIndex((function(e){return e.id==n}));return c.value.splice(t,1),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},"83a1":function(e,t,n){"use strict";n("d81d"),n("b0c0"),n("a15b");var o={name:"ApplicationStepReview",props:{},data:function(){return{}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},expertPanel:function(){return this.group.expert_panel},isGcep:function(){return this.group.isGcep()},isVcep:function(){return this.group.isVcep()},members:function(){var e=this;return this.group.members.map((function(t){return{id:t.id,name:t.person.name,institution:t.person.institution?t.person.institution.name:null,credentials:t.person.credentials,expertise:t.expertise,roles:t.roles.map((function(e){return e.name})).join(", "),coi_completed:e.formatDate(t.coi_last_completed)}}))}},methods:{}};const r=o;t["a"]=r},a75a:function(e,t,n){"use strict";n.d(t,"b",(function(){return l}));var o=n("5530"),r=n("1da1"),a=(n("96cf"),n("7a23")),c=n("033d"),i=n("f96b"),l=Object(a["ref"])({}),u=Object(a["ref"])(!1),s=function(){u.value=!1,l.value={}},p=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.method,r=t.url,a=t.data,e.prev=1,e.next=4,Object(i["a"])({method:n,url:r,data:a}).then((function(e){return e.data.data}));case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e["catch"](1),Object(c["a"])(e.t0)&&(l.value=Object(o["a"])(Object(o["a"])({},l),e.t0.response.data.errors));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){l.value={}};t["a"]=function(){return{errors:l,editing:u,hideForm:s,submitFormData:p,resetErrors:d}}},b12c:function(e,t,n){"use strict";n("14ed")},b89c:function(e,t,n){"use strict";n("7cd7")},d5fa:function(e,t,n){"use strict";n("b0c0"),n("a15b"),n("d81d");var o=n("7a23"),r={class:"application-review bg-gray-100 p-2"},a=Object(o["createElementVNode"])("h2",null,"Basic Information",-1),c=Object(o["createElementVNode"])("h2",null,"Membership",-1),i={key:0,class:"mt-6"},l=Object(o["createElementVNode"])("h4",null,"Expertise of VCEP members",-1),u=Object(o["createElementVNode"])("h2",null,"Scope of Work",-1),s=Object(o["createElementVNode"])("h3",null,"Genes",-1),p={class:"mb-6"},d={key:0},b=Object(o["createElementVNode"])("h3",null,"Description of scope",-1),m={key:0},f=Object(o["createElementVNode"])("h2",null,"Plans for Ongoing Review and Descrepency Resolution",-1),O={class:"flex-none"},j={key:0,class:"mt-1"},h=Object(o["createElementVNode"])("em",null,"Details:",-1),v={key:1},g=Object(o["createElementVNode"])("h2",null,"Attestations",-1),w={key:2},y=Object(o["createElementVNode"])("h2",null,"Attestations",-1);function V(e,t,n,V,N,x){var k=this,_=Object(o["resolveComponent"])("object-dictionary"),C=Object(o["resolveComponent"])("dictionary-row"),D=Object(o["resolveComponent"])("simple-table"),E=Object(o["resolveComponent"])("markdown-block");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[Object(o["createElementVNode"])("section",null,[a,Object(o["createVNode"])(_,{obj:x.basicInfo,"label-class":"w-40 font-bold"},null,8,["obj"]),Object(o["createVNode"])(C,{label:"CDWG","label-class":"w-40 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(k.group.parent?k.group.parent.name:"--"),1)]})),_:1})]),Object(o["createElementVNode"])("section",null,[c,Object(o["createVNode"])(D,{data:e.members,"key-by":"id",class:"print:text-xs text-sm"},null,8,["data"]),e.isVcep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,[l,Object(o["createElementVNode"])("blockquote",null,[Object(o["createVNode"])(E,{markdown:e.expertPanel.membership_description},null,8,["markdown"])])])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("section",null,[u,s,Object(o["createElementVNode"])("div",p,[e.isGcep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",d,Object(o["toDisplayString"])(e.expertPanel.genes.map((function(e){return e.gene_symbol})).join(", ")),1)):Object(o["createCommentVNode"])("",!0),e.isVcep?(Object(o["openBlock"])(),Object(o["createBlock"])(D,{key:1,data:e.expertPanel.genes.map((function(e){return{id:e.id,gene:e.gene_symbol,disease:e.disease_name}})),"key-by":"id","hide-columns":["id"]},null,8,["data"])):Object(o["createCommentVNode"])("",!0)]),b,Object(o["createElementVNode"])("blockquote",null,[Object(o["createVNode"])(E,{markdown:e.expertPanel.scope_description},null,8,["markdown"])])]),e.isGcep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",m,[f,Object(o["createVNode"])(C,{label:"Selected protocol","label-class":"w-48 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",O,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.expertPanel.curation_review_protocol?e.titleCase(e.expertPanel.curation_review_protocol.full_name):null)+" ",1),100==e.expertPanel.curation_review_protocol_id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",j,[h,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.expertPanel.curation_review_protocol_other),1)])):Object(o["createCommentVNode"])("",!0)])]})),_:1})])):Object(o["createCommentVNode"])("",!0),e.isGcep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",v,[g,Object(o["createVNode"])(C,{label:"GCEP Attestation Signed","label-class":"w-52 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.formatDate(e.expertPanel.gcep_attestation_date)),1)]})),_:1}),Object(o["createVNode"])(C,{label:"GCI Training Date","label-class":"w-52 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.formatDate(e.expertPanel.gci_training_date)),1)]})),_:1}),Object(o["createVNode"])(C,{label:"NHGRI Attestation Signed","label-class":"w-52 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.formatDate(e.expertPanel.nhgri_attestation_date)),1)]})),_:1})])):Object(o["createCommentVNode"])("",!0),e.isVcep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",w,[Object(o["createElementVNode"])("section",null,[y,Object(o["createVNode"])(C,{label:"Reanalysis and Descrepency Resolution Attestation Signed","label-class":"w-52 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.formatDate(e.expertPanel.reanalysis_attestation_date)),1)]})),_:1}),Object(o["createVNode"])(C,{label:"NHGRI Attestation Signed","label-class":"w-60 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.formatDate(e.expertPanel.nhgri_attestation_date)),1)]})),_:1})])])):Object(o["createCommentVNode"])("",!0)])}var N=n("83a1"),x={name:"DefinitionReview",extends:N["a"],computed:{basicInfo:function(){return{type:this.group.type.name?this.group.type.name.toUpperCase():"",long_base_name:this.expertPanel.long_base_name,short_base_name:this.expertPanel.short_base_name}}},watch:{group:{immediate:!0,handler:function(e,t){!e.id||t&&e.id==t.id||(this.$store.dispatch("groups/getMembers",this.group),this.$store.dispatch("groups/getGenes",this.group))}}}},k=n("6b0d"),_=n.n(k);const C=_()(x,[["render",V]]);t["a"]=C},f7ba:function(e,t,n){"use strict";n("a15b"),n("d81d"),n("b0c0");var o=n("7a23"),r={class:"application-review p-2 bg-gray-100"},a={key:0},c=Object(o["createElementVNode"])("h2",null,"Plans for Ongoing Review and Descrepency Resolution",-1),i={class:"w-full"},l={key:0,class:"mt-1"},u=Object(o["createElementVNode"])("em",null,"Details:",-1),s={key:1},p=Object(o["createElementVNode"])("h2",null,"Evidence Summaries",-1),d={key:2},b=Object(o["createElementVNode"])("h2",null,"Core Approval Member, Trained Biocurator, and Biocurator Trainer Designation",-1);function m(e,t,n,m,f,O){var j=this,h=Object(o["resolveComponent"])("dictionary-row"),v=Object(o["resolveComponent"])("markdown-block"),g=Object(o["resolveComponent"])("evidence-summary-list");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[e.expertPanel.has_approved_pilot?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",a,[c,Object(o["createVNode"])(h,{label:"Selected protocol",labelWidthClass:"w-48 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",i,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.expertPanel.curation_review_protocol?e.titleCase(e.expertPanel.curation_review_protocol.full_name):null)+" ",1),100==e.expertPanel.curation_review_protocol_id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",l,[u,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.expertPanel.curation_review_protocol_other),1)])):Object(o["createCommentVNode"])("",!0)])]})),_:1}),Object(o["createVNode"])(h,{label:"Notes",labelWidthClass:"w-48 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{markdown:e.expertPanel.curation_review_process_notes},null,8,["markdown"])]})),_:1})])):Object(o["createCommentVNode"])("",!0),e.expertPanel.has_approved_pilot?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",s,[p,Object(o["createVNode"])(g,{readonly:!0})])):Object(o["createCommentVNode"])("",!0),e.expertPanel.has_approved_pilot?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",d,[b,Object(o["createVNode"])(h,{label:"Core Approval Members",labelWidthClass:"w-48 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(j.group.coreApprovalMembers.map((function(e){return e.person.name})).join(", ")),1)]})),_:1}),Object(o["createVNode"])(h,{label:"Biocurator Trainers",labelWidthClass:"w-48 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(j.group.biocuratorTrainers.map((function(e){return e.person.name})).join(", ")),1)]})),_:1}),Object(o["createVNode"])(h,{label:"Trained Biocurators",labelWidthClass:"w-48 font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(j.group.trainedBiocurators.map((function(e){return e.person.name})).join(", ")),1)]})),_:1})])):Object(o["createCommentVNode"])("",!0)])}var f=n("83a1"),O=n("324b"),j={name:"SustainedCurationReview",extends:f["a"],components:{EvidenceSummaryList:O["a"]}},h=n("6b0d"),v=n.n(h);const g=v()(j,[["render",m]]);t["a"]=g},f8c8:function(e,t,n){"use strict";var o=n("7a23"),r={key:0};function a(e,t,n,a,c,i){var l=Object(o["resolveComponent"])("step-one"),u=Object(o["resolveComponent"])("tab-item"),s=Object(o["resolveComponent"])("step-two"),p=Object(o["resolveComponent"])("step-three"),d=Object(o["resolveComponent"])("step-four"),b=Object(o["resolveComponent"])("tabs-container");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[i.application.isGcep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[Object(o["createVNode"])(l,{onStepApproved:i.handleApproved,onUpdated:t[0]||(t[0]=function(t){return e.$emit("updated")})},null,8,["onStepApproved"])])):Object(o["createCommentVNode"])("",!0),2==this.application.expert_panel_type_id?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:1,"tab-location":"right",modelValue:i.activeIndex,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.activeIndex=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{label:"Group Definition"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{onStepApproved:i.handleApproved,onUpdated:t[1]||(t[1]=function(t){return e.$emit("updated")})},null,8,["onStepApproved"])]})),_:1}),Object(o["createVNode"])(u,{label:"Draft Specifications"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{onStepApproved:i.handleApproved,onUpdated:t[2]||(t[2]=function(t){return e.$emit("updated")})},null,8,["onStepApproved"])]})),_:1}),Object(o["createVNode"])(u,{label:"Pilot Specfications"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{onStepApproved:i.handleApproved,onUpdated:t[3]||(t[3]=function(t){return e.$emit("updated")})},null,8,["onStepApproved"])]})),_:1}),Object(o["createVNode"])(u,{label:"Sustained Curation"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{onStepApproved:i.handleApproved,onUpdated:t[4]||(t[4]=function(t){return e.$emit("updated")})},null,8,["onStepApproved"])]})),_:1})]})),_:1},8,["modelValue"])):Object(o["createCommentVNode"])("",!0)])}var c=n("5530"),i=n("5502"),l={class:"application-review"};function u(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("definition-review"),u=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createVNode"])(u,{step:1,"document-name":"Scope and Membership Application",title:"Scope and Membership","document-type":1,"document-gets-reviewed":!0,"approve-button-label":"Approve Scope and Membership",onStepApproved:c.handleApproved},{sections:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i)]})),_:1},8,["onStepApproved"])])}n("b0c0");var s={class:"overflow-x-auto"},p={class:"mb-6"},d={class:"flex justify-between text-lg font-bold pb-2 mb-2 border-b"},b={class:"flex space-x-2"},m={key:0},f={key:0,class:"flex space-x-1"},O={class:"text-white bg-green-600 rounded-xl px-2"},j={key:1,class:"flex space-x-1"},h=Object(o["createTextVNode"])("   "),v=Object(o["createTextVNode"])("   "),g={key:0},w={class:"mt-4 p-4 border rounded-xl bg-gray-50"},y=Object(o["createElementVNode"])("hr",{class:"border-gray-200 border-4"},null,-1),V=Object(o["createTextVNode"])(" Step sections here! "),N={key:0,class:"border border-l-0 border-r-0 py-4 mb-6"},x=Object(o["createTextVNode"])(" This step was submitted by "),k=Object(o["createTextVNode"])(" on "),_=Object(o["createTextVNode"])(" with the following notes: "),C=["disabled","title"],D={class:"mb-6 mt-4 border-t pt-4"},E={class:"mb-2"};function S(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("edit-icon-button"),l=Object(o["resolveComponent"])("date-input"),u=Object(o["resolveComponent"])("remove-button"),S=Object(o["resolveComponent"])("document-manager"),B=Object(o["resolveComponent"])("static-alert"),A=Object(o["resolveComponent"])("approve-step-form"),T=Object(o["resolveComponent"])("modal-dialog"),R=Object(o["resolveComponent"])("application-log");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,[Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(n.title),1),c.dateApproved?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",m,[a.editApprovalDate?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",j,[Object(o["createVNode"])(l,{modelValue:a.newApprovalDate,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.newApprovalDate=e})},null,8,["modelValue"]),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[1]||(t[1]=function(){return c.updateApprovalDate&&c.updateApprovalDate.apply(c,arguments)})},"Save"),Object(o["createVNode"])(u,{onClick:t[2]||(t[2]=function(e){return a.editApprovalDate=!1})})])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",f,[Object(o["createElementVNode"])("div",O," Approved: "+Object(o["toDisplayString"])(c.dateApproved),1),Object(o["createVNode"])(i,{class:"text-black",onClick:c.initEditApprovalDate},null,8,["onClick"])]))])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[3]||(t[3]=function(){return c.toggleDocuments&&c.toggleDocuments.apply(c,arguments)})},Object(o["toDisplayString"])(c.docsToggleText),1),h,Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[4]||(t[4]=function(){return c.toggleSections&&c.toggleSections.apply(c,arguments)})},Object(o["toDisplayString"])(c.sectionsToggleText),1),v,Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[5]||(t[5]=function(){return c.goToPrintable&&c.goToPrintable.apply(c,arguments)})},"Printable Application")])]),Object(o["createVNode"])(o["Transition"],{name:"slide-fade-down"},{default:Object(o["withCtx"])((function(){return[a.showDocuments?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",g,[Object(o["renderSlot"])(e.$slots,"document",{},(function(){return[Object(o["createElementVNode"])("div",w,[Object(o["createVNode"])(S,{title:n.documentName,application:c.application,"document-type-id":n.documentType,getsReviewd:n.documentGetsReviewed,step:n.step,onUpdated:t[6]||(t[6]=function(t){return e.$emit("updated")})},null,8,["title","application","document-type-id","getsReviewd","step"])])]})),y])):Object(o["createCommentVNode"])("",!0)]})),_:3}),Object(o["createVNode"])(o["Transition"],{name:"slide-fade-down"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[a.showSections?Object(o["renderSlot"])(e.$slots,"sections",{key:0},(function(){return[V]})):Object(o["createCommentVNode"])("",!0)])]})),_:3})]),c.application.stepIsApproved(n.step)?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",N,[c.application.hasPendingSubmissionForCurrentStep?(Object(o["openBlock"])(),Object(o["createBlock"])(B,{key:0,variant:"info",class:"mb-4"},{default:Object(o["withCtx"])((function(){return[x,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(c.application.pendingSubmission.submitter.name),1),k,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.formatDate(c.application.pendingSubmission.created_at)),1),_,Object(o["createElementVNode"])("blockquote",null,Object(o["toDisplayString"])(c.application.pendingSubmission.notes),1)]})),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("button",{class:"btn btn-lg w-full",onClick:t[7]||(t[7]=function(){return c.startApproveStep&&c.startApproveStep.apply(c,arguments)}),disabled:!c.isCurrentStep,title:c.isCurrentStep?"Approve this step":"You can only approve the application's current step"},Object(o["toDisplayString"])(n.approveButtonLabel),9,C),(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(T,{modelValue:a.showApproveForm,"onUpdate:modelValue":t[8]||(t[8]=function(e){return a.showApproveForm=e}),size:"xl",onClosed:t[9]||(t[9]=function(t){return e.$refs.approvestepform.clearForm()})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(A,{ref:"approvestepform",onSaved:c.handleApproved,onCanceled:c.hideApproveForm},null,8,["onSaved","onCanceled"])]})),_:1},8,["modelValue"])]))])),Object(o["renderSlot"])(e.$slots,"default"),Object(o["renderSlot"])(e.$slots,"log",{},(function(){return[Object(o["createElementVNode"])("div",D,[Object(o["createElementVNode"])("h3",E,"Step "+Object(o["toDisplayString"])(n.step)+" Progress Log",1),Object(o["createVNode"])(R,{step:n.step},null,8,["step"])])]}))])}var B=n("1da1"),A=(n("96cf"),n("a9e3"),n("e328")),T=n("5832"),R={class:"md:flex justify-between"},F={key:0},$={key:1};function I(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("final-document-view"),l=Object(o["resolveComponent"])("document-list"),u=Object(o["resolveComponent"])("document-upload-form"),s=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["renderSlot"])(e.$slots,"title",{},(function(){return[Object(o["createElementVNode"])("div",R,[Object(o["createElementVNode"])("h3",null,Object(o["toDisplayString"])(n.title)+" Documents",1)])]})),n.application.stepIsApproved(n.step)&&n.showVersion?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",F,[Object(o["createVNode"])(i,{application:n.application,"document-type-id":n.documentTypeId,step:n.step},null,8,["application","document-type-id","step"])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",$,[Object(o["createVNode"])(l,{application:n.application,"document-type-id":n.documentTypeId,"show-version":n.showVersion,onUpdated:t[0]||(t[0]=function(t){return e.$emit("updated")})},null,8,["application","document-type-id","show-version"]),Object(o["createElementVNode"])("button",{class:"btn mb-2 btn-sm",onClick:t[1]||(t[1]=function(e){return a.showUploadForm=!0})}," Upload a new "+Object(o["toDisplayString"])(n.showVersion?"version":"document"),1)])),Object(o["createVNode"])(s,{modelValue:a.showUploadForm,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.showUploadForm=e}),onClosed:t[4]||(t[4]=function(t){return e.$refs.uploadform.clearForm()})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{application:n.application,"document-type-id":n.documentTypeId,step:n.step,onCanceled:t[2]||(t[2]=function(e){return a.showUploadForm=!1}),onSaved:c.handleSaved,ref:"uploadform"},null,8,["application","document-type-id","step","onSaved"])]})),_:1},8,["modelValue"])])}n("99af");var P={class:"flex space-x-1"},U=["onClick"],G=["onClick"],L={key:1,class:"px-2 py-1 border bg-gray-100 rounded"},q={key:0},M={key:0,class:"mb-3"},W=Object(o["createElementVNode"])("p",null,"Are you sure you want to continue?",-1);function H(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("truncate-expander"),l=Object(o["resolveComponent"])("icon-checkmark"),u=Object(o["resolveComponent"])("icon-download"),s=Object(o["resolveComponent"])("icon-edit"),p=Object(o["resolveComponent"])("trash-button"),d=Object(o["resolveComponent"])("data-table"),b=Object(o["resolveComponent"])("document-edit-form"),m=Object(o["resolveComponent"])("modal-dialog"),f=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[c.filteredDocuments.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,fields:c.filteredFields,data:c.filteredDocuments,sort:{field:c.filteredFields[0].name,desc:!0}},{"cell-notes":Object(o["withCtx"])((function(e){var t=e.value;return[Object(o["createVNode"])(i,{value:t,"truncate-length":50},null,8,["value"])]})),"cell-is_final":Object(o["withCtx"])((function(e){var t=e.item;return[t.is_final?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,onClick:function(e){return c.markFinal(t)},title:"Mark this the final version.",class:"text-gray-300 cursor-pointer inline"},null,8,["onClick"])),t.is_final?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,class:"text-green-600 inline",title:"This is the final document"})):Object(o["createCommentVNode"])("",!0)]})),"cell-id":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",P,[Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:function(e){return c.downloadDocument(t)}},[Object(o["createVNode"])(u,{width:"12",height:"16"})],8,U),Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:function(e){return c.openEditForm(t)}},[Object(o["createVNode"])(s,{width:"12",height:"16"})],8,G),Object(o["createVNode"])(p,{onClick:function(e){return c.initDelete(t)}},null,8,["onClick"])])]})),_:1},8,["fields","data","sort"])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",L,"No documents uploaded")),Object(o["createVNode"])(m,{modelValue:a.showEditForm,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.showEditForm=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{document:a.activeDocument,application:c.application,onCanceled:t[0]||(t[0]=function(e){return a.showEditForm=!1}),onSaved:c.handleDocumentEdited,onTriggermarkreviewed:c.showMarkReviewed},null,8,["document","application","onSaved","onTriggermarkreviewed"])]})),_:1},8,["modelValue"]),Object(o["createVNode"])(m,{modelValue:a.showDeleteConfirmation,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.showDeleteConfirmation=e}),title:"You are about to delete ".concat(a.activeDocument.type.long_name,", v").concat(a.activeDocument.version)},{default:Object(o["withCtx"])((function(){return[a.activeDocument?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",q,[a.activeDocument.is_final?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",M," This version has been tagged as the final version of the document. ")):Object(o["createCommentVNode"])("",!0),W,Object(o["createVNode"])(f,{"submit-text":"Delete Document",onCanceled:c.cancelDelete,onSubmitted:c.commitDelete},null,8,["onCanceled","onSubmitted"])])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["modelValue","title"])])}var J=n("2909"),Y=(n("c740"),n("a434"),n("4de4"),n("d3b7"),n("7db0"),n("5e32")),z={class:"text-lg border-b pb-1 mb-3"};function K(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("input-row"),u=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h2",z,"Edit "+Object(o["toDisplayString"])(c.type)+" version "+Object(o["toDisplayString"])(n.document.version)+" Info",1),Object(o["createVNode"])(i,{label:"File"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.document.filename),1)]})),_:1}),Object(o["createVNode"])(l,{modelValue:a.docProxy.date_received,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.docProxy.date_received=e}),label:"Date Received",type:"date",errors:a.errors.date_received},null,8,["modelValue","errors"]),Object(o["createVNode"])(l,{errors:a.errors.notes,label:"Notes"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.docProxy.notes=e}),cols:"30",rows:"10"},null,512),[[o["vModelText"],a.docProxy.notes]])]})),_:1},8,["errors"]),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return c.cancel&&c.cancel.apply(c,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return c.save&&c.save.apply(c,arguments)})},"Save")]})),_:1})]})),_:1})}n("e9c4");var Q=n("033d"),X={name:"DocumentEditForm",props:{document:{required:!0,type:Object},application:{required:!0,type:Object}},emits:["triggermarkreviewed","updated","saved"],data:function(){return{docProxy:{},errors:{}}},computed:{type:function(){return this.document.type?this.document.type.long_name:""}},watch:{document:{immediate:!0,handler:function(){this.docProxy=JSON.parse(JSON.stringify(this.document))}}},methods:{cancel:function(){this.docProxy={},this.$emit("canceled")},save:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateDocumentInfo",{application:e.application,document:e.docProxy});case 3:e.docProxy={},e.$emit("saved"),e.$emit("updated"),t.next=12;break;case 8:throw t.prev=8,t.t0=t["catch"](0),Object(Q["a"])(t.t0)&&(e.errors=t.t0.response.data.errors),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Z=n("6b0d"),ee=n.n(Z);const te=ee()(X,[["render",K]]);var ne=te,oe={components:{DocumentEditForm:ne,TrashButton:Y["default"]},props:{documentTypeId:{type:Number,required:!0},getsReviewed:{type:Boolean,required:!1,default:!0},showVersion:{type:Boolean,required:!1,default:!0}},data:function(){return{showDeleteConfirmation:!1,showReviewedForm:!1,showEditForm:!1,activeDocument:{type:{}},fields:[{name:"version",label:"Version",type:Number},{name:"filename",label:"File",type:String,headerClass:["w-1/3"]},{name:"notes",label:"Notes",type:String,sortable:!1,resolveValue:function(e){return e.notes||""},headerClass:["w-1/3"]},{name:"date_received",label:"Date Received",type:Date,headerClass:["w-32"]},{name:"is_final",label:"Final",type:Boolean,sortable:!1,class:["text-center"],headerClass:["text-center","w-12"]},{name:"id",label:"",sortable:!1}]}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.expert_panel},filteredFields:function(){var e=Object(J["a"])(this.fields);if(!this.showVersion){var t=e.findIndex((function(e){return e&&"version"==e.name}));e.splice(t,1);var n=e.findIndex((function(e){return e&&"is_final"==e.name}));e.splice(n,1)}if(!this.getsReviewed){var o=e.findIndex((function(e){return e&&"date_reviewed"==e.name}));e.splice(o,1)}return e},filteredDocuments:function(){var e=this;return this.application.documents?this.application.documents.filter((function(t){return t.document_type_id==e.documentTypeId})):[]},hasFinalVersion:function(){return this.filteredDocuments.findIndex((function(e){return e.is_final}))>-1},finalVersion:function(){return this.filteredDocuments.find((function(e){return e.is_final}))||{}}},methods:{showMarkReviewed:function(e){this.activeDocument=e,this.showReviewedForm=!0},hideReviewedForm:function(){this.showReviewedForm=!1},downloadDocument:function(e){window.location=e.download_url},confirmNewFinal:function(e){var t="There is already a version of this document marked as final.  Only one version can be marked as final.  Do you want to mark this version (version ".concat(e.version,") as final instead of ").concat(this.finalVersion.version);return confirm(t)},markFinal:function(e){this.hasFinalVersion&&!this.confirmNewFinal(e)||this.$store.dispatch("applications/markDocumentVersionFinal",{application:this.application,document:e})},openEditForm:function(e){this.showEditForm=!0,this.activeDocument=e},initDelete:function(e){this.activeDocument=e,this.showDeleteConfirmation=!0},cancelDelete:function(){this.showDeleteConfirmation=!1},handleDocumentEdited:function(){this.showEditForm=!1,this.$emit("updated")},commitDelete:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/deleteDocument",{application:e.application,document:e.activeDocument});case 3:e.showDeleteConfirmation=!1,e.$emit("updated"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),Object(Q["a"])(t.t0)&&alert(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}};const re=ee()(oe,[["render",H]]);var ae=re,ce={class:"pb-2 border-b mb-4"},ie={type:"file",ref:"fileInput"};function le(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("button-row"),u=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h2",ce,"Upload "+Object(o["toDisplayString"])(e.titleCase(c.documentType.long_name)),1),Object(o["createVNode"])(i,{label:"Document",errors:a.errors.file},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("input",ie,null,512)]})),_:1},8,["errors"]),n.showNotes?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,label:"Date Received",type:"date",modelValue:a.newDocument.date_received,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.newDocument.date_received=e}),errors:a.errors.date_received},null,8,["modelValue","errors"])):Object(o["createCommentVNode"])("",!0),n.showNotes?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:1,errors:a.errors.notes,label:"Notes"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.newDocument.notes=e}),cols:"30",rows:"5"},null,512),[[o["vModelText"],a.newDocument.notes]])]})),_:1},8,["errors"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn white",onClick:t[2]||(t[2]=function(){return c.cancel&&c.cancel.apply(c,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return c.save&&c.save.apply(c,arguments)})},"Save")]})),_:1})]})),_:1})}n("07ac"),n("159b"),n("b64b");var ue=n("db04"),se=n("4a91"),pe={props:{documentTypeId:{type:Number,required:!0},step:{type:Number,required:!1,default:null},showNotes:{type:Boolean,default:!0}},emits:["saved"],data:function(){return{newDocument:{file:null,date_received:(new Date).toISOString(),date_reviewed:null,step:this.step,document_type_id:this.documentTypeId,notes:null},errors:{}}},computed:{docTypes:function(){return se["documentsTypes"]},group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.expert_panel},isReviewed:function(){return Boolean(this.newDocument.date_reviewed)},documentType:function(){var e=this;return 0==Object.values(this.docTypes).length?{}:Object.values(this.docTypes).find((function(t){return t.id=e.documentTypeId}))}},methods:{save:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=new FormData,Object.keys(e.newDocument).forEach((function(t){var o=e.newDocument[t];null!=o&&n.append(t,o)})),n.append("file",e.$refs.fileInput.files[0]),t.next=6,e.$store.dispatch("groups/addApplicationDocument",{group:e.group,data:n});case 6:e.clearForm(),e.$emit("saved"),t.next=15;break;case 10:if(t.prev=10,t.t0=t["catch"](0),!Object(ue["b"])(t.t0)){t.next=15;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},cancel:function(){this.clearForm(),this.$emit("canceled")},clearForm:function(){this.initNewDocument(),this.clearErrors()},initNewDocument:function(){this.$refs.fileInput.value=null,this.newDocument={file:null,date_received:Object(A["b"])(new Date),date_reviewed:null,step:this.step,document_type_id:this.documentTypeId,notes:null}},clearErrors:function(){this.errors={}}},mounted:function(){this.$store.dispatch("doctypes/getItems")}};const de=ee()(pe,[["render",le]]);var be=de,me=["href"],fe={key:1};function Oe(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("edit-icon-button"),u=Object(o["resolveComponent"])("date-input"),s=Object(o["resolveComponent"])("remove-button"),p=Object(o["resolveComponent"])("document-edit-form"),d=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(i,{label:"Final Document"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[c.finalDocument.filename?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:0,href:c.finalDocument.download_url,class:"text-blue-500 underline"},Object(o["toDisplayString"])(c.finalDocument.filename),9,me)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",fe,"none on file"))])]})),_:1}),Object(o["createVNode"])(i,{label:"Date Received"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(c.firstDateReceived)+" ",1),Object(o["createVNode"])(l,{onClick:c.initEditReceived},null,8,["onClick"])],512),[[o["vShow"],!a.editDateReceived]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(u,{modelValue:a.newDateReceived,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.newDateReceived=e}),class:"inline-block"},null,8,["modelValue"]),Object(o["createElementVNode"])("button",{class:"btn btn-sm blue",onClick:t[1]||(t[1]=function(){return c.saveDateReceived&&c.saveDateReceived.apply(c,arguments)})},"Save"),Object(o["createVNode"])(s,{class:"ml-1",onClick:t[2]||(t[2]=function(e){return a.editDateReceived=!1})})],512),[[o["vShow"],a.editDateReceived]])]})),_:1}),Object(o["createVNode"])(d,{modelValue:a.showEditForm,"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.showEditForm=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{document:c.finalDocument,application:c.application,onCanceled:t[3]||(t[3]=function(e){return a.showEditForm=!1}),onSaved:t[4]||(t[4]=function(e){return a.showEditForm=!1})},null,8,["document","application"])]})),_:1},8,["modelValue"])])}var je=n("222a"),he={components:{DocumentEditForm:ne,RemoveButton:je["default"]},props:{documentTypeId:{type:Number,required:!0},step:{type:Number,required:!1,default:null}},data:function(){return{showEditForm:!1,editDateReceived:!1,newDateReceived:null,editDateReviewed:!1,newDateReviewed:null}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.expert_panel},finalDocument:function(){return this.application.finalDocumentOfType(this.documentTypeId)},firstDocument:function(){return this.application.firstDocumentOfType(this.documentTypeId)},finalDateReviewed:function(){return this.finalDocument.date_reviewed?Object(A["b"])(this.finalDocument.date_reviewed):"--"},firstDateReceived:function(){return this.firstDocument.date_received?Object(A["b"])(this.firstDocument.date_received):"--"}},methods:{initEditReceived:function(){this.editDateReceived=!0,this.newDateReceived=this.firstDateReceived},saveDateReceived:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateDocumentInfo",{application:e.application,document:{uuid:e.firstDocument.uuid,date_received:e.newDateReceived,date_reviewed:e.firstDocument.date_reviewed}});case 3:e.editDateReceived=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(Q["a"])(t.t0)&&console.info("saveDateReceived errors: ",t.t0.response.data.errors);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},initEditReviewed:function(){this.editDateReviewed=!0,this.newDateReviewed=this.finalDateReviewed},saveDateReviewed:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateDocumentInfo",{application:e.application,document:{uuid:e.finalDocument.uuid,date_reviewed:e.newDateReviewed,date_received:e.finalDocument.date_received}});case 3:e.editDateReviewed=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(Q["a"])(t.t0)&&console.info("saveDateReviewd errors: ",t.t0.response.data.errors);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}};const ve=ee()(he,[["render",Oe]]);var ge=ve,we={name:"DocumentManager",components:{DocumentUploadForm:be,FinalDocumentView:ge,DocumentList:ae},emits:["updated"],props:{application:{type:Object,required:!0},documentTypeId:{type:Number,required:!0},getsReviewed:{type:Boolean,required:!1,default:!0},step:{type:Number,required:!1,default:null},showVersion:{type:Boolean,default:!0},title:{type:String,required:!1}},data:function(){return{showUploadForm:!1}},methods:{handleSaved:function(){this.showUploadForm=!1,this.$emit("updated")}}};const ye=ee()(we,[["render",I]]);var Ve=ye,Ne={class:"text-sm"},xe=Object(o["createElementVNode"])("div",null,"Send notification email to contacts",-1),ke=Object(o["createTextVNode"])(" The expert panel has not yet submitted the application for approval. "),_e=Object(o["createElementVNode"])("br",null,null,-1),Ce=Object(o["createTextVNode"])(' You can approve this application but be aware that it is not part of the "normal" application workflow. '),De=Object(o["createElementVNode"])("h4",{class:"font-bold border-b"},"Email",-1),Ee=Object(o["createTextVNode"])(" There are no contacts to notify!! "),Se={key:1},Be={key:0},Ae={key:1,class:"text-gray-500"},Te={type:"file",multiple:"",ref:"attachmentsField"},Re=Object(o["createTextVNode"])("ClinGen Services will be carbon copied on this email."),Fe={key:0};function $e(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("dictionary-row"),u=Object(o["resolveComponent"])("static-alert"),s=Object(o["resolveComponent"])("router-link"),p=Object(o["resolveComponent"])("truncate-expander"),d=Object(o["resolveComponent"])("rich-text-editor"),b=Object(o["resolveComponent"])("note"),m=Object(o["resolveComponent"])("button-row"),f=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(f,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h2",null,"Approve Step "+Object(o["toDisplayString"])(c.application.current_step),1),Object(o["createVNode"])(i,{modelValue:a.dateApproved,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.dateApproved=e}),type:"date",errors:a.errors.date_approved,label:"Date Approved"},null,8,["modelValue","errors"]),Object(o["createVNode"])(l,{label:""},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("label",Ne,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.notifyContacts=e}),value:!0},null,512),[[o["vModelCheckbox"],a.notifyContacts]]),xe])])]})),_:1}),c.application.hasPendingSubmissionForCurrentStep?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,variant:"warning"},{default:Object(o["withCtx"])((function(){return[ke,_e,Ce]})),_:1})),Object(o["createVNode"])(o["Transition"],{name:"slide-fade-down"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[De,Object(o["createVNode"])(l,{label:"To"},{default:Object(o["withCtx"])((function(){return[e.group.hasContacts?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,class:"flex-1",variant:"danger"},{default:Object(o["withCtx"])((function(){return[Ee]})),_:1})),e.group.hasContacts?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",Se,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.email.to,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:e.email},[Object(o["createVNode"])(s,{to:{name:"PersonDetail",params:{uuid:e.uuid}},class:"text-blue-600 hover:underline",target:"person"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.name)+" <"+Object(o["toDisplayString"])(e.email)+">",1)]})),_:2},1032,["to"])])})),128))])):Object(o["createCommentVNode"])("",!0)]})),_:1}),Object(o["createVNode"])(l,{label:"Cc"},{default:Object(o["withCtx"])((function(){return[a.email.cc.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Be,[Object(o["createVNode"])(p,{value:c.ccAddresses,"truncate-length":100},null,8,["value"])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ae,"None"))]})),_:1}),Object(o["createVNode"])(i,{label:"Subject"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.email.subject=e}),class:"w-full"},null,512),[[o["vModelText"],a.email.subject]])]})),_:1}),Object(o["createVNode"])(i,{label:"Body"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:a.email.body,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.email.body=e})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(i,{label:"Attachments"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("input",Te,null,512)]})),_:1}),c.emailCced?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:0},{default:Object(o["withCtx"])((function(){return[Re]})),_:1})):Object(o["createCommentVNode"])("",!0)],512),[[o["vShow"],a.notifyContacts]])]})),_:1}),Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[4]||(t[4]=function(){return c.cancel&&c.cancel.apply(c,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[5]||(t[5]=function(){return c.save&&c.save.apply(c,arguments)})},[Object(o["createTextVNode"])(" Approve step "+Object(o["toDisplayString"])(c.application.current_step)+" ",1),a.notifyContacts?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Fe," and notify ")):Object(o["createCommentVNode"])("",!0)])]})),_:1})]})),_:1})}n("a15b"),n("d81d");var Ie=n("f96b"),Pe=n("85fe"),Ue={components:{RichTextEditor:Pe["default"]},emits:["canceled","saved"],data:function(){return{dateApproved:null,notifyContacts:!1,email:{subject:"",body:"",cc:[],to:[]},errors:{}}},computed:Object(c["a"])(Object(c["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel},emailCced:function(){return 1==this.application.current_step||4==this.application.current_step},ccAddresses:function(){return this.email.cc.map((function(e){return e.email})).join(", ")}}),watch:{notifyContacts:function(e){var t=this;e&&Ie["a"].get("/api/email-drafts/".concat(this.application.uuid,"/").concat(this.application.current_step)).then((function(e){t.email=e.data}))}},methods:{clearForm:function(){this.dateApproved=null,this.notifyContacts=!1},cancel:function(){this.clearForm(),this.$emit("canceled")},save:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={group:e.group,dateApproved:e.dateApproved,notifyContacts:e.notifyContacts,subject:e.email.subject,body:e.email.body,attachments:e.$refs.attachmentsField.files},t.prev=1,t.next=4,e.$store.dispatch("groups/approveCurrentStep",n);case 4:e.clearForm(),e.$emit("saved"),t.next=13;break;case 8:if(t.prev=8,t.t0=t["catch"](1),!Object(Q["a"])(t.t0)){t.next=13;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},mounted:function(){}};const Ge=ee()(Ue,[["render",$e]]);var Le=Ge,qe={components:{ApplicationLog:T["a"],DocumentManager:Ve,ApproveStepForm:Le,RemoveButton:je["default"]},props:{title:{type:String,required:!1,default:"YOU SHOULD SET A TITLE"},step:{type:Number,required:!0},documentName:{type:String,required:!1,default:'Set a document-type attribute if you don\'t use the "document" slot'},documentType:{type:Number,required:!1,default:1},documentGetsReviewed:{type:Boolean,required:!1,default:!0},approveButtonLabel:{type:String,required:!1,default:'Set "approve-button-label" if not overriding slot "approve-button"'}},emits:["documentUploaded","stepApproved","updated"],data:function(){return{showApproveForm:!1,editApprovalDate:!1,newApprovalDate:null,showDocuments:!0,showSections:!0,documentsToggled:!1,sectionsToggled:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel},isCurrentStep:function(){return this.step==this.application.current_step},dateApproved:function(){return this.application.approvalDateForStep(this.step)?Object(A["b"])(this.application.approvalDateForStep(this.step)):null},docsToggleText:function(){return this.showDocuments?"Hide Documents":"Show Documents"},sectionsToggleText:function(){return this.showSections?"Hide Sections":"Show Sections"}}),watch:{group:{immediate:!0,handler:function(e){e.hasDocumentsOfType(this.documentType)||this.documentsToggled||(this.showDocuments=!1)}}},methods:{toggleDocuments:function(){this.documentsToggled=!0,this.showDocuments=!this.showDocuments},toggleSections:function(){this.sectionsToggled=!0,this.showSections=!this.showSections},goToPrintable:function(){window.open("/groups/".concat(this.group.uuid,"/application/review"))},startApproveStep:function(){this.showApproveForm=!0},approveStep:function(){this.$store.dispatch("applications/approveCurrentStep",{application:this.application,step:this.step}),this.$emit("stepApproved"),this.$emit("updated")},handleApproved:function(){this.hideApproveForm(),this.$emit("stepApproved"),this.$emit("updated")},hideApproveForm:function(){this.showApproveForm=!1},initEditApprovalDate:function(){this.editApprovalDate=!0,this.newApprovalDate=this.dateApproved},updateApprovalDate:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("groups/updateApprovalDate",{group:e.group,dateApproved:e.newApprovalDate,step:e.step});case 3:e.editApprovalDate=!1,t.next=11;break;case 6:if(t.prev=6,t.t0=t["catch"](0),!Object(Q["a"])(t.t0)){t.next=11;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}};const Me=ee()(qe,[["render",S]]);var We=Me,He=n("d5fa"),Je={name:"StepOne",components:{BaseStep:We,DefinitionReview:He["a"]},emits:["stepApproved"],data:function(){return{}},computed:Object(c["a"])(Object(c["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),methods:{handleApproved:function(){this.$emit("stepApproved")}}};const Ye=ee()(Je,[["render",u]]);var ze=Ye,Ke={class:"application-section"},Qe=Object(o["createElementVNode"])("h2",null,"Draft Specifications",-1);function Xe(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("cspec-summary"),l=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{step:2,"document-type":2,"document-name":"Draft Specifications","document-gets-reviewed":!1,"approve-button-label":"Approve Draft Specifications",title:"Draft ACMG Guideline Specifications",onStepApproved:t[0]||(t[0]=function(t){return e.$emit("stepApproved")})},{sections:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",Ke,[Qe,Object(o["createVNode"])(i)])]})),_:1})}var Ze=n("abba"),et={name:"StepTwo",components:{BaseStep:We,CspecSummary:Ze["a"]},props:{},emits:["stepApproved"],data:function(){return{}},computed:Object(c["a"])(Object(c["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),methods:{}};const tt=ee()(et,[["render",Xe]]);var nt=tt,ot={class:"mt-4 p-4 border rounded-xl bg-gray-50"},rt={class:"mt-4 p-4 border rounded-xl bg-gray-50"},at={class:"mt-4 p-4 border rounded-xl bg-gray-50"},ct={class:"application-section"},it=Object(o["createElementVNode"])("h2",null,"Pilot Specifications",-1);function lt(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("document-manager"),l=Object(o["resolveComponent"])("cspec-summary"),u=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createBlock"])(u,{step:3,"approve-button-label":"Approve Pilot and Specifications",title:"Pilot ACMG Guideline Specificiations",onStepApproved:t[3]||(t[3]=function(t){return e.$emit("stepApproved")})},{document:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",ot,[Object(o["createVNode"])(i,{application:c.application,"document-type-id":3,getsReviewd:!1,step:3,class:"mb-4",title:"Final Specifications",onUpdated:t[0]||(t[0]=function(t){return e.$emit("updated")})},null,8,["application"])]),Object(o["createElementVNode"])("div",rt,[Object(o["createVNode"])(i,{title:"Pilot Classifications",application:c.application,"document-type-id":4,getsReviewd:!1,step:3,onUpdated:t[1]||(t[1]=function(t){return e.$emit("updated")})},null,8,["application"])]),Object(o["createElementVNode"])("div",at,[Object(o["createVNode"])(i,{title:"Additional Documents",application:c.application,"document-type-id":7,getsReviewd:!1,"show-version":!1,step:3,onUpdated:t[2]||(t[2]=function(t){return e.$emit("updated")})},null,8,["application"])])])]})),sections:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",ct,[it,Object(o["createVNode"])(l)])]})),_:1})}var ut={name:"StepThree",components:{BaseStep:We,DocumentManager:Ve,CspecSummary:Ze["a"]},props:{},emits:["stepApproved"],data:function(){return{}},computed:Object(c["a"])(Object(c["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),methods:{formatDate:function(e){return Object(A["b"])(e)}}};const st=ee()(ut,[["render",lt]]);var pt=st;function dt(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("sustained-curation-review"),l=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{step:4,"document-type":5,"document-name":"Sustained Curation","document-gets-reviewed":!0,"approve-button-label":"Approve Sustained Curation",title:"Sustained Curation",onStepApproved:t[0]||(t[0]=function(t){return e.$emit("stepApproved")})},{sections:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i)]})),_:1})}var bt=n("f7ba"),mt={name:"StepFour",components:{BaseStep:We,SustainedCurationReview:bt["a"]},props:{},emits:["stepApproved"],data:function(){return{}},computed:Object(c["a"])(Object(c["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),methods:{}};const ft=ee()(mt,[["render",dt]]);var Ot=ft,jt={components:{StepOne:ze,StepTwo:nt,StepThree:pt,StepFour:Ot},emits:["stepApproved"],data:function(){return{activeStep:1}},computed:Object(c["a"])(Object(c["a"])({},Object(i["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel},activeIndex:{deep:!0,get:function(){return this.application&&this.application.current_step?this.application.current_step-1:0},set:function(e){this.activeStep=e+1}}}),methods:{handleApproved:function(){this.$emit("stepApproved")}}};const ht=ee()(jt,[["render",a]]);t["a"]=ht}}]);
//# sourceMappingURL=application-detail~group-detail.170eb14f.js.map