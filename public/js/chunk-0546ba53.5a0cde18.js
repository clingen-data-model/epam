(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0546ba53"],{1606:function(e,t,n){},"48b0":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={class:"flex justify-between items-center border-b mb-4"},o={class:"border-0 mb-0"},c=["value"],l={key:0},i={key:0};function d(e,t,n,d,s,u){var p=Object(r["resolveComponent"])("annual-update-table"),b=Object(r["resolveComponent"])("tab-item"),m=Object(r["resolveComponent"])("tabs-container");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("header",a,[Object(r["createElementVNode"])("h1",o," Annual Updates for "+Object(r["toDisplayString"])(u.latestWindow.for_year),1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.formatDate(u.latestWindow.start))+" - "+Object(r["toDisplayString"])(e.formatDate(u.latestWindow.end))+" ",1),s.windows.length>1?Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("select",{key:0,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.selectedYear=e}),class:"font-normal text-md"},[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(u.sortedWindows,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("option",{value:e.for_year,key:e.id},Object(r["toDisplayString"])(e.for_year),9,c)})),128))],512)),[[r["vModelSelect"],s.selectedYear]]):Object(r["createCommentVNode"])("",!0)]),Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{label:"VCEPS"},{default:Object(r["withCtx"])((function(){return[s.loading?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",l,"Loading…")):(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:1,items:u.vcepReviews},null,8,["items"]))]})),_:1}),Object(r["createVNode"])(b,{label:"GCEPS"},{default:Object(r["withCtx"])((function(){return[s.loading?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",i,"Loading…")):(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:1,items:u.gcepReviews},null,8,["items"]))]})),_:1})]})),_:1})])}var s=n("1da1"),u=(n("96cf"),n("4de4"),n("d3b7"),n("db04")),p=n("2ef0"),b=(n("4e82"),{class:"flex mb-2 items-end justify-between"}),m={class:"flex space-x-4 items-end"},f=Object(r["createElementVNode"])("option",{value:null},"Any",-1),O=Object(r["createElementVNode"])("option",{value:2},"Only Pending",-1),j=Object(r["createElementVNode"])("option",{value:1},"Only Completed",-1),v=[f,O,j],h=Object(r["createTextVNode"])(" view ");function w(e,t,n,a,o,c){var l=Object(r["resolveComponent"])("router-link"),i=Object(r["resolveComponent"])("data-table");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("div",b,[Object(r["createElementVNode"])("div",m,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.filter=e}),placeholder:"EP name, submitter name",class:"w-60"},null,512),[[r["vModelText"],a.filter]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.completedFilter=e}),class:"flex radio-group"},v,512),[[r["vModelSelect"],c.completedFilter]])]),Object(r["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[2]||(t[2]=function(){return c.exportData&&c.exportData.apply(c,arguments)})},"Export Data")]),Object(r["createVNode"])(i,{data:c.filteredItems,fields:o.fields,sort:a.sort,"onUpdate:sort":t[3]||(t[3]=function(e){return a.sort=e})},{"cell-action":Object(r["withCtx"])((function(e){var t=e.item;return[Object(r["createVNode"])(l,{to:{name:"AnnualUpdateDetail",params:{id:t.id}}},{default:Object(r["withCtx"])((function(){return[h]})),_:2},1032,["to"])]})),_:1},8,["data","fields","sort"])])}var y=n("5530"),g=(n("ac1f"),n("5319"),n("e9c4"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("466d"),n("b0c0"),n("d81d"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("5257")),x={name:"AnnualUpdateTeable",props:{items:{type:Array,required:!0}},data:function(){var e=this;return{fields:[{name:"id",sortable:!0,label:"ID"},{name:"expert_panel.display_name",label:"Expert Panel",sortable:!0},{name:"submitter.person.name",label:"Submitter",sortable:!0},{name:"completed_at",label:"Completed",sortable:!0,resolveValue:function(t){return t.completed_at?e.formatDate(t.completed_at):null}},{name:"action",label:"",sortable:!1}]}},computed:{completedFilter:{get:function(){return this.$route.query.completed||null},set:function(e){var t=this.$route.query,n=this.$route.path,r=Object(y["a"])({},t);e?r=Object(y["a"])(Object(y["a"])({},t),{completed:e}):delete r.completed,this.$router.replace({path:n,query:r})}},filteredItems:function(){var e=this,t=JSON.parse(JSON.stringify(this.items));if(null!=this.filter){var n=new RegExp(".*".concat(this.filter,".*"),"i");t=this.items.filter((function(e){return e.expert_panel.display_name.match(n)||e.submitter&&e.submitter.person&&e.submitter.person.name.match(n)}))}return null!=this.completedFilter&&(t=t.filter((function(t){return 1==e.completedFilter?null!==t.completed_at:null==t.completed_at}))),t}},methods:{exportData:function(){var e=this.filteredItems.map((function(e){return e.id}));u["a"].post("/api/annual-updates/export",{annual_update_ids:e}).then((function(e){var t=document.createElement("a");t.style.display="none",document.body.appendChild(t),t.href=window.URL.createObjectURL(new Blob([e.data,{type:"text/csv"}])),t.setAttribute("download","annual_updates.csv"),t.click(),document.body.removeChild(t)}))}},setup:function(){var e=Object(g["a"])({field:"expert_panel.display_name",desc:!1}),t=e.sort,n=e.filter;return{sort:t,filter:n}}},_=n("6b0d"),k=n.n(_);const E=k()(x,[["render",w]]);var V=E,B={name:"AnnualUpdatesList",components:{AnnualUpdateTable:V},data:function(){return{selectedYear:null,windows:[],items:[],loading:!1}},computed:{sortedWindows:function(){return Object(p["orderBy"])(this.windows,"for_year","desc")},latestWindow:function(){return this.sortedWindows[0]||{}},gcepReviews:function(){return this.items.filter((function(e){return 1==e.expert_panel.expert_panel_type_id}))},vcepReviews:function(){return this.items.filter((function(e){return 2==e.expert_panel.expert_panel_type_id}))}},methods:{getWindows:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].get("/api/annual-updates/windows").then((function(e){return e.data}));case 2:e.windows=t.sent,e.selectedYear=e.latestWindow.for_year;case 4:case"end":return t.stop()}}),t)})))()},getItems:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,u["a"].get("/api/annual-updates").then((function(e){return e.data}));case 3:e.items=t.sent,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getWindows(),this.getItems()}};n("69ca");const N=k()(B,[["render",d],["__scopeId","data-v-51093e4a"]]);t["default"]=N},5257:function(e,t,n){"use strict";var r=n("5530"),a=(n("caad"),n("2532"),n("b64b"),n("ac1f"),n("5319"),n("4de4"),n("d3b7"),n("6c02")),o=n("7a23");t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(a["d"])(),n=Object(a["c"])();e||(console.log('Warning: defaultSort is deprecated.  Please provide a sort object: {field: "fieldname", desc: boolean}'),e=e||{field:"name",desc:!1});var c=Object(o["computed"])({immediate:!0,get:function(){return Object.keys(n.query).includes("sort-field")?{field:n.query["sort-field"],desc:Boolean(parseInt(n.query["sort-desc"]))}:e},set:function(e){var a={"sort-field":e.field,"sort-desc":e.desc?1:0},o=Object(r["a"])(Object(r["a"])({},n.query),a);t.replace({path:n.path,query:o})}}),l=Object(o["computed"])({set:function(e){var a=n.query,o=n.path,c=Object(r["a"])({},a);e?c=Object(r["a"])(Object(r["a"])({},a),{filter:e}):delete c.filter,t.replace({path:o,query:c})},get:function(){return n.query.filter},immediate:!0});return{sort:c,filter:l}}},"69ca":function(e,t,n){"use strict";n("1606")}}]);
//# sourceMappingURL=chunk-0546ba53.5a0cde18.js.map