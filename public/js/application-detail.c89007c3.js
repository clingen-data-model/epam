(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["application-detail","log-entry-form","new-contact-form"],{"033d":function(e,t,n){"use strict";t["a"]=function(e){return e.response&&422==e.response.status&&e.response.data.errors}},"0bd6":function(e,t,n){},"12ac":function(e,t,n){"use strict";n.r(t);n("99af"),n("b0c0");var o=n("7a23"),r={class:"flex space-x-2"},c=Object(o["createTextVNode"])("Add Next Action"),a=Object(o["createTextVNode"])("Add Log Entry"),i={class:"md:flex md:space-x-4"},l={class:"flex-1 space-y-2 md:border-l md:px-4 md:py-2"};function s(e,t,n,s,d,u){var p=Object(o["resolveComponent"])("router-link"),b=Object(o["resolveComponent"])("ep-attributes-form"),m=Object(o["resolveComponent"])("next-actions"),f=Object(o["resolveComponent"])("progress-chart"),O=Object(o["resolveComponent"])("step-tabs"),j=Object(o["resolveComponent"])("tab-item"),h=Object(o["resolveComponent"])("application-log"),v=Object(o["resolveComponent"])("tabs-container"),C=Object(o["resolveComponent"])("card"),w=Object(o["resolveComponent"])("router-view"),V=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])(C,{title:"".concat(e.application.name," - Current Step: ").concat(e.application.current_step)},{"header-right":Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",r,[Object(o["createVNode"])(p,{to:{name:"NextAction"},class:"btn btn-sm"},{default:Object(o["withCtx"])((function(){return[c]})),_:1}),Object(o["createVNode"])(p,{to:{name:"LogEntry"},class:"btn btn-sm"},{default:Object(o["withCtx"])((function(){return[a]})),_:1})])]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",i,[Object(o["createVNode"])(b,{application:e.application,class:" flex-1"},null,8,["application"]),Object(o["createVNode"])("div",l,[e.application.next_actions?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:0,"next-actions":e.application.next_actions},null,8,["next-actions"])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createVNode"])(f,{application:e.application,class:"py-4 border-t border-b border-gray-300 my-6"},null,8,["application"]),Object(o["createVNode"])(v,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j,{label:"Application"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,{application:e.application},null,8,["application"])]})),_:1}),Object(o["createVNode"])(j,{label:"Application Log"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{uuid:e.application.uuid},null,8,["uuid"])]})),_:1})]})),_:1})]})),_:1},8,["title"]),Object(o["createVNode"])(V,{modelValue:d.showModal,"onUpdate:modelValue":t[1]||(t[1]=function(e){return d.showModal=e}),onClosed:u.handleModalClosed},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(w,{ref:"modalView",onSaved:u.hideModal,onCanceled:u.hideModal},null,8,["onSaved","onCanceled"])]})),_:1},8,["modelValue","onClosed"])])}n("ac1f"),n("5319");var d=n("5530"),u=n("5502"),p=(n("a4d3"),n("e01a"),{key:0,class:"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200"}),b={class:"flex space-x-1"};function m(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-edit"),l=Object(o["resolveComponent"])("router-link"),s=Object(o["resolveComponent"])("icon-trash"),d=Object(o["resolveComponent"])("data-table"),u=Object(o["resolveComponent"])("log-entry-form"),m=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[a.hasLogEntries?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,fields:c.fields,data:a.filteredLogEntries,sort:c.sort,"onUpdate:sort":t[1]||(t[1]=function(e){return c.sort=e})},{"cell-id":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createVNode"])("div",b,[Object(o["createVNode"])(l,{to:{name:"EditLogEntry",params:{id:t.id}},class:"btn btn-xs inline-block"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{width:"12"})]})),_:2},1032,["to"]),null===t.activity_type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,to:{name:"ConfirmDeleteLogEntry",params:{id:t.id}},class:"btn btn-xs inline-block"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{width:"12"})]})),_:2},1032,["to"])):Object(o["createCommentVNode"])("",!0)])]})),"cell-description":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createVNode"])("div",{innerHTML:t.description,class:"links-blue"},null,8,["innerHTML"])]})),_:1},8,["fields","data","sort"])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",p,Object(o["toDisplayString"])(a.noResultsMessage),1)),Object(o["createVNode"])(m,{modelValue:c.editingEntry,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.editingEntry=e}),title:"Edit log entry"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u)]})),_:1},8,["modelValue"])])}n("4de4"),n("a9e3"),n("96cf");var f=n("1da1"),O=Object(o["createVNode"])("g",null,[Object(o["createVNode"])("path",{d:"M12.3 3.7l4 4L4 20H0v-4L12.3 3.7zm1.4-1.4L16 0l4 4-2.3 2.3-4-4z"})],-1);function j(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-base");return Object(o["openBlock"])(),Object(o["createBlock"])(i,{"icon-name":"Edit"},{default:Object(o["withCtx"])((function(){return[O]})),_:1})}var h={};h.render=j;var v=h,C=Object(o["createVNode"])("g",null,[Object(o["createVNode"])("path",{d:"M6 2l2-2h4l2 2h4v2H2V2h4zM3 6h14l-1 14H4L3 6zm5 2v10h1V8H8zm3 0v10h1V8h-1z"})],-1);function w(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-base");return Object(o["openBlock"])(),Object(o["createBlock"])(i,null,{default:Object(o["withCtx"])((function(){return[C]})),_:1})}var V={};V.render=w;var y=V,k=n("598d"),g=[{name:"created_at",label:"Created",sortName:"created_at",sortable:!0,type:Date},{name:"description",label:"Entry",sortable:!0,type:String},{name:"causer.name",label:"User",sortable:!0},{name:"id",label:"",sortable:!1}],N={components:{IconEdit:v,IconTrash:y,LogEntryForm:k["default"]},props:{step:{required:!1,type:Number}},data:function(){return{fields:g,logEntries:[],sort:{field:"created_at",desc:!0},selectedLogEntry:{},editingEntry:!1}},computed:Object(d["a"])(Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),{},{hasLogEntries:function(){return this.filteredLogEntries.length>0},filteredLogEntries:function(){var e=this;return this.application&&this.application.log_entries&&this.step?this.application.log_entries.filter((function(t){return t.properties.step==e.step})):this.application&&this.application.log_entries?this.application.log_entries:[]},noResultsMessage:function(){return"number"==typeof this.step?"No progress log entries have been entered for step ".concat(this.step):"There are no log entries for this application"}}),methods:{getLogEntries:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("applications/getApplication",e.application.uuid);case 2:case"end":return t.stop()}}),t)})))()},editLogEntry:function(e){this.editingEntry=!0,this.selectedLogEntry=e}},mounted:function(){}};n("ba35");N.render=m;var x=N,_=Object(o["createTextVNode"])(" Long Base Name: "),D=Object(o["createTextVNode"])(" Short Base Name: ");function B(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("note"),l=Object(o["resolveComponent"])("input-row"),s=Object(o["resolveComponent"])("application-contacts");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])(l,{label:"Long Base Name",modelValue:c.appClone.long_base_name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.appClone.long_base_name=e}),placeholder:"Long base name",errors:c.errors.long_base_name,onChange:t[2]||(t[2]=function(e){return a.saveChanges()})},{label:Object(o["withCtx"])((function(){return[_,Object(o["createVNode"])(i,null,{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])('"'+Object(o["toDisplayString"])(n.application.type.display_name)+'" will be appended.',1)]})),_:1})]})),_:1},8,["modelValue","errors"]),Object(o["createVNode"])(l,{label:"Short Base Name",modelValue:c.appClone.short_base_name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.appClone.short_base_name=e}),placeholder:"Short base name",errors:c.errors.short_base_name,onChange:t[4]||(t[4]=function(e){return a.saveChanges()})},{label:Object(o["withCtx"])((function(){return[D,Object(o["createVNode"])(i,null,{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])('"'+Object(o["toDisplayString"])(n.application.type.display_name)+'" will be appended.',1)]})),_:1})]})),_:1},8,["modelValue","errors"]),Object(o["createVNode"])(l,{label:"Affiliation ID",modelValue:c.appClone.affiliation_id,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.appClone.affiliation_id=e}),placeholder:a.affiliationIdPlaceholder,errors:c.errors.affiliation_id,onChange:t[6]||(t[6]=function(e){return a.saveChanges()})},null,8,["modelValue","placeholder","errors"]),Object(o["createVNode"])(l,{label:"CDWG",errors:c.errors.cdwg_id},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("select",{name:"",id:"","onUpdate:modelValue":t[7]||(t[7]=function(e){return c.appClone.cdwg_id=e}),onChange:t[8]||(t[8]=function(e){return a.saveChanges()})},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.cdwgs,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("option",{value:e.id,key:e.id},Object(o["toDisplayString"])(e.name),9,["value"])})),128))],544),[[o["vModelSelect"],c.appClone.cdwg_id]])]})),_:1},8,["errors"]),Object(o["createVNode"])(l,{label:"Contacts"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{onNewContactInitiated:t[9]||(t[9]=function(e){return a.saveChanges()})})]})),_:1}),Object(o["createVNode"])(l,{label:"Expert Panel URL"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("div",{class:"text-gray-400"},Object(o["toDisplayString"])(a.affiliationUrl),513),[[o["vShow"],!a.hasAffiliationId]]),Object(o["withDirectives"])(Object(o["createVNode"])("a",{href:a.affiliationUrl,target:"clingen",class:"text-blue-500 underline"},Object(o["toDisplayString"])(a.affiliationUrl),9,["href"]),[[o["vShow"],a.hasAffiliationId]])]})),_:1})])}function S(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("contact-row"),l=Object(o["resolveComponent"])("add-contact-control");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.application.contacts,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:e.id,contact:e},null,8,["contact"])})),128)),Object(o["createVNode"])(l,{onNewContactInitiated:t[1]||(t[1]=function(e){return a.propagateEvent(e)})})])}var R={class:"align-baseline"},A=Object(o["createTextVNode"])("Add Contact");function F(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("new-contact-form"),l=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])("div",R,[Object(o["createVNode"])("button",{class:"btn btn-xs",onClick:t[1]||(t[1]=function(){return a.initiateAddContact&&a.initiateAddContact.apply(a,arguments)})},[Object(o["renderSlot"])(e.$slots,"default",{},(function(){return[A]}))])]),Object(o["createVNode"])(l,{modelValue:c.showForm,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.showForm=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{onDone:t[2]||(t[2]=function(e){c.showForm=!1}),onSaved:a.triggerAddedContact,onNewContactCanceled:t[3]||(t[3]=function(t){return e.$emit("new-contact-canceled")})},null,8,["onSaved"])]})),_:1},8,["modelValue"])])}var E=n("b2aa"),T={name:"AddContactControl",components:{NewContactForm:E["default"]},emits:["new-contact-initiated","contact-added","new-contact-canceled"],data:function(){return{showForm:!1,errors:{}}},computed:Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),methods:{initiateAddContact:function(){this.showForm=!0,this.$emit("new-contact-initiated")},triggerAddedContact:function(){this.$emit("contact-added")}}};T.render=F;var I=T,$=(n("a15b"),{key:0}),M=Object(o["createTextVNode"])("   "),U={class:"mb-2"},L=Object(o["createTextVNode"])(" You are about to remove "),q=Object(o["createTextVNode"])(" as a contact for this application. Do you want to continue? "),P=Object(o["createVNode"])("small",{class:"text-gray-500"},"NOTE: This will not delete the person's record in this system.",-1),z={key:0,class:"bg-red-200 bg-text-900 border-red-900 p-2"};function H(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("remove-button"),l=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.contact.name)+" - ",1),Object(o["createVNode"])("a",{class:"text-blue-500 underline",href:"mailto:".concat(n.contact.email)},Object(o["toDisplayString"])(n.contact.email),9,["href"]),n.contact.phone?(Object(o["openBlock"])(),Object(o["createBlock"])("span",$," - "+Object(o["toDisplayString"])(n.contact.phone),1)):Object(o["createCommentVNode"])("",!0),M,Object(o["createVNode"])(i,{size:"xs",onClick:a.confirmRemove},null,8,["onClick"]),Object(o["createVNode"])(s,{modelValue:c.showRemoveConfirmation,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.showRemoveConfirmation=e}),title:"Confirm Contact Removal"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("p",U,[L,Object(o["createVNode"])("strong",null,Object(o["toDisplayString"])(n.contact.name),1),q]),P,c.errors?(Object(o["openBlock"])(),Object(o["createBlock"])("ul",z,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(c.errors,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("li",{key:t},Object(o["toDisplayString"])(t)+": "+Object(o["toDisplayString"])(e.join(", ")),1)})),128))])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",{class:"btn",onClick:t[1]||(t[1]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createVNode"])("div",{class:"btn blue",onClick:t[2]||(t[2]=function(){return a.save&&a.save.apply(a,arguments)})},"Yes, remove contact")]})),_:1})]})),_:1},8,["modelValue"])])}var G=n("033d");function K(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-close");return Object(o["openBlock"])(),Object(o["createBlock"])("button",{class:"btn-delete",onClick:t[1]||(t[1]=function(){return e.confirmRemove&&e.confirmRemove.apply(e,arguments)})},[Object(o["createVNode"])(i,{height:a.dimension,width:a.dimension},null,8,["height","width"])])}var Q=Object(o["createVNode"])("g",null,[Object(o["createVNode"])("path",{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"})],-1);function Y(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-base");return Object(o["openBlock"])(),Object(o["createBlock"])(i,null,{default:Object(o["withCtx"])((function(){return[Q]})),_:1})}var J={};J.render=Y;var X=J,W={components:{IconClose:X},props:{size:{required:!1,default:"md"}},data:function(){return{}},computed:{dimension:function(){return"xs"==this.size?8:"sm"==this.size?10:"md"==this.size?12:"lg"==this.size?14:"xl"==this.size?18:10}},methods:{}};n("4d19");W.render=K;var Z=W,ee={components:{RemoveButton:Z},props:{contact:{type:Object,required:!0}},emits:["saved","canceled","done","deleted"],data:function(){return{showRemoveConfirmation:!1,errors:null}},computed:Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),methods:{confirmRemove:function(){this.showRemoveConfirmation=!0},cancel:function(){this.showRemoveConfirmation=!1,this.$emit("canceled"),this.$emit("done")},save:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/removeContact",{application:e.application,contact:e.contact});case 3:e.showRemoveConfirmation=!1,e.$emit("saved"),e.$emit("deleted"),e.$emit("done"),t.next=15;break;case 9:if(t.prev=9,t.t0=t["catch"](0),!Object(G["a"])(t.t0)){t.next=14;break}return alert(t.t0.response.data.errors),t.abrupt("return");case 14:throw t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}};ee.render=H;var te=ee,ne={components:{ContactRow:te,AddContactControl:I},props:{},emits:["new-contact-initiated"],data:function(){return{}},computed:Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),methods:{propagateEvent:function(){this.$emit("new-contact-initiated")}}};ne.render=S;var oe=ne,re={components:{ApplicationContacts:oe},props:{application:{required:!0,type:Object}},data:function(){return{appClone:this.application.clone(),errors:{}}},watch:{application:{immediate:!0,handler:function(){this.resetClone()}}},computed:{affiliationUrl:function(){return"https://clinicalgenome.org/affiliation/".concat(this.appClone.affiliation_id||this.affiliationIdPlaceholder)},affiliationIdPlaceholder:function(){return this.application&&1==this.application.ep_type_id?"4000XX":"5000XX"},cdwgs:function(){return this.$store.state.cdwgs.items},hasAffiliationId:function(){return Boolean(this.appClone.affiliation_id)},hasChanges:function(){var e=["long_base_name","short_base_name","cdwg_id","affiliation_id"];for(var t in e){var n=e[t];if((null!=this.application[n]||""!=this.appClone[n])&&this.application[n]!=this.appClone[n])return!0}return!1},isClean:function(){return!this.hasChanges}},methods:{saveChanges:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasChanges){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.clearErrors(),t.next=6,e.$store.dispatch("applications/updateEpAttributes",e.appClone);case 6:t.next=14;break;case 8:if(t.prev=8,t.t0=t["catch"](2),!t.t0.response||422!=t.t0.response.status||!t.t0.response.data.errors){t.next=13;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 13:throw t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,8]])})))()},resetClone:function(){this.appClone=this.application.clone(),this.appClone.short_base_name&&(this.appClone.short_base_name=this.appClone.short_base_name.replace(/ [GV]CEP$/,"")),this.appClone.long_base_name&&(this.appClone.long_base_name=this.appClone.long_base_name.replace(/ [GV]CEP$/,"")),console.info("appClone",this.appClone)},clearErrors:function(){this.errors={}}},mounted:function(){this.$store.dispatch("cdwgs/getAll")}};re.render=B;var ce=re,ae={class:"text-sm"},ie={class:"flex justify-between"},le=Object(o["createVNode"])("h3",null,"Next Actions",-1),se=Object(o["createTextVNode"])(" Show completed "),de={class:"flex"},ue={key:0},pe={class:"flex space-x-1"},be={key:1,class:"well bg-gray-200 rounded border px-4 py-2 border-gray-300"},me=Object(o["createTextVNode"])(" There are no pending "),fe={key:0},Oe=Object(o["createTextVNode"])(" next actions. ");function je(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("edit-button"),l=Object(o["resolveComponent"])("trash-icon-button"),s=Object(o["resolveComponent"])("checkmark-icon"),d=Object(o["resolveComponent"])("checkmark-button"),u=Object(o["resolveComponent"])("data-table"),p=Object(o["resolveComponent"])("complete-next-action-form"),b=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])("div",ae,[Object(o["createVNode"])("div",ie,[le,Object(o["createVNode"])("label",null,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.showCompleted=e})},null,512),[[o["vModelCheckbox"],c.showCompleted]]),se])]),a.filteredNextActions.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,fields:c.fields,data:a.filteredNextActions,sort:c.tableSort,"onUpdate:sort":t[2]||(t[2]=function(e){return c.tableSort=e})},{"cell-entry":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createVNode"])("div",{innerHTML:t.entry},null,8,["innerHTML"])]})),"cell-assigned_to":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createVNode"])("div",de,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.assignee?t.assignee.name:"??")+"  ",1),t.assigned_to_name?(Object(o["openBlock"])(),Object(o["createBlock"])("span",ue," - "+Object(o["toDisplayString"])(t.assigned_to_name),1)):Object(o["createCommentVNode"])("",!0)])]})),"cell-action":Object(o["withCtx"])((function(t){var n=t.item;return[Object(o["createVNode"])("div",pe,[Object(o["createVNode"])(i,{onClick:function(t){return e.$router.push({name:"EditNextAction",params:{uuid:e.application.uuid,id:n.id}})}},null,8,["onClick"]),Object(o["createVNode"])(l,{onClick:function(e){return a.initiateDelete(n)}},null,8,["onClick"]),Boolean(n.date_completed)?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,width:"20",height:"20",class:{"text-green-500":Boolean(n.date_completed),"text-gray-300":!Boolean(n.date_completed)}},null,8,["class"])):(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,onClick:Object(o["withModifiers"])((function(e){return a.startCompleting(n)}),["prevent"]),title:"Mark complete"},null,8,["onClick"]))])]})),_:1},8,["fields","data","sort"])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",be,[me,c.showCompleted?(Object(o["openBlock"])(),Object(o["createBlock"])("span",fe,"or completed")):Object(o["createCommentVNode"])("",!0),Oe])),Object(o["createVNode"])(b,{modelValue:c.showCreateModal,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.showCreateModal=e}),title:"Complete next action"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{"next-action":c.selectedNextAction,onCanceled:t[3]||(t[3]=function(e){return c.showCreateModal=!1}),onCompleted:a.handleCompleted},null,8,["next-action","onCompleted"])]})),_:1},8,["modelValue"])])}function he(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dict-row"),l=Object(o["resolveComponent"])("object-dict"),s=Object(o["resolveComponent"])("input-row"),d=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])(i,{label:"Action"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",{innerHTML:n.nextAction.entry},null,8,["innerHTML"])]})),_:1}),Object(o["createVNode"])(l,{obj:n.nextAction,show:["date_created","step","target_date"],dates:["target_date","date_created"]},null,8,["obj"]),Object(o["createVNode"])(s,{label:"Date Completed",modelValue:c.dateCompleted,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.dateCompleted=e}),type:"date",errors:c.errors.date_completed},null,8,["modelValue","errors"]),Object(o["createVNode"])(d,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("button",{class:"btn white",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.markComplete&&a.markComplete.apply(a,arguments)})},"Mark Complete")]})),_:1})])}var ve={name:"ComponentName",props:{nextAction:{type:Object,required:!0}},data:function(){return{errors:[],dateCompleted:null}},computed:Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),methods:{markComplete:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/completeNextAction",{application:e.application,nextAction:e.nextAction,dateCompleted:e.dateCompleted});case 3:e.clearForm(),e.$emit("completed"),e.showModal=!1,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),Object(G["a"])(t.t0)&&(e.errors=t.t0.response.data.errors);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},clearForm:function(){this.dateCompleted=null},cancel:function(){this.clearForm(),this.$emit("canceled")}}};ve.render=he;var Ce=ve,we={class:"btn btn-xs"};function Ve(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-edit");return Object(o["openBlock"])(),Object(o["createBlock"])("button",we,[Object(o["createVNode"])(i,{width:"12",height:"16"})])}var ye={components:{IconEdit:v},props:{},data:function(){return{}},computed:{},methods:{}};ye.render=Ve;var ke=ye,ge={class:"btn btn-xs"};function Ne(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-checkmark");return Object(o["openBlock"])(),Object(o["createBlock"])("button",ge,[Object(o["createVNode"])(i,{width:"12",height:"16"})])}var xe=Object(o["createVNode"])("path",{d:"M0 11l2-2 5 5L18 3l2 2L7 18z"},null,-1);function _e(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-base");return Object(o["openBlock"])(),Object(o["createBlock"])(i,{"icon-name":n.title||"checkmark icon"},{default:Object(o["withCtx"])((function(){return[xe]})),_:1},8,["icon-name"])}var De={props:{title:{required:!1,type:String}}};De.render=_e;var Be=De,Se={components:{IconCheckmark:Be},props:{},data:function(){return{}},computed:{},methods:{}};Se.render=Ne;var Re=Se,Ae={class:"btn btn-xs"};function Fe(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-trash");return Object(o["openBlock"])(),Object(o["createBlock"])("button",Ae,[Object(o["createVNode"])(i,{width:"12",height:"16"})])}var Ee={components:{IconTrash:y},props:{},data:function(){return{}},computed:{},methods:{}};Ee.render=Fe;var Te=Ee,Ie={name:"NextActions",components:{CompleteNextActionForm:Ce,EditButton:ke,CheckmarkIcon:Be,CheckmarkButton:Re,TrashIconButton:Te},props:{nextActions:{type:Array,required:!0}},data:function(){return{tableSort:{field:"target_date",desc:!1},showCompleted:!1,showDeleteConfirmation:!1,selectedNextAction:{},errors:{},showCreateModal:!1,fields:[{name:"entry",label:"Next Action",type:String},{name:"assigned_to",label:"Assigned to",sortable:!0,resolveValue:function(e){var t=e.assigned_to;return e.assigned_to_name&&(t+="- ".concat(e.assigned_to_name)),t}},{name:"target_date",label:"Due Date",type:Date,sortable:!0},{name:"action",label:"",sortable:!1}]}},computed:Object(d["a"])(Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),{},{filteredNextActions:function(){return this.nextActions?this.showCompleted?this.nextActions:this.nextActions.filter((function(e){return!e.date_completed})):[]}}),methods:{startCompleting:function(e){this.selectedNextAction=e,this.showCreateModal=!0},handleCompleted:function(){this.$emit("completed"),this.showCreateModal=!1},initiateDelete:function(e){this.$router.push({name:"ConfirmDeleteNextAction",params:{applicationUuid:this.application.uuid,id:e.id}})}}};Ie.render=je;var $e=Ie,Me=Object(o["withScopeId"])("data-v-ac09317a");Object(o["pushScopeId"])("data-v-ac09317a");var Ue=Object(o["createVNode"])("h3",{class:"pb-2"},"EP Progress",-1),Le={class:"flex flex-row space-x-1"};Object(o["popScopeId"])();var qe=Me((function(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("progress-step");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Ue,Object(o["createVNode"])("div",Le,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.steps,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:e,step:e,application:n.application},null,8,["step","application"])})),128))])])})),Pe={class:"flex-1"},ze={class:"flex flex-row-reverse justify-between bg-transparent mt-1"},He={key:0};function Ge(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createBlock"])("div",Pe,[Object(o["createVNode"])("div",{class:["progress-step",a.displayClass]},null,2),Object(o["createVNode"])("div",ze,[Object(o["createVNode"])("div",{class:{"-mr-10":!a.isLastStep}},Object(o["toDisplayString"])(a.approvalDate),3),a.isFirstStep?(Object(o["openBlock"])(),Object(o["createBlock"])("div",He,Object(o["toDisplayString"])(a.dateInitiated),1)):Object(o["createCommentVNode"])("",!0)])])}var Ke=n("e328"),Qe={props:{step:{type:Number,required:!0},application:{type:Object,required:!0}},data:function(){return{}},computed:{dateInitiated:function(){return Object(Ke["a"])(this.application.date_initiated)},approvalDate:function(){return this.application.approval_dates&&this.application.approval_dates["step "+this.step]?Object(Ke["a"])(this.application.approval_dates["step "+this.step]):" "},displayClass:function(){var e=[];return this.isApproved?e.push("approved"):this.isCurrentStep&&e.push("active"),this.isFirstStep&&e.push("rounded-l"),this.isLastStep&&e.push("rounded-r"),e.join(" ")},isCurrentStep:function(){return this.application.current_step==this.step},isApproved:function(){return this.application.approval_dates&&"undefined"!=typeof this.application.approval_dates["step ".concat(this.step)]},isFirstStep:function(){return 1==this.step},isLastStep:function(){var e=1==this.application.ep_type_id?1:4;return this.step==e}},methods:{}};n("fc85");Qe.render=Ge;var Ye=Qe,Je={components:{ProgressStep:Ye},props:{application:{required:!0,type:Object}},computed:{steps:function(){return 2==this.application.ep_type_id?[1,2,3,4]:[1]}}};n("3f50");Je.render=qe,Je.__scopeId="data-v-ac09317a";var Xe=Je,We={key:0};function Ze(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("step-one"),l=Object(o["resolveComponent"])("tab-item"),s=Object(o["resolveComponent"])("step-two"),d=Object(o["resolveComponent"])("step-three"),u=Object(o["resolveComponent"])("step-four"),p=Object(o["resolveComponent"])("tabs-container");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[1==this.application.ep_type_id?(Object(o["openBlock"])(),Object(o["createBlock"])("div",We,[Object(o["createVNode"])(i)])):Object(o["createCommentVNode"])("",!0),2==this.application.ep_type_id?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:1,"tab-location":"right",modelValue:a.activeIndex,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.activeIndex=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"Step 1 - Define"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i)]})),_:1}),Object(o["createVNode"])(l,{label:"Step 2 - Draft Rules"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s)]})),_:1}),Object(o["createVNode"])(l,{label:"Step 3 - Pilot Rules"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d)]})),_:1}),Object(o["createVNode"])(l,{label:"Step 4 - Final Approval"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u)]})),_:1})]})),_:1},8,["modelValue"])):Object(o["createCommentVNode"])("",!0)])}function et(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("coi-log"),l=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{step:1,"document-name":"Scope and Membership Application",title:"Scope and Membership","document-type":1,"document-gets-reviewed":!0,"approve-button-label":"Approve Scope and Membership"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{class:"mb-6",application:e.application},null,8,["application"])]})),_:1})}var tt={class:"overflow-x-auto"},nt={class:"mb-6"},ot={class:"flex justify-between text-lg font-bold pb-2 mb-2 border-b"},rt={key:0},ct={key:0,class:"flex space-x-1"},at={class:"text-white bg-green-600 rounded-xl px-2"},it={key:1,class:"flex space-x-1"},lt={key:0,class:"border border-l-0 border-r-0 py-4 mb-6"},st={class:"mb-6"},dt={class:"mb-2"};function ut(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("edit-button"),l=Object(o["resolveComponent"])("date-input"),s=Object(o["resolveComponent"])("remove-button"),d=Object(o["resolveComponent"])("document-manager"),u=Object(o["resolveComponent"])("approve-step-form"),p=Object(o["resolveComponent"])("modal-dialog"),b=Object(o["resolveComponent"])("application-log");return Object(o["openBlock"])(),Object(o["createBlock"])("div",tt,[Object(o["createVNode"])("div",nt,[Object(o["createVNode"])("div",ot,[Object(o["createVNode"])("h2",null,Object(o["toDisplayString"])(n.title),1),a.dateApproved?(Object(o["openBlock"])(),Object(o["createBlock"])("div",rt,[c.editApprovalDate?(Object(o["openBlock"])(),Object(o["createBlock"])("div",it,[Object(o["createVNode"])(l,{modelValue:c.newApprovalDate,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.newApprovalDate=e})},null,8,["modelValue"]),Object(o["createVNode"])("button",{class:"btn blue",onClick:t[2]||(t[2]=function(){return a.updateApprovalDate&&a.updateApprovalDate.apply(a,arguments)})},"Save"),Object(o["createVNode"])(s,{onClick:t[3]||(t[3]=function(e){return c.editApprovalDate=!1})})])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",ct,[Object(o["createVNode"])("div",at," Appproved: "+Object(o["toDisplayString"])(a.dateApproved),1),Object(o["createVNode"])(i,{class:"text-black",onClick:a.initEditApprovalDate},null,8,["onClick"])]))])):Object(o["createCommentVNode"])("",!0)]),Object(o["renderSlot"])(e.$slots,"document",{},(function(){return[Object(o["createVNode"])("h3",null,Object(o["toDisplayString"])(n.documentName),1),Object(o["createVNode"])(d,{class:"border-b",application:e.application,"document-type-id":n.documentType,getsReviewd:n.documentGetsReviewed,step:n.step},null,8,["application","document-type-id","getsReviewd","step"])]}))]),e.application.stepIsApproved(n.step)?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("div",lt,[Object(o["createVNode"])("button",{class:"btn btn-lg w-full",onClick:t[4]||(t[4]=function(){return a.startApproveStep&&a.startApproveStep.apply(a,arguments)}),disabled:!a.isCurrentStep,title:a.isCurrentStep?"Approve this step":"You can only approve the application's current step"},Object(o["toDisplayString"])(n.approveButtonLabel),9,["disabled","title"]),Object(o["createVNode"])(p,{modelValue:c.showApproveForm,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.showApproveForm=e}),size:"xl"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{onSaved:a.hideApproveForm,onCanceled:a.hideApproveForm},null,8,["onSaved","onCanceled"])]})),_:1},8,["modelValue"])])),Object(o["renderSlot"])(e.$slots,"default"),Object(o["renderSlot"])(e.$slots,"log",{},(function(){return[Object(o["createVNode"])("div",st,[Object(o["createVNode"])("h3",dt,"Step "+Object(o["toDisplayString"])(n.step)+" Progress Log",1),Object(o["createVNode"])(b,{step:n.step},null,8,["step"])])]}))])}var pt={key:1};function bt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("final-document-view"),l=Object(o["resolveComponent"])("document-list"),s=Object(o["resolveComponent"])("document-upload-form"),d=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[n.application.stepIsApproved(n.step)?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,application:n.application,"document-type-id":n.documentTypeId,step:n.step},null,8,["application","document-type-id","step"])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",pt,[Object(o["createVNode"])("button",{class:"btn mb-2",onClick:t[1]||(t[1]=function(e){return c.showUploadForm=!0})}," Upload a new version "),Object(o["createVNode"])(l,{application:n.application,"document-type-id":n.documentTypeId},null,8,["application","document-type-id"]),Object(o["createVNode"])(d,{modelValue:c.showUploadForm,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.showUploadForm=e}),onClosed:t[5]||(t[5]=function(t){return e.$refs.uploadform.clearForm()})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{application:n.application,"document-type-id":n.documentTypeId,step:n.step,onCanceled:t[2]||(t[2]=function(e){return c.showUploadForm=!1}),onSaved:t[3]||(t[3]=function(e){return c.showUploadForm=!1}),ref:"uploadform"},null,8,["application","document-type-id","step"])]})),_:1},8,["modelValue"])]))])}var mt={class:"flex space-x-1"},ft={key:0},Ot={key:0,class:"mb-3"},jt=Object(o["createVNode"])("p",null,"Are you sure you want to continue?",-1);function ht(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-checkmark"),l=Object(o["resolveComponent"])("icon-download"),s=Object(o["resolveComponent"])("icon-edit"),d=Object(o["resolveComponent"])("trash-button"),u=Object(o["resolveComponent"])("data-table"),p=Object(o["resolveComponent"])("document-edit-form"),b=Object(o["resolveComponent"])("modal-dialog"),m=Object(o["resolveComponent"])("document-reviewed-form"),f=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[a.filteredDocuments.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,fields:a.filteredFields,data:a.filteredDocuments,sort:{field:c.fields[0].name,desc:!0}},{"cell-is_final":Object(o["withCtx"])((function(e){var t=e.item;return[t.is_final?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,onClick:function(e){return a.markFinal(t)},title:"Mark this the final version.",class:"text-gray-300 cursor-pointer inline"},null,8,["onClick"])),t.is_final?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:1,class:"text-green-600 inline",title:"This is the final document"})):Object(o["createCommentVNode"])("",!0)]})),"cell-id":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createVNode"])("div",mt,[Object(o["createVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.downloadDocument(t)}},[Object(o["createVNode"])(l,{width:"12",height:"16"})],8,["onClick"]),Object(o["createVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.openEditForm(t)}},[Object(o["createVNode"])(s,{width:"12",height:"16"})],8,["onClick"]),Object(o["createVNode"])(d,{onClick:function(e){return a.initDelete(t)}},null,8,["onClick"])])]})),_:1},8,["fields","data","sort"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(b,{modelValue:c.showEditForm,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.showEditForm=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{document:c.activeDocument,application:n.application,onCanceled:t[1]||(t[1]=function(e){return c.showEditForm=!1}),onSaved:t[2]||(t[2]=function(e){return c.showEditForm=!1}),onTriggermarkreviewed:a.showMarkReviewed},null,8,["document","application","onTriggermarkreviewed"])]})),_:1},8,["modelValue"]),Object(o["createVNode"])(b,{modelValue:c.showReviewedForm,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.showReviewedForm=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{document:c.activeDocument,application:n.application,onCanceled:a.hideReviewedForm,onSaved:a.hideReviewedForm},null,8,["document","application","onCanceled","onSaved"])]})),_:1},8,["modelValue"]),Object(o["createVNode"])(b,{modelValue:c.showDeleteConfirmation,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.showDeleteConfirmation=e}),title:"You are about to delete ".concat(c.activeDocument.type.long_name,", v").concat(c.activeDocument.version)},{default:Object(o["withCtx"])((function(){return[c.activeDocument?(Object(o["openBlock"])(),Object(o["createBlock"])("div",ft,[c.activeDocument.is_final?(Object(o["openBlock"])(),Object(o["createBlock"])("p",Ot," This version has been tagged as the final version of the document. ")):Object(o["createCommentVNode"])("",!0),jt,Object(o["createVNode"])(f,{"submit-text":"Delete Document",onCanceled:a.cancelDelete,onSubmitted:a.commitDelete},null,8,["onCanceled","onSubmitted"])])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["modelValue","title"])])}n("7db0"),n("c740"),n("fb6a");var vt=n("2909"),Ct=Object(o["createVNode"])("g",null,[Object(o["createVNode"])("path",{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"})],-1);function wt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-base");return Object(o["openBlock"])(),Object(o["createBlock"])(i,null,{default:Object(o["withCtx"])((function(){return[Ct]})),_:1})}var Vt={};Vt.render=wt;var yt=Vt,kt=Object(o["createVNode"])("h2",{class:"border-b pb-1 mb-3"},"Mark Document Reviewed",-1);function gt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[kt,Object(o["createVNode"])(i,{modelValue:c.dateReviewed,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.dateReviewed=e}),label:"Date Reviewed",errors:c.errors.date_reviewed,type:"date"},null,8,["modelValue","errors"]),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.saveDateReviewed&&a.saveDateReviewed.apply(a,arguments)})},"Mark Reviewed")]})),_:1})])}var Nt={name:"DocumentReviewForm",props:{application:{type:Object,required:!0},document:{type:Object,required:!0}},data:function(){return{dateReviewed:null,isFinal:!1,errors:{}}},computed:{isReviewed:function(){return Boolean(this.dateReviewed)}},methods:{saveDateReviewed:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/markDocumentReviewed",{application:e.application,document:e.document,dateReviewed:e.dateReviewed,isFinal:e.isFinal});case 3:e.clearForm(),e.$emit("saved"),t.next=12;break;case 7:if(t.prev=7,t.t0=t["catch"](0),!Object(G["a"])(t.t0)){t.next=12;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cancel:function(){this.clearForm(),this.$emit("canceled")},clearForm:function(){this.dateReviewed=null}}};Nt.render=gt;var xt=Nt,_t={class:"text-lg border-b pb-1 mb-3"};function Dt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("input-row"),s=Object(o["resolveComponent"])("button-row"),d=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(d,{onKeyup:Object(o["withKeys"])(a.save,["enter"])},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("h2",_t,"Edit "+Object(o["toDisplayString"])(a.type)+" version "+Object(o["toDisplayString"])(n.document.version)+" Info",1),Object(o["createVNode"])(i,{label:"File"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.document.filename),1)]})),_:1}),Object(o["createVNode"])(l,{modelValue:c.docProxy.date_received,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.docProxy.date_received=e}),label:"Date Received",type:"date",errors:c.errors.date_received},null,8,["modelValue","errors"]),Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]})),_:1},8,["onKeyup"])}var Bt={name:"DocumentEditForm",props:{document:{required:!0,type:Object},application:{required:!0,type:Object}},emits:["triggermarkreviewed"],data:function(){return{docProxy:{},errors:{}}},computed:{type:function(){return this.document.type?this.document.type.long_name:""}},watch:{document:{immediate:!0,handler:function(){this.docProxy=JSON.parse(JSON.stringify(this.document))}}},methods:{cancel:function(){this.docProxy={},this.$emit("canceled")},save:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateDocumentInfo",{application:e.application,document:e.docProxy});case 3:e.docProxy={},e.$emit("saved"),t.next=11;break;case 7:throw t.prev=7,t.t0=t["catch"](0),Object(G["a"])(t.t0)&&(e.errors=t.t0.response.data.errors),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}};Bt.render=Dt;var St=Bt,Rt=(n("0c18"),{components:{IconDownload:yt,IconCheckmark:Be,DocumentReviewedForm:xt,DocumentEditForm:St,IconEdit:v,TrashButton:Te},props:{application:{type:Object,required:!0},documentTypeId:{type:Number,required:!0},getsReviewed:{type:Boolean,required:!1,default:!0}},data:function(){return{showDeleteConfirmation:!1,showReviewedForm:!1,showEditForm:!1,activeDocument:{type:{}},fields:[{name:"version",label:"Version",type:Number},{name:"filename",label:"File",type:String},{name:"date_received",label:"Date Received",type:Date},{name:"is_final",label:"Final",type:Boolean,sortable:!1,class:["text-center"],headerClass:["text-center"]},{name:"id",label:"",sortable:!1}]}},computed:{filteredFields:function(){var e=Object(vt["a"])(this.fields);if(!this.getsReviewed){var t=e.findIndex((function(e){return e&&"date_reviewed"==e.name}));e=e.slice(0,t)}return e},filteredDocuments:function(){var e=this;return this.application&&this.application.documents?this.application.documents.filter((function(t){return t.document_type_id==e.documentTypeId})):[]},hasFinalVersion:function(){return this.filteredDocuments.findIndex((function(e){return e.is_final}))>-1},finalVersion:function(){return this.filteredDocuments.find((function(e){return e.is_final}))||{}}},methods:{showMarkReviewed:function(e){this.activeDocument=e,this.showReviewedForm=!0},hideReviewedForm:function(){this.showReviewedForm=!1},downloadDocument:function(e){window.location=e.download_url},confirmNewFinal:function(e){var t="There is already a version of this document marked as final.  Only one version can be marked as final.  Do you want to mark this version (version ".concat(e.version,") as final instead of ").concat(this.finalVersion.version);return confirm(t)},markFinal:function(e){this.hasFinalVersion&&!this.confirmNewFinal(e)||this.$store.dispatch("applications/markDocumentVersionFinal",{application:this.application,document:e})},openEditForm:function(e){this.showEditForm=!0,this.activeDocument=e},initDelete:function(e){this.activeDocument=e,this.showDeleteConfirmation=!0},cancelDelete:function(){this.showDeleteConfirmation=!1},commitDelete:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/deleteDocument",{application:e.application,document:e.activeDocument});case 3:e.showDeleteConfirmation=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(G["a"])(t.t0)&&alert(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}});Rt.render=ht;var At=Rt,Ft={class:"pb-2 border-b mb-4"},Et={type:"file",ref:"fileInput"};function Tt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{onKeyup:Object(o["withKeys"])(a.save,["enter"])},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("h2",Ft,"Upload "+Object(o["toDisplayString"])(a.documentType.long_name)+" document(s)",1),Object(o["createVNode"])(i,{label:"Document",errors:c.errors.file},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("input",Et,null,512)]})),_:1},8,["errors"]),Object(o["createVNode"])(i,{label:"Date Received",type:"date",modelValue:c.newDocument.date_received,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.newDocument.date_received=e}),errors:c.errors.date_receoved},null,8,["modelValue","errors"]),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("button",{class:"btn white",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]})),_:1},8,["onKeyup"])}n("4160"),n("b64b"),n("159b");var It={props:{application:{type:Object,required:!0},documentTypeId:{type:Number,required:!0},step:{type:Number,required:!1,default:null}},data:function(){return{newDocument:{file:null,date_received:new Date,date_reviewed:null,step:this.step,document_type_id:this.documentTypeId},errors:{}}},computed:Object(d["a"])(Object(d["a"])({},Object(u["c"])({documentTypes:function(e){return e.doctypes.items}})),{},{isReviewed:function(){return Boolean(this.newDocument.date_reviewed)},documentType:function(){return 0==this.documentTypes.length?{}:this.$store.getters["doctypes/getItemById"](this.documentTypeId)}}),methods:{save:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=new FormData,Object.keys(e.newDocument).forEach((function(t){var o=e.newDocument[t];null!=o&&n.append(t,o)})),n.append("file",e.$refs.fileInput.files[0]),t.next=6,e.$store.dispatch("applications/addDocument",{application:e.application,documentData:n});case 6:e.clearForm(),e.$emit("saved"),t.next=15;break;case 10:if(t.prev=10,t.t0=t["catch"](0),!Object(G["a"])(t.t0)){t.next=15;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},cancel:function(){this.clearForm(),this.$emit("canceled")},clearForm:function(){this.initNewDocument(),this.clearErrors()},initNewDocument:function(){this.$refs.fileInput.value=null,this.newDocument={file:null,date_received:Object(Ke["a"])(new Date),date_reviewed:null,step:this.step,document_type_id:this.documentTypeId}},clearErrors:function(){this.errors={}}},mounted:function(){this.$store.dispatch("doctypes/getItems")}};It.render=Tt;var $t=It,Mt={key:1};function Ut(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("edit-button"),s=Object(o["resolveComponent"])("date-input"),d=Object(o["resolveComponent"])("remove-button"),u=Object(o["resolveComponent"])("document-edit-form"),p=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])(i,{label:"Final Document"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",null,[a.finalDocument.filename?(Object(o["openBlock"])(),Object(o["createBlock"])("a",{key:0,href:a.finalDocument.download_url,class:"text-blue-500 underline"},Object(o["toDisplayString"])(a.finalDocument.filename),9,["href"])):(Object(o["openBlock"])(),Object(o["createBlock"])("span",Mt,"none on file"))])]})),_:1}),Object(o["createVNode"])(i,{label:"Date Received"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.firstDateReceived)+" ",1),Object(o["createVNode"])(l,{onClick:a.initEditReceived},null,8,["onClick"])],512),[[o["vShow"],!c.editDateReceived]]),Object(o["withDirectives"])(Object(o["createVNode"])("div",null,[Object(o["createVNode"])(s,{modelValue:c.newDateReceived,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.newDateReceived=e}),class:"inline-block"},null,8,["modelValue"]),Object(o["createVNode"])("button",{class:"btn btn-sm blue",onClick:t[2]||(t[2]=function(){return a.saveDateReceived&&a.saveDateReceived.apply(a,arguments)})},"Save"),Object(o["createVNode"])(d,{class:"ml-1",onClick:t[3]||(t[3]=function(e){return c.editDateReceived=!1})})],512),[[o["vShow"],c.editDateReceived]])]})),_:1}),Object(o["createVNode"])(p,{modelValue:c.showEditForm,"onUpdate:modelValue":t[6]||(t[6]=function(e){return c.showEditForm=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{document:a.finalDocument,application:n.application,onCanceled:t[4]||(t[4]=function(e){return c.showEditForm=!1}),onSaved:t[5]||(t[5]=function(e){return c.showEditForm=!1})},null,8,["document","application"])]})),_:1},8,["modelValue"])])}var Lt={components:{DocumentEditForm:St,EditButton:ke,RemoveButton:Z},props:{application:{type:Object,required:!0},documentTypeId:{type:Number,required:!0},step:{type:Number,required:!1,default:null}},data:function(){return{showEditForm:!1,editDateReceived:!1,newDateReceived:null,editDateReviewed:!1,newDateReviewed:null}},computed:{finalDocument:function(){return this.application.finalDocumentOfType(this.documentTypeId)},firstDocument:function(){return this.application.firstDocumentOfType(this.documentTypeId)},finalDateReviewed:function(){return this.finalDocument.date_reviewed?Object(Ke["a"])(this.finalDocument.date_reviewed):"--"},firstDateReceived:function(){return this.firstDocument.date_received?Object(Ke["a"])(this.firstDocument.date_received):"--"}},methods:{initEditReceived:function(){this.editDateReceived=!0,this.newDateReceived=this.firstDateReceived},saveDateReceived:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateDocumentInfo",{application:e.application,document:{uuid:e.firstDocument.uuid,date_received:e.newDateReceived,date_reviewed:e.firstDocument.date_reviewed}});case 3:e.editDateReceived=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(G["a"])(t.t0)&&console.info("saveDateReceived errors: ",t.t0.response.data.errors);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},initEditReviewed:function(){this.editDateReviewed=!0,this.newDateReviewed=this.finalDateReviewed},saveDateReviewed:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateDocumentInfo",{application:e.application,document:{uuid:e.finalDocument.uuid,date_reviewed:e.newDateReviewed,date_received:e.finalDocument.date_received}});case 3:e.editDateReviewed=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(G["a"])(t.t0)&&console.info("saveDateReviewd errors: ",t.t0.response.data.errors);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}};Lt.render=Ut;var qt=Lt,Pt={name:"DocumentManager",components:{DocumentUploadForm:$t,FinalDocumentView:qt,DocumentList:At},props:{application:{type:Object,required:!0},documentTypeId:{type:Number,required:!0},getsReviewed:{type:Boolean,required:!1,default:!0},step:{type:Number,required:!1,default:null}},data:function(){return{showUploadForm:!1}}};Pt.render=bt;var zt=Pt,Ht={class:"text-sm block"},Gt=Object(o["createTextVNode"])(" Send notification email to contacts "),Kt=Object(o["createVNode"])("h4",{class:"font-bold border-b"},"Email",-1),Qt={type:"file",multiple:"",ref:"attachmentsField"},Yt=Object(o["createTextVNode"])("ClinGen Services will be carbon copied on this email."),Jt={key:0};function Xt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("dictionary-row"),s=Object(o["resolveComponent"])("rich-text-editor"),d=Object(o["resolveComponent"])("note"),u=Object(o["resolveComponent"])("button-row"),p=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("h2",null,"Approve Step "+Object(o["toDisplayString"])(e.application.current_step),1),Object(o["createVNode"])(i,{modelValue:c.dateApproved,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.dateApproved=e}),type:"date",errors:c.errors.date_approved,label:"Date Approved"},null,8,["modelValue","errors"]),Object(o["createVNode"])(l,{label:""},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",null,[Object(o["createVNode"])("label",Ht,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.notifyContacts=e}),value:!0},null,512),[[o["vModelCheckbox"],c.notifyContacts]]),Gt])])]})),_:1}),Object(o["createVNode"])(o["Transition"],{name:"slide-fade-down"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("div",null,[Kt,Object(o["createVNode"])(i,{label:"Subject"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=function(e){return c.email.subject=e}),class:"w-full"},null,512),[[o["vModelText"],c.email.subject]])]})),_:1}),Object(o["createVNode"])(i,{label:"Body"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:c.email.body,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.email.body=e})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(i,{label:"Attachments"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("input",Qt,null,512)]})),_:1}),1==e.application.current_step?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0},{default:Object(o["withCtx"])((function(){return[Yt]})),_:1})):Object(o["createCommentVNode"])("",!0)],512),[[o["vShow"],c.notifyContacts]])]})),_:1}),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("button",{class:"btn",onClick:t[5]||(t[5]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createVNode"])("button",{class:"btn blue",onClick:t[6]||(t[6]=function(){return a.save&&a.save.apply(a,arguments)})},[Object(o["createTextVNode"])(" Approve step "+Object(o["toDisplayString"])(e.application.current_step)+" ",1),c.notifyContacts?(Object(o["openBlock"])(),Object(o["createBlock"])("span",Jt," and notify ")):Object(o["createCommentVNode"])("",!0)])]})),_:1})]})),_:1})}var Wt=n("f96b"),Zt=n("85fe"),en={components:{RichTextEditor:Zt["a"]},emits:["canceled","saved"],data:function(){return{dateApproved:null,notifyContacts:!1,email:{subject:"",body:""},errors:{}}},computed:Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),watch:{notifyContacts:function(e){var t=this;console.info("url:","/api/email-drafts/".concat(this.application.uuid,"/").concat(this.application.current_step)),console.info("to",e),e&&Wt["a"].get("/api/email-drafts/".concat(this.application.uuid,"/").concat(this.application.current_step)).then((function(e){t.email=e.data}))}},methods:{clearForm:function(){this.dateApproved=null},cancel:function(){this.clearForm(),this.$emit("canceled")},save:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={application:e.application,dateApproved:e.dateApproved,notifyContacts:e.notifyContacts,subject:e.email.subject,body:e.email.body,attachments:e.$refs.attachmentsField.files},t.prev=1,t.next=4,e.$store.dispatch("applications/approveCurrentStep",n);case 4:e.clearForm(),e.$emit("saved"),t.next=13;break;case 8:if(t.prev=8,t.t0=t["catch"](1),!Object(G["a"])(t.t0)){t.next=13;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},mounted:function(){}};en.render=Xt;var tn=en,nn={components:{ApplicationLog:x,DocumentManager:zt,ApproveStepForm:tn,EditButton:ke,RemoveButton:Z},props:{title:{type:String,required:!1,default:"YOU SHOULD SET A TITLE"},step:{type:Number,required:!0},documentName:{type:String,required:!1,default:'Set a document-type attribute if you don\'t use the "document" slot'},documentType:{type:Number,required:!1,default:1},documentGetsReviewed:{type:Boolean,required:!1,default:!0},approveButtonLabel:{type:String,required:!1,default:'Set "approve-button-label" if not overriding slot "approve-button"'}},emits:["documentUploaded","stepApproved"],data:function(){return{showApproveForm:!1,editApprovalDate:!1,newApprovalDate:null}},computed:Object(d["a"])(Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),{},{isCurrentStep:function(){return this.step==this.application.current_step},dateApproved:function(){return this.application.approvalDateForStep(this.step)?Object(Ke["a"])(this.application.approvalDateForStep(this.step)):null}}),methods:{startApproveStep:function(){this.showApproveForm=!0},approveStep:function(){this.$store.dispatch("applications/approveCurrentStep",{application:this.application,step:this.step})},hideApproveForm:function(){this.showApproveForm=!1},initEditApprovalDate:function(){this.editApprovalDate=!0,this.newApprovalDate=this.dateApproved},updateApprovalDate:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateApprovalDate",{application:e.application,dateApproved:e.newApprovalDate,step:e.step});case 3:e.editApprovalDate=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(G["a"])(t.t0)&&(e.errors=t.t0.response.data.errors);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}};nn.render=ut;var on=nn,rn={class:"flex justify-between"},cn=Object(o["createVNode"])("h2",null,"Conflict of Interest",-1),an={class:"my-2 flex justify-between"},ln=Object(o["createTextVNode"])(" COI URL: "),sn=Object(o["createTextVNode"])("   "),dn=Object(o["createTextVNode"])("   "),un={key:0,class:"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200"},pn={key:1};function bn(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("coi-legacy-upload"),l=Object(o["resolveComponent"])("router-link"),s=Object(o["resolveComponent"])("add-contact-control"),d=Object(o["resolveComponent"])("icon-refresh"),u=Object(o["resolveComponent"])("data-table"),p=Object(o["resolveComponent"])("coi-detail"),b=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])("div",rn,[cn,e.$store.state.features.legacyCoi?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,application:n.application},null,8,["application"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",an,[Object(o["createVNode"])("div",null,[ln,Object(o["createVNode"])(l,{to:n.application.coi_url,class:"text-blue-500"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$store.state.hostname)+Object(o["toDisplayString"])(n.application.coi_url),1)]})),_:1},8,["to"]),sn,Object(o["withDirectives"])(Object(o["createVNode"])("a",{href:a.mailtoLink,class:"btn btn-xs",ref:"mailtobutton"},"Send url to contacts.",8,["href"]),[[o["vShow"],n.application.hasContacts]]),Object(o["withDirectives"])(Object(o["createVNode"])(s,{class:"inline-block"},null,512),[[o["vShow"],!n.application.hasContacts]]),dn,Object(o["createVNode"])("button",{class:"btn btn-xs",onClick:t[1]||(t[1]=function(){return a.downloadReport&&a.downloadReport.apply(a,arguments)})},"get coi report")]),Object(o["createVNode"])(d,{height:14,width:14,class:{"animate-spin":c.refreshing},onClick:a.refresh},null,8,["class","onClick"])]),a.hasCois?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("div",un," No Conflict of interest surveys completed ")),a.hasCois?(Object(o["openBlock"])(),Object(o["createBlock"])("div",pn,[Object(o["createVNode"])(u,{fields:c.fields,data:n.application.cois},{"cell-id":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.showResponse(t)}},"view",8,["onClick"])]})),_:1},8,["fields","data"]),Object(o["createVNode"])(b,{modelValue:c.showResponseDialog,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.showResponseDialog=e}),size:"xl"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{response:c.currentResponse},null,8,["response"])]})),_:1},8,["modelValue"])])):Object(o["createCommentVNode"])("",!0)])}n("d81d");var mn=Object(o["createVNode"])("g",null,[Object(o["createVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[Object(o["createVNode"])("path",{d:"M10 3v2a5 5 0 0 0-3.54 8.54l-1.41 1.41A7 7 0 0 1 10 3zm4.95 2.05A7 7 0 0 1 10 17v-2a5 5 0 0 0 3.54-8.54l1.41-1.41zM10 20l-4-4 4-4v8zm0-12V0l4 4-4 4z"})])],-1);function fn(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-base");return Object(o["openBlock"])(),Object(o["createBlock"])(i,null,{default:Object(o["withCtx"])((function(){return[mn]})),_:1})}var On={props:{},data:function(){return{}},computed:{},methods:{}};On.render=fn;var jn=On,hn=(n("c975"),{key:0}),vn={class:"block-title"},Cn={class:"text-sm response-data"},wn={class:"flex-0"},Vn=Object(o["createVNode"])("p",{class:"mb-2"},"This is a legacy response.",-1),yn={key:1,class:"response-data"};function kn(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dictionary-row");return n.response?(Object(o["openBlock"])(),Object(o["createBlock"])("div",hn,[Object(o["createVNode"])("h2",vn," COI response for "+Object(o["toDisplayString"])(n.response.first_name.response)+" "+Object(o["toDisplayString"])(n.response.last_name.response),1),Object(o["createVNode"])("div",Cn,[Object(o["createVNode"])(i,{label:"Name","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.response.first_name.response)+" "+Object(o["toDisplayString"])(n.response.last_name.response),1)]})),_:1}),Object(o["createVNode"])(i,{label:"Email","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.response.email.response),1)]})),_:1}),n.response.document_uuid?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,label:"COI File","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",wn,[Vn,Object(o["createVNode"])("button",{class:"btn btn-xs",onClick:t[1]||(t[1]=function(e){return a.downloadDocument(n.response.download_url.response)})}," Download the COI. ")])]})),_:1})):Object(o["createCommentVNode"])("",!0),n.response.document_uuid?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("div",yn,[Object(o["createVNode"])(i,{label:n.response.work_fee_lab.question,vertical:!0,"label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.getQuestionValue(n.response.work_fee_lab.response)),1)]})),_:1},8,["label"]),Object(o["createVNode"])(i,{label:n.response.contributions_to_gd_in_ep.question,vertical:!0,"label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.getQuestionValue(n.response.contributions_to_gd_in_ep.response))+" ",1),1==n.response.contributions_to_gd_in_ep.response?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,label:n.response.contributions_to_genes.question,vertical:!0,class:"pb-1 mb-1 ml-4","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.getQuestionValue(n.response.contributions_to_genes.response)),1)]})),_:1},8,["label"])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["label"]),Object(o["createVNode"])(i,{label:n.response.independent_efforts.question,vertical:!0,"label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.getQuestionValue(n.response.independent_efforts.response))+" ",1),[1,2].indexOf(n.response.independent_efforts.response)>-1?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,label:n.response.independent_efforts_details.question,vertical:!0,class:"pb-1 mb-1 ml-4 border-none","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.getQuestionValue(n.response.independent_efforts_details.response)),1)]})),_:1},8,["label"])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["label"]),Object(o["createVNode"])(i,{label:n.response.coi.question,vertical:!0,class:"pb-1 mb-1","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.getQuestionValue(n.response.coi.response))+" ",1),[1,2].indexOf(n.response.coi.response)>-1?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,label:n.response.coi_details.question,vertical:!0,class:"pb-1 mb-1 ml-4","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.getQuestionValue(n.response.coi_details.response)),1)]})),_:1},8,["label"])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["label"])]))])])):Object(o["createCommentVNode"])("",!0)}var gn={props:{response:{type:Object||null,required:!0}},data:function(){return{}},computed:{isLegacy:function(){return!1}},methods:{getQuestionValue:function(e){return 1===e?"Yes":0===e?"No":2===e?"Unsure":e},downloadDocument:function(e){window.location=e}}};n("9d27");gn.render=kn;var Nn=gn,xn=Object(o["createVNode"])("h2",null,"Upload a legacy COI file",-1),_n=Object(o["createTextVNode"])("   "),Dn={type:"file",ref:"fileInput"};function Bn(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])("button",{class:"btn btn-xs",onClick:t[1]||(t[1]=function(e){return c.showModal=!0})},"Upload COI file"),Object(o["createVNode"])(s,{modelValue:c.showModal,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.showModal=e})},{default:Object(o["withCtx"])((function(){return[xn,Object(o["createVNode"])(i,{label:"Name",type:"text",errors:a.nameErrors},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.newCoi.first_name=e}),placeholder:"First"},null,512),[[o["vModelText"],c.newCoi.first_name]]),_n,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=function(e){return c.newCoi.last_name=e}),placeholder:"Last"},null,512),[[o["vModelText"],c.newCoi.last_name]])]})),_:1},8,["errors"]),Object(o["createVNode"])(i,{label:"Email",type:"email",modelValue:c.newCoi.email,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.newCoi.email=e}),placeholder:"email@example.com",errors:c.errors.email},null,8,["modelValue","errors"]),Object(o["createVNode"])(i,{label:"COI File",errors:c.errors.file},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("input",Dn,null,512)]})),_:1},8,["errors"]),Object(o["createVNode"])(l,{onSubmitClicked:a.save,onCancelClicked:a.cancel,"submit-text":"Save"},null,8,["onSubmitClicked","onCancelClicked"])]})),_:1},8,["modelValue"])])}var Sn=n("da95"),Rn={props:{application:{type:Sn["a"],required:!0}},emits:["saved","canceled","done"],data:function(){return{showModal:!1,newCoi:{email:null,first_name:null,last_name:null},errors:{}}},computed:{nameErrors:function(){var e=[];return this.errors.first_name&&e.push(this.errors.first_name),this.errors.last_name&&e.push(this.errors.last_name),e}},methods:{save:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=e.assembleFormData(e.$refs["fileInput"],e.newCoi),t.next=4,e.$store.dispatch("storeLegacyCoi",{application:e.application,coiData:n});case 4:e.clearForm(),e.showModal=!1,e.$emit("saved"),e.$emit("done"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),Object(G["a"])(t.t0)&&(e.errors=t.t0.response.data.errors);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},cancel:function(){this.clearForm(),this.showModal=!1,this.$emit("canceled")},clearForm:function(){this.newCoi={email:null,first_name:null,last_name:null},this.errors={}}},setup:function(){var e=function(e,t){var n=new FormData;return Object.keys(t).forEach((function(e){var o=t[e];null!=o&&n.append(e,o)})),n.append("file",e.files[0]),n.append("document_type_id",6),n};return{assembleFormData:e}}};Rn.render=Bn;var An=Rn,Fn={components:{IconRefresh:jn,CoiDetail:Nn,CoiLegacyUpload:An,AddContactControl:I},props:{application:{required:!0,type:Object}},data:function(){return{showResponseDialog:!1,currentResponse:null,fields:[{name:"data.first_name",label:"Name",type:String,sortable:!0,resolveValue:function(e){return"".concat(e.data.first_name," ").concat(e.data.last_name)}},{name:"data.email",label:"Email",type:String,sortable:!0},{name:"created_at",label:"Date Completed",type:Date,sortable:!0},{name:"id",label:"",sortale:!1}],refreshing:!1}},computed:{hasCois:function(){return this.application.cois&&this.application.cois.length>0},mailtoLink:function(){return"mailto:".concat(this.application.contacts.map((function(e){return e.email})).join(";"),"?subject=Your COI Link for your Expert Panel Application&body=Your expert panel's COI form: ").concat(this.$store.state.hostname).concat(this.application.coi_url,".")}},methods:{showResponse:function(e){this.currentResponse=e.response_document,this.showResponseDialog=!0},refresh:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.refreshing=!0,t.next=3,e.$store.dispatch("applications/getApplication",e.application.uuid);case 3:e.refreshing=!1;case 4:case"end":return t.stop()}}),t)})))()},mailToContacts:function(){this.$refs.mailtobutton.click()},downloadReport:function(){var e="/report/".concat(this.application.coi_code);window.location=e}}};Fn.render=bn;var En=Fn,Tn={name:"StepOne",components:{BaseStep:on,CoiLog:En},data:function(){return{}},computed:Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),methods:{}};Tn.render=et;var In=Tn;function $n(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createBlock"])(i,{step:2,"document-type":2,"document-name":"Draft Specifications","document-gets-reviewed":!1,"approve-button-label":"Approve Draft Specifications",title:"Draft ACMG Guideline Specifications"})}var Mn={name:"StepTwo",components:{BaseStep:on},props:{},data:function(){return{}},computed:Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),methods:{}};Mn.render=$n;var Un=Mn,Ln=Object(o["createVNode"])("h2",null,"Final Specifications",-1),qn=Object(o["createVNode"])("h2",null,"Pilot Classifications",-1);function Pn(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("document-manager"),l=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{step:3,"approve-button-label":"Approve Pilot and Specifications",title:"Pilot ACMG Guideline Specificiations"},{document:Object(o["withCtx"])((function(){return[Ln,Object(o["createVNode"])(i,{application:e.application,"document-type-id":3,getsReviewd:!1,step:3,class:"mb-4"},null,8,["application"]),qn,Object(o["createVNode"])(i,{application:e.application,"document-type-id":4,getsReviewd:!1,step:3,class:"mb-6"},null,8,["application"])]})),_:1})}var zn={name:"StepThree",components:{BaseStep:on,DocumentManager:zt},props:{},data:function(){return{}},computed:Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),methods:{formatDate:function(e){return Object(Ke["a"])(e)}}};zn.render=Pn;var Hn=zn;function Gn(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createBlock"])(i,{step:4,"document-type":5,"document-name":"Final Approved Application","document-gets-reviewed":!0,"approve-button-label":"Approve Final Application",title:"Final Approval"})}var Kn={name:"StepFour",components:{BaseStep:on},props:{},data:function(){return{}},computed:Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),methods:{}};Kn.render=Gn;var Qn=Kn,Yn={components:{StepOne:In,StepTwo:Un,StepThree:Hn,StepFour:Qn},data:function(){return{activeStep:1}},computed:Object(d["a"])(Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),{},{activeIndex:{deep:!0,get:function(){return this.application&&this.application.current_step?this.application.current_step-1:0},set:function(e){this.activeStep=e+1}}})};Yn.render=Ze;var Jn=Yn,Xn={name:"ApplicationDetail",components:{ApplicationLog:x,EpAttributesForm:ce,NextActions:$e,ProgressChart:Xe,StepTabs:Jn},props:{uuid:{type:String,required:!0}},data:function(){return{showModal:!1}},watch:{$route:function(){this.showModal=!!this.$route.meta.showModal&&Boolean(this.$route.meta.showModal)}},computed:Object(d["a"])(Object(d["a"])({},Object(u["b"])({application:"applications/currentItem"})),{},{hasPendingNextAction:function(){return"undefined"!=typeof this.application&&this.application.latest_pending_next_action}}),methods:{hideModal:function(){this.$router.replace({name:"ApplicationDetail",params:{uuid:this.uuid}})},handleModalClosed:function(e){this.clearModalForm(e),this.$router.push({name:"ApplicationDetail",params:{uuid:this.uuid}})},clearModalForm:function(){"function"===typeof this.$refs.modalView.clearForm&&this.$refs.modalView.clearForm()}},mounted:function(){this.$store.dispatch("applications/getApplication",this.uuid),this.showModal=Boolean(this.$route.meta.showModal)}};Xn.render=s;t["default"]=Xn},"3f50":function(e,t,n){"use strict";n("8811")},"4d19":function(e,t,n){"use strict";n("9079")},"598d":function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r={class:"block-title"};function c(e,t,n,c,a,i){var l=this,s=Object(o["resolveComponent"])("input-row"),d=Object(o["resolveComponent"])("step-input"),u=Object(o["resolveComponent"])("rich-text-editor"),p=Object(o["resolveComponent"])("button-row"),b=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(b,{class:"log-entry-form",ref:"form-container"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("h2",r,Object(o["toDisplayString"])(l.$route.meta.title),1),Object(o["createVNode"])(s,{label:"Log Date",modelValue:a.newEntry.log_date,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.newEntry.log_date=e}),errors:a.errors.log_date,type:"date",ref:"logdate"},null,8,["modelValue","errors"]),2==e.application.ep_type_id?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,modelValue:a.newEntry.step,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.newEntry.step=e}),errors:a.errors.step},null,8,["modelValue","errors"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(s,{label:"Entry",errors:a.errors.entry},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:a.newEntry.entry,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.newEntry.entry=e})},null,8,["modelValue"])]})),_:1},8,["errors"]),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("button",{class:"btn",onClick:t[4]||(t[4]=function(){return i.cancel&&i.cancel.apply(i,arguments)})},"Cancel"),Object(o["createVNode"])("button",{class:"btn blue",onClick:t[5]||(t[5]=function(){return i.save&&i.save.apply(i,arguments)})},"Save")]})),_:1})]})),_:1},512)}n("a4d3"),n("e01a"),n("7db0"),n("96cf");var a=n("1da1"),i=n("5530"),l=n("5502"),s=n("e328"),d=n("a06a"),u=n("85fe"),p={name:"LogEntryForm",components:{StepInput:d["a"],RichTextEditor:u["a"]},props:{id:{required:!1,default:null}},data:function(){return{newEntry:{log_date:new Date,step:null,entry:""},errors:{}}},computed:Object(i["a"])({},Object(l["b"])({application:"applications/currentItem"})),watch:{id:{immediate:!0,handler:function(){var e=this.findEntry();e&&this.syncEntry(e)}},application:{immediate:!0,handler:function(){var e=this.findEntry();e&&this.syncEntry(e)}}},methods:{findEntry:function(){var e=this;return null===this.id?null:this.application.log_entries?this.application.log_entries.find((function(t){return t.id==e.id})):void 0},initNewEntry:function(){this.newEntry={log_date:Object(s["a"])(new Date),step:null,entry:""}},syncEntry:function(e){e&&(this.newEntry={id:e.id,log_date:Object(s["a"])(new Date(Date.parse(e.created_at))),step:e.properties.step,entry:e.description})},cancel:function(){this.initNewEntry(),this.$emit("canceled")},save:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.newEntry.id){t.next=6;break}return t.next=4,e.$store.dispatch("applications/updateLogEntry",{application:e.application,updatedEntry:e.newEntry});case 4:t.next=8;break;case 6:return t.next=8,e.$store.dispatch("applications/addLogEntry",{application:e.application,logEntryData:e.newEntry});case 8:e.initNewEntry(),e.$emit("saved"),t.next=17;break;case 12:if(t.prev=12,t.t0=t["catch"](0),!t.t0.response||422!=t.t0.response.status||!t.t0.response.data.errors){t.next=17;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))()}},mounted:function(){this.$el.querySelectorAll("input")[0].focus()}};p.render=c;t["default"]=p},"6d83":function(e,t,n){},8811:function(e,t,n){},9079:function(e,t,n){},"9d27":function(e,t,n){"use strict";n("e5bb")},b2aa:function(e,t,n){"use strict";n.r(t);n("b0c0");var o=n("7a23"),r=Object(o["createVNode"])("h2",{class:"block-title"},"Add a contact",-1),c={class:"flex space-x-4"},a={class:"flex-1"},i={key:0,class:"pt-2 border-l pl-2 flex-1"},l=Object(o["createVNode"])("h5",{class:"font-bold border-b mb-1 pb-1"},"Matching people",-1),s={key:1,class:"text-xs"};function d(e,t,n,d,u,p){var b=Object(o["resolveComponent"])("input-row"),m=Object(o["resolveComponent"])("button-row"),f=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(f,{onKeyup:Object(o["withKeys"])(p.save,["enter"])},{default:Object(o["withCtx"])((function(){return[r,Object(o["createVNode"])("div",c,[Object(o["createVNode"])("div",a,[Object(o["createVNode"])(b,{type:"text",modelValue:u.newContact.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return u.newContact.email=e}),errors:u.errors.email,placeholder:"elenor@medplace.com",label:"Email"},null,8,["modelValue","errors"]),Object(o["createVNode"])(b,{type:"text",modelValue:u.newContact.first_name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return u.newContact.first_name=e}),errors:u.errors.first_name,placeholder:"Elenor",label:"First name"},null,8,["modelValue","errors"]),Object(o["createVNode"])(b,{type:"text",modelValue:u.newContact.last_name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return u.newContact.last_name=e}),errors:u.errors.last_name,placeholder:"Shelstrop",label:"Last name"},null,8,["modelValue","errors"]),Object(o["createVNode"])(b,{type:"text",modelValue:u.newContact.phone,"onUpdate:modelValue":t[4]||(t[4]=function(e){return u.newContact.phone=e}),errors:u.errors.phone,placeholder:"1-555-867-5309",label:"Phone"},null,8,["modelValue","errors"]),Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("button",{class:"btn",onClick:t[5]||(t[5]=function(){return p.cancel&&p.cancel.apply(p,arguments)})},"Cancel"),Object(o["createVNode"])("button",{class:"btn blue",onClick:t[6]||(t[6]=function(){return p.save&&p.save.apply(p,arguments)})},"Save")]})),_:1})]),Object(o["createVNode"])(o["Transition"],{name:"slide-fade"},{default:Object(o["withCtx"])((function(){return[p.suggestedPeople.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])("div",i,[l,Object(o["createVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(p.suggestedPeople,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("li",{key:e.uuid,class:["flex justify-between my-2",{"text-gray-400":p.isAlreadyContact(e)}],title:p.isAlreadyContact(e)?"This person is already a contact for this application":""},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.name)+" ",1),p.isAlreadyContact(e)?(Object(o["openBlock"])(),Object(o["createBlock"])("span",s,"Already a contact")):(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,class:"btn btn-xs",onClick:function(t){return p.addExistingPersonAsContact(e)}}," Add as contact ",8,["onClick"]))],10,["title"])})),128))])])):Object(o["createCommentVNode"])("",!0)]})),_:1})])]})),_:1},8,["onKeyup"])}n("4de4"),n("caad"),n("d81d"),n("2532"),n("96cf");var u=n("1da1"),p=n("5530"),b=n("5502"),m=n("033d"),f=n("ec26"),O={props:{},data:function(){return{createNew:!1,newContact:{first_name:null,last_name:null,email:null,phone:null,role:null,uuid:null},errors:{}}},emits:["canceled","saved","done"],computed:Object(p["a"])(Object(p["a"])({},Object(b["b"])({application:"applications/currentItem",people:"people/all"})),{},{suggestedPeople:function(){var e=this;return this.newContact.email?this.people.filter((function(t){return t.email.includes(e.newContact.email)})):[]}}),methods:{clearForm:function(){this.newContact={first_name:null,last_name:null,email:null,phone:null,role:null,uuid:null}},clearErrors:function(){this.errors={}},cancel:function(){this.clearForm(),this.$emit("canceled"),this.$emit("done")},save:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.clearErrors(),t.prev=1,n=Object(p["a"])({},e.newContact),n.uuid=Object(f["a"])(),t.next=6,e.$store.dispatch("people/createPerson",n);case 6:return o=e.$store.getters["people/personWithUuid"],t.next=9,e.$store.dispatch("applications/addContact",{application:e.application,contact:o(n.uuid)});case 9:e.clearForm(),e.$emit("saved"),e.$emit("done"),t.next=20;break;case 14:if(t.prev=14,t.t0=t["catch"](1),!Object(m["a"])(t.t0)){t.next=19;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 19:throw t.t0;case 20:case"end":return t.stop()}}),t,null,[[1,14]])})))()},addExistingPersonAsContact:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("applications/addContact",{application:t.application,contact:e});case 3:t.clearForm(),t.$emit("saved"),t.$emit("done"),n.next=14;break;case 8:if(n.prev=8,n.t0=n["catch"](0),!Object(m["a"])(n.t0)){n.next=13;break}return t.errors=n.t0.response.data.errors,n.abrupt("return");case 13:throw n.t0;case 14:case"end":return n.stop()}}),n,null,[[0,8]])})))()},isAlreadyContact:function(e){return this.application.contacts.map((function(e){return e.id})).includes(e.id)}},mounted:function(){this.$store.dispatch("people/getAll",{})}};O.render=d;t["default"]=O},ba35:function(e,t,n){"use strict";n("6d83")},e5bb:function(e,t,n){},fc85:function(e,t,n){"use strict";n("0bd6")}}]);
//# sourceMappingURL=application-detail.c89007c3.js.map