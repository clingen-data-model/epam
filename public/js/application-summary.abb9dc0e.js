"use strict";(self["webpackChunkepam"]=self["webpackChunkepam"]||[]).push([[309,744],{4582:function(e,t,l){l.d(t,{A:function(){return s}});l(3725),l(5019);var r=l(6166),a=l(641);function s(e=null){const t=(0,r.rd)(),l=(0,r.lq)();e||(console.log('Warning: defaultSort is deprecated.  Please provide a sort object: {field: "fieldname", desc: boolean}'),e=e||{field:"name",desc:!1});const s=(0,a.EW)({immediate:!0,get(){return Object.keys(l.query).includes("sort-field")?{field:l.query["sort-field"],desc:Boolean(parseInt(l.query["sort-desc"]))}:e},set(e){const r={"sort-field":e.field,"sort-desc":e.desc?1:0},a={...l.query,...r};t.replace({path:l.path,query:a})}}),n=(0,a.EW)({set(e){let r=l.query,a=l.path,s={...r};e?s={...r,filter:e}:delete s.filter,t.replace({path:a,query:s})},get(){return l.query.filter},immediate:!0});return{sort:s,filter:n}}},3949:function(e,t,l){l.d(t,{A:function(){return b}});l(3725),l(5019);var r=l(641),a=l(3751),s=l(33);const n={class:"flex justify-between"},o={class:"mb-1 flex space-x-2"},p=(0,r.eW)("Filter: "),i=["href"],u=["innerHTML"],c=["innerHTML"];function d(e,t,l,d,m,h){const f=(0,r.g2)("checkbox"),y=(0,r.g2)("data-table");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",n,[(0,r.Lk)("div",o,[(0,r.Lk)("label",null,[p,(0,r.bo)((0,r.Lk)("input",{type:"text",class:"sm","onUpdate:modelValue":t[0]||(t[0]=e=>d.filter=e),placeholder:"filter"},null,512),[[a.Jo,d.filter]])]),(0,r.bF)(f,{modelValue:h.showCompleted,"onUpdate:modelValue":t[1]||(t[1]=e=>h.showCompleted=e),label:"Show completed"},null,8,["modelValue"])])]),(0,r.bF)(y,{data:h.filteredData,fields:h.selectedFields,"filter-term":d.filter,"row-click-handler":h.goToApplication,"row-class":"cursor-pointer",sort:d.sort,"onUpdate:sort":t[2]||(t[2]=e=>d.sort=e),style:(0,s.Tr)(h.remainingHeight),class:"overflow-auto text-xs",ref:"table"},{"cell-contacts":(0,r.k6)((({item:e})=>[(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.group.contacts,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id},[(0,r.Lk)("small",null,[(0,r.Lk)("a",{href:`mailto:${e.person.email}`,class:"text-blue-500"},(0,s.v_)(e.person.name),9,i)])])))),128))])])),"cell-latest_log_entry_description":(0,r.k6)((({value:e})=>[(0,r.Lk)("div",{innerHTML:e},null,8,u)])),"cell-latest_pending_next_action_entry":(0,r.k6)((({value:e})=>[(0,r.Lk)("div",{innerHTML:e},null,8,c)])),_:1},8,["data","fields","filter-term","row-click-handler","sort","style"])])}var m=l(6278),h=l(4582),f={name:"SummaryVceps",components:{},props:{expert_panel_type_id:{type:Number,default:null}},data(){return{fields:[{name:"name",label:"Name",type:String,sortable:!0},{name:"group.parent.name",label:"CDWG",type:String,sortable:!0,resolveValue(e){return e.group&&e.group.parent?e.group.parent.name:""}},{name:"current_step",label:"Step",type:Number,sortable:!0,resolveValue(e){return e.isCompleted?"Completed":e.current_step},resolveSort(e){return e.isCompleted?5:e.current_step}},{name:"contacts",label:"Contacts",type:Array,sortable:!1,class:["min-w-40"],step:1},{name:"step_1_received_date",label:2==this.expert_panel_type_id?"Step 1 Received":"Application Received",type:Date,sortable:!0,class:["min-w-28"],step:1},{name:"step_1_approval_date",label:2==this.expert_panel_type_id?"Step 1 Approved":"Application Approved",type:Date,sortable:!0,class:["min-w-28"],step:1},{name:"step_2_approval_date",label:"Step 2 Approved",type:Date,sortable:!0,class:["min-w-28"],step:2},{name:"step_3_approval_date",label:"Step 3 Approved",type:Date,sortable:!0,class:["min-w-28"],step:3},{name:"step_4_received_date",label:"Step 4 Received",type:Date,sortable:!0,class:["min-w-28"],step:4},{name:"step_4_approval_date",label:"Step 4 Approved",type:Date,sortable:!0,class:["min-w-28"],step:4}]}},computed:{...(0,m.L8)({applications:"applications/all"}),filteredData(){return this.applications.filter((e=>!this.expert_panel_type_id||e.expert_panel_type_id==this.expert_panel_type_id)).filter((e=>!!this.showCompleted||null==e.date_completed))},showCompleted:{set(e){let t=this.$route.query,l=this.$route.path,r={...t};e?r={...t,"show-completed":1}:delete r["show-completed"],this.$router.replace({path:l,query:r})},get(){return Boolean(parseInt(this.$route.query["show-completed"]))},immediate:!0},selectedFields(){const e=2==this.expert_panel_type_id?[1,2,3,4]:[1];return this.fields.filter((t=>!t.step||e.includes(t.step)))},showAllInfo:{immediate:!0,get(){return Object.keys(this.$route.query).includes("showAllInfo")?this.$route.query.showAllInfo:0},set(e){const t={...this.$route.query};t.showAllInfo=e,this.$router.replace({path:this.$route.path,query:t})}},remainingHeight(){return{height:"calc(100vh - 220px)"}}},methods:{getApplications(){const e={with:["group","group.parent","group.latestLogEntry","latestPendingNextAction","type","group.contacts","group.contacts.person"]},t={};Object.keys(t).length>0&&(e.where=t),this.$store.dispatch("applications/getApplications",e)},goToApplication(e){this.$router.push({name:"ApplicationDetail",params:{uuid:e.uuid}})}},mounted(){this.getApplications()},setup(){const{sort:e,filter:t}=(0,h.A)();return{sort:e,filter:t}}},y=l(6262);const _=(0,y.A)(f,[["render",d]]);var b=_},7164:function(e,t,l){l.r(t),l.d(t,{default:function(){return i}});var r=l(641);function a(e,t,l,a,s,n){const o=(0,r.g2)("applications-summary-table");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(o,{"ep-type-id":1})])}var s=l(3949),n={name:"GcepsSummary",components:{ApplicationsSummaryTable:s.A}},o=l(6262);const p=(0,o.A)(n,[["render",a]]);var i=p},6752:function(e,t,l){l.r(t),l.d(t,{default:function(){return i}});var r=l(641);function a(e,t,l,a,s,n){const o=(0,r.g2)("applications-summary-table");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(o,{"ep-type-id":2})])}var s=l(3949),n={name:"GcepsSummary",components:{ApplicationsSummaryTable:s.A}},o=l(6262);const p=(0,o.A)(n,[["render",a]]);var i=p}}]);
//# sourceMappingURL=application-summary.abb9dc0e.js.map