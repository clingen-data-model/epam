(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["application-detail~application-review~group-application~group-detail"],{"324b":function(e,t,n){"use strict";var r=n("7a23"),a={key:0},o={class:"text-lg pr-4"},c={key:1,class:"well text-center"},i={class:"text-lg pr-4"};function s(e,t,n,s,l,u){var m=Object(r["resolveComponent"])("evidence-summary"),d=Object(r["resolveComponent"])("evidence-summary-form");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[l.summaries.length>0?(Object(r["openBlock"])(),Object(r["createElementBlock"])("ul",a,[Object(r["createVNode"])(r["TransitionGroup"],{name:"slide-fade-down"},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(u.group.expert_panel.evidence_summaries,(function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{class:"my-4 flex",key:t},[Object(r["createElementVNode"])("div",o,Object(r["toDisplayString"])(t+1),1),Object(r["createVNode"])(m,{summary:e,group:u.group,onSaved:u.handleSavedSummary,onDeleted:u.handleDeleted,class:"flex-1",readonly:n.readonly},null,8,["summary","group","onSaved","onDeleted","readonly"])])})),128))]})),_:1})])):l.loading?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",c,"Loading...")):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:2,class:Object(r["normalizeClass"])(["well text-center",{"cursor-pointer":!n.readonly}]),onClick:t[0]||(t[0]=function(){return u.startNewSummary&&u.startNewSummary.apply(u,arguments)})},"No example evidence summaries have been added.",2)),Object(r["withDirectives"])(Object(r["createElementVNode"])("ul",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(l.newSummaries,(function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{class:"my-4 flex",key:t},[Object(r["createElementVNode"])("div",i,Object(r["toDisplayString"])(t+1+l.summaries.length),1),Object(r["createVNode"])(d,{class:"flex-1",group:u.group,summary:e,onSaved:u.handleSavedSummary,onCanceled:u.cancelAdd},null,8,["group","summary","onSaved","onCanceled"])])})),128))],512),[[r["vShow"],u.adding]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",null,[Object(r["withDirectives"])(Object(r["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[1]||(t[1]=function(){return u.startNewSummary&&u.startNewSummary.apply(u,arguments)})},"Add Summary",512),[[r["vShow"],!u.adding]])],512),[[r["vShow"],!u.adding&&u.canEdit]])])}var l=n("1da1"),u=(n("c740"),n("a434"),n("96cf"),{key:0,class:"p-2 border rounded"}),m={class:"flex justify-between"},d=Object(r["createElementVNode"])("button",{class:"btn btn-xs"},"â€¦",-1),p=Object(r["createTextVNode"])("Edit"),b=Object(r["createTextVNode"])("Delete"),f=["href"];function h(e,t,n,a,o,c){var i=Object(r["resolveComponent"])("dropdown-item"),s=Object(r["resolveComponent"])("dropdown-menu"),l=Object(r["resolveComponent"])("evidence-summary-form"),h=Object(r["resolveComponent"])("button-row"),O=Object(r["resolveComponent"])("modal-dialog");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createVNode"])(r["Transition"],{mode:"out-in",name:"fade"},{default:Object(r["withCtx"])((function(){return[o.editing?(Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:1,summary:n.summary,group:n.group,onSaved:c.handleSaved,onCanceled:c.cancelEdit},null,8,["summary","group","onSaved","onCanceled"])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",u,[Object(r["createElementVNode"])("header",m,[Object(r["createElementVNode"])("h4",null,Object(r["toDisplayString"])(n.summary.gene.gene_symbol)+" - "+Object(r["toDisplayString"])(n.summary.variant),1),c.canEdit?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0,"hide-cheveron":!0,class:"relative"},{label:Object(r["withCtx"])((function(){return[d]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{onClick:t[0]||(t[0]=function(e){return c.edit()})},{default:Object(r["withCtx"])((function(){return[p]})),_:1}),Object(r["createVNode"])(i,{onClick:t[1]||(t[1]=function(e){return c.confirmDelete()})},{default:Object(r["withCtx"])((function(){return[b]})),_:1})]})),_:1})):Object(r["createCommentVNode"])("",!0)]),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(n.summary.summary),1),n.summary.vci_url?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:0,class:"link",href:n.summary.vci_url,target:"_blank"}," View in the VCI ",8,f)):Object(r["createCommentVNode"])("",!0)]))]})),_:1}),(Object(r["openBlock"])(),Object(r["createBlock"])(r["Teleport"],{to:"body"},[Object(r["createVNode"])(O,{modelValue:o.showDeleteConfirm,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.showDeleteConfirm=e}),title:"You are about to delete an example evidence summary."},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(" You are about to delete an evidence summary for "+Object(r["toDisplayString"])(n.summary.gene.gene_symbol)+" - "+Object(r["toDisplayString"])(n.summary.variant)+". Are you sure you want to continue? ",1),Object(r["createVNode"])(h,{onSubmit:c.deleteSummary,onCancel:c.cancelDelete,"submit-text":"Delete Summary"},null,8,["onSubmit","onCancel"])]})),_:1},8,["modelValue"])]))])}n("99af");var O=n("f96b"),j={class:"flex space-x-2"},g=Object(r["createElementVNode"])("option",{value:null},"Select...",-1),v=["value"];function y(e,t,n,a,o,c){var i=Object(r["resolveComponent"])("input-row"),s=Object(r["resolveComponent"])("button-row");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("div",j,[Object(r["createVNode"])(i,{class:"mt-0 mb-0",vertical:!0,label:"Gene",errors:o.errors.gene_id},{default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.summaryClone.gene_id=e})},[g,(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(o.groupGenes,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("option",{value:e.id,key:e.id},Object(r["toDisplayString"])(e.gene_symbol),9,v)})),128))],512),[[r["vModelSelect"],o.summaryClone.gene_id]])]})),_:1},8,["errors"]),Object(r["createVNode"])(i,{class:"mt-0 mb-0",modelValue:o.summaryClone.variant,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.summaryClone.variant=e}),vertical:!0,label:"Variant",errors:o.errors.variant},null,8,["modelValue","errors"])]),Object(r["createVNode"])(i,{class:"mt-0 mb-0",label:"Summary",vertical:!0,errors:o.errors.summary},{default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createElementVNode"])("textarea",{rows:"5",class:"w-full","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.summaryClone.summary=e})},null,512),[[r["vModelText"],o.summaryClone.summary]])]})),_:1},8,["errors"]),Object(r["createVNode"])(i,{class:"mt-0",modelValue:o.summaryClone.vci_url,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.summaryClone.vci_url=e}),label:"VCI URL",vertical:!0,"input-class":"w-full",errors:o.errors.vci_url},null,8,["modelValue","errors"]),Object(r["createVNode"])(s,{"submit-text":"save",onSubmit:c.save,onCancel:c.cancel},null,8,["onSubmit","onCancel"])])}var w=n("5530"),S=n("033d"),k={name:"EvidenceSummaryForm",props:{group:{required:!0,type:Object},summary:{required:!0,type:Object}},emits:["saved","canceled"],data:function(){return{groupGenes:[],summaryClone:{gene:{}},errors:{}}},computed:{},watch:{group:{immediate:!0,handler:function(){this.group&&this.group.id&&this.getGroupGenes()}},summary:{immediate:!0,handler:function(){this.summaryClone=Object(w["a"])({},this.summary)}}},methods:{save:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n="/api/groups/".concat(e.group.uuid,"/expert-panel/evidence-summaries"),r="post",e.summaryClone.id&&(n+="/".concat(e.summaryClone.id),r="put"),t.next=6,Object(O["a"])({method:r,url:n,data:e.summaryClone}).then((function(e){return e.data.data}));case 6:a=t.sent,e.$emit("saved",a),e.$store.commit("pushSuccess","Saved example evidence summary"),e.editing=!1,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),Object(S["a"])(t.t0)&&(e.errors=t.t0.response.data.errors);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},cancel:function(){this.initSummaryClone(),this.$emit("canceled")},edit:function(e){e.editing=!0},getGroupGenes:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O["a"].get("/api/groups/".concat(e.group.uuid,"/expert-panel/genes")).then((function(e){return e.data}));case 2:e.groupGenes=t.sent;case 3:case"end":return t.stop()}}),t)})))()},initSummaryClone:function(){this.summaryClone={gene:{}}}}},C=n("6b0d"),x=n.n(C);const V=x()(k,[["render",y]]);var N=V,E={components:{EvidenceSummaryForm:N},name:"EvidenceSummary",props:{summary:{required:!0,type:Object},group:{required:!0,type:Object},readonly:{type:Boolean,required:!1,default:!1}},emits:["edit","saved","deleted"],data:function(){return{editing:!1,showDeleteConfirm:!1}},computed:{canEdit:function(){return this.hasAnyPermission(["ep-applications-manage",["application-edit",this.group]])&&!this.readonly}},methods:{handleSaved:function(e){this.$emit("saved",e),this.editing=!1},edit:function(){this.editing=!0},cancelEdit:function(){this.editing=!1},confirmDelete:function(){this.showDeleteConfirm=!0},deleteSummary:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O["a"].delete("/api/groups/".concat(e.group.uuid,"/application/evidence-summaries/").concat(e.summary.id));case 3:e.$emit("deleted",e.summary),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0);case 9:e.showDeleteConfirm=!1;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},cancelDelete:function(){this.showDeleteConfirm=!1}}};const B=x()(E,[["render",h]]);var D=B,_={name:"EvidenceSummaryList",components:{EvidenceSummary:D,EvidenceSummaryForm:N},emits:["summaries-added"],props:{readonly:{type:Boolean,required:!1,default:!1}},data:function(){return{newSummaries:[],errors:{},summaries:[],showDeleteConfirm:!1,selectedSummary:{gene:{}},loading:!1}},computed:{group:{get:function(){return this.$store.getters["groups/currentItemOrNew"]},set:function(e){this.$store.commit("groups/addItem",e)}},meetsRequirements:function(){return this.summaries.length>4},adding:function(){return this.newSummaries.length>0},canEdit:function(){return this.hasAnyPermission(["ep-applications-manage",["application-edit",this.group]])&&!this.readonly}},watch:{group:{immediate:!0,handler:function(){this.group&&this.group.id&&this.getEvidenceSummaries()}}},methods:{getEvidenceSummaries:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$store.dispatch("groups/getEvidenceSummaries",e.group);case 4:e.summaries=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log(t.t0);case 10:e.loading=!1;case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()},startNewSummary:function(){this.readonly||this.newSummaries.push({gene:null,variant:null,summary:null})},clearNewSummaries:function(){this.newSummaries=[]},handleSavedSummary:function(){this.getEvidenceSummaries(),this.clearNewSummaries(),this.$emit("summaries-added")},handleDeleted:function(e){var t=this.summaries.findIndex((function(t){return t.id==e.id}));t>-1&&this.summaries.splice(t,1),this.getEvidenceSummaries()},cancelAdd:function(){this.clearNewSummaries()},mergeSummary:function(e){var t=this.summaries.findIndex((function(t){return t.id==e.id}));t>-1?this.summaries.splice(t,1,e):this.summaries.push(e)}}};const T=x()(_,[["render",s]]);t["a"]=T},abba:function(e,t,n){"use strict";n("4e82"),n("b0c0");var r=n("7a23"),a={key:0,class:"well"},o={key:1},c=["href"],i=["disabled"],s=Object(r["createTextVNode"])(" Go to the CSpec Registry ");function l(e,t,n,l,u,m){var d=Object(r["resolveComponent"])("badge"),p=Object(r["resolveComponent"])("data-table"),b=Object(r["resolveComponent"])("icon-external-link");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[m.hasSpecifications?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",o,[Object(r["createVNode"])(p,{fields:u.specFields,data:m.group.expert_panel.specifications,sort:u.sort,"onUpdate:sort":t[0]||(t[0]=function(e){return u.sort=e}),class:"mb-6"},{"cell-id":Object(r["withCtx"])((function(e){var t=e.item;return[Object(r["createElementVNode"])("a",{href:"https://cspec.genome.network/cspec/ui/svi/ruleset/".concat(t.id),target:"cspec",class:"btn btn-xs"}," Go to rules ",8,c)]})),"cell-status_name":Object(r["withCtx"])((function(e){var t=e.item;return[Object(r["createVNode"])(d,{color:t.status.color},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.status.name),1)]})),_:2},1032,["color"])]})),_:1},8,["fields","data","sort"])])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",a," No specifications on record. ")),Object(r["createElementVNode"])("button",{onClick:t[1]||(t[1]=function(){return m.goToCspec&&m.goToCspec.apply(m,arguments)}),class:"btn btn-xl blue",target:"cspec",disabled:n.readonly},[s,Object(r["createVNode"])(b,{class:"inline"})],8,i),Object(r["createVNode"])(b,{class:"inline"})])}n("a9e3");var u={name:"CspecSummary",props:{readonly:{type:Boolean,default:!1}},data:function(){return{sort:{field:"id",desc:!1},specFields:[{name:"gene_symbol",type:String,sortable:!0},{name:"disease_name",type:String,sortable:!0},{name:"status.name",label:"Status",type:String,sortable:!0},{name:"updated_at",label:"Last Updated",type:Date,sortable:!0},{name:"id",label:"",type:Number,sortable:!1}]}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},hasSpecifications:function(){return!0},specifications:function(){return this.group.expert_panel.specifications}},watch:{group:function(e){this.$store.dispatch("groups/getSpecifications",e)}},methods:{goToCspec:function(){window.location="https://cspec.genome.network/"}},mounted:function(){this.$store.dispatch("groups/getSpecifications",this.group)}},m=n("6b0d"),d=n.n(m);const p=d()(u,[["render",l]]);t["a"]=p}}]);
//# sourceMappingURL=application-detail~application-review~group-application~group-detail.c7614a84.js.map