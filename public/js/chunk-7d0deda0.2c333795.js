(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d0deda0"],{1081:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function o(e,t,n,o,i,a){var c=Object(r["resolveComponent"])("profile-form");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createVNode"])(c,{person:o.person,onSaved:t[0]||(t[0]=function(e){return o.goBack()}),onCanceled:t[1]||(t[1]=function(e){return o.goBack()})},null,8,["person"])])}var i=n("1da1"),a=(n("96cf"),n("5502")),c=n("6c02"),u=n("5f08"),l=n("da07"),s={name:"PersonEdit",components:{ProfileForm:u["a"]},props:{uuid:{required:!0,type:String}},setup:function(e){var t=Object(a["d"])(),n=Object(c["d"])(),o=Object(r["computed"])((function(){var e=t.getters["people/currentItem"];return e||new l["a"]}));Object(r["onMounted"])(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.dispatch("people/getPerson",{uuid:o.value.uuid});case 2:case"end":return e.stop()}}),e)})))),Object(r["watch"])((function(){return e.uuid}),Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.dispatch("people/getPerson",{uuid:o.value.uuid});case 2:case"end":return e.stop()}}),e)}))));var u=function(){n.go(-1)};return{person:o,goBack:u}}};s.render=o;t["default"]=s},"48e8":function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));n("159b"),n("b64b"),n("d81d"),n("b0c0");var r=n("7a23"),o=n("f96b"),i=n("025e"),a=Object(r["ref"])({institutions:[],countries:[],timezones:[],primaryOccupations:[],races:[],ethnicities:[],genders:[]}),c=Object(r["computed"])((function(){return[{name:"first_name"},{name:"last_name"},{name:"email"},{name:"institution_id",label:"Institution",type:"select",options:a.value.institutions},{name:"credentials",type:"textarea"},{name:"biography",type:"textarea"},{name:"phone"},{name:"timezone",label:"Timezone",type:"select",options:a.value.timezones}]})),u=Object(r["computed"])((function(){return[{name:"country_id",label:"Country",type:"select",options:a.value.countries},{name:"primary_occupation_id",label:"Primary Occupation",type:"select",options:a.value.primaryOccupations},{name:"primary_occupation_other",label:" ",type:"text",placeholder:"Details",show:function(e){return 100==e.primary_occupation_id}},{name:"race_id",label:"Race",type:"select",options:a.value.races},{name:"race_other",label:" ",type:"text",placeholder:"Details",show:function(e){return 100==e.race_id}},{name:"ethnicity_id",label:"Ethnicity",type:"select",options:a.value.ethnicities},{name:"enthnicity_other",label:" ",type:"text",placeholder:"Details",show:function(e){return 100==e.enthnicity_id}},{name:"gender_id",label:"Gender",type:"select",options:a.value.genders},{name:"gender_other",label:" ",type:"text",placeholder:"Details",show:function(e){return 100==e.gender_id}}]})),l=function(){Object.keys(a.value).forEach((function(e){"timezones"!=e?o["a"].get("/api/people/lookups/".concat(Object(i["c"])(e))).then((function(t){a.value[e]=t.data.data.map((function(e){return{value:e.id,label:e.name}}))})).catch((function(e){return console.error(e)})):o["a"].get("/api/people/lookups/timezones").then((function(e){a.value.timezones=e.data.data.map((function(e){return{value:e,label:e}}))}))}))}},"5f08":function(e,t,n){"use strict";var r=n("7a23"),o=Object(r["createElementVNode"])("h3",null,"Profile",-1),i=Object(r["createElementVNode"])("hr",{class:"my-4"},null,-1),a=Object(r["createElementVNode"])("h3",null,"Demographics",-1);function c(e,t,n,c,u,l){var s=Object(r["resolveComponent"])("data-form"),p=Object(r["resolveComponent"])("button-row");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[o,Object(r["createVNode"])(s,{fields:c.profileFields,modelValue:u.profile,"onUpdate:modelValue":t[0]||(t[0]=function(e){return u.profile=e}),errors:u.errors},null,8,["fields","modelValue","errors"]),i,a,Object(r["createVNode"])(s,{fields:c.demographicFields,modelValue:u.profile,"onUpdate:modelValue":t[1]||(t[1]=function(e){return u.profile=e}),errors:u.errors},null,8,["fields","modelValue","errors"]),Object(r["createVNode"])(p,{onSubmitted:l.save,onCanceled:t[2]||(t[2]=function(e){return l.cancel()}),"submit-text":"Save"},null,8,["onSubmitted"])])}var u=n("1da1"),l=n("5530"),s=(n("96cf"),n("033d")),p=n("48e8"),d={name:"ProfileForm",props:{person:{type:Object,required:!0}},emits:["saved","canceled"],data:function(){return{errors:{},profile:{},page:"profile"}},computed:{fields:function(){return"profile"==this.page?this.profileFields:this.demographicFields},title:function(){return"profile"==this.page?"Please fill out your profile":"Please share your demographic information."}},methods:{initProfile:function(){this.profile=Object(l["a"])({},this.$store.getters["people/currentItem"].attributes)},save:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("people/updateProfile",{uuid:e.person.uuid,attributes:e.profile}).then((function(){e.$store.dispatch("getCurrentUser",{force:!0}),e.$store.commit("pushSuccess","Your profile has been updated.")}));case 3:e.$emit("saved"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(s["a"])(t.t0)&&(e.errors=t.t0.response.data.errors);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},cancel:function(){this.initProfile(),this.$emit("canceled")}},setup:function(){return Object(r["onMounted"])((function(){return Object(p["b"])()})),{profileFields:p["c"],demographicFields:p["a"],getLookups:p["b"]}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.initProfile();case 1:case"end":return t.stop()}}),t)})))()}};d.render=c;t["a"]=d}}]);
//# sourceMappingURL=chunk-7d0deda0.2c333795.js.map