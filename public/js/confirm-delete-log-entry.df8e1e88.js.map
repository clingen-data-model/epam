{"version":3,"sources":["webpack:///./src/components/log_entries/ConfirmDeleteLogEntry.vue","webpack:///./src/components/log_entries/ConfirmDeleteLogEntry.vue?7e46","webpack:///./src/adapters/log_entry_repository.js","webpack:///./src/components/next_actions/ConfirmDeleteNextAction.vue?825c","webpack:///./src/components/log_entries/ConfirmDeleteLogEntry.vue?bcc0","webpack:///./src/components/next_actions/ConfirmDeleteNextAction.vue","webpack:///./src/components/next_actions/ConfirmDeleteNextAction.vue?aa7c"],"names":["class","logEntry","description","causer","name","logDate","flattenedErrors","length","err","idx","key","$router","go","deleteEntry","submitText","props","id","required","type","String","data","errors","computed","group","application","this","expert_panel","logEntries","find","entry","formatDate","properties","log_date","Object","values","flat","watch","immediate","handler","methods","uuid","response","a","message","setup","render","_entries","ref","value","fetchEntries","apiUrl","api","get","then","saveEntry","entryData","post","push","updateEntry","put","entryIdx","findIndex","entryId","delete","splice","nextAction","created_at","assignee","assigned_to_name","target_date","commitDelete","next_actions","next_action","na","targetDate","date","$store","dispatch","is_validation_error"],"mappings":"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","file":"js/confirm-delete-log-entry.df8e1e88.js","sourcesContent":["<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n<template>\n    <div>\n        <h2>You are about to delete the following log entry:</h2>\n        <div class=\"border-y py-2\">\n        <blockquote>\n            <div v-html=\"logEntry.description\"></div>\n        </blockquote>\n        <div class=\"ml-4 mt-2 mb-4 text-gray-700 text-sm\" v-if=\"logEntry.causer\">Logged by {{logEntry.causer.name}}, {{logDate}}</div>\n        </div>\n\n        <div>This can not be undone. Are you sure you want to continue?</div>\n\n        <div v-if=\"flattenedErrors.length > 0\" class=\"bg-red-200 text-red-900 rounded p-2 my-2\">\n            <ul>\n                <li v-for=\"(err,idx) in flattenedErrors\" :key=\"idx\">\n                    {{err}}\n                </li>\n            </ul> \n        </div>\n        \n        <button-row @canceled=\"$router.go(-1)\" @submitted=\"deleteEntry\" submitText=\"Delete Log Entry\"></button-row>\n    </div>\n</template>\n<script>\nimport {mapGetters} from 'vuex'\nimport {isValidationError} from '@/http'\nimport {logEntries, deleteEntry} from '@/adapters/log_entry_repository'\n\nexport default {\n    name: 'ConfirmDeleteLogEntry',\n    props: {\n        id: {\n            required: true,\n            type: String,\n        }\n    },\n    data() {\n        return {\n            errors: {}\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        },\n        logEntry () {\n            const logEntry = this.logEntries.find(entry => entry.id == this.id);\n            return logEntry || {};\n        },\n        logDate () {\n            return this.formatDate(this.logEntry.properties.log_date)\n        },\n        flattenedErrors () {\n            return Object.values(this.errors).flat();\n        }\n    },\n    watch: {\n        logEntry: {\n            immediate: true,\n            handler: function () {\n                if (!this.logEntry.id) {\n                    this.$router.go(-1);\n                }\n            }\n        }\n    },\n    methods: {\n        async deleteEntry()\n        {\n            try {\n                // await this.$store.dispatch('applications/deleteLogEntry', {application: this.application, logEntry:  this.logEntry});\n                await deleteEntry(`/api/groups/${this.group.uuid}/activity-logs`, this.id)\n                this.$router.go(-1);\n            } catch ( error ) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors;\n                }\n                this.errors = {a: error.message};\n                \n            }\n        }\n    },\n    setup () {\n        return {\n            logEntries\n        }\n    }\n}\n</script>","import { render } from \"./ConfirmDeleteLogEntry.vue?vue&type=template&id=f69deb1a\"\nimport script from \"./ConfirmDeleteLogEntry.vue?vue&type=script&lang=js\"\nexport * from \"./ConfirmDeleteLogEntry.vue?vue&type=script&lang=js\"\n\nimport \"./ConfirmDeleteLogEntry.vue?vue&type=style&index=0&id=f69deb1a&lang=postcss&scope=true\"\nscript.render = render\n\nexport default script","import {ref, computed} from 'vue';\nimport api from '@/http/api'\n\nconst _entries = ref([]);\n\nexport const logEntries = computed(() => {\n    return _entries.value;\n});\n\nexport const fetchEntries = async (apiUrl) => {\n    _entries.value = await api.get(apiUrl)\n        .then(response => response.data.data);\n}\n\nexport const saveEntry = async (apiUrl, entryData) => {\n    return await api.post(apiUrl, entryData)\n        .then(response => {\n            _entries.value.push(response.data);\n            return response.data\n        });\n}\n\nexport const updateEntry = async (apiUrl, entryData) => {\n    return await api.put(apiUrl, entryData)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == response.data.id);\n            _entries.value[entryIdx] = response.data;\n            return response.data\n        });\n}\n\nexport const deleteEntry = async (apiUrl, entryId) => {\n    return await api.delete(`${apiUrl}/${entryId}`)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == entryId);\n            _entries.value.splice(entryIdx, 1);\n\n            return response;\n        });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ConfirmDeleteNextAction.vue?vue&type=style&index=0&id=4199c811&lang=postcss&scope=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ConfirmDeleteLogEntry.vue?vue&type=style&index=0&id=f69deb1a&lang=postcss&scope=true\"","<template>\n    <div>            \n        <h2>You are about to delete the following next action:</h2>\n        <div class=\"border-y py-2\" v-if=\"nextAction\">\n            <div class=\"ml-4 my-3 text-sm\">\n                Created on: <strong>{{formatDate(nextAction.created_at)}}</strong>\n            </div>\n            <blockquote class=\"mb-4\">\n                <div v-html=\"nextAction.entry\"></div>\n            </blockquote>\n            <div class=\"ml-4 my-1 text-sm\" v-if=\"nextAction.assignee\">\n                Assigned to: \n                <strong>\n                    <span v-if=\"nextAction.assigned_to_name\">{{nextAction.assigned_to_name}} in </span> \n                    {{nextAction.assignee.name}}\n                </strong>\n            </div>\n            <div class=\"ml-4 mt-1 mb-4 text-sm\" v-if=\"nextAction.target_date\">\n                Target Date: <strong>{{formatDate(nextAction.target_date)}}</strong>\n            </div>\n        </div>\n\n    <div>This can not be undone. Are you sure you want to continue?</div>\n        \n    <button-row @canceled=\"$router.go(-1)\" @submitted=\"commitDelete\" submitText=\"Delete Log Entry\"></button-row>\n    </div>\n</template>\n<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n<script>\nimport {mapGetters} from 'vuex'\nimport { formatDate } from '@/date_utils'\nimport is_validation_error from '@/http/is_validation_error'\n\nexport default {\n    name: 'ConfirmDeleteNextAction',\n    props: {\n        uuid: {\n            required: true,\n            type: String\n        },\n        id: {\n            required: true,\n            type: String,\n        }\n    },\n    data() {\n        return {\n            errors: {}\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        },\n        nextAction () {\n            if (!this.application.next_actions) {\n                return {};\n            }\n            const next_action = this.application.next_actions.find(na => na.id == this.id);\n            return next_action || {};\n        },\n        flattenedErrors () {\n            return Object.values(this.errors).flat();\n        },\n        targetDate() {\n            return formatDate(this.nextAction.targetDate);\n        }\n    },\n    watch: {\n        nextAction: {\n            immediate: true,\n            handler: function () {\n                if (!this.nextAction.id) {\n                    this.$router.go(-1);\n                }\n            }\n        }\n    },\n    methods: {\n        formatDate(date) {\n            return formatDate(date);\n        },\n        async commitDelete()\n        {\n            try {\n                await this.$store.dispatch('applications/deleteNextAction', \n                                    {\n                                        application: this.application, \n                                        nextAction: this.nextAction\n                                    });\n                this.$router.go(-1);\n            } catch ( error ) {\n                if (is_validation_error(error)) {\n                    this.errors = error.response.data.errors;\n                }\n                this.errors = {a: error.message};\n                \n            }\n        }\n    }\n}\n</script>","import { render } from \"./ConfirmDeleteNextAction.vue?vue&type=template&id=4199c811\"\nimport script from \"./ConfirmDeleteNextAction.vue?vue&type=script&lang=js\"\nexport * from \"./ConfirmDeleteNextAction.vue?vue&type=script&lang=js\"\n\nimport \"./ConfirmDeleteNextAction.vue?vue&type=style&index=0&id=4199c811&lang=postcss&scope=true\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}