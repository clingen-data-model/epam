"use strict";(self["webpackChunkepam"]=self["webpackChunkepam"]||[]).push([[861],{6932:function(t,e,n){n.d(e,{Jd:function(){return s},KB:function(){return d},W8:function(){return c},l8:function(){return u},wn:function(){return l}});var r=n(953),o=n(641),i=n(7684);const a=(0,r.KR)([]),s=(0,o.EW)((()=>a.value)),u=async t=>{a.value=await i.A.get(t).then((t=>t.data.data))},l=async(t,e)=>await i.A.post(t,e).then((t=>(a.value.push(t.data),t.data))),c=async(t,e)=>await i.A.put(t,e).then((t=>{const e=a.value.findIndex((e=>e.id==t.data.id));return a.value[e]=t.data,t.data})),d=async(t,e)=>await i.A.delete(`${t}/${e}`).then((t=>{const n=a.value.findIndex((t=>t.id==e));return a.value.splice(n,1),t}))},8809:function(t,e,n){n.r(e),n.d(e,{default:function(){return v}});var r=n(641),o=n(33);const i=(0,r.Lk)("h2",null,"You are about to delete the following log entry:",-1),a={class:"border-y py-2"},s=["innerHTML"],u={key:0,class:"ml-4 mt-2 mb-4 text-gray-700 text-sm"},l=(0,r.Lk)("div",null,"This can not be undone. Are you sure you want to continue?",-1),c={key:0,class:"bg-red-200 text-red-900 rounded p-2 my-2"};function d(t,e,n,d,g,p){const h=(0,r.g2)("button-row");return(0,r.uX)(),(0,r.CE)("div",null,[i,(0,r.Lk)("div",a,[(0,r.Lk)("blockquote",null,[(0,r.Lk)("div",{innerHTML:p.logEntry.description},null,8,s)]),p.logEntry.causer?((0,r.uX)(),(0,r.CE)("div",u,"Logged by "+(0,o.v_)(p.logEntry.causer.name)+", "+(0,o.v_)(p.logDate),1)):(0,r.Q3)("",!0)]),l,p.flattenedErrors.length>0?((0,r.uX)(),(0,r.CE)("div",c,[(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(p.flattenedErrors,((t,e)=>((0,r.uX)(),(0,r.CE)("li",{key:e},(0,o.v_)(t),1)))),128))])])):(0,r.Q3)("",!0),(0,r.bF)(h,{onCanceled:e[0]||(e[0]=e=>t.$router.go(-1)),onSubmitted:p.deleteEntry,submitText:"Delete Log Entry"},null,8,["onSubmitted"])])}n(3725),n(2598);var g=n(6278),p=n(696),h=n(6932),m={name:"ConfirmDeleteLogEntry",props:{id:{required:!0,type:String}},data(){return{errors:{}}},computed:{...(0,g.L8)({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel},logEntry(){const t=this.logEntries.find((t=>t.id==this.id));return t||{}},logDate(){return this.formatDate(this.logEntry.created_at)},flattenedErrors(){return Object.values(this.errors).flat()}},watch:{logEntry:{immediate:!0,handler:function(){this.logEntry.id||this.$router.go(-1)}}},methods:{async deleteEntry(){try{await(0,h.KB)(`/api/groups/${this.group.uuid}/activity-logs`,this.id),this.$router.go(-1)}catch(t){(0,p.Ah)(t)&&(this.errors=t.response.data.errors),this.errors={a:t.message}}}},setup(){return{logEntries:h.Jd}}},y=n(6262);const f=(0,y.A)(m,[["render",d]]);var v=f},3259:function(t,e,n){n.r(e),n.d(e,{default:function(){return L}});var r=n(641),o=n(33);const i=(0,r.Lk)("h2",null,"You are about to delete the following next action:",-1),a={key:0,class:"border-y py-2"},s={class:"ml-4 my-3 text-sm"},u=(0,r.eW)(" Created on: "),l={class:"mb-4"},c=["innerHTML"],d={key:0,class:"ml-4 my-1 text-sm"},g=(0,r.eW)(" Assigned to: "),p={key:0},h={key:1,class:"ml-4 mt-1 mb-4 text-sm"},m=(0,r.eW)(" Target Date: "),y=(0,r.Lk)("div",null,"This can not be undone. Are you sure you want to continue?",-1);function f(t,e,n,f,v,x){const E=(0,r.g2)("button-row");return(0,r.uX)(),(0,r.CE)("div",null,[i,x.nextAction?((0,r.uX)(),(0,r.CE)("div",a,[(0,r.Lk)("div",s,[u,(0,r.Lk)("strong",null,(0,o.v_)(x.formatDate(x.nextAction.created_at)),1)]),(0,r.Lk)("blockquote",l,[(0,r.Lk)("div",{innerHTML:x.nextAction.entry},null,8,c)]),x.nextAction.assignee?((0,r.uX)(),(0,r.CE)("div",d,[g,(0,r.Lk)("strong",null,[x.nextAction.assigned_to_name?((0,r.uX)(),(0,r.CE)("span",p,(0,o.v_)(x.nextAction.assigned_to_name)+" in ",1)):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,o.v_)(x.nextAction.assignee.name),1)])])):(0,r.Q3)("",!0),x.nextAction.target_date?((0,r.uX)(),(0,r.CE)("div",h,[m,(0,r.Lk)("strong",null,(0,o.v_)(x.formatDate(x.nextAction.target_date)),1)])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),y,(0,r.bF)(E,{onCanceled:e[0]||(e[0]=e=>t.$router.go(-1)),onSubmitted:x.commitDelete,submitText:"Delete Log Entry"},null,8,["onSubmitted"])])}n(3725),n(2598);var v=n(6278),x=n(1877),E=n(8751),A={name:"ConfirmDeleteNextAction",props:{uuid:{required:!0,type:String},id:{required:!0,type:String}},data(){return{errors:{}}},computed:{...(0,v.L8)({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel},nextAction(){if(!this.application.next_actions)return{};const t=this.application.next_actions.find((t=>t.id==this.id));return t||{}},flattenedErrors(){return Object.values(this.errors).flat()},targetDate(){return(0,x.Yq)(this.nextAction.targetDate)}},watch:{nextAction:{immediate:!0,handler:function(){this.nextAction.id||this.$router.go(-1)}}},methods:{formatDate(t){return(0,x.Yq)(t)},async commitDelete(){try{await this.$store.dispatch("applications/deleteNextAction",{application:this.application,nextAction:this.nextAction}),this.$router.go(-1)}catch(t){(0,E.A)(t)&&(this.errors=t.response.data.errors),this.errors={a:t.message}}}}},b=n(6262);const k=(0,b.A)(A,[["render",f]]);var L=k}}]);
//# sourceMappingURL=confirm-delete-log-entry.450bf2e7.js.map