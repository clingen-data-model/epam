"use strict";(self["webpackChunkepam"]=self["webpackChunkepam"]||[]).push([[201],{230:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var i=a(641),r=a(3751),n=a(33);const l=(0,i.Lk)("h2",{class:"pb-2 border-b mb-4"},"Initiate Application",-1),o=(0,i.Lk)("option",{value:null},"Select...",-1),p=["value"],s=["for"],d=["value","id"];function u(e,t,a,u,c,_){const h=(0,i.g2)("input-row"),m=(0,i.g2)("checkbox"),k=(0,i.g2)("button-row"),b=(0,i.g2)("form-container");return(0,i.uX)(),(0,i.Wv)(b,{onKeydown:(0,r.jR)(_.save,["enter"])},{default:(0,i.k6)((()=>[l,(0,i.bF)(h,{label:"Working Name",errors:c.errors.working_name,type:"text",modelValue:this.app.working_name,"onUpdate:modelValue":t[0]||(t[0]=e=>this.app.working_name=e),placeholder:"A recognizable name"},null,8,["errors","modelValue"]),(0,i.bF)(h,{label:"CDWG",errors:c.errors.cdwg_id},{default:(0,i.k6)((()=>[(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.app.cdwg_id=e)},[o,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.cdwgs,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,n.v_)(e.name),9,p)))),128))],512),[[r.u1,c.app.cdwg_id]])])),_:1},8,["errors"]),(0,i.bF)(h,{label:"EP Type",errors:c.errors.expert_panel_type_id},{default:(0,i.k6)((()=>[(0,i.Lk)("div",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.epTypes,(e=>((0,i.uX)(),(0,i.CE)("label",{for:`ep-${e.id}-radio`,key:e.id},[(0,i.bo)((0,i.Lk)("input",{type:"radio",value:e.id,"onUpdate:modelValue":t[2]||(t[2]=e=>c.app.expert_panel_type_id=e),id:`ep-${e.id}-radio`},null,8,d),[[r.XL,c.app.expert_panel_type_id]]),(0,i.Lk)("div",null,(0,n.v_)(e.name),1)],8,s)))),128))])])),_:1},8,["errors"]),(0,i.bF)(h,{errors:c.errors.date_initiated},{default:(0,i.k6)((()=>[(0,i.Lk)("div",null,[(0,i.Lk)("div",null,[(0,i.bF)(m,{modelValue:c.showInitiationDate,"onUpdate:modelValue":t[3]||(t[3]=e=>c.showInitiationDate=e),id:"show-initiation-checkbox",label:"Backdate this initiation"},null,8,["modelValue"])]),(0,i.bo)((0,i.bF)(h,{type:"date",label:"Initiation Date",modelValue:c.app.date_initiated,"onUpdate:modelValue":t[4]||(t[4]=e=>c.app.date_initiated=e)},null,8,["modelValue"]),[[r.aG,c.showInitiationDate]])])])),_:1},8,["errors"]),(0,i.bF)(k,null,{default:(0,i.k6)((()=>[(0,i.Lk)("button",{class:"btn",onClick:t[5]||(t[5]=(...e)=>_.cancel&&_.cancel(...e))},"Cancel"),(0,i.Lk)("button",{class:"btn blue",onClick:t[6]||(t[6]=(...e)=>_.save&&_.save(...e))},"Initiate Application")])),_:1})])),_:1},8,["onKeydown"])}var c=a(6278),_=a(1877),h={name:"CreateApplicationForm",props:{},emits:["canceled","saved"],data(){return{visible:!1,showInitiationDate:!1,app:{working_name:null,cdwg_id:null,expert_panel_type_id:null,date_initiated:(0,_.Yq)(new Date)},epTypes:[{name:"GCEP",id:1},{name:"VCEP",id:2}],errors:{}}},computed:{...(0,c.L8)({cdwgs:"cdwgs/all"}),hasErrors(){return Object.keys(this.errors).length>0}},watch:{"app.working_name":function(){this.clearErrors("working_name")},"app.cdwg_id":function(){this.clearErrors("cdwg_id")},"app.expert_panel_type_id":function(){this.clearErrors("expert_panel_type_id")}},methods:{cancel(){this.initForm(),this.$emit("canceled")},async save(){try{await this.$store.dispatch("applications/initiateApplication",this.app),this.$emit("saved",this.app)}catch(e){if(e.response&&422==e.response.status&&e.response.data.errors)return void(this.errors=e.response.data.errors);throw e}},initForm(){this.initErrors(),this.initAppData()},initAppData(){this.app={working_name:null,cdwg_id:null,expert_panel_type_id:null,date_initiated:(0,_.Yq)(new Date)}},clearErrors(e){e?delete this.errors[e]:this.initErrors()},initErrors(){this.errors={}}}},m=a(6262);const k=(0,m.A)(h,[["render",u]]);var b=k}}]);
//# sourceMappingURL=create-application-form.9c986744.js.map