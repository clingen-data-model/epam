(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-application"],{"0aa4":function(e,t,n){"use strict";n("b8fb")},2773:function(e,t,n){},"650e":function(e,t,n){},7332:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r=function(e){return Object(o["pushScopeId"])("data-v-3e35b0c4"),e=e(),Object(o["popScopeId"])(),e},i={class:"flex items-center pb-2 border-b z-20"},c={class:"flex-1"},a={class:"border-b-0 flex justify-between items-start mb-0"},s={key:0},l=r((function(){return Object(o["createElementVNode"])("span",{class:"note"}," | ",-1)})),u={class:"md:flex"},p={class:"p-2 border-t text-sm text-center bottom-0"},d={key:0},b={key:1},m={class:"flex-1"},f={id:"body",class:"px-4"},h={class:"text-lg"},O=r((function(){return Object(o["createElementVNode"])("p",null,"You cannot update your application while waiting approval.",-1)})),j=r((function(){return Object(o["createElementVNode"])("p",null,"The approval committee will respond soon.",-1)})),g=r((function(){return Object(o["createElementVNode"])("p",null,[Object(o["createTextVNode"])(" Please contact "),Object(o["createElementVNode"])("a",{href:"mailto:cdwg_oversightcommittee@clinicalgenome.org"}," the ClinGen CDWG Oversight Committee "),Object(o["createTextVNode"])(" if you have any questions. ")],-1)}));function v(e,t,n,r,v,w){var C=Object(o["resolveComponent"])("router-link"),V=Object(o["resolveComponent"])("note"),N=Object(o["resolveComponent"])("application-menu"),k=Object(o["resolveComponent"])("static-alert"),y=Object(o["resolveComponent"])("router-view"),x=Object(o["resolveComponent"])("modal-dialog"),E=Object(o["resolveDirective"])("remaining-height");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("header",i,[Object(o["createElementVNode"])("div",c,[w.group.uuid?(Object(o["openBlock"])(),Object(o["createBlock"])(C,{key:0,class:"note",to:{name:"GroupDetail",params:{uuid:w.group.uuid}}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(w.group.displayName),1)]})),_:1},8,["to"])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("h1",a,[Object(o["createElementVNode"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(w.group.displayName)+" - Application ",1),e.hasPermission("groups-manage")?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",s,[Object(o["createVNode"])(V,{class:"inline"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("group: "+Object(o["toDisplayString"])(w.group.id),1)]})),_:1}),l,Object(o["createVNode"])(V,{class:"inline"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("expert_panel: "+Object(o["toDisplayString"])(w.group.expert_panel.id),1)]})),_:1})])):Object(o["createCommentVNode"])("",!0)]),w.group.expert_panel.hasPendingSubmission?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=function(){var t;return e.$refs.application.save&&(t=e.$refs.application).save.apply(t,arguments)}),class:"btn btn-sm"},"Save"))])])]),Object(o["createElementVNode"])("div",u,[Object(o["createVNode"])(N,{class:"mt-4",application:w.application,"is-collapsed":!v.showApplicationToc},{footer:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",p,[v.saving?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",d,"Saving...")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",b,"Last saved at "+Object(o["toDisplayString"])(e.formatTime(v.lastSavedAt)),1))])]})),_:1},8,["application","is-collapsed"]),Object(o["createElementVNode"])("div",m,[Object(o["withDirectives"])(Object(o["createElementVNode"])("section",f,[w.group.expert_panel.hasPendingSubmission?(Object(o["openBlock"])(),Object(o["createBlock"])(k,{key:0,class:"relative mt-4 px-4 z-50",variant:"success"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("p",h,"Your application was submitted on "+Object(o["toDisplayString"])(e.formatDate(w.group.expert_panel.pendingSubmission.created_at))+".",1),O,j,g]})),_:1})):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(w.applicationComponent),{ref:"application",onSaved:w.updateLastSavedAt,onSaving:t[1]||(t[1]=function(e){return v.saving=!0})},null,8,["onSaved"]))],512),[[E]])])]),(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(x,{modelValue:v.showModal,"onUpdate:modelValue":t[2]||(t[2]=function(e){return v.showModal=e}),onClosed:w.handleModalClosed,title:this.$route.meta.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(y,{ref:"modalView",onSaved:w.hideModal,onCanceled:w.hideModal},null,8,["onSaved","onCanceled"])]})),_:1},8,["modelValue","onClosed","title"])]))])}var w=n("1da1"),C=(n("ac1f"),n("5319"),n("96cf"),{class:"relative"}),V=Object(o["createElementVNode"])("p",null," Expert Panels are expected to represent the diversity of expertise in the field, including all major areas of expertise (clinical, diagnostic laboratory, and basic research). Membership should include representation from three or more institutions and will encompass disease/gene expert members as well as biocurators. Biocurators do not have to be gene/disease experts and will be primarily responsible for assembling the available evidence for subsequent expert member review. For role, suggested examples include: primary biocurator, expert reviewer, etc. ",-1),N=Object(o["createElementVNode"])("p",null,[Object(o["createTextVNode"])(" It is expected that the expert panel will utilize "),Object(o["createElementVNode"])("a",{target:"lumping-splitting-guidelines",href:"https://clinicalgenome.org/working-groups/lumping-and-splitting/"},"ClinGen Lumping and Splitting guidance"),Object(o["createTextVNode"])(" during pre-curation and should use the "),Object(o["createElementVNode"])("a",{target:"gene-tracker",href:"https://gene-tracker.clinicalgenome.org/"},"Gene Tracker"),Object(o["createTextVNode"])(" to enter their precuration information. Focus should be on the canonical disease, and splitting into multiple phenotypes should be avoided. The precurations will be published to "),Object(o["createElementVNode"])("a",{href:"https://clinicalgenome.org"},"clinicalgenome.org"),Object(o["createTextVNode"])(". ")],-1),k=Object(o["createElementVNode"])("hr",null,null,-1);function y(e,t,n,r,i,c){var a=Object(o["resolveComponent"])("group-form"),s=Object(o["resolveComponent"])("app-section"),l=Object(o["resolveComponent"])("member-list"),u=Object(o["resolveComponent"])("gcep-gene-list"),p=Object(o["resolveComponent"])("scope-description-form"),d=Object(o["resolveComponent"])("attestation-gcep"),b=Object(o["resolveComponent"])("gcep-ongoing-plans-form"),m=Object(o["resolveComponent"])("attestation-nhgri"),f=Object(o["resolveComponent"])("application-step");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",C,[Object(o["createVNode"])(f,{id:"definition",disabled:c.group.expert_panel.hasPendingSubmission},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{title:"Basic Information",id:"basicInfo"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(a,{group:c.group,ref:"groupForm"},null,8,["group"])]})),_:1}),c.group?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,title:"Membership",id:"membership"},{default:Object(o["withCtx"])((function(){return[V,Object(o["createVNode"])(l,{group:c.group},null,8,["group"])]})),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(s,{title:"Scope of Work",id:"scope"},{default:Object(o["withCtx"])((function(){return[N,Object(o["createVNode"])(u,{group:c.group,ref:"geneList",onGeneschanged:t[0]||(t[0]=function(e){return i.genesChanged=!0})},null,8,["group"]),k,Object(o["createVNode"])(p)]})),_:1}),Object(o["createVNode"])(s,{title:"Attestations",id:"attestations"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d)]})),_:1}),Object(o["createVNode"])(s,{id:"curationReviewProcess",title:"Plans for Ongoing Gene Review and Reanalysis and Discrepancy Resolution"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b)]})),_:1}),Object(o["createVNode"])(s,{title:"NHGRI Data Availability",id:"nhgri"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m)]})),_:1})]})),_:1},8,["disabled"])])}n("d81d"),n("b64b"),n("d3b7"),n("3ca3"),n("ddb0");var x=n("a75a"),E=n("db04"),S=n("8ed1"),_=function(e){return Object(o["pushScopeId"])("data-v-af79107a"),e=e(),Object(o["popScopeId"])(),e},B=["id"],R={key:0,class:"header flex justify-between items-center"},D={key:0,class:"inline"},I=["innerHTML"],$={key:0,class:"inline"},T=Object(o["createTextVNode"])(" Make changes from the the "),A=Object(o["createTextVNode"])("group's detail screen"),M=_((function(){return Object(o["createElementVNode"])("br",null,null,-1)})),q=_((function(){return Object(o["createElementVNode"])("small",null,"Changes may require re-approval.",-1)})),P=Object(o["createTextVNode"])("Approved"),G=Object(o["createTextVNode"])("Under Review"),F={class:"relative"},L={class:"step-contents"},U={key:1,class:"z-20 absolute top-0 bottom-0 left-0 right-0 bg-white bg-opacity-50"};function W(e,t,n,r,i,c){var a=Object(o["resolveComponent"])("icon-lock"),s=Object(o["resolveComponent"])("popover"),l=Object(o["resolveComponent"])("router-link"),u=Object(o["resolveComponent"])("badge"),p=Object(o["resolveComponent"])("application-submit-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"application-step",id:n.id},[n.title?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",R,[Object(o["createElementVNode"])("h2",{class:Object(o["normalizeClass"])({"text-gray-400":n.disabled})},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.title)+" ",1),n.disabled?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",D,[Object(o["createVNode"])(s,{arrow:"",hover:""},{content:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("small",{class:"text-sm",innerHTML:c.lockedContent},null,8,I)]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(a,{class:"inline"})]})),_:1})])):Object(o["createCommentVNode"])("",!0)],2),c.approved?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",$,[Object(o["createVNode"])(s,{hover:"",arrow:""},{content:Object(o["withCtx"])((function(){return[T,Object(o["createVNode"])(l,{to:{name:"GroupDetail",parmas:{uuid:c.group.uuid}}},{default:Object(o["withCtx"])((function(){return[A]})),_:1},8,["to"]),M,q]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{color:"green"},{default:Object(o["withCtx"])((function(){return[P]})),_:1})]})),_:1})])):Object(o["createCommentVNode"])("",!0),c.underReview?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:1,color:"yellow"},{default:Object(o["withCtx"])((function(){return[G]})),_:1})):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",F,[Object(o["createElementVNode"])("div",L,[Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)]),c.showSubmitButton?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,class:"border-t",step:c.step},null,8,["step"])):Object(o["createCommentVNode"])("",!0),n.disabled||c.approved?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",U)):Object(o["createCommentVNode"])("",!0)])],8,B)}var z={key:0,class:"p-4"},H={class:"relative"},Y={key:0,class:"bg-white opacity-50 absolute top-0 bottom-0 left-0 right-0"},J={class:"text-lg"},Q=Object(o["createTextVNode"])(" Before submitting, please note: "),K=Object(o["createElementVNode"])("ol",{class:"list-decimal pl-6"},[Object(o["createElementVNode"])("li",null," Typical response times are between one and two weeks. "),Object(o["createElementVNode"])("li",null," Questions, revisions, and other comments will be conveyed via email. "),Object(o["createElementVNode"])("li",null," Once submitted you will not be able to update your application until the submission has been processed. ")],-1),X=Object(o["createElementVNode"])("div",{class:"mt-4 text-lg"},"Optional notes for reviewers:",-1);function Z(e,t,n,r,i,c){var a=Object(o["resolveComponent"])("requirements-item"),s=Object(o["resolveComponent"])("dev-component"),l=Object(o["resolveComponent"])("popover"),u=Object(o["resolveComponent"])("static-alert"),p=Object(o["resolveComponent"])("input-row"),d=Object(o["resolveComponent"])("button-row"),b=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[c.group.expert_panel.hasPendingSubmission?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",z,[Object(o["createVNode"])(l,{hover:"",arrow:""},{content:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.evaledRequirements,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:t,requirement:e},null,8,["requirement"])})),128))])]})),default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",H,[Object(o["createElementVNode"])("button",{class:"btn btn-xl",onClick:t[0]||(t[0]=function(){return c.initSubmission&&c.initSubmission.apply(c,arguments)})}," Submit for Approval "),c.meetsRequirements?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Y))]),e.hasRole("super-user")?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{onClick:t[1]||(t[1]=function(){return c.bypassRequirements&&c.bypassRequirements.apply(c,arguments)})},"Bypass Requirements")]})),_:1})):Object(o["createCommentVNode"])("",!0)])]})),_:1})])),(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(o["Transition"],{name:"fade"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{modelValue:i.showSubmissionConfirmation,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.showSubmissionConfirmation=e}),title:"Submit your application"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("p",J," You are about to submit your "+Object(o["toDisplayString"])(c.submissionName)+" application. ",1),Object(o["createVNode"])(u,{class:"text-md",variant:"info"},{default:Object(o["withCtx"])((function(){return[Q,K]})),_:1}),X,Object(o["createVNode"])(p,{label:"",errors:i.errors.notes,vertical:""},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.notes=e}),rows:"5",class:"w-full"},null,512),[[o["vModelText"],i.notes]])]})),_:1},8,["errors"]),Object(o["createVNode"])(d,{onSubmitted:c.confirmSubmission,onCancelled:c.cancelSubmission},null,8,["onSubmitted","onCancelled"])]})),_:1},8,["modelValue"])]})),_:1})]))])}n("b0c0"),n("a15b");var ee=n("284a"),te=n("4a91"),ne=te.submissions,oe={name:"ApplicationSubmitButton",components:{RequirementsItem:ee["a"]},props:{disabled:{type:Boolean,required:!1,default:!1},sections:{type:Array,required:!1,default:function(){return[]}},step:{type:Object,required:!0}},emits:["submitted","canceled"],data:function(){return{showSubmissionConfirmation:!1,notes:null,errors:{},bypassReqs:!1}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},meetsRequirements:function(){return!!this.bypassReqs||this.step.meetsRequirements(this.group)},requirementsUnmet:function(){return!this.step.meetsRequirements(this.group)},evaledRequirements:function(){return this.step.evaluateRequirements(this.group)},submissionName:function(){if("gcep"==this.group.expert_panel.type.name)return"GCEP";switch(this.group.expert_panel.current_step){case 1:return"VCEP Group Definition";case 4:return"VCEP Sustained Curation Plans";default:break}return ne.types.applications}},methods:{bypassRequirements:function(){this.bypassReqs=!0},initSubmission:function(){this.showSubmissionConfirmation=!0,this.notes=null},confirmSubmission:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("groups/submitApplicationStep",{group:e.group,notes:e.notes});case 3:e.$store.commit("pushSuccess","Your application has been submitted for approval."),e.showSubmissionConfirmation=!1,e.$emit("submitted"),t.next=15;break;case 8:if(t.prev=8,t.t0=t["catch"](0),!Object(E["b"])(t.t0)){t.next=14;break}return n=t.t0.response.data.errors,e.$store.commit("pushError",n.group.join(",")),t.abrupt("return");case 14:throw t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,8]])})))()},cancelSubmission:function(){this.showSubmissionConfirmation=!1,this.notes=null,this.$emit("cancelled")}}};oe.render=Z;var re=oe,ie=n("5313"),ce={name:"ApplicationStep",components:{ApplicationSubmitButton:re},props:{title:{type:String,required:!1,default:null},disabled:{type:Boolean,required:!1,default:!1},id:{type:String,required:!0},noSubmit:{type:Boolean,required:!1,default:!1}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.isVcep()?ie["c"]:ie["a"]},step:function(){return this.application.getStep(this.id)},showSubmitButton:function(){return!this.noSubmit},lockedContent:function(){return this.underReview?"Applications pending review cannot be upated.":this.step.isComplete(this.group)?'This step is approved.<br> Make changes from the the <a href="/groups/'.concat(this.group.uuid,"\">group's detail screen</a><br><small>Changes may require re-approval.</small>"):"This step is not yet available."},approved:function(){return this.step.isComplete(this.group)},underReview:function(){return this.group.expert_panel.hasPendingSubmissionForStep(this.titleCase(this.id))}}};n("d94d");ce.render=W,ce.__scopeId="data-v-af79107a";var ae=ce,se=n("8fec"),le=n("3926"),ue=n("206f"),pe=n("268c"),de=n("0945"),be=n("a8af"),me=n("6ca3"),fe={name:"ApplicationGcep",components:{"app-section":S["a"],ApplicationStep:ae,AttestationGcep:se["a"],AttestationNhgri:le["a"],GcepGeneList:ue["a"],GroupForm:pe["a"],GcepOngoingPlansForm:me["a"],MemberList:de["a"],ScopeDescriptionForm:be["a"]},data:function(){return{AutoSaveInterval:null,autosaveTime:1e4,genesChanged:!1,saving:!1}},emits:["autosaved","saved","saving"],computed:{group:{get:function(){return this.$store.getters["groups/currentItemOrNew"]},set:function(e){this.$store.commit("groups/addItem",e)}}},methods:{save:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("saving"),n=Object.keys(e.$refs).map((function(t){return e.$refs[t].save()})),n.push(e.saveUpdates()),t.prev=3,t.next=6,Promise.all(n);case 6:e.$emit("saved"),e.genesChanged=!1,t.next=16;break;case 10:if(t.prev=10,t.t0=t["catch"](3),!Object(E["b"])(t.t0)){t.next=15;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 15:throw t.t0;case 16:case"end":return t.stop()}}),t,null,[[3,10]])})))()},saveUpdates:function(){var e=this;if(this.applicationIsDirty())return this.$store.dispatch("groups/saveApplicationData",this.group).then((function(){e.$emit("saved")}))},autosave:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.applicationIsDirty()){t.next=5;break}return t.next=3,e.save();case 3:return e.$emit("autosaved"),t.abrupt("return");case 5:case"end":return t.stop()}}),t)})))()},startAutoSave:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.AutoSaveInterval=setInterval((function(){return e.autosave()}),e.autosaveTime);case 1:case"end":return t.stop()}}),t)})))()},stopAutoSave:function(){clearInterval(this.AutoSaveInterval)},applicationIsDirty:function(){return this.group.expert_panel.isDirty()||this.group.isDirty()||this.genesChanged}},setup:function(){return{errors:x["b"],resetErrors:x["c"],submitFormData:x["d"]}}};fe.render=y;var he=fe,Oe=Object(o["createElementVNode"])("p",null,[Object(o["createTextVNode"])(" Expert Panels are expected to represent the diversity of expertise and backgrounds in the field and should refer to "),Object(o["createElementVNode"])("a",{href:"https://clinicalgenome.org/site/assets/files/3635/variant_curation_expert_panel_vcep_protocol_version_9-2.pdf",target:"vcep-protocol"},"Section 2.1 of the VCEP Protocol"),Object(o["createTextVNode"])(" and the "),Object(o["createElementVNode"])("a",{href:"https://diversity.nih.gov/sites/coswd/files/images/SWD_Toolkit_Interactive-updated_508.pdf",target:"nih-workforce-diversity"},"NIH Scientific Workforce Diversity Toolkit"),Object(o["createTextVNode"])(" for guidance to complete the Member List below. Please list the VCEP Chair(s) and Coordinator(s) first. ")],-1),je=Object(o["createElementVNode"])("hr",null,null,-1),ge=Object(o["createElementVNode"])("hr",null,null,-1);function ve(e,t,n,r,i,c){var a=Object(o["resolveComponent"])("group-form"),s=Object(o["resolveComponent"])("app-section"),l=Object(o["resolveComponent"])("member-list"),u=Object(o["resolveComponent"])("membership-description-form"),p=Object(o["resolveComponent"])("vcep-gene-list"),d=Object(o["resolveComponent"])("scope-description-form"),b=Object(o["resolveComponent"])("attestation-reanalysis"),m=Object(o["resolveComponent"])("attestation-nhgri"),f=Object(o["resolveComponent"])("application-step"),h=Object(o["resolveComponent"])("cspec-summary"),O=Object(o["resolveComponent"])("vcep-ongoing-plans-form"),j=Object(o["resolveComponent"])("evidence-summary-list"),g=Object(o["resolveComponent"])("member-designation-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(f,{id:"definition",title:"Group Definition",disabled:c.group.expert_panel.hasPendingSubmission},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{title:"Basic Information",id:"basicInfo"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(a,{group:c.group,ref:"groupForm"},null,8,["group"])]})),_:1}),c.group?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,title:"Membership",id:"membership"},{default:Object(o["withCtx"])((function(){return[Oe,Object(o["createVNode"])(l,{group:c.group},null,8,["group"]),je,Object(o["createVNode"])(u,{editing:!0})]})),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(s,{title:"Scope of Work",id:"scope"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{group:c.group,ref:"geneList"},null,8,["group"]),ge,Object(o["createVNode"])(d)]})),_:1}),Object(o["createVNode"])(s,{title:"Reanalysis & Discrepancy Resolution",id:"reanalysis"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b)]})),_:1}),Object(o["createVNode"])(s,{title:"NHGRI Data Availability",id:"nhgri"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m)]})),_:1})]})),_:1},8,["disabled"]),Object(o["createVNode"])(f,{id:"draft-specifications",title:"Draft Specifications",disabled:c.group.expert_panel.current_step<2||c.group.expert_panel.hasPendingSubmission,"no-submit":!0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h)]})),_:1})]})),_:1},8,["disabled"]),Object(o["createVNode"])(f,{id:"pilot-specifications",title:"Pilot Specifications",disabled:c.group.expert_panel.current_step<3||c.group.expert_panel.hasPendingSubmission,"no-submit":!0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h)]})),_:1})]})),_:1},8,["disabled"]),Object(o["createVNode"])(f,{id:"sustained-curation",title:"Sustained Curation",disabled:c.group.expert_panel.current_step<4||c.group.expert_panel.hasPendingSubmission},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{title:"Plans for Ongoing Review and Reanalysis and Discrepancy Resolution",id:"curationReviewProcess"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O)]})),_:1}),Object(o["createVNode"])(s,{title:"Example Evidence Summaries",id:"evidenceSummaries"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j)]})),_:1}),Object(o["createVNode"])(s,{title:"Designation of Biocurators, Biocurator Trainer(s) and Core Approval Members",id:"designations"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{ref:"designationForm"},null,512)]})),_:1})]})),_:1},8,["disabled"])])}var we=n("a266"),Ce=n("abba"),Ve=n("324b"),Ne=n("ec0d"),ke=n("4d1a"),ye=n("62a2"),xe=n("1d7f"),Ee={name:"ApplicationVcep",components:{"app-section":S["a"],ApplicationStep:ae,AttestationNhgri:le["a"],AttestationReanalysis:we["a"],CspecSummary:Ce["a"],EvidenceSummaryList:Ve["a"],GroupForm:pe["a"],MemberDesignationForm:Ne["a"],MemberList:de["a"],MembershipDescriptionForm:ke["a"],ScopeDescriptionForm:be["a"],VcepGeneList:ye["a"],VcepOngoingPlansForm:xe["a"]},emits:["autosaved","saving","saved"],data:function(){return{application:ie["c"],AutoSaveInterval:null,autosaveTime:1e4,saving:!1}},computed:{group:{get:function(){return this.$store.getters["groups/currentItemOrNew"]},set:function(e){this.$store.commit("groups/addItem",e)}},currentStep:function(){return this.group.expert_panel.current_step}},methods:{save:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("saving"),n=Object.keys(e.$refs).map((function(t){return e.$refs[t].save()})),n.push(e.saveUpdates()),t.prev=3,t.next=6,Promise.all(n);case 6:e.$emit("saved"),t.next=15;break;case 9:if(t.prev=9,t.t0=t["catch"](3),!Object(E["b"])(t.t0)){t.next=14;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 14:throw t.t0;case 15:case"end":return t.stop()}}),t,null,[[3,9]])})))()},saveUpdates:function(){if(this.group.expert_panel.isDirty())return this.$store.dispatch("groups/saveApplicationData",this.group)},autosave:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.applicationIsDirty()){t.next=5;break}return t.next=3,e.save();case 3:return e.$emit("autosaved"),t.abrupt("return");case 5:case"end":return t.stop()}}),t)})))()},startAutoSave:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.AutoSaveInterval=setInterval((function(){return e.autosave()}),e.autosaveTime);case 1:case"end":return t.stop()}}),t)})))()},stopAutoSave:function(){clearInterval(this.AutoSaveInterval)},applicationIsDirty:function(){return this.group.expert_panel.isDirty()||this.group.isDirty()}}};Ee.render=ve;var Se=Ee,_e={class:"menu-items"},Be={class:""};function Re(e,t,n,r,i,c){var a=Object(o["resolveComponent"])("menu-item");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])([{collapsed:n.isCollapsed},"app-menu overflow-y-auto relative"])},[Object(o["createElementVNode"])("ul",_e,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.application.steps,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t},[Object(o["createVNode"])(a,{item:e,class:"block","is-current-step":c.isCurrentStep(e)},null,8,["item","is-current-step"])])})),128))]),Object(o["createElementVNode"])("div",Be,[Object(o["renderSlot"])(e.$slots,"footer",{},void 0,!0)])],2)}var De={class:"item"},Ie={key:0},$e={key:0,class:"ml-4 text-smaller"};function Te(e,t,n,r,i,c){var a=this,s=Object(o["resolveComponent"])("icon-cheveron-right"),l=Object(o["resolveComponent"])("icon-checkmark"),u=Object(o["resolveComponent"])("badge"),p=Object(o["resolveComponent"])("menu-item",!0);return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",De,[c.isStep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ie,[Object(o["createElementVNode"])("header",{class:Object(o["normalizeClass"])(["flex justify-between label",{open:!i.collapsed,"current-step":n.isCurrentStep}]),onClick:t[0]||(t[0]=function(){return c.toggleContents&&c.toggleContents.apply(c,arguments)})},[Object(o["createElementVNode"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.item.title)+" ",1),c.hasManySections?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,class:"cheveron inline -mt-1"})):Object(o["createCommentVNode"])("",!0)]),n.item.isComplete(c.group)?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,color:"green"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{width:"12",height:"12"})]})),_:1})):Object(o["createCommentVNode"])("",!0)],2),Object(o["createVNode"])(o["Transition"],{name:"slide-fade-down"},{default:Object(o["withCtx"])((function(){return[a.item.sections&&c.hasManySections?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",$e,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.item.sections,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t},[Object(o["createVNode"])(p,{item:e},null,8,["item"])])})),128))],512)),[[o["vShow"],!i.collapsed]]):Object(o["createCommentVNode"])("",!0)]})),_:1})])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:1,class:"label",onClick:t[1]||(t[1]=function(e){return c.goToItem()})},Object(o["toDisplayString"])(n.item.title),1))])}var Ae={name:"MenuItem",props:{item:{required:!0,type:Object},collapsible:{type:Boolean,required:!1,default:!0},isCurrentStep:{type:Boolean,required:!1,default:!1}},data:function(){return{collapsed:!0}},computed:{label:function(){return this.item.label},contents:function(){return this.item.contents},route:function(){return this.item.route},group:function(){return this.$store.getters["groups/currentItemOrNew"]},isStep:function(){return this.item.sections},hasManySections:function(){return this.item.sections.length>0}},watch:{isCurrentStep:{immediate:!0,handler:function(e){this.collapsible&&(this.collapsed=!0),e&&(this.collapsed=!1)}}},methods:{collapse:function(){this.collapsed=!0},expand:function(){this.collapsed=!1},toggleContents:function(){this.collapsed=!this.collapsed,this.goToItem()},goToItem:function(){location.href="#",location.href="#".concat(this.item.name)}}};n("ed3e");Ae.render=Te,Ae.__scopeId="data-v-07b77618";var Me=Ae,qe={components:{MenuItem:Me},props:{application:{required:!0,type:Object},isCollapsed:{required:!1,type:Boolean,default:!1}},data:function(){return{}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]}},methods:{isCurrentStep:function(e){return e.name==this.application.getCurrentStep(this.group).name}}};n("c4fe");qe.render=Re,qe.__scopeId="data-v-7a8d890e";var Pe=qe,Ge=n("ae23"),Fe={name:"GroupApplication",components:{ApplicationGcep:he,ApplicationVcep:Se,ApplicationMenu:Pe},props:{uuid:{type:String,required:!0}},data:function(){return{showDocumentation:!1,showModal:!1,showApplicationToc:!0,lastSavedAt:new Date,saving:!1}},watch:{$route:function(){this.showModal=!!this.$route.meta.showModal&&Boolean(this.$route.meta.showModal)},uuid:{immediate:!0,handler:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("groups/find",t).then((function(){n.$store.commit("groups/setCurrentItemIndexByUuid",n.uuid)}));case 2:return e.next=4,this.$store.dispatch("groups/getSubmissions",this.group);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},computed:{applicationComponent:function(){return this.group&&this.group.isVcep()?Se:this.group&&this.group.isGcep()?he:null},group:function(){var e=this.$store.getters["groups/currentItem"]||new Ge["a"];return e||new Ge["a"]},application:function(){return this.group.isVcep()?ie["c"]:ie["a"]}},methods:{hideModal:function(){this.$router.replace({name:"GroupApplication",params:{uuid:this.uuid}})},handleModalClosed:function(e){this.clearModalForm(e),this.$router.push({name:"GroupApplication",params:{uuid:this.uuid}})},clearModalForm:function(){"function"===typeof this.$refs.modalView.clearForm&&this.$refs.modalView.clearForm()},updateLastSavedAt:function(){this.saving=!1,this.lastSavedAt=new Date}},beforeUnmount:function(){this.$store.commit("groups/clearCurrentItem")},beforeRouteLeave:function(){if(this.$refs.application.applicationIsDirty()){var e=window.confirm("You have unsaved changes. If you continue your changes may be lost.");if(!e)return!1}}};n("0aa4");Fe.render=v,Fe.__scopeId="data-v-3e35b0c4";t["default"]=Fe},"7ae7":function(e,t,n){},"7bcf":function(e,t,n){"use strict";n("650e")},"7c7a":function(e,t,n){"use strict";n("7ae7")},"7f74":function(e,t,n){"use strict";n("2773")},8972:function(e,t,n){},"8ed1":function(e,t,n){"use strict";var o=n("7a23"),r=["id"],i={class:"application-section"},c={class:"mb-2 flex justify-between"};function a(e,t,n,a,s,l){var u=Object(o["resolveComponent"])("requirements-badge");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{id:n.id,class:"section-wrapper"},[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("header",c,[Object(o["renderSlot"])(e.$slots,"title",{},(function(){return[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(n.title),1)]}),!0),n.id?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,section:l.section,group:l.group},null,8,["section","group"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",null,[Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)])])],8,r)}var s=n("3a9d"),l=n("5313"),u={name:"ApplicationSection",components:{RequirementsBadge:s["a"]},props:{title:{type:String,required:!1},id:{type:String,required:!1}},computed:{group:{get:function(){return this.$store.getters["groups/currentItemOrNew"]}},application:function(){return this.group.isVcep()?l["c"]:l["a"]},section:function(){return this.application.getSection(this.id)}}};n("7f74");u.render=a,u.__scopeId="data-v-279f0c58";t["a"]=u},b8fb:function(e,t,n){},c239:function(e,t,n){},c4fe:function(e,t,n){"use strict";n("c239")},d94d:function(e,t,n){"use strict";n("e4ee")},e4ee:function(e,t,n){},ec0d:function(e,t,n){"use strict";var o=n("7a23"),r=function(e){return Object(o["pushScopeId"])("data-v-65634f94"),e=e(),Object(o["popScopeId"])(),e},i={class:"text-sm"},c=r((function(){return Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",{colspan:"2"}," "),Object(o["createElementVNode"])("th",{colspan:"1",colgroup:"biocurator"}," "),Object(o["createElementVNode"])("th",{colspan:"2",colgroup:"biocurator",class:"text-center"},"Training"),Object(o["createElementVNode"])("th",{colspan:"2"}," ")],-1)})),a=r((function(){return Object(o["createElementVNode"])("th",null,"First Name",-1)})),s=r((function(){return Object(o["createElementVNode"])("th",null,"Last Name",-1)})),l=r((function(){return Object(o["createElementVNode"])("th",{colgroup:"biocurator",class:"w-24"},"Biocurator",-1)})),u=r((function(){return Object(o["createElementVNode"])("th",{colgroup:"biocurator",class:"w-20"},"Level 1",-1)})),p=r((function(){return Object(o["createElementVNode"])("th",{colgroup:"biocurator",class:"w-20"},"Level 2",-1)})),d=r((function(){return Object(o["createElementVNode"])("th",null,"Biocurator Trainer",-1)})),b=Object(o["createTextVNode"])(" Core Approval Member ");function m(e,t,n,r,m,f){var h=Object(o["resolveComponent"])("icon-info"),O=Object(o["resolveComponent"])("popover"),j=Object(o["resolveComponent"])("member-designation-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("table",i,[Object(o["createElementVNode"])("thead",null,[c,Object(o["createElementVNode"])("tr",null,[a,s,l,u,p,d,Object(o["createElementVNode"])("th",null,[b,Object(o["createVNode"])(O,{arrow:"",content:"Core approval members are responsible for ongoing final approval of variant classifications.",hover:""},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{class:"inline-block cursor-pointer",width:16,height:16})]})),_:1})])])]),Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(f.group.members,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(j,{member:e,key:e.id,ref:"memberRow".concat(e.id),readonly:n.readonly},null,8,["member","readonly"])})),128))])])])}var f=n("1da1"),h=(n("b0c0"),n("d81d"),n("b64b"),n("96cf"),{colgroup:"biocurator"}),O=["disabled"],j={colgroup:"biocurator"},g=["disabled"],v={colgroup:"biocurator"},w=["disabled"],C=["disabled"],V=["disabled"];function N(e,t,n,r,i,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",null,[Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(i.workingCopy.person.first_name),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(i.workingCopy.person.last_name),1),Object(o["createElementVNode"])("td",h,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.biocurator=e}),disabled:!c.canEdit},null,8,O),[[o["vModelCheckbox"],c.biocurator]])]),Object(o["createElementVNode"])("td",j,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.workingCopy.training_level_1=e}),disabled:!c.canEdit},null,8,g),[[o["vModelCheckbox"],i.workingCopy.training_level_1]])]),Object(o["createElementVNode"])("td",v,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.workingCopy.training_level_2=e}),disabled:!c.canEdit},null,8,w),[[o["vModelCheckbox"],i.workingCopy.training_level_2]])]),Object(o["createElementVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=function(e){return c.biocuratorTrainer=e}),disabled:!c.canEdit},null,8,C),[[o["vModelCheckbox"],c.biocuratorTrainer]])]),Object(o["createElementVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=function(e){return c.coreApprovalMember=e}),disabled:!c.canEdit},null,8,V),[[o["vModelCheckbox"],c.coreApprovalMember]])])])}var k=n("86ed"),y={name:"ComponentName",props:{member:{type:k["a"],required:!0},readonly:{type:Boolean,required:!1,default:!1}},data:function(){return{workingCopy:new k["a"]}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},biocurator:{get:function(){return this.workingCopy.hasRole("biocurator")},set:function(e){this.toggleRole(e,"biocurator")}},biocuratorTrainer:{get:function(){return this.workingCopy.hasRole("biocurator-trainer")},set:function(e){this.toggleRole(e,"biocurator-trainer")}},coreApprovalMember:{get:function(){return this.workingCopy.hasRole("core-approval-member")},set:function(e){this.toggleRole(e,"core-approval-member")}},canEdit:function(){return this.hasAnyPermission(["ep-applications-manage",["application-edit",this.group]])&&!this.readonly}},watch:{member:{immediate:!0,handler:function(e){this.syncWorkingCopy(e)}}},methods:{initWorkingCopy:function(){this.workingCopy=new k["a"]},syncWorkingCopy:function(e){e.id&&(this.workingCopy=e.clone())},toggleRole:function(e,t){if(console.log({hasRole:e,roleName:t}),e)return console.log("adding role..."),void this.workingCopy.addRole(t);this.workingCopy.removeRole(t)},save:function(){var e=[];return e.push(this.updateTrainingInfo()),e.push(this.syncRoles()),e},updateTrainingInfo:function(){if(this.workingCopy.isDirty("training_level_1")||this.workingCopy.isDirty("training_level_2"))return this.$store.dispatch("groups/memberUpdate",{groupUuid:this.group.uuid,memberId:this.workingCopy.id,data:{training_level_1:this.workingCopy.training_level_1,training_level_2:this.workingCopy.training_level_2}})},syncRoles:function(){if(this.workingCopy.isDirty("roles"))return this.$store.dispatch("groups/memberSyncRoles",{group:this.group,member:this.workingCopy})}}};n("7bcf");y.render=N,y.__scopeId="data-v-5c39af22";var x=y,E={name:"MemberDesignationForm",components:{MemberDesignationRow:x},props:{readonly:{type:Boolean,required:!1,default:!1}},computed:{group:{get:function(){return this.$store.getters["groups/currentItemOrNew"]}},canEdit:function(){return this.hasAnyPermission(["ep-applications-manage",["application-edit",this.group]])&&!this.readonly}},watch:{group:{immediate:!0,handler:function(e,t){var n=this;return Object(f["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:!e.id||t&&e.id==t.id||n.$store.dispatch("groups/getMembers",n.group);case 1:case"end":return o.stop()}}),o)})))()}}},methods:{getMembers:function(){this.$store.dispatch("groups/getMembers",{group:this.group})},save:function(){var e=this;return console.log(this.$options.name+".save"),Object.keys(this.$refs).map((function(t){return e.$refs[t].save()}))}}};n("7c7a");E.render=m,E.__scopeId="data-v-65634f94";t["a"]=E},ed3e:function(e,t,n){"use strict";n("8972")}}]);
//# sourceMappingURL=group-application.dd38b1eb.js.map