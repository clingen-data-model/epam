(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6d92"],{"73ff":function(e,t,n){"use strict";n.r(t);n("b0c0");var o=n("7a23"),r={class:"pb-4"},a=Object(o["createTextVNode"])("People"),c={class:"flex justify-between items-center"},i=Object(o["createElementVNode"])("strong",null,"Email:",-1),l=Object(o["createElementVNode"])("strong",null,"Institution:",-1),s={key:0,class:"well"},u=["innerHTML"],d=["onClick"];function b(e,t,n,b,p,m){var j=Object(o["resolveComponent"])("router-link"),O=Object(o["resolveComponent"])("note"),f=Object(o["resolveComponent"])("icon-edit"),h=Object(o["resolveComponent"])("dictionary-row"),g=Object(o["resolveComponent"])("membership-list"),w=Object(o["resolveComponent"])("tab-item"),V=Object(o["resolveComponent"])("person-profile"),C=Object(o["resolveComponent"])("coi-list"),N=Object(o["resolveComponent"])("tabs-container"),v=Object(o["resolveComponent"])("router-view"),x=Object(o["resolveComponent"])("modal-dialog"),y=Object(o["resolveComponent"])("custom-email-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("header",r,[Object(o["createVNode"])(j,{class:"note",to:"/people"},{default:Object(o["withCtx"])((function(){return[a]})),_:1}),Object(o["createElementVNode"])("h1",c,[Object(o["createElementVNode"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.person.name)+" ",1),Object(o["createVNode"])(O,null,{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("ID: "+Object(o["toDisplayString"])(e.person.id),1)]})),_:1})]),e.hasPermission("people-manage")||e.userIsPerson(e.person)?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:0,to:"/people/".concat(n.uuid,"/edit"),class:"btn btn-xs flex-grow-0"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{width:"16",heigh:"16"})]})),_:1},8,["to"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(h,{label:"Email"},{label:Object(o["withCtx"])((function(){return[i]})),default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.person.email),1)]})),_:1}),Object(o["createVNode"])(h,{label:"Institution"},{label:Object(o["withCtx"])((function(){return[l]})),default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.person.institution?e.person.institution.name:null),1)]})),_:1})]),Object(o["createVNode"])(N,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(w,{label:"groups"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{person:e.person},null,8,["person"])]})),_:1}),Object(o["createVNode"])(w,{label:"Info"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(V,{person:e.person},null,8,["person"])]})),_:1}),Object(o["createVNode"])(w,{label:"Conflict of Interest"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(C,{person:e.person},null,8,["person"])]})),_:1}),Object(o["createVNode"])(w,{label:"Email Log",visible:e.hasPermission("people-manage")||e.userIsPerson(e.person)},{default:Object(o["withCtx"])((function(){return[0==m.sortedMailLog.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,Object(o["toDisplayString"])(e.person.first_name)+" has not received any mail via the GPM. ",1)):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(m.sortedMailLog,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"w-3/4 my-4 p-4 border",key:t.id},[Object(o["createVNode"])(h,{label:"Date/Time"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(b.formatDate(t.created_at)),1)]})),_:2},1024),Object(o["createVNode"])(h,{label:"Subject"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.subject),1)]})),_:2},1024),Object(o["createVNode"])(h,{label:"Body"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",{innerHTML:t.body},null,8,u)]})),_:2},1024),e.hasPermission("people-manage")?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn btn-xs",onClick:Object(o["withModifiers"])((function(e){return m.initResend(t)}),["stop"])},"Resend",8,d)):Object(o["createCommentVNode"])("",!0)])})),128))]})),_:1},8,["visible"])]})),_:1}),(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(x,{modelValue:m.showModal,"onUpdate:modelValue":t[0]||(t[0]=function(e){return m.showModal=e}),title:e.$route.meta.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{name:"modal"})]})),_:1},8,["modelValue","title"]),Object(o["createVNode"])(x,{title:"Resend Email",modelValue:p.showResendDialog,"onUpdate:modelValue":t[1]||(t[1]=function(e){return p.showResendDialog=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(y,{"mail-data":p.currentEmail,onSent:m.cleanupResend,onCanceled:m.cleanupResend},null,8,["mail-data","onSent","onCanceled"])]})),_:1},8,["modelValue"])]))])}var p=n("1da1"),m=n("2909"),j=n("5530"),O=(n("96cf"),n("4e82"),n("5502")),f=n("e328"),h=n("b442");function g(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("data-table");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(i,{fields:a.fields,data:c.memberships,sort:a.sort,"onUpdate:sort":t[0]||(t[0]=function(e){return a.sort=e}),rowClickHandler:c.goToGroup,"row-class":function(){return"cursor-pointer"}},null,8,["fields","data","sort","rowClickHandler","row-class"])])}n("a15b"),n("d81d");var w=n("5313"),V={name:"MembershipList",props:{person:{type:Object,required:!0}},data:function(){return{sort:{field:"group.displayName",desc:!1},fields:[{name:"group.displayName",type:String,sortable:!0,label:"Name"},{name:"group.type.name",type:String,sortable:!0,label:"Type"},{name:"roles",type:String,sortable:!1,label:"Roles",resolveValue:function(e){return e.roles.map((function(e){return e.name})).join(", ")}},{name:"permissions",type:String,sortable:!1,label:"Permissions",resolveValue:function(e){return e.permissions.map((function(e){return e.name})).join(", ")}},{name:"start_date",type:Date,sortable:!0,label:"Started"},{name:"end_date",type:Date,sortable:!0,label:"Ended"}]}},computed:{memberships:function(){return this.person.memberships?this.person.memberships.map((function(e){return e.group&&(e.group=new w["b"](e.group)),e})):[]}},methods:{goToGroup:function(e){this.$router.push({name:"GroupDetail",params:{uuid:e.group.uuid}})}}},C=n("6b0d"),N=n.n(C);const v=N()(V,[["render",g]]);var x=v,y=n("c226"),k=n("6a6b"),D={name:"PersonDetail",components:{TabsContainer:h["default"],MembershipList:x,PersonProfile:y["a"],CoiList:k["a"]},props:{uuid:{required:!0,type:String}},data:function(){return{emails:[],currentEmail:{},showResendDialog:null}},watch:{uuid:{immediate:!0,handler:function(){this.$store.dispatch("people/getPerson",{uuid:this.uuid})}}},computed:Object(j["a"])(Object(j["a"])({},Object(O["b"])({person:"people/currentItem"})),{},{showModal:{get:function(){return this.$route.meta.showModal},set:function(e){e&&this.$router.push({name:"PersonEdit",params:{uuid:this.person.uuid}}),this.$router.push({name:"PersonDetail",params:{uuid:this.person.uuid}})}},sortedMailLog:function(){return Object(m["a"])(this.person.mailLog).sort((function(e,t){return e.created_at==t.created_at?0:Date.parse(e.created_at)>Date.parse(t.created_at)?-1:1}))}}),methods:{initResend:function(e){this.currentEmail=Object(j["a"])({},e),this.showResendDialog=!0},cleanupResend:function(){this.currentEmail={},this.showResendDialog=!1,this.$store.dispatch("people/getMail",this.person)}},setup:function(){return{formatDate:f["c"]}},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("people/getPerson",{uuid:e.uuid});case 2:e.$store.dispatch("people/getMail",e.person);case 3:case"end":return t.stop()}}),t)})))()}};const _=N()(D,[["render",b]]);t["default"]=_}}]);
//# sourceMappingURL=chunk-2d0d6d92.9daf356e.js.map