"use strict";(self["webpackChunkepam"]=self["webpackChunkepam"]||[]).push([[812],{8812:function(e,t,r){r.r(t),r.d(t,{default:function(){return te}});var n=r(641),o=r(33),i=r(3751);const a={class:"flex justify-center"},s=(0,n.eW)("< Log In");function l(e,t,r,l,u,d){const c=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",a,[(0,n.Lk)("div",{class:"onboarding-container",style:(0,o.Tr)(`width: ${d.currentStepWidth}`)},[((0,n.uX)(),(0,n.Wv)(n.PR,null,[(0,n.bF)(i.eB,{name:u.animationDirection,mode:"out-in"},{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)((0,n.$y)(d.currentStepComponent),{invite:u.invite,person:u.invite.person,code:u.invite.coi_code,ref:"stepForm",onCodeverified:d.handleCodeVerified,onOk:d.goForward,onSaved:d.goForward,onBack:d.goBack},null,40,["invite","person","code","onCodeverified","onOk","onSaved","onBack"]))])),_:1},8,["name"])],1024))],4),(0,n.Lk)("p",null,[this.$store.getters.isAuthed?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(c,{key:0,class:"block link pt-2",to:{name:"login"}},{default:(0,n.k6)((()=>[s])),_:1}))])])])}const u={class:"text-lg text-center font-bold"},d=(0,n.Lk)("br",null,null,-1),c=(0,n.eW)(" You've been invited to join ClinGen "),p={key:0},v={key:1},m=(0,n.Lk)("p",null,"There are just a few steps to get you set up:",-1),h={class:"list-decimal pl-8"},k=(0,n.Lk)("li",null,"Create an account.",-1),f=(0,n.Lk)("li",null,"Fill out your profile.",-1),w=(0,n.Lk)("li",null,"Share some demographic information.",-1),b={key:0};function g(e,t,r,i,a,s){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("p",u,[(0,n.eW)(" Hi "+(0,o.v_)(r.invite.first_name)+". ",1),d,c,r.invite.inviter?((0,n.uX)(),(0,n.CE)("span",p," as part of the "+(0,o.v_)(r.invite.inviter.name)+" "+(0,o.v_)(r.invite.inviter.type.name.toUpperCase())+". ",1)):((0,n.uX)(),(0,n.CE)("span",v,"."))]),m,(0,n.Lk)("ol",h,[k,f,w,r.invite.inviter?((0,n.uX)(),(0,n.CE)("li",b,"Complete a Conflict of Interest Survey.")):(0,n.Q3)("",!0)]),(0,n.Lk)("p",null,[(0,n.Lk)("button",{class:"btn btn-lg blue w-full mt-4",onClick:t[0]||(t[0]=t=>e.$emit("ok"))}," Get Started ")])])}var y={name:"OnboardingSteps",props:{invite:{type:Object,required:!0}},emits:["ok"],data(){return{}},computed:{},methods:{}},C=r(6262);const x=(0,C.A)(y,[["render",g]]);var S=x;const X={class:"w-64 mx-auto"},A=(0,n.Lk)("label",{for:"invite-code-input",class:"text-lg block"}," Enter your registration code: ",-1);function L(e,t,r,o,a,s){const l=(0,n.g2)("input-errors");return(0,n.uX)(),(0,n.CE)("div",X,[A,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"invite-code-input","onUpdate:modelValue":t[0]||(t[0]=e=>o.inviteCode=e),placeholder:"XXXXXXXXXX",class:"w-full"},null,512),[[i.Jo,o.inviteCode]]),(0,n.bF)(l,{errors:o.errors},null,8,["errors"]),(0,n.Lk)("button",{class:"btn blue btn-lg block mt-2 w-full",onClick:t[1]||(t[1]=(...e)=>o.checkInvite&&o.checkInvite(...e))}," Submit ")])}var F=r(953),I=r(7684);const $=async e=>await I.A.get(`/api/people/invites/${e}`).then((e=>e.data.data)),E=async(e,t,r,n)=>I.A.put(`/api/people/invites/${e.code}`,{email:t,password:r,password_confirmation:n}),_=async e=>I.A.put(`/api/people/existing-user/invites/${e.code}`);var V=r(3703),W=r(8751),R={name:"InviteRedemptionCode",components:{InputErrors:V["default"]},props:{code:{required:!1},invite:{type:Object,required:!1,default:()=>({})}},data(){return{}},setup(e,t){const{invite:r}=(0,F.QW)(e);let o=(0,F.KR)(null),i=(0,F.KR)([]);const a=()=>{o.value=e.invite.code};(0,n.wB)(r,(()=>{a()}),{deep:!0}),(0,n.wB)(o,(()=>{i.value=[]}));const s=async()=>{try{const e=await $(o.value);t.emit("codeverified",e)}catch(e){if(404==e.response.status)return void(i.value=["The code you entered is not valid"]);(0,W.A)(e)&&(i.value=e.response.data.errors.code)}};return{inviteCode:o,errors:i,checkInvite:s,syncCode:a}},computed:{},methods:{},mounted(){this.syncCode()},beforeMount(){null!==this.$store.getters.currentUser.id&&(this.$store.commit("pushError","You can't redeem an invite b/c you're already logged in."),this.$router.replace({name:"Dashboard"}))}};const U=(0,C.A)(R,[["render",L]]);var O=U;const j=(0,n.Lk)("pre",null,null,-1),q={key:0},B=(0,n.eW)(" It looks like you've already activated you account. Please login to continue. "),D={key:1},K=(0,n.Lk)("p",{class:"text-lg"},"Create your account",-1),P={class:"flex flex-row-reverse"};function Q(e,t,r,o,i,a){const s=(0,n.g2)("static-alert"),l=(0,n.g2)("login-form"),u=(0,n.g2)("input-row");return(0,n.uX)(),(0,n.CE)("div",null,[j,r.invite.person.user_id?((0,n.uX)(),(0,n.CE)("div",q,[(0,n.bF)(s,null,{default:(0,n.k6)((()=>[B])),_:1}),(0,n.bF)(l,{onAuthenticated:o.redeemForExistingUser},null,8,["onAuthenticated"])])):((0,n.uX)(),(0,n.CE)("div",D,[K,(0,n.bF)(u,{label:"Email",modelValue:o.email,"onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),errors:o.errors.email,"label-width-class":"w-24"},null,8,["modelValue","errors"]),(0,n.bF)(u,{label:"Password",modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),type:"password",errors:o.errors.password,"label-width-class":"w-24"},null,8,["modelValue","errors"]),(0,n.bF)(u,{label:"Confirm Password",modelValue:o.password_confirmation,"onUpdate:modelValue":t[2]||(t[2]=e=>o.password_confirmation=e),type:"password",errors:o.errors.password,"label-width-class":"w-24"},null,8,["modelValue","errors"]),(0,n.Lk)("div",P,[(0,n.Lk)("button",{class:"btn blue",onClick:t[3]||(t[3]=(...e)=>o.createAccount&&o.createAccount(...e))},"Next")])]))])}var T=r(6278),z=r(7041),G={name:"AccountCreationForm",components:{LoginForm:z["default"]},props:{invite:{type:Object,required:!0}},setup(e,t){const r=(0,T.Pj)();let o=(0,F.KR)({}),i=(0,F.KR)(null),a=(0,F.KR)(null),s=(0,F.KR)(null);const l=async()=>{try{await E(e.invite,i.value,a.value,s.value),await r.dispatch("login",{email:i.value,password:a.value}),t.emit("saved")}catch(n){(0,W.A)(n)&&(o.value=n.response.data.errors)}},u=async()=>{try{await _(e.invite),t.emit("saved")}catch(r){(0,W.A)(r)&&(o.value=r.response.data)}},d=()=>{i.value=e.invite.person.email};return(0,n.sV)((()=>d())),{errors:o,email:i,password:a,password_confirmation:s,createAccount:l,redeemForExistingUser:u}}};const Y=(0,C.A)(G,[["render",Q]]);var H=Y,J=r(6747);const M=[O,S,H],N=["20rem","20rem","20rem","40rem","40rem"];var Z={name:"OverviewWizard",components:{InviteRedemptionForm:O,OnboardingSteps:S,AccountCreationForm:H},props:{code:{required:!1}},data(){return{animationDirection:"forward",currentStepIdx:0,invite:{person:new J.A({})}}},computed:{currentStepComponent(){return M[this.currentStepIdx]},currentStepWidth(){return N[this.currentStepIdx]},canContinue(){return!this.$store.getters.isAuthed||this.$store.getters.isAuthed&&!this.$store.getters.currentUser.person.timezone}},watch:{code:{immediate:!0,handler:function(e){this.invite.code=e}}},methods:{handleCodeVerified(e){this.invite=e,this.goForward()},goBack(){this.animationDirection="fade",0!=this.currentStepIdx&&(this.currentStepIdx-=1)},goForward(){this.animationDirection="fade",this.currentStepIdx!=M.length-1?this.currentStepIdx+=1:this.$router.push({name:"Dashboard"})},selectStep(){if(!this.invite.id)return this.currentStepIdx=0,void(this.$route.query.code&&(this.invite.code=this.$route.query.code));this.invite.id&&this.$store.state.user.id&&(this.currentStepIndex=3)}}};const ee=(0,C.A)(Z,[["render",l],["__scopeId","data-v-0e76671e"]]);var te=ee}}]);
//# sourceMappingURL=812.b10adb95.js.map