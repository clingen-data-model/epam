{"version":3,"sources":["webpack:///./src/components/next_actions/NextActionForm.vue","webpack:///./src/components/next_actions/NextActionForm.vue?c7d3"],"names":["_createElementVNode","value","class","_createBlock","_component_form_container","_createVNode","_component_input_row","label","errors","$data","date_created","type","$event","$options","expert_panel_type_id","_component_step_input","step","Date","target_date","entry","_component_rich_text_editor","id","assigned_to","_hoisted_1","_createElementBlock","_Fragment","_renderList","i","key","name","_hoisted_2","assigned_to_name","placeholder","_hoisted_4","_component_checkbox","date_completed","_component_button_row","onClick","components","StepInput","RichTextEditor","props","required","default","emits","data","newAction","completed","computed","mapGetters","group","application","this","expert_panel","title","steps","assignmentErrors","assignees","Object","values","configs","nextActions","watch","immediate","handler","action","findAction","syncAction","methods","cancel","clearForm","$emit","initNewAction","next_actions","find","uuid","formatDate","created_at","save","$store","dispatch","updatedAction","nextActionData","response","status","unmounted","mounted","__exports__","render"],"mappings":"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","file":"js/next-action-form.fbbe87d1.js","sourcesContent":["<template>\n    <form-container>\n        <input-row label=\"Creation Date\" :errors=\"errors.date_created\" type=\"date\" v-model=\"newAction.date_created\"></input-row>\n\n        <step-input v-model=\"newAction.step\" :errors=\"errors.step\" v-if=\"application.expert_panel_type_id == 2\"></step-input>\n\n        <input-row label=\"Target\" Date=\"\" :errors=\"errors.target_date\" type=\"date\" v-model=\"newAction.target_date\"></input-row>\n\n        <input-row label=\"Entry\" :errors=\"errors.entry\">\n            <rich-text-editor v-model=\"newAction.entry\"></rich-text-editor>\n        </input-row>\n\n        <input-row label=\"Assigned To\" :errors=\"assignmentErrors\">\n            <select id=\"\" v-model=\"newAction.assigned_to\">\n                <option :value=\"null\">Select...</option>\n                <option v-for=\"i in assignees\" :key=\"i.id\"\n                    :value=\"i.id\"\n                >\n                    {{i.name}}\n                </option>\n            </select>\n            &nbsp;&nbsp;\n            <input type=\"text\" label=\"Name\" v-model=\"newAction.assigned_to_name\" placeholder=\"Name (optional)\">\n        </input-row>\n\n        <div class=\"ml-4\">\n        </div>\n\n        <checkbox  \n            v-model=\"completed\" \n            label=\"This is already completed\"\n            class=\"ml-36\"\n        />\n\n        <input-row label=\"Date Completed\" :errors=\"errors.date_completed\" class=\"ml-36\" v-if=\"completed\">\n            <input type=\"date\" v-model=\"newAction.date_completed\">\n        </input-row>\n\n        <button-row>\n            <button class=\"btn\" @click=\"cancel\">Cancel</button>\n            <button class=\"btn blue\" @click=\"save\">Save</button>\n        </button-row>\n    </form-container>\n</template>\n<script>\nimport StepInput from '@/components/forms/StepInput'\nimport {mapGetters} from 'vuex'\nimport RichTextEditor from '@/components/forms/RichTextEditor'\nimport {formatDate} from '@/date_utils'\nimport configs from '@/configs'\n\nexport default {\n    name: 'NextActionForm',\n    components: {\n        StepInput,\n        RichTextEditor\n    },\n    props: {\n        id: {\n            required: false,\n            default: null\n        }\n    },\n    emits: [\n        'saved',\n        'closed',\n        'formCleared',\n        'canceled'\n    ],\n    data() {\n        return {\n            errors: {},\n            newAction: {\n                date_created: new Date(),\n                step: null,\n                date_completed: null,\n                entry: '',\n                assigned_to: null,\n                assigned_to_name: null\n            },\n            completed: false\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        },\n        title () {\n            return this.newAction.id ? 'Update Action' : 'Add Next Action';\n        },\n        steps () {\n            return [1,2,3,4];\n        },\n        assignmentErrors () {\n            let errors = [];\n            if (this.errors.assigned_to) {\n                errors = [...errors, ...this.errors.assigned_to]\n            }\n            if (this.errors.assigned_to_name) {\n                errors = [...errors, ...this.errors.assigned_to_name]\n            }\n            return errors;\n        },\n        assignees () {\n            return Object.values(configs.nextActions.assignees);\n        }\n    },\n    watch: {\n        id: {\n            immediate: true,\n            handler: function() {\n                const action = this.findAction();\n                if (action) {\n                    this.syncAction(action)\n                }\n            }\n        },\n        application: {\n            immediate: true,\n            handler: function () {\n                const action = this.findAction();\n                if (action) {\n                    this.syncAction(action);\n                }\n            }\n        }\n    },\n    methods: {\n        cancel () {\n            this.clearForm();\n            this.$emit('canceled');\n        },\n        clearForm() {\n            this.initNewAction();\n            this.$emit('formCleared')\n        },\n        initNewAction () {\n            this.newAction = {\n                date_created: new Date(),\n                step: null,\n                target_date: null,\n                date_completed: null,\n                entry: '',\n                assigned_to: null,\n                assigned_to_name: null,\n            };      \n        },\n        findAction () {\n            if (this.id === null) {\n                return null;\n            }\n            if (this.application.next_actions) {\n                return this.application.next_actions.find(i => i.id == this.id);\n            }\n        },\n        syncAction (action) {\n            if (!action) {\n                return;\n            }\n            this.newAction = {\n                id: action.id,\n                uuid: action.uuid,\n                date_created: formatDate(action.created_at),\n                step: action.step,\n                target_date: formatDate(action.target_date),\n                date_completed: formatDate(action.date_completed),\n                entry: action.entry ?? '',\n                assigned_to: action.assigned_to,\n                assigned_to_name: action.assigned_to_name\n            }\n        },\n        async save() {\n            try {\n                if (this.newAction.id) {\n                    await this.$store.dispatch(\n                        'applications/updateNextAction', \n                        {\n                            application: this.application, \n                            updatedAction: this.newAction,\n                        }\n                    );\n                    this.$emit('saved')\n                    this.clearForm();\n                } else {\n                    await this.$store.dispatch(\n                        'applications/addNextAction', \n                        {\n                            application: this.application, \n                            nextActionData: this.newAction\n                        }\n                    );\n                    this.$emit('saved')\n                    this.clearForm();\n                }\n            } catch (error) {\n                if (error.response && error.response.status == 422 && error.response.data.errors) {\n                    this.errors = error.response.data.errors\n                    return;\n                }\n            }\n        },\n    },\n    unmounted() {\n        this.initNewAction()\n    },\n    mounted() {\n    }\n}\n</script>","import { render } from \"./NextActionForm.vue?vue&type=template&id=a7d54a48\"\nimport script from \"./NextActionForm.vue?vue&type=script&lang=js\"\nexport * from \"./NextActionForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}