{"version":3,"file":"js/726.37de9f0b.js","mappings":"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","sources":["webpack://epam/./src/views/InviteAdmin.vue","webpack://epam/./src/views/InviteAdmin.vue?87a0"],"sourcesContent":["<template>\n    <div>\n        <note>Admin</note>\n        <h1>Invites</h1>\n        <data-table\n            :data=\"itemProvider\"\n            :fields=\"fields\"\n            v-model:sort=\"tableSort\"\n            class=\"text-sm\"\n            v-remaining-height\n            paginated\n            ref=\"dataTable\"\n        >\n            <template v-slot:header>\n                <input type=\"text\" v-model=\"searchTerm\" placeholder=\"filter by name or email\" class=\"mb-2\">\n            </template>\n            <template v-slot:cell-reset=\"{item}\">\n                <button class=\"btn btn-xs\" @click=\"confirmReset(item)\" v-if=\"item.redeemed_at\">\n                    Reset\n                </button>\n            </template>\n        </data-table>\n\n        <teleport to=\"body\">\n            <modal-dialog title=\"Reset Invite\" v-model=\"showConfirmation\">\n                <p>You are about to reset the invite for {{resettingInvite.first_name}} {{resettingInvite.last_name}}.</p>\n                <p>This cannot be undone.</p>\n                <p>Do you want to reset the invite?</p>\n                <button-row submit-text=\"Reset Invite\" @submitted=\"resetInvite(resettingInvite)\"></button-row>\n\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nimport {api, isValidationError} from '@/http'\nimport {debounce} from 'lodash-es'\n\nexport default {\n    name: 'InviteAdmin',\n    props: {\n        \n    },\n    data () {\n        return {\n\n            resettingInvite: {},\n            tableSort: {field: 'id', desc: false},\n            invites: [],\n            showConfirmation: false,\n            searchTerm: null,\n            fields: [\n                {\n                    name: 'id',\n                    sortable: true,\n                    type: Number\n                },\n                {\n                    name: 'person.name',\n                    label: 'Name',\n                    sortable: true,\n                    type: String\n                },\n                {\n                    name: 'person.email',\n                    label: 'Email',\n                    sortable: true,\n                    type: String\n                },\n                {\n                    name: 'redeemed_at',\n                    sortable: true,\n                    type: Date\n                },\n                {\n                    name: 'inviter',\n                    sortable: true,\n                    type: String,\n                    resolveValue: (invite) => {\n                        return invite.inviter ? invite.inviter.name : null\n                    }\n                },\n                {\n                    name: 'code',\n                    sortable: false,\n                    type: String\n                },\n                {\n                    name: 'reset',\n                    sortable: false,\n                    type: String\n                }\n            ],\n        }\n    },\n    watch: {\n        searchTerm () {\n            this.triggerSearch()\n        }\n    },\n    methods: {\n\n        async itemProvider (currentPage, pageSize, sort, setTotalItems) {\n            const params = {\n                page: currentPage,\n                page_size: pageSize,\n                'sort[field]': sort.field.name,\n                'sort[dir]': sort.desc ? 'DESC' : 'ASC',\n                'where[keyword]': this.searchTerm\n            }\n            const pageResponse = await api.get(`/api/people/invites`, {params: params})\n                .then(rsp => rsp.data);\n            setTotalItems(pageResponse.meta.total);\n            return pageResponse.data;\n        }, \n        async resetInvite (invite) {\n            try {\n                const response = await api.put(`/api/people/invites/${invite.code}/reset`);\n                const idx = this.invites.findIndex(i => i.id == invite.id);\n                if (idx == -1) {\n                    alert('what??')\n                }\n                this.invites[idx] = response.data;\n            } catch (error) {\n                if (isValidationError(error)) {\n                    alert('Problem resetting invite!');\n                    return;\n                }\n            }\n            this.showConfirmation = false;\n        },\n        confirmReset(invite) {\n            this.resettingInvite = invite;\n            this.showConfirmation = true;\n        },\n    },\n    mounted () {\n        this.triggerSearch = debounce(() => this.$refs.dataTable.getItems(), 500)\n    }\n}\n</script>","import { render } from \"./InviteAdmin.vue?vue&type=template&id=bcaca1f0\"\nimport script from \"./InviteAdmin.vue?vue&type=script&lang=js\"\nexport * from \"./InviteAdmin.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/bpow/src/clingen/gpm/resources/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","_createElementBlock","_createVNode","_component_note","_hoisted_2","_createBlock","_component_data_table","data","$options","fields","$data","sort","class","paginated","ref","header","type","placeholder","item","redeemed_at","onClick","_Teleport","to","_component_modal_dialog","title","first_name","last_name","_hoisted_4","_hoisted_5","_component_button_row","onSubmitted","name","props","resettingInvite","tableSort","field","desc","invites","showConfirmation","searchTerm","sortable","Number","label","String","Date","resolveValue","invite","inviter","watch","this","triggerSearch","methods","itemProvider","currentPage","pageSize","setTotalItems","params","page","page_size","pageResponse","api","get","then","rsp","meta","total","resetInvite","response","put","code","idx","findIndex","i","id","alert","error","isValidationError","confirmReset","mounted","debounce","$refs","dataTable","getItems","__exports__","render"],"sourceRoot":""}