"use strict";(self["webpackChunkepam"]=self["webpackChunkepam"]||[]).push([[990],{9824:function(e,t,o){o.d(t,{A:function(){return y}});var n=o(641),r=o(33);const i={class:"flex space-x-2 items-center mb-3"},a={key:0},s=(0,n.eW)(" has"),l={key:1},u=(0,n.eW)(" an "),d=(0,n.eW)(" due on "),p=(0,n.eW)(". "),c=(0,n.eW)(" Complete the Annual Update ");function m(e,t,o,m,g,h){const b=(0,n.g2)("icon-review"),v=(0,n.g2)("router-link"),y=(0,n.g2)("static-alert");return h.isPending&&g.annualReview.id?((0,n.uX)(),(0,n.Wv)(y,{key:0,variant:h.variant},{default:(0,n.k6)((()=>[(0,n.Lk)("div",i,[(0,n.bF)(b,{height:"30",width:"30"}),(0,n.Lk)("div",null,[(0,n.Lk)("p",null,[o.showGroupName?((0,n.uX)(),(0,n.CE)("span",a,[(0,n.Lk)("strong",null,(0,r.v_)(o.group.displayName),1),s])):((0,n.uX)(),(0,n.CE)("span",l,"You have")),u,(0,n.Lk)("strong",null,"annual update for "+(0,r.v_)(h.window.for_year),1),d,(0,n.Lk)("strong",null,(0,r.v_)(e.formatDate(h.window.end)),1),p]),o.group.uuid?((0,n.uX)(),(0,n.Wv)(v,{key:0,class:"btn font-bold",to:{name:"AnnualUpdate",params:{uuid:o.group.uuid}}},{default:(0,n.k6)((()=>[c])),_:1},8,["to"])):(0,n.Q3)("",!0)])])])),_:1},8,["variant"])):(0,n.Q3)("",!0)}var g=o(696),h={name:"AnnualUpdateAlert",props:{group:{type:Object,required:!0},showGroupName:{type:Boolean,default:!1}},data(){return{annualReview:{},loading:!1}},computed:{window(){return this.annualReview.window?this.annualReview.window:{}},isPending(){return this.annualReview&&!this.annualReview.completed_at},variant(){const e=new Date;if(!this.window.end)return"warning";const t=new Date(Date.parse(this.window.end));return e>this.addDays(t,-7)?"danger":"warning"}},watch:{group:{immediate:!0,handler(){this.getAnnualUpdate()}}},methods:{getAnnualUpdate(){this.group.uuid&&this.group.expert_panel.definition_is_approved&&(this.loading=!0,g.FH.get(`/api/groups/${this.group.uuid}/expert-panel/annual-updates`,{headers:{"X-Ignore-Missing":1}}).then((e=>{this.annualReview=e.data})),this.loading=!1)}}},b=o(6262);const v=(0,b.A)(h,[["render",m]]);var y=v},415:function(e,t,o){o.d(t,{A:function(){return I}});var n=o(641);const r={key:0,class:"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200"},i={key:0,class:"flex space-x-1"},a=["onClick"],s=["onClick"],l=["innerHTML"];function u(e,t,o,u,d,p){const c=(0,n.g2)("icon-edit"),m=(0,n.g2)("icon-trash"),g=(0,n.g2)("data-table"),h=(0,n.g2)("log-entry-form"),b=(0,n.g2)("modal-dialog"),v=(0,n.g2)("activity-log-delete-confirmation");return(0,n.uX)(),(0,n.CE)("div",null,[u.hasLogEntries?((0,n.uX)(),(0,n.Wv)(g,{key:1,fields:u.fields,data:o.logEntries,sort:u.sort,"onUpdate:sort":t[0]||(t[0]=e=>u.sort=e)},{"cell-id":(0,n.k6)((({item:t})=>[e.hasPermission("groups-manage")?((0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("button",{class:"btn btn-xs inline-block",onClick:e=>u.editLogEntry(t)},[(0,n.bF)(c,{width:"12"})],8,a),null===t.activity_type?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:e=>u.confirmDelete(t),class:"btn btn-xs inline-block"},[(0,n.bF)(m,{width:"12"})],8,s)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)])),"cell-description":(0,n.k6)((({item:e})=>[(0,n.Lk)("div",{innerHTML:e.description,class:"links-blue"},null,8,l)])),_:1},8,["fields","data","sort"])):((0,n.uX)(),(0,n.CE)("div",r," No log entries to display ")),(0,n.bF)(b,{modelValue:u.editingEntry,"onUpdate:modelValue":t[1]||(t[1]=e=>u.editingEntry=e),title:"Edit log entry"},{default:(0,n.k6)((()=>[(0,n.bF)(h,{"log-entry":u.selectedEntry,"api-url":o.apiUrl,onSaved:u.closeEntryForm,onCanceled:u.closeEntryForm},null,8,["log-entry","api-url","onSaved","onCanceled"])])),_:1},8,["modelValue"]),(0,n.bF)(b,{modelValue:u.showDeleteConfirmation,"onUpdate:modelValue":t[2]||(t[2]=e=>u.showDeleteConfirmation=e),title:"Delete this log entry?"},{default:(0,n.k6)((()=>[(0,n.bF)(v,{logEntry:u.selectedEntry,"api-url":o.apiUrl,onCanceled:u.closeDeleteConfirmation,onDeleted:u.closeDeleteConfirmation},null,8,["logEntry","api-url","onCanceled","onDeleted"])])),_:1},8,["modelValue"])])}var d=o(953),p=o(6278),c=o(5079),m=o(1606),g=o(6932),h={__name:"ActivityLogEntryForm",props:{logEntry:{required:!1,default:()=>({log_date:(new Date).toISOString(),step:null,entry:""})},apiUrl:{required:!0,type:String}},emits:["saved"],setup(e,{emit:t}){const o=e,r=(0,p.Pj)(),i=(0,d.KR)({log_date:(new Date).toISOString(),step:null,entry:""}),a=(0,d.KR)({}),s=(0,n.EW)((()=>r.getters["groups/currentItemOrNew"])),l=e=>{e&&e.created_at&&(i.value={id:e.id,log_date:new Date(Date.parse(e.created_at)).toISOString(),step:e.step,entry:e.description})},u=()=>{i.value={log_date:(new Date).toISOString(),step:null,entry:""}},h=async()=>{try{i.value.id?await(0,g.W8)(`${o.apiUrl}/${i.value.id}`,i.value):await(0,g.wn)(o.apiUrl,i.value),await(0,g.l8)(o.apiUrl),u(),t("saved",i.value)}catch(e){if(e.response&&422==e.response.status&&e.response.data.errors)return void(a.value=e.response.data.errors)}},b=()=>{u(),t("canceled")};return(0,n.wB)((()=>o.logEntry),(e=>{l(e)}),{immediate:!0}),(e,t)=>{const o=(0,n.g2)("input-row"),r=(0,n.g2)("button-row"),l=(0,n.g2)("form-container");return(0,n.uX)(),(0,n.Wv)(l,{class:"log-entry-form",ref:"form-container"},{default:(0,n.k6)((()=>[(0,n.bF)(o,{label:"Log Date",modelValue:i.value.log_date,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value.log_date=e),errors:a.value.log_date,type:"date",ref:"logdate"},null,8,["modelValue","errors"]),(0,d.R1)(s).isVcep()?((0,n.uX)(),(0,n.Wv)(m["default"],{key:0,errors:a.value.step,modelValue:i.value.step,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value.step=e)},null,8,["errors","modelValue"])):(0,n.Q3)("",!0),(0,n.bF)(o,{label:"Entry",errors:a.value.entry},{default:(0,n.k6)((()=>[(0,n.bF)(c["default"],{modelValue:i.value.entry,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value.entry=e)},null,8,["modelValue"])])),_:1},8,["errors"]),(0,n.bF)(r,null,{default:(0,n.k6)((()=>[(0,n.Lk)("button",{class:"btn",onClick:b},"Cancel"),(0,n.Lk)("button",{class:"btn blue",onClick:h},"Save")])),_:1})])),_:1},512)}}};const b=h;var v=b,y=o(33);const f=(0,n.Lk)("p",null,"You are about to delete the following log entry:",-1),k={class:"border-y py-2"},_=["innerHTML"],w={key:0,class:"ml-4 mt-2 mb-4 text-gray-700 text-sm"},C=(0,n.Lk)("div",null,"This can not be undone. Are you sure you want to continue?",-1),D={key:0,class:"bg-red-200 text-red-900 rounded p-2 my-2"};function F(e,t,o,r,i,a){const s=(0,n.g2)("button-row");return(0,n.uX)(),(0,n.CE)("div",null,[f,(0,n.Lk)("div",k,[(0,n.Lk)("blockquote",null,[(0,n.Lk)("div",{innerHTML:o.logEntry.description},null,8,_)]),o.logEntry.causer?((0,n.uX)(),(0,n.CE)("div",w,"Logged by "+(0,y.v_)(o.logEntry.causer.name)+", "+(0,y.v_)(r.logDate),1)):(0,n.Q3)("",!0)]),C,r.flattenedErrors.length>0?((0,n.uX)(),(0,n.CE)("div",D,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.flattenedErrors,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},(0,y.v_)(e),1)))),128))])])):(0,n.Q3)("",!0),(0,n.bF)(s,{onCanceled:t[0]||(t[0]=t=>e.$emit("canceled")),onSubmitted:r.deleteLogEntry,submitText:"Delete Log Entry"},null,8,["onSubmitted"])])}var E=o(1877),L=o(8751),x={name:"ConfirmDeleteLogEntry",props:{logEntry:{required:!0,type:Object},apiUrl:{required:!0,type:String}},emits:["deleted","canceled"],setup(e,t){const o=(0,d.KR)({}),r=(0,n.EW)((()=>(0,E.Yq)(e.logEntry.log_date))),i=(0,n.EW)((()=>Object.values(o.value).flat())),a=async()=>{try{await(0,g.KB)(e.apiUrl,e.logEntry.id),t.emit("deleted"),await(0,g.l8)(e.apiUrl)}catch(n){if((0,L.A)(n))return void(o.value=n.response.data.errors);o.value={a:n.message}}};return{errors:o,logDate:r,flattenedErrors:i,deleteLogEntry:a}}},A=o(6262);const S=(0,A.A)(x,[["render",F]]);var X=S;const U=[{name:"created_at",label:"Date & Time",sortName:"created_at",sortable:!0,resolveValue({created_at:e}){return e?(0,E.Yq)(e):null},type:Date,colspan:2,class:"w-16"},{name:"created_at",label:"Time",sortName:"created_at",hideHeader:!0,sortable:!1,resolveValue({created_at:e}){return e?(0,E.fU)(e):null},class:"w-28",type:Date},{name:"description",label:"Entry",sortable:!0,type:String},{name:"causer.name",label:"User",sortable:!0},{name:"id",label:"",sortable:!1}];var W={components:{LogEntryForm:v,ActivityLogDeleteConfirmation:X},props:{logEntries:{required:!0,type:Array},apiUrl:{required:!0,type:String}},setup(e){const t=(0,d.KR)({field:"created_at",desc:!0}),o=(0,d.KR)({}),r=(0,d.KR)(!1),i=(0,d.KR)(!1),a=(0,n.EW)((()=>e.logEntries.length>0)),s=e=>{r.value=!0,o.value=e},l=()=>{r.value=!1,o.value={}},u=e=>{o.value=e,i.value=!0},p=()=>{i.value=!1,o.value={}};return{fields:(0,d.KR)(U),sort:t,selectedEntry:o,editingEntry:r,hasLogEntries:a,editLogEntry:s,closeEntryForm:l,showDeleteConfirmation:i,confirmDelete:u,closeDeleteConfirmation:p}}};const $=(0,A.A)(W,[["render",u]]);var I=$},9153:function(e,t,o){o.r(t),o.d(t,{default:function(){return Zt}});var n=o(641),r=o(33);const i={class:"flex space-x-4"},a={class:"flex-grow mt-4"},s=(0,n.Lk)("h3",null," Plans for Ongoing Gene Review and Reanalysis and Discrepancy Resolution ",-1),l=(0,n.Lk)("br",null,null,-1),u={key:0,class:"bg-white bg-opacity-50 absolute top-0 left-0 right-0 bottom-0"},d=(0,n.eW)(" You can complete these sections after your first Specifications Pilot has been approved. "),p={key:2},c=(0,n.Lk)("header",null,[(0,n.Lk)("h3",null,"Example Evidence Summaries")],-1),m={class:"relative"},g={key:0,class:"bg-white bg-opacity-50 absolute top-0 left-0 right-0 bottom-0"},h=(0,n.eW)(" You can complete these sections after your Group Definition has been approved. "),b=(0,n.eW)("Documents are only available to members of this group."),v=(0,n.eW)("The attestations below are read only. Attestations can only be completed during the application process."),y=(0,n.Lk)("h3",null,"Reanalysis & Discrepancy Resolution",-1),f=(0,n.Lk)("h3",null,"NHGRI Data Availability",-1),k={key:0},_=(0,n.Lk)("h2",{class:"pb-2 border-b mb-4"},"Application",-1),w=(0,n.Lk)("hr",null,null,-1),C={key:1,class:"border my-4 p-4 rounded"},D=(0,n.Lk)("h2",{class:"mb-4"},"Annual Update",-1),F=["href"],E={class:"border my-4 p-4 bg-red-100 border-red-200 rounded"},L=(0,n.Lk)("h2",{class:"mb-4 text-red-800"}," Here be dragons. Proceed with caution. ",-1),x={key:2,class:"border my-4 p-4 rounded"},A=(0,n.Lk)("h2",{class:"mb-4"},[(0,n.eW)(" Dev tools "),(0,n.Lk)("span",{class:"text-gray-500"}," - don't use if you don't know.")],-1),S={key:0,class:"md:w-1/5 lg:w-1/4"},X={class:"text-lg"},U=(0,n.Lk)("p",null,"This cannot be undone.",-1);function W(e,t,o,W,$,I){const Q=(0,n.g2)("annual-update-alert"),V=(0,n.g2)("sustained-curation-review-alert"),P=(0,n.g2)("group-detail-header"),G=(0,n.g2)("application-summary"),M=(0,n.g2)("group-description-form"),R=(0,n.g2)("submission-wrapper"),T=(0,n.g2)("tab-item"),N=(0,n.g2)("member-list"),j=(0,n.g2)("membership-description-form"),q=(0,n.g2)("scope-description-form"),O=(0,n.g2)("static-alert"),B=(0,n.g2)("evidence-summaries"),K=(0,n.g2)("specifications-section"),H=(0,n.g2)("group-documents"),Y=(0,n.g2)("note"),J=(0,n.g2)("attestation-gcep"),z=(0,n.g2)("attestation-reanalysis"),Z=(0,n.g2)("attestation-nhgri"),ee=(0,n.g2)("activity-log"),te=(0,n.g2)("progress-chart"),oe=(0,n.g2)("step-tabs"),ne=(0,n.g2)("tabs-container"),re=(0,n.g2)("subgroup-list"),ie=(0,n.g2)("router-view"),ae=(0,n.g2)("modal-dialog"),se=(0,n.g2)("group-form"),le=(0,n.g2)("button-row");return(0,n.uX)(),(0,n.CE)("div",null,[e.hasAnyPermission(["annual-updates-mange",["annual-update-manage",W.group]])?((0,n.uX)(),(0,n.Wv)(Q,{key:0,group:W.group,class:"mb-2"},null,8,["group"])):(0,n.Q3)("",!0),W.needsToReviewSustainedCuration&&e.hasAnyPermission(["ep-applications-manage",["application-edit",W.group]])?((0,n.uX)(),(0,n.Wv)(V,{key:1,group:W.group,class:"mb-2"},null,8,["group"])):(0,n.Q3)("",!0),(0,n.bF)(P,{group:W.group,onShowEdit:I.showEdit},null,8,["group","onShowEdit"]),(0,n.Lk)("div",i,[(0,n.Lk)("div",a,[W.group.isApplying?((0,n.uX)(),(0,n.Wv)(G,{key:0,group:W.group},null,8,["group"])):(0,n.Q3)("",!0),(0,n.bF)(ne,{onTabChanged:I.handleTabChange},{default:(0,n.k6)((()=>[(0,n.bF)(T,{label:"Summary Description"},{default:(0,n.k6)((()=>[(0,n.bF)(R,{visible:W.group.is_ep,onSubmitted:t[1]||(t[1]=e=>I.submitForm("saveDescription","editingDescription")),onCanceled:t[2]||(t[2]=e=>I.cancelForm("editingDescription")),"show-controls":$.editingDescription},{default:(0,n.k6)((()=>[(0,n.bF)(M,{ref:"descriptionRef",editing:$.editingDescription,"onUpdate:editing":t[0]||(t[0]=e=>$.editingDescription=e),errors:$.errors},null,8,["editing","errors"])])),_:1},8,["visible","show-controls"])])),_:1}),(0,n.bF)(T,{label:"Members"},{default:(0,n.k6)((()=>[(0,n.bF)(N,{group:W.group},null,8,["group"]),W.group.is_vcep_or_scvcep?((0,n.uX)(),(0,n.Wv)(R,{key:0,onSubmitted:t[4]||(t[4]=e=>I.submitForm("saveMembershipDescription","editingExpertise")),onCanceled:t[5]||(t[5]=e=>I.cancelForm("editingExpertise")),"show-controls":$.editingExpertise},{default:(0,n.k6)((()=>[(0,n.bF)(j,{ref:"membershipDescriptionFormRef",class:"mt-8",editing:$.editingExpertise,"onUpdate:editing":t[3]||(t[3]=e=>$.editingExpertise=e),errors:$.errors},null,8,["editing","errors"])])),_:1},8,["show-controls"])):(0,n.Q3)("",!0)])),_:1}),(0,n.bF)(T,{label:"Scope",visible:W.group.is_ep},{default:(0,n.k6)((()=>[s,W.group.is_ep?((0,n.uX)(),(0,n.Wv)(R,{key:0,onSubmitted:t[7]||(t[7]=t=>e.$refs.groupGeneListRef.save()),onCanceled:t[8]||(t[8]=t=>e.$refs.groupGeneListRef.cancel()),"show-controls":$.editingGenes},{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)((0,n.$y)(W.groupGeneList),{ref:"groupGeneListRef",editing:$.editingGenes,"onUpdate:editing":t[6]||(t[6]=e=>$.editingGenes=e)},null,40,["editing"]))])),_:1},8,["show-controls"])):(0,n.Q3)("",!0),l,(0,n.bF)(R,{visible:W.group.is_ep,onSubmitted:t[10]||(t[10]=e=>I.submitForm("saveScopeDescription","editingScopeDescription")),onCanceled:t[11]||(t[11]=e=>I.cancelForm("editingScopeDescription")),"show-controls":$.editingScopeDescription},{default:(0,n.k6)((()=>[(0,n.bF)(q,{ref:"scopeDescriptionRef",editing:$.editingScopeDescription,"onUpdate:editing":t[9]||(t[9]=e=>$.editingScopeDescription=e),errors:$.errors},null,8,["editing","errors"])])),_:1},8,["visible","show-controls"])])),_:1},8,["visible"]),(0,n.bF)(T,{label:"Sustained Curation",visible:W.group.is_ep,class:"relative"},{default:(0,n.k6)((()=>[!W.group.expert_panel.pilotSpecificationsIsApproved&&W.group.is_vcep_or_scvcep?((0,n.uX)(),(0,n.CE)("div",u)):(0,n.Q3)("",!0),!W.group.expert_panel.pilotSpecificationsIsApproved&&W.group.is_vcep_or_scvcep?((0,n.uX)(),(0,n.Wv)(O,{key:1,variant:"info"},{default:(0,n.k6)((()=>[d])),_:1})):(0,n.Q3)("",!0),(0,n.bF)(R,{onSubmitted:t[12]||(t[12]=e=>I.submitForm("saveOngoingPlansForm")),onCanceled:t[13]||(t[13]=e=>I.cancelForm()),class:"pb-4",showControls:e.hasAnyPermission(["ep-applications-manage",["application-edit",W.group]])&&W.group.expert_panel.pilotSpecificationsIsApproved},{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)((0,n.$y)(W.ongoingPlansFormComponent),{ref:"ongoingPlansForm",errors:$.errors,readonly:!W.group.expert_panel.pilotSpecificationsIsApproved},null,8,["errors","readonly"]))])),_:1},8,["showControls"]),W.group.is_vcep_or_scvcep?((0,n.uX)(),(0,n.CE)("section",p,[c,(0,n.bF)(B,{group:W.group,readonly:!W.group.expert_panel.pilotSpecificationsIsApproved,class:"pb-2 mb-4 border-b"},null,8,["group","readonly"])])):(0,n.Q3)("",!0)])),_:1},8,["visible"]),(0,n.bF)(T,{label:"Specifications",visible:W.group.is_vcep_or_scvcep},{default:(0,n.k6)((()=>[(0,n.Lk)("div",m,[!W.group.expert_panel.defIsApproved&&W.group.is_vcep_or_scvcep?((0,n.uX)(),(0,n.CE)("div",g)):(0,n.Q3)("",!0),!W.group.expert_panel.defIsApproved&&W.group.is_vcep_or_scvcep?((0,n.uX)(),(0,n.Wv)(O,{key:1,variant:"info"},{default:(0,n.k6)((()=>[h])),_:1})):(0,n.Q3)("",!0),(0,n.Lk)("div",null,[(0,n.bF)(K,{"doc-type-id":W.group.expert_panel.draftSpecApproved?[2,3,4,7]:2,step:W.group.expert_panel.draftSpecApproved?3:2},null,8,["doc-type-id","step"])])])])),_:1},8,["visible"]),e.userInGroup(W.group)||e.hasPermission("groups-manage")?((0,n.uX)(),(0,n.Wv)(T,{key:0,label:"Documents"},{default:(0,n.k6)((()=>[(0,n.bF)(H),(0,n.bF)(Y,null,{default:(0,n.k6)((()=>[b])),_:1})])),_:1})):(0,n.Q3)("",!0),(0,n.bF)(T,{label:"Attestations",visible:W.group.is_ep},{default:(0,n.k6)((()=>[(0,n.bF)(Y,null,{default:(0,n.k6)((()=>[v])),_:1}),W.group.is_gcep?((0,n.uX)(),(0,n.Wv)(J,{key:0,class:"pb-2 mb-4 border-b",disabled:!0})):(0,n.Q3)("",!0),y,W.group.is_vcep_or_scvcep?((0,n.uX)(),(0,n.Wv)(z,{key:1,class:"pb-2 mb-4 border-b",disabled:!0})):(0,n.Q3)("",!0),f,(0,n.bF)(Z,{class:"pb-2 mb-4 border-b",disabled:!0})])),_:1},8,["visible"]),(0,n.bF)(T,{label:"Log",visible:e.hasPermission("groups-manage")||e.userInGroup(W.group)},{default:(0,n.k6)((()=>[(0,n.bF)(ee,{"log-entries":W.logEntries,"api-url":`/api/groups/${W.group.uuid}/activity-logs`,"log-updated":W.getLogEntries},null,8,["log-entries","api-url","log-updated"]),(0,n.Lk)("button",{class:"btn btn-xs mt-1",onClick:t[14]||(t[14]=(...e)=>W.getLogEntries&&W.getLogEntries(...e))},"Refresh")])),_:1},8,["visible"]),(0,n.bF)(T,{label:"Admin",visible:e.hasPermission("groups-manage")},{default:(0,n.k6)((()=>[W.group.isApplying&&W.group.is_ep?((0,n.uX)(),(0,n.CE)("div",k,[_,(0,n.bF)(te,{application:W.group.expert_panel,class:"pb-4 border-b border-gray-300 mb-6"},null,8,["application"]),W.group.is_ep?((0,n.uX)(),(0,n.Wv)(oe,{key:0,application:W.group.expert_panel,onStepApproved:W.getGroup},null,8,["application","onStepApproved"])):(0,n.Q3)("",!0),w])):(0,n.Q3)("",!0),W.group.is_ep?((0,n.uX)(),(0,n.CE)("section",C,[D,I.showCreateAnnualUpdateButton?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"btn",onClick:t[15]||(t[15]=(...e)=>I.createAnnualUpdateForLatestWindow&&I.createAnnualUpdateForLatestWindow(...e))}," Create Annual Update for latest window. ")):W.group.expert_panel.annualUpdate?((0,n.uX)(),(0,n.CE)("a",{key:1,href:`/annual-updates/${this.group.expert_panel.annualUpdate.id}`,target:"annual update"}," View Annual Update for "+(0,r.v_)(this.group.expert_panel.annualUpdate.window.for_year),9,F)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),(0,n.Lk)("section",E,[L,(0,n.Lk)("button",{class:"btn btn red",onClick:t[16]||(t[16]=(...e)=>I.initDelete&&I.initDelete(...e))},"Delete Group")]),"production"!==e.$store.state.systemInfo.env?((0,n.uX)(),(0,n.CE)("section",x,[A,W.group.is_vcep_or_scvcep&&W.group.expert_panel.has_approved_pilot?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"btn",onClick:t[17]||(t[17]=(...e)=>I.fakeCspecPilotApproved&&I.fakeCspecPilotApproved(...e))}," Fake a Pilot Approved Message ")):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)])),_:1},8,["visible"])])),_:1},8,["onTabChanged"])]),W.group.hasChildren?((0,n.uX)(),(0,n.CE)("div",S,[(0,n.bF)(re)])):(0,n.Q3)("",!0)]),((0,n.uX)(),(0,n.Wv)(n.Im,{to:"body"},[(0,n.bF)(ae,{modelValue:W.showModal,"onUpdate:modelValue":t[18]||(t[18]=e=>W.showModal=e),onClosed:I.handleModalClosed,title:this.$route.meta.title},{default:(0,n.k6)((()=>[(0,n.bF)(ie,{ref:"modalView",onSaved:I.hideModal,onCanceled:I.hideModal},null,8,["onSaved","onCanceled"])])),_:1},8,["modelValue","onClosed","title"]),(0,n.bF)(ae,{modelValue:$.showInfoEdit,"onUpdate:modelValue":t[23]||(t[23]=e=>$.showInfoEdit=e),onClosed:t[24]||(t[24]=e=>$.showInfoEdit=!1),title:"Edit Group Info",size:"sm"},{default:(0,n.k6)((()=>[(0,n.bF)(R,{onSubmitted:t[21]||(t[21]=t=>e.$refs.infoForm.save()),onCanceled:t[22]||(t[22]=t=>e.$refs.infoForm.cancel())},{default:(0,n.k6)((()=>[(0,n.bF)(se,{ref:"infoForm",onCanceled:t[19]||(t[19]=e=>$.showInfoEdit=!1),onSaved:t[20]||(t[20]=e=>$.showInfoEdit=!1)},null,512)])),_:1})])),_:1},8,["modelValue"]),(0,n.bF)(ae,{modelValue:$.showConfirmDelete,"onUpdate:modelValue":t[26]||(t[26]=e=>$.showConfirmDelete=e),title:"Delete This Group?"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",X,[(0,n.Lk)("p",null," You are about to delete "+(0,r.v_)(W.group.displayName)+" and all associated data. ",1),U]),(0,n.bF)(le,{"submit-text":"Delete this group.",onSubmitted:I.deleteGroup,onCanceled:t[25]||(t[25]=e=>$.showConfirmDelete=!1)},null,8,["onSubmitted"])])),_:1},8,["modelValue"])]))])}o(3725),o(5019);var $=o(953),I=o(6278),Q=o(6932),V=o(6563),P=o(415);const G={key:0,class:"p-4 my-4 mb-8 border rounded-xl bg-white"},M={class:"mb-2"},R=(0,n.eW)(" Application Summary "),T={key:0},N={class:"px-8"},j={key:2},q=(0,n.eW)("Approved"),O={key:0,class:"flex-1"},B={key:0,class:"mt-4"},K=(0,n.Lk)("button",{class:"btn blue btn-lg"},"Go to application",-1);function H(e,t,o,i,a,s){const l=(0,n.g2)("requirements-badge"),u=(0,n.g2)("icon-lock"),d=(0,n.g2)("badge"),p=(0,n.g2)("router-link");return o.group.is_ep?((0,n.uX)(),(0,n.CE)("div",G,[(0,n.Lk)("h2",M,[R,s.applicationStarted&&o.group.is_vcep_or_scvcep?((0,n.uX)(),(0,n.CE)("span",T," - "+(0,r.v_)(this.currentMenuItem.title),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("ul",N,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.menu,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t,class:"py-1 flex justify-between border-b border-gray-300 my-2"},[(0,n.Lk)("div",{class:(0,r.C4)(["flex justify-between",{"w-full":!s.isStep(e)}])},[(0,n.Lk)("div",{class:(0,r.C4)(["w-56 text-lg",{"text-gray-400":s.isStep(e)&&e.isDisabled(o.group)}])},(0,r.v_)(e.title),3),(0,n.Lk)("div",null,[s.isStep(e)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(l,{key:0,section:e},null,8,["section"])),s.isStep(e)&&e.isDisabled(o.group)?((0,n.uX)(),(0,n.Wv)(u,{key:1,class:"inline text-gray-400",height:14,width:14})):(0,n.Q3)("",!0),s.isStep(e)&&e.isComplete(o.group)?((0,n.uX)(),(0,n.CE)("div",j,[(0,n.bF)(d,{color:"green"},{default:(0,n.k6)((()=>[q])),_:1})])):(0,n.Q3)("",!0)])],2),s.isCurrentStep(e)?((0,n.uX)(),(0,n.CE)("div",O,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.sections,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t,class:"pb-2 flex justify-between my-2"},[(0,n.Lk)("div",null,(0,r.v_)(e.title),1),(0,n.bF)(l,{section:e},null,8,["section"])])))),128))])])):(0,n.Q3)("",!0)])))),128))]),e.hasAnyPermission(["ep-applications-manage",["application-edit",o.group]])?((0,n.uX)(),(0,n.CE)("div",B,[o.group.uuid?((0,n.uX)(),(0,n.Wv)(p,{key:0,to:s.applicationRoute},{default:(0,n.k6)((()=>[K])),_:1},8,["to"])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)}var Y=o(8072),J=o(5780),z={name:"ApplicationSummary",components:{RequirementsBadge:Y.A},props:{group:{required:!0,type:Object}},data(){return{}},computed:{applicationStarted(){return!0},application(){return(0,J.d)(this.group)},currentStep(){return this.group.expert_panel.current_step},applicationRoute(){return{name:"GroupApplication",params:{uuid:this.group.uuid},hash:`#${this.currentMenuItem.id}`}},currentMenuItem(){return this.application.getStep(this.group.expert_panel.current_step)},menu(){return this.application.steps.length>1?this.application.steps:this.application.steps[0].sections}},methods:{isStep(e){return Boolean(e.sections)},isCurrentStep(e){return!(!this.isStep(e)||this.application.getStep(this.group.expert_panel.current_step)!=e)}}},Z=o(6262);const ee=(0,Z.A)(z,[["render",H]]);var te=ee,oe=o(7654),ne=o(402),re=o(7769),ie=o(8097),ae=o(3621),se=o(4175),le=o(1607),ue=o(3751);const de={class:"flex justify-between items-center"},pe=(0,n.Lk)("h4",null,"Summary Description of Group",-1),ce={class:"mt-2"},me=(0,n.eW)(" Describe the group's purpose, goals, and objectives as intended for public display (e.g., at the clinicalgenome.org) site. This may be more concise than the full scope of work. "),ge={key:1};function he(e,t,o,r,i,a){const s=(0,n.g2)("edit-icon-button"),l=(0,n.g2)("input-row"),u=(0,n.g2)("markdown-block");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("header",de,[pe,e.hasAnyPermission(["groups-manage",["application-edit",a.group]])&&!o.editing?((0,n.uX)(),(0,n.Wv)(s,{key:0,onClick:t[0]||(t[0]=t=>e.$emit("update:editing",!0))})):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ce,[(0,n.bF)(ue.eB,{name:"fade",mode:"out-in"},{default:(0,n.k6)((()=>[o.editing?((0,n.uX)(),(0,n.Wv)(l,{key:0,modelValue:a.group.description,"onUpdate:modelValue":[t[1]||(t[1]=e=>a.group.description=e),t[2]||(t[2]=t=>e.$emit("update"))],errors:o.errors.description,type:"large-text",vertical:""},{label:(0,n.k6)((()=>[me])),_:1},8,["modelValue","errors"])):((0,n.uX)(),(0,n.CE)("div",ge,[a.group.description?((0,n.uX)(),(0,n.Wv)(u,{key:0,markdown:a.group.description},null,8,["markdown"])):((0,n.uX)(),(0,n.CE)("p",{key:1,class:"well cursor-pointer",onClick:t[3]||(t[3]=(...t)=>e.showForm&&e.showForm(...t))}," A summary description has not yet been provided. "))]))])),_:1})])])}var be=o(367),ve={name:"groupDescriptionForm",props:{editing:{type:Boolean,required:!1,default:!0},errors:{type:Object,required:!1,default:()=>({})}},emits:["update:editing","update:group","update"],computed:{group:{get(){return this.$store.getters["groups/currentItem"]||new be.A},set(e){this.$store.commit("groups/addItem",e)}},description:{get:function(){return this.group.description},set:function(e){const t=this.group.clone();t.description=e,this.$emit("update:group",t)}}}};const ye=(0,Z.A)(ve,[["render",he]]);var fe=ye,ke=o(8461);o(1339);const _e={class:"flex justify-between items-start"},we={class:"text-sm text-gray-800 mt-1 font-normal"},Ce={key:0},De=(0,n.eW)("Short Name: "),Fe=(0,n.eW)(" | "),Ee={key:1},Le=(0,n.eW)(" Affiliation ID: "),xe={key:2},Ae=(0,n.eW)(" | Part of the "),Se={key:0},Xe=(0,n.Lk)("strong",null,"Chairs:",-1),Ue={key:0},We={key:1,class:"text-gray-500"},$e=(0,n.Lk)("strong",null,"Coordinators:",-1),Ie={key:0},Qe={key:1,class:"text-gray-500"};function Ve(e,t,o,i,a,s){const l=(0,n.g2)("group-breadcrumbs"),u=(0,n.g2)("badge"),d=(0,n.g2)("router-link"),p=(0,n.g2)("note"),c=(0,n.g2)("dictionary-row");return(0,n.uX)(),(0,n.CE)("header",null,[(0,n.bF)(l),(0,n.Lk)("h1",_e,[(0,n.Lk)("div",null,[(0,n.eW)((0,r.v_)(o.group.displayName)+" ",1),(0,n.bF)(u,{color:o.group.statusColor,class:"text-xs"},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(o.group.status?o.group.status.name:"loading..."),1)])),_:1},8,["color"]),(0,n.Lk)("div",we,[o.group.isEp()&&s.showShortName?((0,n.uX)(),(0,n.CE)("span",Ce,[De,(0,n.Lk)("strong",null,(0,r.v_)(o.group.expert_panel.full_short_base_name||"--"),1),Fe])):(0,n.Q3)("",!0),o.group.isEp()?((0,n.uX)(),(0,n.CE)("span",Ee,[Le,(0,n.Lk)("strong",null,(0,r.v_)(o.group.expert_panel.affiliation_id||"--"),1)])):(0,n.Q3)("",!0),o.group.parent_id?((0,n.uX)(),(0,n.CE)("span",xe,[Ae,(0,n.bF)(d,{to:{name:"GroupDetail",params:{uuid:o.group.parent.uuid}}},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(o.group.parent.name),1)])),_:1},8,["to"])])):(0,n.Q3)("",!0)]),e.hasRole("super-user")?((0,n.uX)(),(0,n.Wv)(p,{key:0,class:"font-normal mt-2"},{default:(0,n.k6)((()=>[(0,n.eW)(" group.id: "+(0,r.v_)(o.group.id)+" ",1),o.group.is_ep?((0,n.uX)(),(0,n.CE)("span",Se," | expertPanel.id: "+(0,r.v_)(o.group.expert_panel.id),1)):(0,n.Q3)("",!0)])),_:1})):(0,n.Q3)("",!0)]),e.hasAnyPermission(["groups-manage",["info-edit",o.group]])?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:t[0]||(t[0]=t=>e.$emit("showEdit")),class:"btn btn-xs"}," Edit Group Info ")):(0,n.Q3)("",!0)]),(0,n.bF)(c,{label:"Chairs:"},{label:(0,n.k6)((()=>[Xe])),default:(0,n.k6)((()=>[o.group.chairs.length>0?((0,n.uX)(),(0,n.CE)("div",Ue,(0,r.v_)(o.group.chairs.map((e=>e.person.name)).join(", ")),1)):((0,n.uX)(),(0,n.CE)("div",We," None assigned "))])),_:1}),(0,n.bF)(c,{label:"Coordinators:"},{label:(0,n.k6)((()=>[$e])),default:(0,n.k6)((()=>[o.group.coordinators.length>0?((0,n.uX)(),(0,n.CE)("div",Ie,(0,r.v_)(o.group.coordinators.map((e=>e.person.name)).join(", ")),1)):((0,n.uX)(),(0,n.CE)("div",Qe," None assigned "))])),_:1})])}var Pe={name:"GroupDetailHeader",props:{group:{type:be.A,required:!0}},emits:["showEdit"],computed:{showShortName(){return this.group.expert_panel.short_base_name!==this.group.expert_panel.long_base_name}}};const Ge=(0,Z.A)(Pe,[["render",Ve]]);var Me=Ge,Re=o(5947),Te=o(128),Ne=o(6067),je=o(8508),qe=o(6271);function Oe(e,t,o,r,i,a){const s=(0,n.g2)("document-list");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(s,{documents:a.displayDocuments,documentUpdater:a.updateDocument,documentCreator:a.createDocument,documentDeleter:a.deleteDocument,canManage:a.canManageDocuments},null,8,["documents","documentUpdater","documentCreator","documentDeleter","canManage"])])}const Be={class:"flex justify-between py-2"},Ke={class:"flex space-x-2"},He=(0,n.eW)(" Search: "),Ye=(0,n.eW)(" Type:   "),Je=(0,n.Lk)("option",{value:null},"Any",-1),ze=["value"],Ze=["onClick"],et={class:"note"},tt={key:0},ot={key:1},nt=(0,n.Lk)("button",{class:"btn btn-xs"},"…",-1),rt=(0,n.eW)("Download"),it=(0,n.eW)("Update"),at=(0,n.eW)("Delete"),st={class:"px-4 pb-4 border"},lt={key:0,class:"flex space-x-2 pt-2 border-t"},ut=["onClick"],dt=["onClick"],pt=["onClick"],ct={key:0},mt={key:0,class:"mb-3"},gt=(0,n.Lk)("p",null,"Are you sure you want to continue?",-1);function ht(e,t,o,i,a,s){const l=(0,n.g2)("icon-cheveron-right"),u=(0,n.g2)("icon-cheveron-down"),d=(0,n.g2)("dropdown-item"),p=(0,n.g2)("dropdown-menu"),c=(0,n.g2)("object-dictionary"),m=(0,n.g2)("data-table"),g=(0,n.g2)("document-edit-form"),h=(0,n.g2)("modal-dialog"),b=(0,n.g2)("document-upload-form"),v=(0,n.g2)("button-row");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.RG)(e.$slots,"heading",{},(()=>[(0,n.Lk)("div",Be,[(0,n.Lk)("div",Ke,[(0,n.Lk)("label",null,[He,(0,n.bo)((0,n.Lk)("input",{type:"text",placeholder:"Filter","onUpdate:modelValue":t[0]||(t[0]=e=>a.keyword=e),class:"sm"},null,512),[[ue.Jo,a.keyword]])]),(0,n.Lk)("label",null,[Ye,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.filterType=e)},[Je,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.documentTypes,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.long_name),9,ze)))),128))],512),[[ue.u1,a.filterType]])])]),o.canManage?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"btn btn-xs",onClick:t[2]||(t[2]=(...e)=>s.initUpload&&s.initUpload(...e))},"Upload")):(0,n.Q3)("",!0)])])),(0,n.bF)(m,{fields:a.fields,data:s.filteredDocuments,sort:a.sort,"onUpdate:sort":t[3]||(t[3]=e=>a.sort=e),detailRows:!0},{"cell-cheveron":(0,n.k6)((({item:e})=>[e.metadata?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:(0,ue.D$)((t=>s.toggleItemDetails(e)),["stop"]),class:"w-9 align-center block -mx-3"},[e.showDetails?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(l,{key:0,class:"m-auto cursor-pointer"})),e.showDetails?((0,n.uX)(),(0,n.Wv)(u,{key:1,class:"m-auto cursor-pointer"})):(0,n.Q3)("",!0)],8,Ze)):(0,n.Q3)("",!0)])),"cell-filename":(0,n.k6)((({item:e})=>[(0,n.eW)((0,r.v_)(e.filename)+" ",1),(0,n.Lk)("span",et,[e.type.is_versioned&&e.version?((0,n.uX)(),(0,n.CE)("em",tt,"(version "+(0,r.v_)(e.version)+")",1)):(0,n.Q3)("",!0),e.is_final?((0,n.uX)(),(0,n.CE)("em",ot," FINAL")):(0,n.Q3)("",!0)])])),"cell-actions":(0,n.k6)((({item:e})=>[(0,n.bF)(p,{hideCheveron:""},{label:(0,n.k6)((()=>[nt])),default:(0,n.k6)((()=>[(0,n.bF)(d,{onClick:t=>s.initDownload(e)},{default:(0,n.k6)((()=>[rt])),_:2},1032,["onClick"]),o.canManage?((0,n.uX)(),(0,n.Wv)(d,{key:0,onClick:t=>s.initUpdate(e)},{default:(0,n.k6)((()=>[it])),_:2},1032,["onClick"])):(0,n.Q3)("",!0),o.canManage?((0,n.uX)(),(0,n.Wv)(d,{key:1,onClick:t=>s.initDelete(e)},{default:(0,n.k6)((()=>[at])),_:2},1032,["onClick"])):(0,n.Q3)("",!0)])),_:2},1024)])),detail:(0,n.k6)((({item:e})=>[(0,n.Lk)("div",st,[(0,n.bF)(c,{obj:e.metadata},null,8,["obj"]),o.canManage?((0,n.uX)(),(0,n.CE)("div",lt,[(0,n.Lk)("button",{class:"btn btn-xs",onClick:t=>s.initDownload(e)},"Download",8,ut),(0,n.Lk)("button",{class:"btn btn-xs",onClick:t=>s.initUpdate(e)},"Update",8,dt),(0,n.Lk)("button",{class:"btn btn-xs red",onClick:t=>s.initDelete(e)},"Delete",8,pt)])):(0,n.Q3)("",!0)])])),_:1},8,["fields","data","sort"]),((0,n.uX)(),(0,n.Wv)(n.Im,{to:"body"},[(0,n.bF)(h,{modelValue:a.showEditForm,"onUpdate:modelValue":t[5]||(t[5]=e=>a.showEditForm=e),title:`Update ${a.activeDocument.filename}`},{default:(0,n.k6)((()=>[(0,n.bF)(g,{document:a.activeDocument,"save-function":this.commitUpdate,onSaved:t[4]||(t[4]=t=>e.$emit("updated"))},null,8,["document","save-function"])])),_:1},8,["modelValue","title"]),(0,n.bF)(h,{modelValue:a.showUploadForm,"onUpdate:modelValue":t[7]||(t[7]=e=>a.showUploadForm=e),title:"Upload a new document"},{default:(0,n.k6)((()=>[(0,n.bF)(b,{"save-function":this.commitCreate,onSaved:t[6]||(t[6]=t=>e.$emit("updated"))},null,8,["save-function"])])),_:1},8,["modelValue"]),(0,n.bF)(h,{modelValue:a.showDeleteConfirmation,"onUpdate:modelValue":t[8]||(t[8]=e=>a.showDeleteConfirmation=e),title:`You are about to delete ${a.activeDocument.filename}`},{default:(0,n.k6)((()=>[a.activeDocument?((0,n.uX)(),(0,n.CE)("div",ct,[a.activeDocument.is_final?((0,n.uX)(),(0,n.CE)("p",mt," This version has been tagged as the final version of the document. ")):(0,n.Q3)("",!0),gt,(0,n.bF)(v,{"submit-text":"Delete Document",onCanceled:s.cancelDelete,onSubmitted:s.commitDelete},null,8,["onCanceled","onSubmitted"])])):(0,n.Q3)("",!0)])),_:1},8,["modelValue","title"])]))])}var bt=o(696);const vt={type:"file",ref:"fileInput"},yt=(0,n.Lk)("option",{value:null},"Select...",-1),ft=["value"];function kt(e,t,o,i,a,s){const l=(0,n.g2)("input-row"),u=(0,n.g2)("button-row"),d=(0,n.g2)("form-container");return(0,n.uX)(),(0,n.Wv)(d,null,{default:(0,n.k6)((()=>[(0,n.bF)(l,{label:"Document",errors:a.errors.file},{default:(0,n.k6)((()=>[(0,n.Lk)("input",vt,null,512)])),_:1},8,["errors"]),(0,n.bF)(l,{label:"Type",errors:a.errors.document_type_id},{default:(0,n.k6)((()=>[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.newDocument.document_type_id=e)},[yt,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.documentTypes,(e=>((0,n.uX)(),(0,n.CE)("option",{value:e.id,key:e.id},(0,r.v_)(e.long_name),9,ft)))),128))],512),[[ue.u1,a.newDocument.document_type_id]])])),_:1},8,["errors"]),(0,n.bF)(l,{errors:a.errors.notes,label:"Notes"},{default:(0,n.k6)((()=>[(0,n.bo)((0,n.Lk)("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=e=>a.newDocument.notes=e),cols:"30",rows:"10"},null,512),[[ue.Jo,a.newDocument.notes]])])),_:1},8,["errors"]),(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.Lk)("button",{class:"btn white",onClick:t[2]||(t[2]=(...e)=>s.cancel&&s.cancel(...e))},"Cancel"),(0,n.Lk)("button",{class:"btn blue",onClick:t[3]||(t[3]=(...e)=>s.save&&s.save(...e))},"Save")])),_:1})])),_:1})}o(9838);var _t={props:{saveFunction:{type:Function,required:!0}},data(){return{newDocument:{file:null,document_type_id:this.documentTypeId,notes:null},errors:{}}},computed:{...(0,I.aH)({documentTypes:e=>e.doctypes.items}),group(){return this.$store.getters["groups/currentItemOrNew"]},application(){return this.group.expert_panel},isReviewed(){return Boolean(this.newDocument.date_reviewed)},documentType(){return 0==this.documentTypes.length?{}:this.$store.getters["doctypes/getItemById"](this.documentTypeId)}},methods:{async save(){try{let e=new FormData;Object.keys(this.newDocument).forEach((t=>{const o=this.newDocument[t];null!=o&&e.append(t,o)})),e.append("file",this.$refs.fileInput.files[0]),await this.saveFunction(e),this.clearForm(),this.$emit("saved")}catch(e){if((0,bt.Ah)(e))return void(this.errors=e.response.data.errors)}},cancel(){this.clearForm(),this.$emit("canceled")},clearForm(){this.initNewDocument(),this.clearErrors()},initNewDocument(){this.$refs.fileInput.value=null,this.newDocument={file:null,document_type_id:this.documentTypeId,notes:null}},clearErrors(){this.errors={}}},mounted(){this.$store.dispatch("doctypes/getItems")}};const wt=(0,Z.A)(_t,[["render",kt]]);var Ct=wt;const Dt=["value"];function Ft(e,t,o,i,a,s){const l=(0,n.g2)("dictionary-row"),u=(0,n.g2)("input-row"),d=(0,n.g2)("button-row"),p=(0,n.g2)("form-container");return(0,n.uX)(),(0,n.Wv)(p,null,{default:(0,n.k6)((()=>[(0,n.bF)(l,{label:"File"},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(o.document.filename),1)])),_:1}),(0,n.bF)(u,{label:"Type",errors:a.errors.document_type_id},{default:(0,n.k6)((()=>[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.docProxy.document_type_id=e)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.documentTypes,(e=>((0,n.uX)(),(0,n.CE)("option",{value:e.id,key:e.id},(0,r.v_)(e.long_name),9,Dt)))),128))],512),[[ue.u1,a.docProxy.document_type_id]])])),_:1},8,["errors"]),(0,n.bF)(u,{errors:a.errors.notes,label:"Notes"},{default:(0,n.k6)((()=>[(0,n.bo)((0,n.Lk)("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=e=>a.docProxy.notes=e),cols:"30",rows:"10"},null,512),[[ue.Jo,a.docProxy.notes]])])),_:1},8,["errors"]),(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.Lk)("button",{class:"btn",onClick:t[2]||(t[2]=(...e)=>s.cancel&&s.cancel(...e))},"Cancel"),(0,n.Lk)("button",{class:"btn blue",onClick:t[3]||(t[3]=(...e)=>s.save&&s.save(...e))},"Save")])),_:1})])),_:1})}var Et={name:"DocumentEditForm",props:{document:{required:!0,type:Object},saveFunction:{required:!0,type:Function}},emits:["saved"],data(){return{docProxy:{},errors:{}}},computed:{...(0,I.aH)({documentTypes:e=>e.doctypes.items})},watch:{document:{immediate:!0,handler(){this.docProxy=JSON.parse(JSON.stringify(this.document))}}},methods:{cancel(){this.docProxy={},this.$emit("canceled")},async save(){try{this.saveFunction(this.docProxy),this.$emit("saved")}catch(e){throw(0,bt.Ah)(e)&&(this.errors=e.response.data.errors),e}}},mounted(){this.$store.dispatch("doctypes/getItems")}};const Lt=(0,Z.A)(Et,[["render",Ft]]);var xt=Lt,At={name:"DocumentList",components:{DocumentUploadForm:Ct,DocumentEditForm:xt},emits:["updated"],props:{documents:{type:Array,required:!0},documentCreator:{type:Function,required:!1},documentUpdater:{type:Function,required:!1},documentDeleter:{type:Function,required:!1},canManage:{type:Boolean,default:!1}},data(){return{fields:[{name:"cheveron",label:"",sortable:!1},{name:"filename",label:"File",type:String,sortable:!0},{name:"type.long_name",label:"Type",type:String,sortable:!0},{name:"notes",type:String,sortable:!0},{name:"actions",label:"",type:String,sortable:!1}],sort:{field:"filename",desc:!1},keyword:null,filterType:null,documentTypes:[],activeDocument:{type:{}},showDeleteConfirmation:!1,showEditForm:!1,showUploadForm:!1}},computed:{filteredDocuments(){let e=[...this.documents];if(this.keyword){const t=new RegExp(".*"+this.keyword+".*","i");e=e.filter((e=>e.filename.match(t)||e.notes&&e.notes.match(t)||e.type.name.match(t)))}return this.filterType&&(e=e.filter((e=>e.document_type_id==this.filterType))),e}},methods:{toggleItemDetails(e){e.showDetails=!e.showDetails},initDownload(e){window.location=e.download_url},initUpdate(e){this.showEditForm=!0,this.activeDocument=e},commitUpdate(e){this.documentUpdater?this.documentUpdater(e):alert("we need a default document upload function"),this.$emit("updated"),this.showUploadForm=!1},initDelete(e){this.activeDocument=e,this.showDeleteConfirmation=!0},cancelDelete(){this.showDeleteConfirmation=!1,this.resetActiveDocument()},async commitDelete(){this.documentDeleter?this.documentDeleter(this.activeDocument):alert("we need to add a default document deleter."),this.showDeleteConfirmation=!1,this.resetActiveDocument(),this.$emit("updated")},initUpload(){this.showUploadForm=!0},commitCreate(e){this.documentCreator?this.documentCreator(e):alert("we need a default document upload function"),this.$emit("updated"),this.showUploadForm=!1},resetActiveDocument(){this.activeDocument={type:{}}}},mounted(){bt.FH.get("/api/document-types").then((e=>this.documentTypes=e.data))}};const St=(0,Z.A)(At,[["render",ht]]);var Xt=St,Ut={name:"GroupDocuments",components:{DocumentList:Xt},props:{},data(){return{}},computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]}},displayDocuments(){return this.group.documents},canManageDocuments(){return this.hasAnyPermission(["groups-manage","ep-applications-manage",["info-edit",this.group]])}},methods:{async updateDocument(e){this.canManageDocuments?await this.$store.dispatch("groups/updateDocument",{group:this.group,document:e}):this.$store.pushError("Permission denied")},async createDocument(e){this.canManageDocuments?await this.$store.dispatch("groups/addDocument",{group:this.group,data:e}):this.$store.pushError("Permission denied")},async deleteDocument(e){this.canManageDocuments?await this.$store.dispatch("groups/deleteDocument",{group:this.group,document:e}):this.$store.pushError("Permission denied")}}};const Wt=(0,Z.A)(Ut,[["render",Oe]]);var $t=Wt,It=o(9824),Qt=o(6252),Vt=o(2538),Pt=o(8832);const Gt=e=>((0,n.Qi)("data-v-f6a38f6c"),e=e(),(0,n.jt)(),e),Mt={class:"flex justify-between"},Rt=Gt((()=>(0,n.Lk)("h2",{class:"mb-4"},"Subgroups",-1))),Tt={class:"btn btn-icon"},Nt=(0,n.eW)("Downloads:"),jt=["href"],qt=(0,n.eW)(" (CSV)"),Ot={class:"text-xs"};function Bt(e,t,o,i,a,s){const l=(0,n.g2)("icon-download"),u=(0,n.g2)("dropdown-item"),d=(0,n.g2)("note"),p=(0,n.g2)("dropdown-menu"),c=(0,n.g2)("dictionary-row"),m=(0,n.g2)("router-link"),g=(0,n.g2)("popover");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",Mt,[Rt,(0,n.bF)(p,{"hide-cheveron":"",orientation:"right"},{label:(0,n.k6)((()=>[(0,n.Lk)("button",Tt,[(0,n.bF)(l,{width:"16",height:"16"})])])),default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"text-right font-bold"},{default:(0,n.k6)((()=>[Nt])),_:1}),s.showMemberReportButton?((0,n.uX)(),(0,n.Wv)(u,{key:0,class:"text-right"},{default:(0,n.k6)((()=>[(0,n.Lk)("a",{href:s.exportUrl},"Member Export",8,jt),(0,n.bF)(d,{class:"inline"},{default:(0,n.k6)((()=>[qt])),_:1})])),_:1})):(0,n.Q3)("",!0)])),_:1})]),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.group.children,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"child-group",key:e.id},[(0,n.bF)(g,{hover:"",arrow:"",placement:"left",class:"block w-full"},{content:(0,n.k6)((()=>[(0,n.Lk)("div",Ot,[(0,n.bF)(c,{label:"Status","label-class":"font-bold","label-width":"8em"},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(e.status.name),1)])),_:2},1024),e.chairs.length>0?((0,n.uX)(),(0,n.Wv)(c,{key:0,label:"Chairs","label-class":"font-bold","label-width":"8em",class:"my-1"},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(e.coordinators.map((e=>e.person.name)).join(", ")),1)])),_:2},1024)):(0,n.Q3)("",!0),e.coordinators.length>0?((0,n.uX)(),(0,n.Wv)(c,{key:1,label:"Coordinators","label-class":"font-bold","label-width":"8em"},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(e.coordinators.map((e=>e.person.name)).join(", ")),1)])),_:2},1024)):(0,n.Q3)("",!0),(0,n.bF)(c,{label:"# Members","label-width":"8em","label-class":"font-bold"},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(e.members_count),1)])),_:2},1024)])])),default:(0,n.k6)((()=>[(0,n.bF)(m,{to:{name:"GroupDetail",params:{uuid:e.uuid}},class:"block w-full"},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(e.name),1)])),_:2},1032,["to"])])),_:2},1024)])))),128))])])}var Kt={name:"SubgroupList",props:{},data(){return{}},computed:{group(){return this.$store.getters["groups/currentItemOrNew"]},showMemberReportButton(){return this.hasAnyPermission([["members-invite",this.group],"groups-manage","ep-applications-manage","annual-updates-manage"])},exportUrl(){return`/api/report/groups/${this.group.uuid}/subgroup-member-export`}}};const Ht=(0,Z.A)(Kt,[["render",Bt],["__scopeId","data-v-f6a38f6c"]]);var Yt=Ht,Jt={name:"GroupDetail",components:{ActivityLog:P.A,ApplicationSummary:te,AttestationGcep:oe.A,AttestationNhgri:ne.A,AttestationReanalysis:re.A,GroupDescriptionForm:fe,SpecificationsSection:ie.A,GroupDocuments:$t,GroupForm:ke.A,GroupDetailHeader:Me,EvidenceSummaries:ae.A,GcepGeneList:se.A,GcepOngoingPlansForm:le.A,MemberList:Re.A,MembershipDescriptionForm:Te.A,ScopeDescriptionForm:Ne.A,VcepGeneList:je.A,VcepOngoingPlansForm:qe.A,AnnualUpdateAlert:It.A,StepTabs:Qt.A,ProgressChart:Vt.A,SustainedCurationReviewAlert:Pt["default"],SubgroupList:Yt},props:{uuid:{type:String,required:!0}},data(){return{showInfoEdit:!1,editingExpertise:!1,editingDescription:!1,editingScopeDescription:!1,editingGenes:!1,showConfirmDelete:!1,ongoingPlansErrors:{},errors:{}}},computed:{showCreateAnnualUpdateButton(){return this.hasPermission("annual-updates-manage")&&this.group.expert_panel&&!this.group.expert_panel.annualUpdate}},setup(e){const t=(0,I.Pj)(),o=(0,$.KR)(!1),r=(0,n.EW)({get:function(){return t.getters["groups/currentItemOrNew"]},set:function(e){t.commit("groups/addItem",e)}}),i=(0,n.EW)((()=>r.value.is_ep?r.value.is_vcep_or_scvcep?je.A:se.A:null)),a=(0,n.EW)((()=>r.value.is_vcep_or_scvcep?qe.A:le.A)),s=async()=>{await(0,Q.l8)(`/api/groups/${e.uuid}/activity-logs`)},l=()=>{t.dispatch("groups/find",e.uuid).then((()=>{t.commit("groups/setCurrentItemIndexByUuid",e.uuid),t.dispatch("groups/getChildren",r.value),r.value.is_ep&&(t.dispatch("groups/getGenes",r.value),t.dispatch("groups/getDocuments",r.value),r.value.is_vcep_or_scvcep&&t.dispatch("groups/getEvidenceSummaries",r.value),t.dispatch("groups/getPendingTasks",r.value),t.dispatch("groups/getAnnualUpdate",r.value))}))},u=(0,n.EW)((()=>r.value.pendingTasks&&r.value.pendingTasks.filter((e=>1===e.task_type_id)).length>0));return(0,n.wB)((()=>e.uuid),(()=>l()),{immediate:!0}),(0,n.sV)((async()=>{})),{group:r,groupGeneList:i,showModal:o,ongoingPlansFormComponent:a,logEntries:Q.Jd,needsToReviewSustainedCuration:u,getLogEntries:s,getGroup:l}},watch:{$route(){this.showModal=!!this.$route.meta.showModal&&Boolean(this.$route.meta.showModal)}},methods:{hideModal(){this.$router.replace({name:"GroupDetail",params:{uuid:this.uuid}})},handleModalClosed(e){this.clearModalForm(e),this.$router.push({name:"GroupDetail",params:{uuid:this.uuid}})},clearModalForm(){"function"===typeof this.$refs.modalView.clearForm&&this.$refs.modalView.clearForm()},showEdit(){this.showInfoEdit=!0},cancelForm(e){this[e]=!1,this.errors={},this.revertGroupChanges()},async submitForm(e,t){try{await this[e].apply(this.group),this[t]=!1}catch(o){if((0,bt.Ah)(o))return void(this.errors=o.response.data.errors);throw o}},saveDescription(){return this.$store.dispatch("groups/descriptionUpdate",{uuid:this.group.uuid,description:this.group.description}).then((()=>{this.$store.commit("pushSuccess","Description updated.")}))},saveMembershipDescription(){return this.$store.dispatch("groups/membershipDescriptionUpdate",{uuid:this.group.uuid,membershipDescription:this.group.expert_panel.membership_description}).then((()=>{this.$store.commit("pushSuccess","Description of expertise updated.")}))},saveScopeDescription(){return this.$store.dispatch("groups/scopeDescriptionUpdate",{uuid:this.group.uuid,scopeDescription:this.group.expert_panel.scope_description}).then((e=>(this.$store.commit("pushSuccess","Description of scope updated."),e)))},saveOngoingPlansForm(){const{uuid:e,expert_panel:t}=this.group;return this.$store.dispatch("groups/curationReviewProtocolUpdate",{uuid:e,expertPanel:t}).then((()=>{this.$store.commit("pushSuccess","Curation review protocol updated.")}))},revertGroupChanges(){return this.errors={},this.$store.dispatch("groups/find",this.group.uuid).then((()=>{this.$store.commit("pushInfo","Update canceled.")}))},handleTabChange(e){"Log"==e&&(0,V._m)("groups-manage")&&this.getLogEntries()},initDelete(){this.showConfirmDelete=!0},deleteGroup(){this.$store.dispatch("groups/delete",this.group.uuid),this.$store.commit("pushSuccess","Group deleted."),this.$router.push({name:"GroupList"})},async fakeCspecPilotApproved(){try{await bt.FH.post(`/api/groups/${this.uuid}/dev/fake-pilot-approved`),this.$store.dispatch("groups/getPendingTasks",this.group)}catch(e){418==e.response.status&&this.$store.commit("pushError",e.response.data)}},createAnnualUpdateForLatestWindow(){this.$store.dispatch("groups/createAnnualUpdateForLatestWindow",this.group)}},mounted(){this.showModal=Boolean(this.$route.meta.showModal),this.showConfirmDelete=!1},beforeUnmount(){this.$store.commit("groups/clearCurrentItem")}};const zt=(0,Z.A)(Jt,[["render",W]]);var Zt=zt}}]);
//# sourceMappingURL=group-detail.5e3b9898.js.map