{"version":3,"sources":["webpack:///./src/components/people/PersonDetail.vue","webpack:///./src/components/people/MembershipList.vue","webpack:///./src/components/people/MembershipList.vue?3648","webpack:///./src/components/people/PersonDetail.vue?a770"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_component_router_link","to","_ctx","name","_component_note","_toDisplayString","id","_createBlock","$props","_component_icon_edit","width","heigh","_component_dictionary_row","label","_hoisted_4","email","_hoisted_5","institution","_component_tabs_container","_component_tab_item","_component_membership_list","person","_component_person_profile","_component_coi_list","visible","$options","length","first_name","_Fragment","_renderList","key","$setup","created_at","subject","innerHTML","body","onClick","_hoisted_8","_Teleport","_component_modal_dialog","$event","title","meta","_component_router_view","$data","_component_custom_email_form","mail-data","onSent","onCanceled","_component_data_table","fields","data","sort","rowClickHandler","row-class","props","type","Object","required","field","desc","String","sortable","resolveValue","item","roles","map","r","join","permissions","p","Date","computed","memberships","this","m","group","Group","methods","goToGroup","$router","push","params","uuid","__exports__","components","TabsContainer","MembershipList","PersonProfile","CoiList","emails","currentEmail","showResendDialog","watch","immediate","handler","$store","dispatch","mapGetters","showModal","get","$route","set","value","sortedMailLog","mailLog","a","b","parse","initResend","cleanupResend","setup","formatDate","mounted","render"],"mappings":"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","file":"js/chunk-2d0d6d92.9daf356e.js","sourcesContent":["<template>\n    <div>\n        <header class=\"pb-4\">\n            <router-link class=\"note\" to=\"/people\">People</router-link>\n            <h1 class=\"flex justify-between items-center\">\n                <div>\n                    {{person.name}}\n                    <note>ID: {{person.id}}</note>\n                </div>\n                <router-link \n                    :to=\"`/people/${uuid}/edit`\"\n                    class=\"btn btn-xs flex-grow-0\"\n                    v-if=\"(hasPermission('people-manage') || userIsPerson(person))\"\n                >\n                    <icon-edit width=\"16\" heigh=\"16\" />\n                </router-link>\n\n            </h1>\n            <dictionary-row label=\"Email\">\n                <template v-slot:label><strong>Email:</strong></template>\n                {{person.email}}\n            </dictionary-row>\n            <dictionary-row label=\"Institution\">\n                <template v-slot:label><strong>Institution:</strong></template>\n                {{person.institution ? person.institution.name : null}}\n            </dictionary-row>\n        </header>\n        <tabs-container>\n            <tab-item label=\"groups\">\n                <membership-list :person=\"person\"></membership-list>\n            </tab-item>\n            <tab-item label=\"Info\">\n                <person-profile :person=\"person\"></person-profile>\n            </tab-item>\n            <tab-item label=\"Conflict of Interest\">\n                <coi-list :person=\"person\"></coi-list>\n            </tab-item>\n            <!-- <tab-item label=\"Documents\">\n                docs\n            </tab-item> -->\n            <!-- <tab-item label=\"Training &amp; Attestations\">\n            </tab-item> -->\n            <tab-item label=\"Email Log\" :visible=\"hasPermission('people-manage') || userIsPerson(person)\">\n                <div v-if=\"sortedMailLog.length == 0\" class=\"well\">\n                    {{person.first_name}} has not received any mail via the GPM.\n                </div>\n                <div class=\"w-3/4 my-4 p-4 border\" v-for=\"email in sortedMailLog\" :key=\"email.id\">\n                    <dictionary-row label=\"Date/Time\">\n                        {{formatDate(email.created_at)}}\n                    </dictionary-row>\n                    <dictionary-row label=\"Subject\">\n                        {{email.subject}}\n                    </dictionary-row>\n                    <dictionary-row label=\"Body\">\n                        <div v-html=\"email.body\"></div>\n                    </dictionary-row>\n                    <button class=\"btn btn-xs\" @click.stop=\"initResend(email)\" v-if=\"hasPermission('people-manage')\">Resend</button>\n\n                </div>\n            </tab-item>\n        </tabs-container>\n        <teleport to=\"body\">\n            <modal-dialog v-model=\"showModal\" :title=\"$route.meta.title\">\n                <router-view name=\"modal\"></router-view>\n            </modal-dialog>\n            <modal-dialog title=\"Resend Email\" v-model=\"showResendDialog\">\n                <custom-email-form :mail-data=\"currentEmail\" @sent=\"cleanupResend\" @canceled=\"cleanupResend\"></custom-email-form>\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex'\nimport {formatDateTime as formatDate} from '@/date_utils'\n\nimport TabsContainer from '../TabsContainer.vue'\nimport MembershipList from './MembershipList.vue'\nimport PersonProfile from '@/components/people/PersonProfile'\nimport CoiList from '@/components/people/CoiList'\n\nexport default {\n    name: 'PersonDetail',\n    components: { \n        TabsContainer,\n        MembershipList,\n        PersonProfile,\n        CoiList,\n    },\n    props: {\n        uuid: {\n            required: true,\n            type: String\n        }\n    },\n    data() {\n        return {\n            emails: [],\n            currentEmail: {},\n            showResendDialog: null\n        }\n    },\n    watch: {\n        uuid: {\n            immediate: true,\n            handler: function () {\n                this.$store.dispatch('people/getPerson', {uuid: this.uuid})\n            }\n        }\n    },\n    computed: {\n        ...mapGetters({\n            person: 'people/currentItem'\n        }),\n        showModal: {\n            get() {\n                return this.$route.meta.showModal\n            },\n            set(value) {\n                if (value) {\n                    this.$router.push({name: 'PersonEdit', params: {uuid: this.person.uuid}})\n                }\n                this.$router.push({name: 'PersonDetail', params: {uuid: this.person.uuid}})\n            }\n        },\n        sortedMailLog () {\n            return [...this.person.mailLog].sort((a,b) => {\n                if (a.created_at == b.created_at) {\n                    return 0;\n                }\n                return (Date.parse(a.created_at) > Date.parse(b.created_at))\n                    ? -1 : 1;\n            })\n        }\n    },\n    methods: {\n        initResend (email) {\n            this.currentEmail = {...email};\n            this.showResendDialog = true;\n        },\n        cleanupResend () {\n            this.currentEmail = {},\n            this.showResendDialog = false;\n            this.$store.dispatch('people/getMail', this.person);\n        }\n    },\n    setup() {\n        return {\n            formatDate: formatDate\n        }\n    },\n    async mounted() {\n        await this.$store.dispatch('people/getPerson', {uuid: this.uuid})\n        this.$store.dispatch('people/getMail', this.person);\n    }\n}\n</script>","<template>\n    <div>\n        <data-table \n            :fields=\"fields\" \n            :data=\"memberships\" \n            v-model:sort=\"sort\"\n            :rowClickHandler=\"goToGroup\"\n            :row-class=\"() => 'cursor-pointer'\"\n        ></data-table>\n    </div>\n</template>\n<script>\nimport {Group} from '@/domain'\n\nexport default {\n    name: 'MembershipList',\n    props: {\n        person: {\n            type: Object,\n            required: true\n        }\n    },\n    data() {\n        return {\n            sort: {\n                field: 'group.displayName',\n                desc: false\n            },\n            fields: [\n                {\n                    name: 'group.displayName',\n                    type: String,\n                    sortable: true,\n                    label: 'Name'\n                },\n                {\n                    name: 'group.type.name',\n                    type: String,\n                    sortable: true,\n                    label: 'Type'\n                },\n                {\n                    name: 'roles',\n                    type: String,\n                    sortable: false,\n                    label: 'Roles',\n                    resolveValue (item) {\n                        return item.roles.map(r => r.name).join(', ');\n                    }\n                },\n                {\n                    name: 'permissions',\n                    type: String,\n                    sortable: false,\n                    label: 'Permissions',\n                    resolveValue (item) {\n                        return item.permissions.map(p => p.name).join(', ');\n                    }\n                },\n                {\n                    name: 'start_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Started'\n                },\n                {\n                    name: 'end_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Ended'\n                }\n\n\n            ]\n        }\n    },\n    computed: {\n        memberships () {\n            if (this.person.memberships) {\n                return this.person.memberships.map(m => {\n                    if (m.group) {\n                        m.group = new Group(m.group);\n                    }\n                    return m;\n                })\n            }\n\n            return [];\n        }\n    },\n    methods: {\n        goToGroup(item) {\n            this.$router.push({name: 'GroupDetail', params: {uuid: item.group.uuid}})\n        }\n\n    }\n}\n</script>","import { render } from \"./MembershipList.vue?vue&type=template&id=7757f912\"\nimport script from \"./MembershipList.vue?vue&type=script&lang=js\"\nexport * from \"./MembershipList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PersonDetail.vue?vue&type=template&id=17092728\"\nimport script from \"./PersonDetail.vue?vue&type=script&lang=js\"\nexport * from \"./PersonDetail.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}