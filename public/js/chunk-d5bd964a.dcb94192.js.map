{"version":3,"sources":["webpack:///./src/http/is_validation_error.js","webpack:///./src/views/LoginPage.vue","webpack:///./src/components/LoginForm.vue","webpack:///./src/components/LoginForm.vue?e49b","webpack:///./src/views/LoginPage.vue?d962"],"names":["error","response","status","data","errors","title","class","redirect","email","label","type","required","password","to","authenticate","props","emits","computed","methods","$store","dispatch","is_validation_error","$emit","render","name","components","LoginForm","watch","isAuthed","this","redirectIfAuthed","routeName","$route","query","$router","push","mounted"],"mappings":"kHAAe,gBAAUA,GACrB,OAAOA,EAAMC,UAAqC,KAAzBD,EAAMC,SAASC,QAAiBF,EAAMC,SAASE,KAAKC,S,uKCA7E,eAEO,GAFDC,MAAM,QAAQC,MAAM,iB,yBACtB,iBAAmD,CAAnD,eAAmD,GAAtC,gBAAe,EAAAC,UAAQ,gC,uCCG2C,yB,iJAJnF,eAOM,YANF,eAAiG,G,WAA7E,EAAAC,M,qDAAA,EAAAA,MAAK,IAAEC,MAAM,QAAQC,KAAK,OAAQN,OAAQ,EAAAA,OAAOI,MAAOG,SAAA,I,gCAC5E,eAA8G,G,WAA1F,EAAAC,S,qDAAA,EAAAA,SAAQ,IAAEH,MAAM,WAAWC,KAAK,WAAYN,OAAQ,EAAAA,OAAOQ,SAAUD,SAAA,I,gCAEzF,eAAsH,UAAnH,eAA+G,GAAlGL,MAAM,0BAA2BO,GAAI,yB,yBAA0B,iBAAqB,C,cAEpG,eAAuF,Q,wBAA3E,iBAA8D,CAA9D,eAA8D,UAAtDP,MAAM,WAAY,QAAK,8BAAE,EAAAQ,cAAA,EAAAA,aAAA,sBAAc,c,0DAOpD,GACXC,MAAO,GAEPZ,KAHW,WAIP,MAAO,CACHK,MAAO,KACPI,SAAU,KACVR,OAAQ,KAGhBY,MAAO,CACH,gBACA,wBAEJC,SAAU,GAGVC,QAAS,CACCJ,aADD,WACgB,iLAEP,EAAKK,OAAOC,SAAS,QAAS,CAACZ,MAAO,EAAKA,MAAOI,SAAU,EAAKA,WAF1D,+DAIT,OAAAS,EAAA,MAAoB,EAAD,MACnB,EAAKjB,OAAS,KAAEH,SAASE,KAAKC,OAC9B,EAAKkB,MAAM,yBANF,sCAYP,EAAKH,OAAOC,SAAS,kBAZd,mEAcT,eAAY,EAAD,KACX,EAAKE,MAAM,wBAfF,aAmBjB,EAAKA,MAAM,iBAnBM,qEC7B7B,EAAOC,OAAS,EAED,Q,YFKA,GACXC,KAAM,YACNC,WAAY,CACRC,aAEJT,SAAU,kBACH,eAAW,CAAC,cAEnBU,MAAO,CACHC,SAAU,WACNC,KAAKC,qBAGbZ,QAAS,CACLX,SADK,WAED,IAAIwB,EAAY,OACZF,KAAKG,OAAOC,OAASJ,KAAKG,OAAOC,MAAM1B,WACvCwB,EAAYF,KAAKG,OAAOC,MAAM1B,UAElCsB,KAAKK,QAAQC,KAAK,CAACX,KAAMO,KAE7BD,iBARK,WASGD,KAAKD,UACLC,KAAKtB,aAIjB6B,QA3BW,WA4BPP,KAAKC,qBGnCb,EAAOP,OAASA,EAED","file":"js/chunk-d5bd964a.dcb94192.js","sourcesContent":["export default function (error) {\n    return error.response && error.response.status == 422 && error.response.data.errors\n}","<template>\n    <card title=\"Login\" class=\"w-1/2 mx-auto\">\n        <login-form @authenticated=\"redirect\"></login-form>\n    </card>\n    <!-- <pre>{{$route.path}}</pre> -->\n</template>\n<script>\nimport LoginForm from '../components/LoginForm';\nimport { mapGetters } from 'vuex'\n\nexport default {\n    name: \"LoginPage\",\n    components: {\n        LoginForm\n    },\n    computed: {\n        ...mapGetters(['isAuthed'])\n    },\n    watch: {\n        isAuthed: function () {\n            this.redirectIfAuthed();\n        }\n    },\n    methods: {\n        redirect() {\n            let routeName = 'home';\n            if (this.$route.query && this.$route.query.redirect) {\n                routeName = this.$route.query.redirect\n            }\n            this.$router.push({name: routeName})\n        },\n        redirectIfAuthed(){\n            if (this.isAuthed) {\n                this.redirect()\n            }\n        }\n    },\n    mounted() {\n        this.redirectIfAuthed();\n    }\n}\n</script>","<template>\n    <div>\n        <input-row v-model=\"email\" label=\"Email\" type=\"text\" :errors=\"errors.email\" required></input-row>\n        <input-row v-model=\"password\" label=\"Password\" type=\"password\" :errors=\"errors.password\" required></input-row>\n        \n        <p><router-link class=\"text-blue-500 underline\" :to=\"{name: 'reset-password'}\">Forget your password?</router-link></p>\n\n        <button-row><button class=\"btn blue\" @click=\"authenticate\">Log in</button></button-row>\n    </div>\n</template>\n<script>\nimport is_validation_error from '../http/is_validation_error'\nimport isAuthError from '../http/is_auth_error'\n\nexport default {\n    props: {\n    },\n    data() {\n        return {\n            email: null,\n            password: null,\n            errors: {}\n        }\n    },\n    emits: [\n        'authenticated',\n        'authenticationFailed'\n    ],\n    computed: {\n\n    },\n    methods: {\n        async authenticate() {\n            try {\n                await this.$store.dispatch('login', {email: this.email, password: this.password})\n            } catch (e) {\n                if (is_validation_error(e)) {\n                    this.errors = e.response.data.errors\n                    this.$emit('authenticationFailed')\n                }\n                throw e;\n            }\n\n            try {\n                await this.$store.dispatch('getCurrentUser')\n            } catch (e) {\n                if (isAuthError(e)) {\n                    this.$emit('authenticationFailed')\n                }\n                throw e\n            }\n            this.$emit('authenticated');\n\n        }\n    }\n}\n</script>","import { render } from \"./LoginForm.vue?vue&type=template&id=416eab8d\"\nimport script from \"./LoginForm.vue?vue&type=script&lang=js\"\nexport * from \"./LoginForm.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./LoginPage.vue?vue&type=template&id=747918fa\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=js\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}