{"version":3,"sources":["webpack:///./src/views/InviteAdmin.vue","webpack:///./src/views/InviteAdmin.vue?22c5"],"names":["_createElementVNode","_createElementBlock","_createVNode","_component_note","_hoisted_2","_createBlock","_component_data_table","data","$options","fields","$data","sort","$event","class","paginated","header","type","placeholder","cell-reset","_withCtx","item","redeemed_at","onClick","_hoisted_3","_Teleport","to","_component_modal_dialog","title","_toDisplayString","first_name","last_name","_hoisted_4","_hoisted_5","_component_button_row","submit-text","onSubmitted","name","props","resettingInvite","tableSort","field","desc","invites","showConfirmation","searchTerm","sortable","Number","label","String","Date","resolveValue","invite","inviter","computed","filteredInvites","this","filter","RegExp","person","match","email","watch","currentPage","methods","getInvites","api","get","then","rsp","resetInvite","put","code","response","idx","findIndex","i","id","alert","isValidationError","confirmReset","mounted","__exports__","render"],"mappings":"sKAEc,S,EACNA,gCAAgB,UAAZ,WAAO,G,gBAqBHA,gCAA6B,SAA1B,0BAAsB,G,EACzBA,gCAAuC,SAApC,oCAAgC,G,oSAxB/CC,gCA6BM,YA5BFC,yBAAkBC,EAAA,M,8BAAZ,iBAAK,O,MACXC,EA2BE,sDA1BFC,yBAgBaC,EAAA,CAfRC,KAAMC,kBACNC,OAAQC,SACDC,KAAMD,Y,+CAAAA,YAASE,IACvBC,MAAM,UAENC,UAAA,IANJ,CAQqBC,OAAM,sBACnB,iBAA2F,6BAA3Ff,gCAA2F,SAApFgB,KAAK,O,qDAAgBN,aAAUE,IAAEK,YAAY,0BAA0BJ,MAAM,QAApF,4BAA4BH,oBAEfQ,aAAUC,sBACvB,gBAD0BC,EAC1B,EAD0BA,KAC1B,MAD8B,CAC+BA,EAAKC,sCAAlEpB,gCAES,U,MAFDY,MAAM,aAAcS,QAAK,mBAAEd,eAAaY,KAA+B,UAE/E,EAAAG,IAFA,2C,KAZR,qCA0BE,yBATFlB,yBAQWmB,cAAA,CARDC,GAAG,QAAM,CACfvB,yBAMewB,EAAA,CANDC,MAAM,e,WAAwBjB,mB,qDAAAA,mBAAgBE,KAA5D,C,8BACI,iBAA0G,CAA1GZ,gCAA0G,SAAvG,yCAAsC4B,6BAAElB,kBAAgBmB,YAAY,IAACD,6BAAElB,kBAAgBoB,WAAW,IAAC,GACtGC,EACAC,EACA9B,yBAA8F+B,EAAA,CAAlFC,cAAY,eAAgBC,YAAS,+BAAE3B,cAAYE,2B,KAJnE,uB,gKAaG,GACX0B,KAAM,cACNC,MAAO,GAGP9B,KALW,WAMP,MAAO,CACH+B,gBAAiB,GACjBC,UAAW,CAACC,MAAO,KAAMC,MAAM,GAC/BC,QAAS,GACTC,kBAAkB,EAClBC,WAAY,KACZnC,OAAQ,CACJ,CACI2B,KAAM,KACNS,UAAU,EACV7B,KAAM8B,QAEV,CACIV,KAAM,cACNW,MAAO,OACPF,UAAU,EACV7B,KAAMgC,QAEV,CACIZ,KAAM,eACNW,MAAO,QACPF,UAAU,EACV7B,KAAMgC,QAEV,CACIZ,KAAM,cACNS,UAAU,EACV7B,KAAMiC,MAEV,CACIb,KAAM,UACNS,UAAU,EACV7B,KAAMgC,OACNE,aAAc,SAACC,GACX,OAAOA,EAAOC,QAAUD,EAAOC,QAAQhB,KAAO,OAGtD,CACIA,KAAM,OACNS,UAAU,EACV7B,KAAMgC,QAEV,CACIZ,KAAM,QACNS,UAAU,EACV7B,KAAMgC,WAKtBK,SAAU,CACNC,gBADM,WAEF,IAAKC,KAAKX,WACN,OAAOW,KAAKb,QAEhB,IAAMc,EAAS,IAAIC,OAAJ,YAAgBF,KAAKX,WAArB,MAAqC,KACpD,OAAOW,KAAKb,QAAQc,QAAO,SAAAL,GACvB,OAAOA,EAAOO,QAAUP,EAAOO,OAAO7B,YAAcsB,EAAOO,OAAO7B,WAAW8B,MAAMH,IAC5EL,EAAOO,QAAUP,EAAOO,OAAO5B,WAAaqB,EAAOO,OAAO5B,UAAU6B,MAAMH,IAC1E,UAAGL,EAAOtB,WAAV,YAAwBsB,EAAOrB,WAAY6B,MAAMH,IACjDL,EAAOS,MAAMD,MAAMH,QAItCK,MAAO,CACHjB,WADG,WAECW,KAAKO,YAAc,IAG3BC,QAAS,CACEC,WADF,WACgB,wKACIC,OAAIC,IAAI,uBAAuBC,MAAK,SAAAC,GAAE,OAAKA,EAAI7D,KAAKA,QADxD,OACjB,EAAKmC,QADY,qDAGf2B,YAJD,SAIclB,GAAQ,yLAEIc,OAAIK,IAAJ,8BAA+BnB,EAAOoB,KAAtC,WAFJ,OAEbC,EAFa,OAGbC,EAAM,EAAK/B,QAAQgC,WAAU,SAAAC,GAAA,OAAKA,EAAEC,IAAMzB,EAAOyB,OAC3C,GAARH,GACAI,MAAM,UAEV,EAAKnC,QAAQ+B,GAAOD,EAASjE,KAPV,uDASfuE,eAAkB,EAAD,IATF,wBAUfD,MAAM,6BAVS,2BAcvB,EAAKlC,kBAAmB,EAdD,4DAgB3BoC,aApBK,SAoBQ5B,GACTI,KAAKjB,gBAAkBa,EACvBI,KAAKZ,kBAAmB,IAGhCqC,QApGW,WAqGPzB,KAAKS,e,qBCnIb,MAAMiB,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d21b23f.a4a18c6f.js","sourcesContent":["<template>\n    <div>\n        <note>Admin</note>\n        <h1>Invites</h1>\n        <data-table\n            :data=\"filteredInvites\"\n            :fields=\"fields\"\n            v-model:sort=\"tableSort\"\n            class=\"text-sm\"\n            v-remaining-height\n            paginated\n        >\n            <template v-slot:header>\n                <input type=\"text\" v-model=\"searchTerm\" placeholder=\"filter by name or email\" class=\"mb-2\">\n            </template>\n            <template v-slot:cell-reset=\"{item}\">\n                <button class=\"btn btn-xs\" @click=\"confirmReset(item)\" v-if=\"item.redeemed_at\">\n                    Reset\n                </button>\n            </template>\n        </data-table>\n        <teleport to=\"body\">\n            <modal-dialog title=\"Reset Invite\" v-model=\"showConfirmation\">\n                <p>You are about to reset the invite for {{resettingInvite.first_name}} {{resettingInvite.last_name}}.</p>\n                <p>This cannot be undone.</p>\n                <p>Do you want to reset the invite?</p>\n                <button-row submit-text=\"Reset Invite\" @submitted=\"resetInvite(resettingInvite)\"></button-row>\n\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nimport {api, isValidationError} from '@/http'\n\nexport default {\n    name: 'InviteAdmin',\n    props: {\n        \n    },\n    data () {\n        return {\n            resettingInvite: {},\n            tableSort: {field: 'id', desc: false},\n            invites: [],\n            showConfirmation: false,\n            searchTerm: null,\n            fields: [\n                {\n                    name: 'id',\n                    sortable: true,\n                    type: Number\n                },\n                {\n                    name: 'person.name',\n                    label: 'Name',\n                    sortable: true,\n                    type: String\n                },\n                {\n                    name: 'person.email',\n                    label: 'Email',\n                    sortable: true,\n                    type: String\n                },\n                {\n                    name: 'redeemed_at',\n                    sortable: true,\n                    type: Date\n                },\n                {\n                    name: 'inviter',\n                    sortable: true,\n                    type: String,\n                    resolveValue: (invite) => {\n                        return invite.inviter ? invite.inviter.name : null\n                    }\n                },\n                {\n                    name: 'code',\n                    sortable: false,\n                    type: String\n                },\n                {\n                    name: 'reset',\n                    sortable: false,\n                    type: String\n                }\n            ],\n        }\n    },\n    computed: {\n        filteredInvites () {\n            if (!this.searchTerm) {\n                return this.invites;\n            }\n            const filter = new RegExp(`.*${this.searchTerm}.*`, 'i');\n            return this.invites.filter(invite => {\n                return invite.person && invite.person.first_name && invite.person.first_name.match(filter)\n                    || invite.person && invite.person.last_name && invite.person.last_name.match(filter)\n                    || `${invite.first_name} ${invite.last_name}`.match(filter)\n                    || invite.email.match(filter);\n            });\n        },\n    },\n    watch: {\n        searchTerm () {\n            this.currentPage = 0;\n        }\n    },\n    methods: {\n         async getInvites () {\n            this.invites = await api.get('/api/people/invites').then(rsp => rsp.data.data);     \n        }, \n        async resetInvite (invite) {\n            try {\n                const response = await api.put(`/api/people/invites/${invite.code}/reset`);\n                const idx = this.invites.findIndex(i => i.id == invite.id);\n                if (idx == -1) {\n                    alert('what??')\n                }\n                this.invites[idx] = response.data;\n            } catch (error) {\n                if (isValidationError(error)) {\n                    alert('Problem resetting invite!');\n                    return;\n                }\n            }\n            this.showConfirmation = false;\n        },\n        confirmReset(invite) {\n            this.resettingInvite = invite;\n            this.showConfirmation = true;\n        },\n    },\n    mounted () {\n        this.getInvites();\n    }\n}\n</script>","import { render } from \"./InviteAdmin.vue?vue&type=template&id=6f8092b1\"\nimport script from \"./InviteAdmin.vue?vue&type=script&lang=js\"\nexport * from \"./InviteAdmin.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/new-epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}