{"version":3,"sources":["webpack:///./src/views/InviteAdmin.vue","webpack:///./src/views/InviteAdmin.vue?22c5"],"names":["_createElementVNode","_createElementBlock","_createVNode","_component_note","_hoisted_2","_createBlock","_component_data_table","data","$options","fields","$data","sort","$event","class","paginated","ref","header","type","placeholder","cell-reset","_withCtx","item","redeemed_at","onClick","_hoisted_3","_Teleport","to","_component_modal_dialog","title","_toDisplayString","first_name","last_name","_hoisted_4","_hoisted_5","_component_button_row","submit-text","onSubmitted","name","props","resettingInvite","tableSort","field","desc","invites","showConfirmation","searchTerm","sortable","Number","label","String","Date","resolveValue","invite","inviter","watch","this","triggerSearch","methods","itemProvider","currentPage","pageSize","setTotalItems","params","page","page_size","api","get","then","rsp","pageResponse","meta","total","resetInvite","put","code","response","idx","findIndex","i","id","alert","isValidationError","confirmReset","mounted","debounce","$refs","dataTable","getItems","__exports__","render"],"mappings":"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","file":"js/chunk-2d21b23f.3c83b2b7.js","sourcesContent":["<template>\n    <div>\n        <note>Admin</note>\n        <h1>Invites</h1>\n        <data-table\n            :data=\"itemProvider\"\n            :fields=\"fields\"\n            v-model:sort=\"tableSort\"\n            class=\"text-sm\"\n            v-remaining-height\n            paginated\n            ref=\"dataTable\"\n        >\n            <template v-slot:header>\n                <input type=\"text\" v-model=\"searchTerm\" placeholder=\"filter by name or email\" class=\"mb-2\">\n            </template>\n            <template v-slot:cell-reset=\"{item}\">\n                <button class=\"btn btn-xs\" @click=\"confirmReset(item)\" v-if=\"item.redeemed_at\">\n                    Reset\n                </button>\n            </template>\n        </data-table>\n\n        <teleport to=\"body\">\n            <modal-dialog title=\"Reset Invite\" v-model=\"showConfirmation\">\n                <p>You are about to reset the invite for {{resettingInvite.first_name}} {{resettingInvite.last_name}}.</p>\n                <p>This cannot be undone.</p>\n                <p>Do you want to reset the invite?</p>\n                <button-row submit-text=\"Reset Invite\" @submitted=\"resetInvite(resettingInvite)\"></button-row>\n\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nimport {api, isValidationError} from '@/http'\nimport {debounce} from 'lodash-es'\n\nexport default {\n    name: 'InviteAdmin',\n    props: {\n        \n    },\n    data () {\n        return {\n\n            resettingInvite: {},\n            tableSort: {field: 'id', desc: false},\n            invites: [],\n            showConfirmation: false,\n            searchTerm: null,\n            fields: [\n                {\n                    name: 'id',\n                    sortable: true,\n                    type: Number\n                },\n                {\n                    name: 'person.name',\n                    label: 'Name',\n                    sortable: true,\n                    type: String\n                },\n                {\n                    name: 'person.email',\n                    label: 'Email',\n                    sortable: true,\n                    type: String\n                },\n                {\n                    name: 'redeemed_at',\n                    sortable: true,\n                    type: Date\n                },\n                {\n                    name: 'inviter',\n                    sortable: true,\n                    type: String,\n                    resolveValue: (invite) => {\n                        return invite.inviter ? invite.inviter.name : null\n                    }\n                },\n                {\n                    name: 'code',\n                    sortable: false,\n                    type: String\n                },\n                {\n                    name: 'reset',\n                    sortable: false,\n                    type: String\n                }\n            ],\n        }\n    },\n    watch: {\n        searchTerm () {\n            this.triggerSearch()\n        }\n    },\n    methods: {\n\n        async itemProvider (currentPage, pageSize, sort, setTotalItems) {\n            const params = {\n                page: currentPage,\n                page_size: pageSize,\n                'sort[field]': sort.field.name,\n                'sort[dir]': sort.desc ? 'DESC' : 'ASC',\n                'where[keyword]': this.searchTerm\n            }\n            const pageResponse = await api.get(`/api/people/invites`, {params: params})\n                .then(rsp => rsp.data);\n            setTotalItems(pageResponse.meta.total);\n            return pageResponse.data;\n        }, \n        async resetInvite (invite) {\n            try {\n                const response = await api.put(`/api/people/invites/${invite.code}/reset`);\n                const idx = this.invites.findIndex(i => i.id == invite.id);\n                if (idx == -1) {\n                    alert('what??')\n                }\n                this.invites[idx] = response.data;\n            } catch (error) {\n                if (isValidationError(error)) {\n                    alert('Problem resetting invite!');\n                    return;\n                }\n            }\n            this.showConfirmation = false;\n        },\n        confirmReset(invite) {\n            this.resettingInvite = invite;\n            this.showConfirmation = true;\n        },\n    },\n    mounted () {\n        this.triggerSearch = debounce(() => this.$refs.dataTable.getItems(), 500)\n    }\n}\n</script>","import { render } from \"./InviteAdmin.vue?vue&type=template&id=bcaca1f0\"\nimport script from \"./InviteAdmin.vue?vue&type=script&lang=js\"\nexport * from \"./InviteAdmin.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}