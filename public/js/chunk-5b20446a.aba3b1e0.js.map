{"version":3,"sources":["webpack:///./src/components/people/PersonDetail.vue","webpack:///./src/components/people/MembershipList.vue","webpack:///./src/components/people/MembershipList.vue?3648","webpack:///./src/components/people/PersonMergeForm.vue","webpack:///./src/components/people/PersonMergeForm.vue?73e4","webpack:///./src/components/people/PersonMailLog.vue","webpack:///./src/components/people/PersonMailLog.vue?d1af","webpack:///./src/components/people/PersonDetail.vue?a770","webpack:///./src/adapters/log_entry_repository.js","webpack:///./src/components/log_entries/ActivityLogDeleteConfirmation.vue?f51c","webpack:///./src/components/log_entries/ActivityLog.vue?8f29","webpack:///./src/components/log_entries/ActivityLog.vue","webpack:///./src/components/log_entries/ActivityLogEntryForm.vue","webpack:///./src/components/log_entries/ActivityLogEntryForm.vue?c2e6","webpack:///./src/components/log_entries/ActivityLogDeleteConfirmation.vue","webpack:///./src/components/log_entries/ActivityLogDeleteConfirmation.vue?5cdc","webpack:///./src/components/log_entries/ActivityLog.vue?e3e2"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_component_router_link","to","_ctx","name","_component_note","_toDisplayString","id","_createBlock","$props","_component_icon_edit","width","heigh","_component_dictionary_row","label","_hoisted_4","email","_hoisted_5","institution","_component_tabs_container","_component_tab_item","_hoisted_6","_component_membership_list","person","_hoisted_7","_component_person_profile","_component_coi_list","visible","first_name","_component_refresh_button","loading","$data","onClick","$options","_component_person_mail_log","mail","_hoisted_10","_component_activity_log","log-entries","$setup","api-url","uuid","log-updated","_hoisted_12","_Teleport","_component_modal_dialog","$event","title","meta","_component_router_view","_hoisted_13","_hoisted_14","_hoisted_15","_component_button_row","submit-text","onSubmitted","onCanceled","submit-variant","_component_person_merge_form","obsolete","onSaved","_component_data_table","fields","data","sort","rowClickHandler","row-class","props","type","Object","required","field","desc","String","sortable","resolveValue","item","roles","map","r","join","permissions","p","Date","computed","memberships","this","m","group","Group","methods","goToGroup","$router","push","params","__exports__","_hoisted_1","_component_input_row","vertical","_component_person_search_select","allow-add","errors","authority_id","authority","default","emits","authorityCopy","obsoleteCopy","watch","immediate","handler","attributes","commitMerge","$store","dispatch","authorityId","obsoleteIds","$emit","isValidationError","response","cancelMerge","obsoleteId","length","_Fragment","_renderList","key","_hoisted_2","created_at","_hoisted_3","i","address","cc","bcc","_hoisted_9","subject","innerHTML","body","_component_custom_email_form","mail-data","onSent","Array","currentEmail","showResendDialog","initResend","cleanupResend","components","TabsContainer","MembershipList","PersonProfile","PersonMergeForm","CoiList","ActivityLog","PersonMailLog","showDeleteConfirmation","showMergeForm","mailLoading","logsLoading","coordinatesPerson","getLogEntries","getMailLog","mapGetters","showModal","get","$route","set","value","sortedMailLog","mailLog","a","b","parse","initDelete","commitDelete","go","cancelDelete","initMerge","handleMerged","handleMergeCanceled","fetchEntries","setup","formatDate","logEntries","render","_entries","ref","apiUrl","api","then","saveEntry","entryData","post","updateEntry","put","entryIdx","findIndex","entry","deleteEntry","entryId","delete","splice","cell-id","_withCtx","activity_type","_component_icon_trash","cell-description","description","_component_log_entry_form","log-entry","_component_activity_log_delete_confirmation","logEntry","onDeleted","_component_form_container","log_date","_component_rich_text_editor","RichTextEditor","toISOString","step","context","newEntry","syncEntry","properties","initNewEntry","save","emit","status","cancel","mounted","causer","err","idx","submitText","logDate","flattenedErrors","values","flat","deleteLogEntry","is_validation_error","message","sortName","colspan","hideHeader","formatTime","LogEntryForm","ActivityLogDeleteConfirmation","selectedEntry","editingEntry","hasLogEntries","editLogEntry","closeEntryForm","confirmDelete","closeDeleteConfirmation"],"mappings":"+KAEgBA,MAAM,Q,+BAC6B,U,GACnCA,MAAM,qC,EAeiBC,gCAAuB,cAAf,UAAM,G,EAIdA,gCAA6B,cAArB,gBAAY,G,EAM3CA,gCAAe,UAAX,UAAM,G,EAIVA,gCAAgB,UAAZ,WAAO,G,GAaHD,MAAM,+B,GAQTA,MAAM,+B,EACPC,gCAAoB,UAAhB,eAAW,G,GAWVD,MAAM,qD,EACfC,gCAEK,MAFDD,MAAM,qBAAoB,4CAE9B,G,EAaAC,gCAA6F,SAA1F,yFAAsF,G,EACzFA,gCAIK,MAJDD,MAAM,kBAAgB,CACtBC,gCAAoF,UAAhF,+EACJA,gCAAe,UAAX,UACJA,gCAAmD,UAA/C,gDAHR,G,EAKAA,gCAEM,OAFDD,MAAM,kFAAiF,4BAE5F,G,wzBAzFZE,gCAqGM,YApGFD,gCAwBS,SAxBT,EAwBS,CAvBLE,yBAA2DC,EAAA,CAA9CJ,MAAM,OAAOK,GAAG,WAA7B,C,8BAAuC,iBAAM,O,MAC7CJ,gCAaK,KAbL,EAaK,CAZDA,gCAGM,sEAFAK,SAAOC,MAAM,IACf,GAAAJ,yBAA8BK,EAAA,M,8BAAxB,iBAAI,8BAAJ,OAAIC,6BAAEH,SAAOI,IAAE,O,QAKdJ,gBAAa,kBAAqBA,eAAaA,WAAYA,oBAAkBA,WAAlB,yBAHtEK,yBAMcP,EAAA,C,MALTC,GAAE,kBAAaO,OAAb,SACHZ,MAAM,0BAFV,C,8BAKI,iBAAmC,CAAnCG,yBAAmCU,EAAA,CAAxBC,MAAM,KAAKC,MAAM,W,KALhC,oDASJZ,yBAGiBa,EAAA,CAHDC,MAAM,SAAO,CACRA,MAAK,sBAAC,iBAAuB,CAAvBC,M,8BAAkC,iBACzD,8BADyD,IACzDT,6BAAEH,SAAOa,OAAK,O,MAElBhB,yBAGiBa,EAAA,CAHDC,MAAM,eAAa,CACdA,MAAK,sBAAC,iBAA6B,CAA7BG,M,8BAAwC,iBAC/D,8BAD+D,IAC/DX,6BAAEH,SAAOe,YAAcf,SAAOe,YAAYd,KAAI,a,QAGtDJ,yBAgDiBmB,EAAA,M,8BA/Cb,iBAGW,CAHXnB,yBAGWoB,EAAA,CAHDN,MAAM,UAAQ,C,8BACpB,iBAAe,CAAfO,EACArB,yBAAoDsB,EAAA,CAAlCC,OAAQpB,UAAM,uB,MAEpCH,yBAGWoB,EAAA,CAHDN,MAAM,QAAM,C,8BAClB,iBAAgB,CAAhBU,EACAxB,yBAAkDyB,EAAA,CAAjCF,OAAQpB,UAAM,uB,MAEnCH,yBAEWoB,EAAA,CAFDN,MAAM,wBAAsB,C,8BAClC,iBAAsC,CAAtCd,yBAAsC0B,EAAA,CAA3BH,OAAQpB,UAAM,uB,MAQ7BH,yBAMWoB,EAAA,CANDN,MAAM,YAAaa,QAASxB,gBAAa,kBAAqBA,eAAaA,WAAWA,oBAAkBA,WAAlH,C,8BACI,iBAGS,CAHTL,gCAGS,SAHT,EAGS,CAFLA,gCAA2C,UAAvC,gBAAaQ,6BAAEH,SAAOyB,YAAU,GACpC5B,yBAA4D6B,EAAA,CAA3CC,QAASC,cAAcC,QAAOC,cAA/C,gCAEJjC,yBAA0EkC,EAAA,CAAxDX,OAAQpB,SAASgC,KAAMF,iBAAzC,8B,KALJ,eAQAjC,yBAUWoB,EAAA,CAVDN,MAAM,MAAOa,QAASxB,gBAAa,kBAAqBA,oBAAkBA,WAApF,C,8BACI,iBAGM,CAHNL,gCAGM,MAHN,EAGM,CAFFsC,EACApC,yBAA+D6B,EAAA,CAA9CC,QAASC,cAAcC,QAAOC,iBAA/C,gCAEJjC,yBAIgBqC,EAAA,CAHXC,cAAaC,aACbC,UAAA,sBAAwBrC,SAAOsC,KAA/B,kBACMC,cAAaT,iBAHxB,oD,KALJ,eAYAjC,yBAQWoB,EAAA,CARDN,MAAM,QAASa,QAASxB,gBAAa,kBAA/C,C,8BACI,iBAMU,CANVL,gCAMU,UANV,EAMU,CALV6C,EAGA7C,gCAAwF,UAArFA,gCAAiF,UAAzED,MAAM,cAAemC,QAAK,8BAAEC,+CAAW,+BAClDnC,gCAA6E,UAA1EA,gCAAsE,UAA9DD,MAAM,cAAemC,QAAK,8BAAEC,iDAAY,yB,KANvD,mB,OAqCF,yBAzBFzB,yBAwBWoC,cAAA,CAxBD1C,GAAG,QAAM,CACfF,yBAEe6C,EAAA,C,WAFQZ,Y,qDAAAA,YAASa,IAAGC,MAAO5C,SAAO6C,KAAKD,OAAtD,C,8BACI,iBAAwC,CAAxC/C,yBAAwCiD,EAAA,CAA3B7C,KAAK,c,KADtB,0BAGAJ,yBAgBe6C,EAAA,CAhBAE,MAAK,kCAA6B5C,SAAOC,M,WAAiB2B,yB,qDAAAA,yBAAsBe,KAA/F,C,8BACI,iBAA6F,CAA7FI,EACAC,EAKAC,EAGApD,yBAKEqD,EAAA,CAJGC,cAAA,iBAAuBnD,SAAOC,MAC9BmD,YAAWtB,eACXuB,WAAUvB,eACXwB,iBAAe,OAJnB,uD,KAVJ,0BAiBAzD,yBAEe6C,EAAA,CAFAE,MAAK,gBAAW5C,SAAOC,KAAlB,wB,WAAuD2B,gB,qDAAAA,gBAAae,KAAxF,C,8BACI,iBAAgH,CAAhH9C,yBAAgH0D,EAAA,CAA5FC,SAAUxD,SAASyD,QAAO3B,eAAeuB,WAAUvB,uBAAvE,gD,KADJ,+B,wNCjGRlC,gCAQM,YAPFC,yBAMc6D,EAAA,CALTC,OAAQ/B,SACRgC,KAAM9B,cACC+B,KAAMjC,O,+CAAAA,OAAIe,IACjBmB,gBAAiBhC,YACjBiC,YAAW,oCALhB,iE,oCAYO,GACX9D,KAAM,iBACN+D,MAAO,CACH5C,OAAQ,CACJ6C,KAAMC,OACNC,UAAU,IAGlBP,KARW,WASP,MAAO,CACHC,KAAM,CACFO,MAAO,oBACPC,MAAM,GAEVV,OAAQ,CACJ,CACI1D,KAAM,oBACNgE,KAAMK,OACNC,UAAU,EACV5D,MAAO,QAEX,CACIV,KAAM,kBACNgE,KAAMK,OACNC,UAAU,EACV5D,MAAO,QAEX,CACIV,KAAM,QACNgE,KAAMK,OACNC,UAAU,EACV5D,MAAO,QACP6D,aALJ,SAKkBC,GACV,OAAOA,EAAKC,MAAMC,KAAI,SAAAC,GAAA,OAAKA,EAAE3E,QAAM4E,KAAK,QAGhD,CACI5E,KAAM,cACNgE,KAAMK,OACNC,UAAU,EACV5D,MAAO,cACP6D,aALJ,SAKkBC,GACV,OAAOA,EAAKK,YAAYH,KAAI,SAAAI,GAAA,OAAKA,EAAE9E,QAAM4E,KAAK,QAGtD,CACI5E,KAAM,aACNgE,KAAMe,KACNT,UAAU,EACV5D,MAAO,WAEX,CACIV,KAAM,WACNgE,KAAMe,KACNT,UAAU,EACV5D,MAAO,YAOvBsE,SAAU,CACNC,YADM,WAEF,OAAIC,KAAK/D,OAAO8D,YACLC,KAAK/D,OAAO8D,YAAYP,KAAI,SAAAS,GAI/B,OAHIA,EAAEC,QACFD,EAAEC,MAAQ,IAAIC,OAAMF,EAAEC,QAEnBD,KAIR,KAGfG,QAAS,CACLC,UADK,SACKf,GACNU,KAAKM,QAAQC,KAAK,CAACzF,KAAM,cAAe0F,OAAQ,CAACrD,KAAMmC,EAAKY,MAAM/C,W,qBCvF9E,MAAMsD,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS,KAErD,Q,cCLPjG,gCAMI,KANDD,MAAM,QAAM,8BAAC,0CAEZC,gCAGK,MAHDD,MAAM,qBAAmB,CACzBC,gCAA6F,UAAzF,wFACJA,gCAA4G,UAAxG,2GAJZ,G,+BAQ2B,W,+BACc,0C,+BAMd,S,+BAA0B,0B,uPAhBzDC,gCAoBM,YAnBFiG,EAOAhG,yBAMYiG,EAAA,CANDnF,MAAM,QAAQoF,SAAA,IAAzB,CACqBpF,MAAK,sBAAC,iBACb,4BAAwET,EAAA,CAAlER,MAAM,gBAAc,C,8BAAC,iBAAsC,O,wCAE3E,iBAAuF,CAAvFG,yBAAuFmG,EAAA,C,WAAxDpE,e,qDAAAA,eAAYe,IAAGsD,aAAW,GAAzD,2B,MAGJpG,yBAGYiG,EAAA,CAHDnF,MAAM,OAAQuF,OAAQtE,SAAOuE,aAAcJ,SAAA,IAAtD,CACqBpF,MAAK,sBAAC,iBAAK,4BAAkDT,EAAA,CAA5CR,MAAM,UAAQ,C,8BAAC,iBAAsB,O,wCACvE,iBAAwF,CAAxFG,yBAAwFmG,EAAA,C,WAAzDpE,gB,qDAAAA,gBAAae,IAAGsD,aAAW,GAA1D,2B,KAFJ,cAIApG,yBAAmFqD,EAAA,CAAvEC,cAAY,QAASC,YAAWtB,cAAcuB,WAAUvB,eAApE,uC,gBAMO,GACX7B,KAAM,kBACN+D,MAAO,CACHoC,UAAW,CACPnC,KAAMC,OACNC,UAAU,GAEdX,SAAU,CACNS,KAAMC,OACNmC,QAAS,iBAAO,MAGxBC,MAAO,CACH,QACA,YAEJ1C,KAhBW,WAiBP,MAAO,CACH2C,cAAe,KACfC,aAAc,KACdN,OAAQ,KAGhBO,MAAO,CACHL,UAAW,CACPM,WAAW,EACXC,QAFO,SAEE5G,GACAA,IAGLoF,KAAKoB,cAAL,kBAAyBxG,EAAG6G,eAGpCpD,SAAU,CACNkD,WAAW,EACXC,QAFM,SAEG5G,GACAA,IAGLoF,KAAKqB,aAAL,kBAAwBzG,EAAG6G,gBAIvCrB,QAAS,CACCsB,YADD,WACgB,wKAEb,EAAKX,OAAS,GAFD,SAGP,EAAKY,OAAOC,SACd,qBACA,CACIX,UAAW,EAAKG,cAChB/C,SAAU,EAAKgD,eAPV,OAUb,EAAKQ,YAAc,KACnB,EAAKC,YAAc,KACnB,EAAKC,MAAM,SAZE,uDAcTC,eAAkB,EAAD,IAdR,wBAeT,EAAKjB,OAAS,KAAMkB,SAASxD,KAAKsC,OAfzB,+EAoBrBmB,YArBK,WAsBDlC,KAAK6B,YAAc,KACnB7B,KAAKmC,WAAa,KAClBnC,KAAK+B,MAAM,eCxFvB,MAAM,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS,KAErD,Q,iCCLsBxH,MAAM,Q,EAI/BC,gCAA0C,QAApCD,MAAM,iBAAgB,WAAO,G,EAC9BC,gCAAsC,QAAhCD,MAAM,iBAAgB,OAAG,G,YACfC,gCAAsC,QAAhCD,MAAM,iBAAgB,OAAG,G,YAC9BC,gCAAuC,QAAjCD,MAAM,iBAAgB,QAAI,G,IACjDA,MAAM,Q,GAAOC,gCAA2C,QAArCD,MAAM,iBAAgB,YAAQ,G,GACtDC,gCAAI,mB,oBAEJA,gCAAI,mB,iLAZZC,gCAyBM,YAxBoB,GAAXU,OAAKiH,QAAM,yBAAtB3H,gCAEM,MAFN,EAEMO,6BADAG,SAAOmB,YAAY,2CACzB,IAFA,wCAwBE,2BArBF7B,gCAeM4H,cAAA,KAAAC,wBAf6CnH,QAAI,SAAbO,G,gCAA1CjB,gCAeM,OAfDF,MAAM,wBAA+CgI,IAAK7G,EAAMT,IAArE,CACIuH,+BAA0C,IAACxH,6BAAEH,aAAWa,EAAM+G,aAAa,IAC3E,mCAA6F,YAAxFC,EAAwF,6BAAlD,IAAC1H,6BAAEU,EAAMd,GAAG4E,KAAI,SAAAmD,GAAC,OAAIA,EAAEC,WAASlD,KAAI,YACpEhE,EAAMmH,6BAAjBpI,gCAA6G,MAAAgB,EAAA,CAAxFE,EAAwF,6BAAlD,IAACX,6BAAEU,EAAMmH,GAAGrD,KAAI,SAAAmD,GAAC,OAAIA,EAAEC,WAASlD,KAAI,aAA/F,uCACWhE,EAAMoH,8BAAjBrI,gCAAgH,MAAAsB,EAAA,CAA1FG,EAA0F,6BAAnD,IAAClB,6BAAEU,EAAMoH,IAAItD,KAAI,SAAAmD,GAAC,OAAIA,EAAEC,WAASlD,KAAI,aAAlG,uCACAlF,gCAAqF,MAArF,GAAqF,CAAnEuI,GAAmE,6BAAxB,IAAC/H,6BAAEU,EAAMsH,SAAO,KAC7ElG,GACAtC,gCAA+B,OAA1ByI,UAAQvH,EAAMwH,MAAnB,WACA7F,GACcxC,gBAAa,kBAAqBA,oBAAkBM,WAAlB,yBAAhDV,gCAKS,U,MAJJiC,QAAK,+CAAOC,aAAWjB,KAAK,UAC7BnB,MAAM,cACT,WAED,EAAAqD,KALA,4CATJ,OAqBE,yBALF1C,yBAIWoC,cAAA,CAJD1C,GAAG,QAAM,CACfF,yBAEe6C,EAAA,CAFDE,MAAM,e,WAAwBhB,mB,qDAAAA,mBAAgBe,KAA5D,C,8BACI,iBAAiH,CAAjH9C,yBAAiHyI,EAAA,CAA7FC,YAAW3G,eAAe4G,OAAM1G,gBAAgBuB,WAAUvB,iBAA9E,gD,KADJ,uBAOG,QACX7B,KAAM,gBACN+D,MAAO,CACH5C,OAAQ,CACJ6C,KAAMC,OACNC,UAAU,GAEdnC,KAAM,CACFiC,KAAMwE,MACNtE,UAAU,IAGlBP,KAZW,WAaP,MAAO,CACH8E,aAAc,GACdC,iBAAkB,OAG1B1D,SAAU,GAGVM,QAAS,CACLqD,WADK,SACO/H,GACRsE,KAAKuD,aAAL,kBAAwB7H,GACxBsE,KAAKwD,kBAAmB,GAE5BE,cALK,WAMD1D,KAAKuD,aAAe,GACpBvD,KAAKwD,kBAAmB,EACxBxD,KAAK2B,OAAOC,SAAS,iBAAkB5B,KAAK/D,WCrDxD,MAAM,GAA2B,IAAgB,GAAQ,CAAC,CAAC,SAAS,MAErD,UN+GA,IACXnB,KAAM,eACN6I,WAAY,CACRC,2BACAC,iBACAC,qBACAC,kBACAC,eACAC,mBACAC,kBAEJrF,MAAO,CACH1B,KAAM,CACF6B,UAAU,EACVF,KAAMK,SAGdV,KAjBW,WAkBP,MAAO,CACH0F,wBAAwB,EACxBC,eAAe,EACfC,aAAa,EACbC,aAAa,IAGrBhD,MAAO,CACHnE,KAAM,CACFoE,WAAW,EACXC,QAAS,WAAF,8CAAE,8GACCxB,KAAK2B,OAAOC,SAAS,mBAAoB,CAACzE,KAAM6C,KAAK7C,OADtD,OAED6C,KAAKuE,kBAAkBvE,KAAK/D,UAC5B+D,KAAKwE,gBACLxE,KAAKyE,cAJJ,gDAAF,qDAAE,IAQb,qBAAsB,SAAU7J,GACxBA,EAAGwH,OAAS,IACZpC,KAAKwE,gBACLxE,KAAKyE,gBAIjB3E,SAAU,iCACH4E,eAAW,CACVzI,OAAQ,wBAFR,IAIJ0I,UAAW,CACPC,IADO,WAEH,OAAO5E,KAAK6E,OAAOnH,KAAKiH,WAE5BG,IAJO,SAIHC,GACIA,GACA/E,KAAKM,QAAQC,KAAK,CAACzF,KAAM,aAAc0F,OAAQ,CAACrD,KAAM6C,KAAK/D,OAAOkB,QAEtE6C,KAAKM,QAAQC,KAAK,CAACzF,KAAM,eAAgB0F,OAAQ,CAACrD,KAAM6C,KAAK/D,OAAOkB,UAG5E6H,cAfM,WAgBF,OAAO,eAAIhF,KAAK/D,OAAOgJ,SAASvG,MAAK,SAACwG,EAAEC,GACpC,OAAID,EAAEzC,YAAc0C,EAAE1C,WACX,EAEH5C,KAAKuF,MAAMF,EAAEzC,YAAc5C,KAAKuF,MAAMD,EAAE1C,aACzC,EAAI,QAIvBrC,QAAS,CACLiF,WADK,WAEDrF,KAAKmE,wBAAyB,GAE5BmB,aAJD,WAIiB,wKACZ,EAAK3D,OAAOC,SAAS,sBAAuB,EAAK3F,QADrC,OAElB,EAAKkI,wBAAyB,EAC9B,EAAK7D,QAAQiF,IAAI,GAHC,8CAKtBC,aATK,WAUDxF,KAAKmE,wBAAyB,GAElCsB,UAZK,WAaDzF,KAAKoE,eAAgB,GAEzBsB,aAfK,WAgBD1F,KAAKoE,eAAgB,EACrBpE,KAAKM,QAAQiF,IAAI,IAErBI,oBAnBK,WAoBD3F,KAAKoE,eAAgB,GAEnBK,WAtBD,WAsBc,+JACf,EAAKJ,aAAc,EADJ,SAET,EAAK1C,OAAOC,SAAS,iBAAkB,EAAK3F,QAFnC,OAGf,EAAKoI,aAAc,EAHJ,8CAKbG,cA3BD,WA2BkB,+JACnB,EAAKF,aAAc,EADA,SAEb,EAAKsB,aAAL,sBAAiC,EAAKzI,KAAtC,mBAFa,OAGnB,EAAKmH,aAAc,EAHA,+CAM3BuB,MArGW,WAsGP,MAAO,CACHC,WAAYA,OACZC,kBACAH,uBO1NZ,MAAM,GAA2B,IAAgB,GAAQ,CAAC,CAAC,SAASI,KAErD,iB,gSCJTC,EAAWC,iBAAI,IAERH,EAAajG,uBAAS,WAC/B,OAAOmG,EAASlB,SAGPa,EAAY,yDAAG,WAAOO,GAAP,iGACDC,OAAIxB,IAAIuB,GAC1BE,MAAK,SAAApE,GAAQ,OAAIA,EAASxD,KAAKA,QAFZ,OACxBwH,EAASlB,MADe,kDAAH,sDAKZuB,EAAS,yDAAG,WAAOH,EAAQI,GAAf,iGACRH,OAAII,KAAKL,EAAQI,GACzBF,MAAK,SAAApE,GAEF,OADAgE,EAASlB,MAAMxE,KAAK0B,EAASxD,MACtBwD,EAASxD,QAJH,mFAAH,wDAQTgI,EAAW,yDAAG,WAAON,EAAQI,GAAf,iGACVH,OAAIM,IAAIP,EAAQI,GACxBF,MAAK,SAAApE,GACF,IAAM0E,EAAWV,EAASlB,MAAM6B,WAAU,SAAAC,GAAK,OAAIA,EAAM5L,IAAMgH,EAASxD,KAAKxD,MAE7E,OADAgL,EAASlB,MAAM4B,GAAY1E,EAASxD,KAC7BwD,EAASxD,QALD,mFAAH,wDASXqI,EAAW,yDAAG,WAAOX,EAAQY,GAAf,iGACVX,OAAIY,OAAJ,UAAcb,EAAd,YAAwBY,IAChCV,MAAK,SAAApE,GACF,IAAM0E,EAAWV,EAASlB,MAAM6B,WAAU,SAAAC,GAAK,OAAIA,EAAM5L,IAAM8L,KAG/D,OAFAd,EAASlB,MAAMkC,OAAON,EAAU,GAEzB1E,KANQ,mFAAH,yD,oCC/BxB,W,yDCAA,W,yFCOa1H,MAAM,sE,SAKEA,MAAM,kB,uZANvBE,gCAwCM,YAvCqFwC,iBAAvF,yBAGA/B,yBAkBaqD,EAAA,C,MAlBAC,OAAQvB,SAASwB,KAAMtD,aAAoBuD,KAAMzB,O,+CAAAA,OAAIO,KAAlE,CACqB0J,UAAOC,sBACpB,gBADuB7H,EACvB,EADuBA,KACvB,MAD2B,CACOzE,gBAAa,kBAAb,yBAAlCJ,gCAWM,MAXN,EAWM,CAVFD,gCAES,UAFDD,MAAM,0BAA4BmC,QAAK,mBAAEO,eAAaqC,KAA9D,CACI5E,yBAAkCU,EAAA,CAAvBC,MAAM,QADrB,KAK4B,OAAlBiE,EAAK8H,eAAa,yBAF5B3M,gCAMS,U,MALJiC,QAAK,mBAAEO,gBAAcqC,IAEtB/E,MAAM,2BAHV,CAKIG,yBAAoC2M,EAAA,CAAxBhM,MAAM,QALtB,gDAJJ,2CAaaiM,mBAAgBH,sBAC7B,gBADgC7H,EAChC,EADgCA,KAChC,MADoC,CACpC9E,gCAAwD,OAAnDyI,UAAQ3D,EAAKiI,YAAahN,MAAM,cAArC,c,KAhBR,8BAHuF0C,yBAAvFxC,gCAEM,MAFN,EAAsG,gCAsBtGC,yBAOe6C,EAAA,C,WAPQN,e,qDAAAA,eAAYO,IAAEC,MAAM,kBAA3C,C,8BACI,iBAKkB,CALlB/C,yBAKkB8M,EAAA,CAJbC,YAAWxK,gBACXC,UAAS/B,SACTmD,QAAOrB,iBACPiB,WAAUjB,kBAJf,2D,KADJ,kBASAvC,yBAOe6C,EAAA,C,WAPQN,yB,qDAAAA,yBAAsBO,IAAEC,MAAM,0BAArD,C,8BACI,iBAKoC,CALpC/C,yBAKoCgN,EAAA,CAJ/BC,SAAU1K,gBACVC,UAAS/B,SACT+C,WAAUjB,0BACV2K,UAAS3K,2BAJd,4D,KADJ,oB,MCpCAzC,gCAAI,mB,6PADRU,yBAeiB2M,EAAA,CAfDtN,MAAM,iBAAiB2L,IAAI,kBAA3C,C,8BACI,iBAAI,CAAJxF,EACAhG,yBAKaiG,EAAA,CALFnF,MAAM,W,WACJyB,WAAS6K,S,qDAAT7K,WAAS6K,SAAQtK,IACzBuD,OAAQ9D,SAAO6K,SAChBhJ,KAAK,OACLoH,IAAI,WAJR,gCAMAxL,yBAEYiG,EAAA,CAFDnF,MAAM,QAASuF,OAAQ9D,SAAO4J,OAAzC,C,8BACI,iBAA8D,CAA9DnM,yBAA8DqN,EAAA,C,WAAnC9K,WAAS4J,M,qDAAT5J,WAAS4J,MAAKrJ,KAAzC,2B,KADJ,cAGA9C,yBAGaqD,EAAA,M,8BAFT,iBAAmD,CAAnDvD,gCAAmD,UAA3CD,MAAM,MAAOmC,QAAK,8BAAEO,yCAAQ,UACpCzC,gCAAoD,UAA5CD,MAAM,WAAYmC,QAAK,8BAAEO,qCAAM,Y,eAb/C,K,8DAuBW,GACXnC,KAAM,eACN6I,WAAY,CACRqE,6BAEJnJ,MAAO,CACH8I,SAAU,CACN3I,UAAU,EACVkC,QAAS,WACL,MAAO,CACH4G,UAAU,IAAIjI,MAAOoI,cACrBC,KAAM,KACNrB,MAAO,MAInBV,OAAQ,CACJnH,UAAU,EACVF,KAAMK,SAGdgC,MAAO,CACH,SAEJ0E,MAxBW,SAwBJhH,EAAOsJ,GACV,IAAMC,EAAWlC,iBAAI,CACjB4B,UAAU,IAAIjI,MAAOoI,cACrBC,KAAM,KACNrB,MAAO,KAEL9F,EAASmF,iBAAI,IAEbmC,EAAa,SAACxB,GACXA,GAAUA,EAAMpE,aAIrB2F,EAASrD,MAAQ,CACb9J,GAAI4L,EAAM5L,GACV6M,SAAU,IAAIjI,KAAKA,KAAKuF,MAAOyB,EAAMpE,aAAcwF,cACnDC,KAAMrB,EAAMyB,WAAazB,EAAMyB,WAAWJ,KAAO,KACjDrB,MAAOA,EAAMU,eAIfgB,EAAe,WACjBH,EAASrD,MAAQ,CACb+C,UAAU,IAAIjI,MAAOoI,cACrBC,KAAM,KACNrB,MAAO,KAIT2B,EAAG,yDAAI,2GAEDJ,EAASrD,MAAM9J,GAFd,gCAGKwL,eAAY,GAAD,OAAI5H,EAAMsH,OAAV,YAAoBiC,EAASrD,MAAM9J,IAAMmN,EAASrD,OAHlE,6CAKKuB,eAAUzH,EAAMsH,OAAQiC,EAASrD,OALtC,wBAQCa,eAAa/G,EAAMsH,QARpB,QASLoC,IACAJ,EAAQM,KAAK,QAASL,EAASrD,OAV1B,yDAYD,KAAM9C,UAAqC,KAAzB,KAAMA,SAASyG,SAAiB,KAAMzG,SAASxD,KAAKsC,OAZrE,wBAaDA,EAAOgE,MAAQ,KAAM9C,SAASxD,KAAKsC,OAblC,6EAAJ,qDAmBH4H,EAAS,WACXJ,IACAJ,EAAQM,KAAK,aAWjB,OARAnH,oBACI,kBAAMzC,EAAM8I,YACZ,SAAC/M,GACGyN,EAAUzN,KAEd,CAAC2G,WAAW,IAGT,CACH6G,WACArH,SACAsH,YACAE,eACAC,OACAG,WAGRC,QA9FW,c,qBCnBf,MAAMnI,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS,KAErD,Q,aCCPjG,gCAAuD,SAApD,oDAAgD,I,GAE9CD,MAAM,iB,yBAINA,MAAM,wC,EAGXC,gCAAqE,WAAhE,8DAA0D,G,SAExBD,MAAM,4C,0GAZjDE,gCAqBM,YApBFiG,EAEAlG,gCAKM,MALN,EAKM,CAJNA,gCAEa,mBADTA,gCAAyC,OAApCyI,UAAQ9H,WAASoM,aAAtB,YAEoDpM,WAAS0N,iCAAjEpO,gCAA8H,MAA9H,EAAyE,aAAUO,6BAAEG,WAAS0N,OAAO/N,MAAM,KAAEE,6BAAEiC,WAAO,IAAtH,yCAGAtB,EAEWsB,kBAAgBmF,OAAM,4BAAjC3H,gCAMM,MANN,EAMM,CALFD,gCAIK,uCAHDC,gCAEK4H,cAAA,KAAAC,wBAFmBrF,mBAAe,SAA3B6L,EAAIC,G,gCAAhBtO,gCAEK,MAFqC8H,IAAKwG,GAAG/N,6BAC5C8N,GAAG,MADT,WAFR,uCAQApO,yBAAiHqD,EAAA,CAApGG,WAAQ,+BAAErD,QAAK,cAAeoD,YAAWhB,iBAAgB+L,WAAW,oBAAjF,0B,0DAUO,GACXlO,KAAM,wBACN+D,MAAO,CACH8I,SAAU,CACN3I,UAAU,EACVF,KAAMC,QAEVoH,OAAQ,CACJnH,UAAU,EACVF,KAAMK,SAGdgC,MAAO,CACH,UACA,YAEJ0E,MAhBW,SAgBJhH,EAAOsJ,GACV,IAAMpH,EAASmF,iBAAI,IACb+C,EAAUnJ,uBAAS,WACrB,OAAOgG,eAAWjH,EAAM8I,SAASW,WAAWR,aAE1CoB,EAAkBpJ,uBAAS,WAC7B,OAAOf,OAAOoK,OAAOpI,EAAOgE,OAAOqE,UAGjCC,EAAa,yDAAI,uHAETvC,eAAYjI,EAAMsH,OAAQtH,EAAM8I,SAAS1M,IAFhC,cAGfkN,EAAQM,KAAK,WAHE,SAIT7C,eAAa/G,EAAMsH,QAJV,8DAMXmD,eAAoB,EAAD,IANR,wBAOXvI,EAAOgE,MAAQ,KAAM9C,SAASxD,KAAKsC,OAPxB,2BAUfA,EAAOgE,MAAQ,CAACG,EAAG,KAAMqE,SAVV,yDAAJ,qDAenB,MAAO,CACHxI,SACAkI,UACAC,kBACAG,oB,UC1EZ,MAAM,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS,KAErD,QJ8CT7K,EAAS,CACX,CACI1D,KAAM,aACNU,MAAO,cACPgO,SAAU,aACVpK,UAAU,EACVC,aALJ,YAKgC,IAAboD,EAAa,EAAbA,WACX,OAAQA,EAAcqD,eAAWrD,GAAc,MAEnD3D,KAAMe,KACN4J,QAAS,EACTlP,MAAO,QAEX,CACIO,KAAM,aACNU,MAAO,OACPgO,SAAU,aACVE,YAAY,EACZtK,UAAU,EACVC,aANJ,YAMgC,IAAboD,EAAa,EAAbA,WACX,OAAQA,EAAckH,eAAWlH,GAAc,MAEnDlI,MAAO,OACPuE,KAAMe,MAEV,CACI/E,KAAM,cACNU,MAAO,QACP4D,UAAU,EACVN,KAAMK,QAEV,CACIrE,KAAM,cACNU,MAAO,OACP4D,UAAU,GAEd,CACItE,KAAM,KACNU,MAAO,GACP4D,UAAU,IAIH,GACXuE,WAAY,CACRiG,eACAC,iCAEJhL,MAAO,CACHkH,WAAY,CACR/G,UAAU,EACVF,KAAMwE,OAEV6C,OAAQ,CACJnH,UAAU,EACVF,KAAMK,SAGd0G,MAfW,SAeJhH,GACH,IAAMH,EAAOwH,iBAAI,CACbjH,MAAO,aACPC,MAAM,IAEJ4K,EAAgB5D,iBAAI,IACpB6D,EAAe7D,kBAAI,GAEnB8D,EAAgBlK,uBAAS,WAC3B,OAAOjB,EAAMkH,WAAW3D,OAAS,KAG/B6H,EAAe,SAAApD,GACjBkD,EAAahF,OAAQ,EACrB+E,EAAc/E,MAAQ8B,GAGpBqD,EAAiB,WACnBH,EAAahF,OAAQ,EACrB+E,EAAc/E,MAAQ,IAGpBZ,EAAyB+B,kBAAI,GAC7BiE,EAAgB,SAACtD,GACnBiD,EAAc/E,MAAQ8B,EACtB1C,EAAuBY,OAAQ,GAE7BqF,EAA0B,WAC5BjG,EAAuBY,OAAQ,EAC/B+E,EAAc/E,MAAQ,IAG1B,MAAO,CACHvG,OAAQ0H,iBAAI1H,GACZE,OACAoL,gBACAC,eACAC,gBACAC,eACAC,iBACA/F,yBACAgG,gBACAC,6B,UKpJZ,MAAM,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASpE,KAErD","file":"js/chunk-5b20446a.aba3b1e0.js","sourcesContent":["<template>\n    <div>\n        <header class=\"pb-4\">\n            <router-link class=\"note\" to=\"/people\">People</router-link>\n            <h1 class=\"flex justify-between items-center\">\n                <div>\n                    {{person.name}}\n                    <note>ID: {{person.id}}</note>\n                </div>\n                <router-link \n                    :to=\"`/people/${uuid}/edit`\"\n                    class=\"btn btn-xs flex-grow-0\"\n                    v-if=\"(hasPermission('people-manage') || userIsPerson(person)) || coordinatesPerson(person)\"\n                >\n                    <icon-edit width=\"16\" heigh=\"16\" />\n                </router-link>\n\n            </h1>\n            <dictionary-row label=\"Email\">\n                <template v-slot:label><strong>Email:</strong></template>\n                {{person.email}}\n            </dictionary-row>\n            <dictionary-row label=\"Institution\">\n                <template v-slot:label><strong>Institution:</strong></template>\n                {{person.institution ? person.institution.name : null}}\n            </dictionary-row>\n        </header>\n        <tabs-container>\n            <tab-item label=\"groups\">\n                <h2>Groups</h2>\n                <membership-list :person=\"person\"></membership-list>\n            </tab-item>\n            <tab-item label=\"Info\">\n                <h2>Profile</h2>\n                <person-profile :person=\"person\"></person-profile>\n            </tab-item>\n            <tab-item label=\"Conflict of Interest\">\n                <coi-list :person=\"person\"></coi-list>\n            </tab-item>\n            <!-- <tab-item label=\"Documents\">\n                docs\n            </tab-item> -->\n            <!-- <tab-item label=\"Training &amp; Attestations\">\n            </tab-item> -->\n\n            <tab-item label=\"Email Log\" :visible=\"hasPermission('people-manage') || userIsPerson(person) || coordinatesPerson(person)\">\n                <header class=\"flex space-x-4 items-center\">\n                    <h2>Mail sent to {{person.first_name}}</h2>\n                    <refresh-button :loading=\"mailLoading\" @click=\"getMailLog\"/>\n                </header>\n                <person-mail-log :person=\"person\" :mail=\"sortedMailLog\"></person-mail-log>\n            </tab-item>\n\n            <tab-item label=\"Log\" :visible=\"hasPermission('people-manage') || coordinatesPerson(person)\">\n                <div class=\"flex space-x-4 items-center\">\n                    <h2>Log Entries</h2>\n                    <refresh-button :loading=\"logsLoading\" @click=\"getLogEntries\"/>\n                </div>\n                <activity-log\n                    :log-entries=\"logEntries\"\n                    :api-url=\"`/api/people/${person.uuid}/activity-logs`\"\n                    v-bind:log-updated=\"getLogEntries\"\n                ></activity-log>\n            </tab-item> \n\n            <tab-item label=\"Admin\" :visible=\"hasPermission('people-manage')\">\n                <section class=\"border my-4 p-4 bg-red-100 border-red-200 rounded\">\n                <h2 class=\"mb-4 text-red-800\">\n                    Here be dragons. Proceed with caution.\n                </h2>\n                <p><button class=\"btn btn red\" @click=\"initMerge\">Merge Person into another</button></p>\n                <p><button class=\"btn btn red\" @click=\"initDelete\">Delete Person</button></p>\n                </section>\n            </tab-item>\n\n        </tabs-container>\n\n        <teleport to=\"body\">\n            <modal-dialog v-model=\"showModal\" :title=\"$route.meta.title\">\n                <router-view name=\"modal\"></router-view>\n            </modal-dialog>\n            <modal-dialog :title=\"`You are about to delete ${person.name}`\" v-model=\"showDeleteConfirmation\">\n                <p>You are about to delete this person.  All related data will also be deleted including:</p>\n                <ul class=\"list-disc pl-6\">\n                    <li>User record, system roles, and system permissions (if account is activated)</li>\n                    <li>Invite</li>\n                    <li>Group Memberships and group roles (if any)</li>\n                </ul>\n                <div class=\"border my-4 px-2 py-1 font-bold bg-red-100 border-red-200 rounded text-red-800\">\n                    This cannot be undone.\n                </div>\n                <button-row \n                    :submit-text=\"`Delete ${person.name}`\" \n                    @submitted=\"commitDelete\"  \n                    @canceled=\"cancelDelete\" \n                    submit-variant=\"red\"\n                />\n            </modal-dialog>\n            <modal-dialog :title=\"`Merge ${person.name} into another person`\" v-model=\"showMergeForm\">\n                <person-merge-form :obsolete=\"person\" @saved=\"handleMerged\" @canceled=\"handleMergeCanceled\"></person-merge-form>\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex'\nimport {formatDateTime as formatDate} from '@/date_utils'\nimport { logEntries, fetchEntries } from \"@/adapters/log_entry_repository\";\n\nimport TabsContainer from '../TabsContainer.vue'\nimport MembershipList from './MembershipList.vue'\nimport PersonProfile from '@/components/people/PersonProfile'\nimport PersonMergeForm from '@/components/people/PersonMergeForm'\nimport CoiList from '@/components/people/CoiList'\nimport ActivityLog from \"@/components/log_entries/ActivityLog\";\nimport PersonMailLog from \"@/components/people/PersonMailLog\";\n\n\nexport default {\n    name: 'PersonDetail',\n    components: { \n        TabsContainer,\n        MembershipList,\n        PersonProfile,\n        PersonMergeForm,\n        CoiList,\n        ActivityLog,\n        PersonMailLog,\n    },\n    props: {\n        uuid: {\n            required: true,\n            type: String\n        }\n    },\n    data() {\n        return {\n            showDeleteConfirmation: false,\n            showMergeForm: false,\n            mailLoading: false,\n            logsLoading: false,\n        }\n    },\n    watch: {\n        uuid: {\n            immediate: true,\n            handler: async function () {\n                await this.$store.dispatch('people/getPerson', {uuid: this.uuid});\n                if (this.coordinatesPerson(this.person)) {\n                    this.getLogEntries();\n                    this.getMailLog();\n                }\n            }\n        },\n        'person.memberships': function (to) {\n            if (to.length > 0) {\n                this.getLogEntries();\n                this.getMailLog();\n            }\n        }\n    },\n    computed: {\n        ...mapGetters({\n            person: 'people/currentItem'\n        }),\n        showModal: {\n            get() {\n                return this.$route.meta.showModal\n            },\n            set(value) {\n                if (value) {\n                    this.$router.push({name: 'PersonEdit', params: {uuid: this.person.uuid}})\n                }\n                this.$router.push({name: 'PersonDetail', params: {uuid: this.person.uuid}})\n            }\n        },\n        sortedMailLog () {\n            return [...this.person.mailLog].sort((a,b) => {\n                if (a.created_at == b.created_at) {\n                    return 0;\n                }\n                return (Date.parse(a.created_at) > Date.parse(b.created_at))\n                    ? -1 : 1;\n            })\n        },\n    },\n    methods: {\n        initDelete () {\n            this.showDeleteConfirmation = true;\n        },\n        async commitDelete () {\n            await this.$store.dispatch('people/deletePerson', this.person);\n            this.showDeleteConfirmation = false;\n            this.$router.go(-1);\n        },\n        cancelDelete () {\n            this.showDeleteConfirmation = false;\n        },\n        initMerge() {\n            this.showMergeForm = true;\n        },\n        handleMerged () {\n            this.showMergeForm = false;\n            this.$router.go(-1);\n        },\n        handleMergeCanceled () {\n            this.showMergeForm = false;\n        },\n        async getMailLog() {\n            this.mailLoading = true;\n            await this.$store.dispatch('people/getMail', this.person);\n            this.mailLoading = false;\n        },\n        async getLogEntries () {\n            this.logsLoading = true;\n            await this.fetchEntries(`/api/people/${this.uuid}/activity-logs`);\n            this.logsLoading = false;\n        }\n    },\n    setup() {\n        return {\n            formatDate: formatDate,\n            logEntries,\n            fetchEntries\n        }\n    },\n}\n</script>","<template>\n    <div>\n        <data-table \n            :fields=\"fields\" \n            :data=\"memberships\" \n            v-model:sort=\"sort\"\n            :rowClickHandler=\"goToGroup\"\n            :row-class=\"() => 'cursor-pointer'\"\n        ></data-table>\n    </div>\n</template>\n<script>\nimport {Group} from '@/domain'\n\nexport default {\n    name: 'MembershipList',\n    props: {\n        person: {\n            type: Object,\n            required: true\n        }\n    },\n    data() {\n        return {\n            sort: {\n                field: 'group.displayName',\n                desc: false\n            },\n            fields: [\n                {\n                    name: 'group.displayName',\n                    type: String,\n                    sortable: true,\n                    label: 'Name'\n                },\n                {\n                    name: 'group.type.name',\n                    type: String,\n                    sortable: true,\n                    label: 'Type'\n                },\n                {\n                    name: 'roles',\n                    type: String,\n                    sortable: false,\n                    label: 'Roles',\n                    resolveValue (item) {\n                        return item.roles.map(r => r.name).join(', ');\n                    }\n                },\n                {\n                    name: 'permissions',\n                    type: String,\n                    sortable: false,\n                    label: 'Permissions',\n                    resolveValue (item) {\n                        return item.permissions.map(p => p.name).join(', ');\n                    }\n                },\n                {\n                    name: 'start_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Started'\n                },\n                {\n                    name: 'end_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Ended'\n                }\n\n\n            ]\n        }\n    },\n    computed: {\n        memberships () {\n            if (this.person.memberships) {\n                return this.person.memberships.map(m => {\n                    if (m.group) {\n                        m.group = new Group(m.group);\n                    }\n                    return m;\n                })\n            }\n\n            return [];\n        }\n    },\n    methods: {\n        goToGroup(item) {\n            this.$router.push({name: 'GroupDetail', params: {uuid: item.group.uuid}})\n        }\n\n    }\n}\n</script>","import { render } from \"./MembershipList.vue?vue&type=template&id=7757f912\"\nimport script from \"./MembershipList.vue?vue&type=script&lang=js\"\nexport * from \"./MembershipList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>\n        <p class=\"mb-8\">\n            Merging peple will do the following:\n            <ol class=\"list-decimal ml-6\">\n                <li>Add the authoritative person to all groups of which the obsolete person is a member.</li>\n                <li>Delete the obsolete person, their memberships, their invite, and their user account (if activated).</li>\n            </ol>\n        </p>\n        <input-row label=\"Merge\" vertical>\n            <template v-slot:label>\n                Merge <note class=\"inline-block\">(Obsolete person that will be deleted)</note>\n            </template>\n            <person-search-select v-model=\"obsoleteCopy\" :allow-add=\"false\"></person-search-select>\n            \n        </input-row>\n        <input-row label=\"Into\" :errors=\"errors.authority_id\" vertical>\n            <template v-slot:label>Into <note class=\"inline\">(Authoritative person)</note></template>\n            <person-search-select v-model=\"authorityCopy\" :allow-add=\"false\"></person-search-select>\n        </input-row>\n        <button-row submit-text=\"Merge\" @submitted=\"commitMerge\" @canceled=\"cancelMerge\" />\n    </div>\n</template>\n<script>\nimport { isValidationError } from '@/http';\n\nexport default {\n    name: 'PersonMergeForm',\n    props: {\n        authority: {\n            type: Object,\n            required: false\n        },\n        obsolete: {\n            type: Object,\n            default: () => ({})\n        }\n    },\n    emits: [\n        'saved',\n        'canceled'\n    ],\n    data() {\n        return {\n            authorityCopy: null,\n            obsoleteCopy: null,\n            errors: {}\n        }\n    },\n    watch: {\n        authority: {\n            immediate: true,\n            handler (to) {\n                if (!to) {\n                    return;\n                }\n                this.authorityCopy = {...to.attributes}\n            }\n        },\n        obsolete: {\n            immediate: true,\n            handler (to) {\n                if (!to) {\n                    return;\n                }\n                this.obsoleteCopy = {...to.attributes};\n            }\n        }\n    },\n    methods: {\n        async commitMerge () {\n            try {\n                this.errors = {};\n                await this.$store.dispatch(\n                    'people/mergePeople', \n                    {\n                        authority: this.authorityCopy, \n                        obsolete: this.obsoleteCopy\n                    }\n                );\n                this.authorityId = null;\n                this.obsoleteIds = null;\n                this.$emit('saved');\n            } catch (error) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors;\n                    return;\n                }\n            }\n        },\n        cancelMerge () {\n            this.authorityId = null;\n            this.obsoleteId = null;\n            this.$emit('canceled');\n        }\n    }\n}\n</script>","import { render } from \"./PersonMergeForm.vue?vue&type=template&id=dd7c1228\"\nimport script from \"./PersonMergeForm.vue?vue&type=script&lang=js\"\nexport * from \"./PersonMergeForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>\n        <div v-if=\"mail.length == 0\" class=\"well\">\n            {{person.first_name}} has not received any mail via the GPM.\n        </div>\n        <div class=\"w-3/4 my-4 p-4 border\" v-for=\"email in mail\" :key=\"email.id\">\n            <span class=\"text-gray-600\">Sent at</span> {{formatDate(email.created_at)}}\n            <div><span class=\"text-gray-600\">To:</span> {{email.to.map(i => i.address).join(', ')}}</div>\n            <div v-if=\"email.cc\"><span class=\"text-gray-600\">CC:</span> {{email.cc.map(i => i.address).join(', ')}}</div>\n            <div v-if=\"email.bcc\"><span class=\"text-gray-600\">BCC:</span> {{email.bcc.map(i => i.address).join(', ')}}</div>\n            <div class=\"mt-1\"><span class=\"text-gray-600\">Subject:</span> {{email.subject}}</div>\n            <hr>\n            <div v-html=\"email.body\"></div>\n            <hr>\n            <button v-if=\"hasPermission('people-manage') || coordinatesPerson(person)\"\n                @click.stop=\"initResend(email)\"\n                class=\"btn btn-xs\" \n            >\n                Resend\n            </button>\n        </div>\n        <teleport to=\"body\">\n            <modal-dialog title=\"Resend Email\" v-model=\"showResendDialog\">\n                <custom-email-form :mail-data=\"currentEmail\" @sent=\"cleanupResend\" @canceled=\"cleanupResend\"></custom-email-form>\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nexport default {\n    name: 'ComponentName',\n    props: {\n        person: {\n            type: Object,\n            required: true\n        },\n        mail: {\n            type: Array,\n            required: true\n        }\n    },\n    data() {\n        return {\n            currentEmail: {},\n            showResendDialog: null,\n        }\n    },\n    computed: {\n\n    },\n    methods: {\n        initResend (email) {\n            this.currentEmail = {...email};\n            this.showResendDialog = true;\n        },\n        cleanupResend () {\n            this.currentEmail = {},\n            this.showResendDialog = false;\n            this.$store.dispatch('people/getMail', this.person);\n        },\n    }\n}\n</script>","import { render } from \"./PersonMailLog.vue?vue&type=template&id=0e975ef4\"\nimport script from \"./PersonMailLog.vue?vue&type=script&lang=js\"\nexport * from \"./PersonMailLog.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PersonDetail.vue?vue&type=template&id=7abb0828\"\nimport script from \"./PersonDetail.vue?vue&type=script&lang=js\"\nexport * from \"./PersonDetail.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import {ref, computed} from 'vue';\nimport api from '@/http/api'\n\nconst _entries = ref([]);\n\nexport const logEntries = computed(() => {\n    return _entries.value;\n});\n\nexport const fetchEntries = async (apiUrl) => {\n    _entries.value = await api.get(apiUrl)\n        .then(response => response.data.data);\n}\n\nexport const saveEntry = async (apiUrl, entryData) => {\n    return await api.post(apiUrl, entryData)\n        .then(response => {\n            _entries.value.push(response.data);\n            return response.data\n        });\n}\n\nexport const updateEntry = async (apiUrl, entryData) => {\n    return await api.put(apiUrl, entryData)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == response.data.id);\n            _entries.value[entryIdx] = response.data;\n            return response.data\n        });\n}\n\nexport const deleteEntry = async (apiUrl, entryId) => {\n    return await api.delete(`${apiUrl}/${entryId}`)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == entryId);\n            _entries.value.splice(entryIdx, 1);\n\n            return response;\n        });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ActivityLogDeleteConfirmation.vue?vue&type=style&index=0&id=33176996&lang=postcss&scope=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ActivityLog.vue?vue&type=style&index=0&id=4fd147d2&lang=postcss\"","<style lang=\"postcss\">\n    .links-blue a {\n        @apply text-blue-500;\n    }\n</style>\n<template>\n    <div>\n        <div class=\"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200\" v-if=\"!hasLogEntries\">\n            No log entries to display\n        </div>\n        <data-table :fields=\"fields\" :data=\"logEntries\" v-model:sort=\"sort\" v-else>\n            <template v-slot:cell-id=\"{item}\">\n                <div class=\"flex space-x-1\" v-if=\"hasPermission('groups-manage')\">\n                    <button class=\"btn btn-xs inline-block\"  @click=\"editLogEntry(item)\">\n                        <icon-edit width=\"12\"></icon-edit>\n                    </button>\n                    <button \n                        @click=\"confirmDelete(item)\"\n                        v-if=\"item.activity_type === null\"\n                        class=\"btn btn-xs inline-block\"\n                    >\n                        <icon-trash width=\"12\"></icon-trash>\n                    </button>\n                </div>\n            </template>\n            <template v-slot:cell-description=\"{item}\">\n                <div v-html=\"item.description\" class=\"links-blue\"></div>\n            </template>\n        </data-table>\n        <modal-dialog v-model=\"editingEntry\" title=\"Edit log entry\">\n            <log-entry-form \n                :log-entry=\"selectedEntry\" \n                :api-url=\"apiUrl\"\n                @saved=\"closeEntryForm\"\n                @canceled=\"closeEntryForm\"\n            ></log-entry-form>\n        </modal-dialog>\n\n        <modal-dialog v-model=\"showDeleteConfirmation\" title=\"Delete this log entry?\">\n            <activity-log-delete-confirmation \n                :logEntry=\"selectedEntry\" \n                :api-url=\"apiUrl\"\n                @canceled=\"closeDeleteConfirmation\"\n                @deleted=\"closeDeleteConfirmation\"\n            ></activity-log-delete-confirmation>\n        </modal-dialog>\n    </div>\n</template>\n<script>\nimport { ref, computed } from 'vue'\n\nimport LogEntryForm from '@/components/log_entries/ActivityLogEntryForm'\nimport ActivityLogDeleteConfirmation from '@/components/log_entries/ActivityLogDeleteConfirmation'\nimport {formatDate, formatTime} from '@/date_utils'\n\nconst fields = [\n    {\n        name: 'created_at',\n        label: 'Date & Time',\n        sortName: 'created_at',\n        sortable: true,\n        resolveValue ({created_at}) {\n            return (created_at) ? formatDate(created_at) : null;\n        },\n        type: Date,\n        colspan: 2,\n        class: 'w-16'\n    },\n    {\n        name: 'created_at',\n        label: 'Time',\n        sortName: 'created_at',\n        hideHeader: true,\n        sortable: false,\n        resolveValue ({created_at}) {\n            return (created_at) ? formatTime(created_at) : null;\n        },\n        class: \"w-28\",\n        type: Date,\n    },\n    {\n        name: 'description',\n        label: 'Entry',\n        sortable: true,\n        type: String\n    },\n    {\n        name: 'causer.name',\n        label: 'User',\n        sortable: true\n    },\n    {\n        name: 'id',\n        label: '',\n        sortable: false,\n    }\n];\n\nexport default {\n    components: {\n        LogEntryForm,\n        ActivityLogDeleteConfirmation\n    },\n    props: {\n        logEntries: {\n            required: true,\n            type: Array,\n        },\n        apiUrl: {\n            required: true,\n            type: String\n        }\n    },\n    setup (props) {\n        const sort = ref({\n            field: 'created_at',\n            desc: true\n        });\n        const selectedEntry = ref({});\n        const editingEntry = ref(false);\n\n        const hasLogEntries = computed(() => {\n            return props.logEntries.length > 0;\n        });\n\n        const editLogEntry = entry => {\n            editingEntry.value = true;\n            selectedEntry.value = entry;\n        };\n\n        const closeEntryForm = () => {\n            editingEntry.value = false;\n            selectedEntry.value = {};\n        }\n\n        const showDeleteConfirmation = ref(false);\n        const confirmDelete = (entry) => {\n            selectedEntry.value = entry;\n            showDeleteConfirmation.value = true;\n        }\n        const closeDeleteConfirmation = () => {\n            showDeleteConfirmation.value = false;\n            selectedEntry.value = {};\n        }\n\n        return {\n            fields: ref(fields),\n            sort,\n            selectedEntry,\n            editingEntry,\n            hasLogEntries,\n            editLogEntry,\n            closeEntryForm,\n            showDeleteConfirmation,\n            confirmDelete,\n            closeDeleteConfirmation\n        }\n    }\n}\n</script>","<template>\n    <form-container class=\"log-entry-form\" ref=\"form-container\">\n        <hr>\n        <input-row label=\"Log Date\" \n            v-model=\"newEntry.log_date\" \n            :errors=\"errors.log_date\" \n            type=\"date\" \n            ref=\"logdate\"\n        ></input-row>\n        <input-row label=\"Entry\" :errors=\"errors.entry\">\n            <rich-text-editor v-model=\"newEntry.entry\"></rich-text-editor>\n        </input-row>\n        <button-row>\n            <button class=\"btn\" @click=\"cancel\">Cancel</button>\n            <button class=\"btn blue\" @click=\"save\">Save</button>\n        </button-row>\n    </form-container>\n</template>\n<script>\nimport { ref, watch } from 'vue'\nimport RichTextEditor from '@/components/forms/RichTextEditor'\nimport {saveEntry, updateEntry, fetchEntries} from '@/adapters/log_entry_repository'\n\n\nexport default {\n    name: 'LogEntryForm',\n    components: {\n        RichTextEditor\n    },\n    props: {\n        logEntry: {\n            required: false,\n            default: () => {\n                return {\n                    log_date: new Date().toISOString(),\n                    step: null,\n                    entry: '',\n                }\n            }\n        },\n        apiUrl: {\n            required: true,\n            type: String\n        }\n    },\n    emits: [\n        'saved',\n    ],\n    setup (props, context) {\n        const newEntry = ref({\n            log_date: new Date().toISOString(),\n            step: null,\n            entry: '',\n        });\n        const errors = ref({});\n\n        const syncEntry =  (entry) => {\n            if (!entry || !entry.created_at) {\n                return;\n            }\n\n            newEntry.value = {\n                id: entry.id,\n                log_date: new Date(Date.parse((entry.created_at))).toISOString(),\n                step: entry.properties ? entry.properties.step : null,\n                entry: entry.description\n            }\n        }\n\n        const initNewEntry = () => {\n            newEntry.value = {\n                log_date: new Date().toISOString(),\n                step: null,\n                entry: ''\n            }\n        }\n\n        const save = async () => {\n            try {\n                if (newEntry.value.id) {\n                    await updateEntry(`${props.apiUrl}/${newEntry.value.id}`, newEntry.value);\n                } else {\n                    await saveEntry(props.apiUrl, newEntry.value);\n                }\n\n                await fetchEntries(props.apiUrl);\n                initNewEntry();\n                context.emit('saved', newEntry.value);\n            } catch (error) {\n                if (error.response && error.response.status == 422 && error.response.data.errors) {\n                    errors.value = error.response.data.errors\n                    return;\n                }\n            }\n        };\n\n        const cancel = () => {\n            initNewEntry();\n            context.emit('canceled');\n        }\n\n        watch(\n            () => props.logEntry, \n            (to) => {\n                syncEntry(to)\n            },\n            {immediate: true}\n        );\n\n        return {\n            newEntry,\n            errors,\n            syncEntry,\n            initNewEntry,\n            save,\n            cancel,\n        }\n    },\n    mounted() {\n        // this.$el.querySelectorAll('input')[0].focus();\n    }\n}\n</script>","import { render } from \"./ActivityLogEntryForm.vue?vue&type=template&id=3a21cbe5\"\nimport script from \"./ActivityLogEntryForm.vue?vue&type=script&lang=js\"\nexport * from \"./ActivityLogEntryForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n<template>\n    <div>\n        <p>You are about to delete the following log entry:</p>\n\n        <div class=\"border-y py-2\">\n        <blockquote>\n            <div v-html=\"logEntry.description\"></div>\n        </blockquote>\n        <div class=\"ml-4 mt-2 mb-4 text-gray-700 text-sm\" v-if=\"logEntry.causer\">Logged by {{logEntry.causer.name}}, {{logDate}}</div>\n        </div>\n\n        <div>This can not be undone. Are you sure you want to continue?</div>\n\n        <div v-if=\"flattenedErrors.length > 0\" class=\"bg-red-200 text-red-900 rounded p-2 my-2\">\n            <ul>\n                <li v-for=\"(err,idx) in flattenedErrors\" :key=\"idx\">\n                    {{err}}\n                </li>\n            </ul> \n        </div>\n        \n        <button-row @canceled=\"$emit('canceled')\" @submitted=\"deleteLogEntry\" submitText=\"Delete Log Entry\"></button-row>\n    </div>\n</template>\n<script>\nimport {ref, computed} from 'vue';\nimport { formatDate } from '@/date_utils';\nimport is_validation_error from '@/http/is_validation_error';\nimport { fetchEntries, deleteEntry } from '@/adapters/log_entry_repository'\n\n\nexport default {\n    name: 'ConfirmDeleteLogEntry',\n    props: {\n        logEntry: {\n            required: true,\n            type: Object,\n        },\n        apiUrl: {\n            required: true,\n            type: String\n        }\n    },\n    emits: [\n        'deleted',\n        'canceled'\n    ],\n    setup (props, context) {\n        const errors = ref({});\n        const logDate = computed(() => {\n            return formatDate(props.logEntry.properties.log_date)\n        });\n        const flattenedErrors = computed(() => {\n            return Object.values(errors.value).flat();\n        });\n\n        const deleteLogEntry = async () => {\n            try {\n                await deleteEntry(props.apiUrl, props.logEntry.id);\n                context.emit('deleted')\n                await fetchEntries(props.apiUrl);\n            } catch (error) {\n                if (is_validation_error(error)) {\n                    errors.value = error.response.data.errors;\n                    return;\n                }\n                errors.value = {a: error.message};\n            }\n        }\n\n\n        return {\n            errors,\n            logDate,\n            flattenedErrors,\n            deleteLogEntry\n        }\n    }\n}\n</script>","import { render } from \"./ActivityLogDeleteConfirmation.vue?vue&type=template&id=33176996\"\nimport script from \"./ActivityLogDeleteConfirmation.vue?vue&type=script&lang=js\"\nexport * from \"./ActivityLogDeleteConfirmation.vue?vue&type=script&lang=js\"\n\nimport \"./ActivityLogDeleteConfirmation.vue?vue&type=style&index=0&id=33176996&lang=postcss&scope=true\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ActivityLog.vue?vue&type=template&id=4fd147d2\"\nimport script from \"./ActivityLog.vue?vue&type=script&lang=js\"\nexport * from \"./ActivityLog.vue?vue&type=script&lang=js\"\n\nimport \"./ActivityLog.vue?vue&type=style&index=0&id=4fd147d2&lang=postcss\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}