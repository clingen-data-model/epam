{"version":3,"sources":["webpack:///./src/composables/router_aware_sort_and_filter.js","webpack:///./src/views/SummaryGcep.vue","webpack:///./src/views/SummaryGcep.vue?7d22","webpack:///./src/views/SummaryVcep.vue","webpack:///./src/views/SummaryVcep.vue?b198","webpack:///./src/components/applications/ApplicationsSummaryTable.vue","webpack:///./src/components/applications/ApplicationsSummaryTable.vue?43d0"],"names":["defaultSort","router","useRouter","route","useRoute","console","log","field","desc","sort","computed","immediate","get","Object","keys","query","includes","Boolean","parseInt","set","sortObj","newSortQuery","newQuery","replace","path","filter","value","currentQuery","currentPath","updatedQuery","ep-type-id","name","components","ApplicationsSummaryTable","render","class","type","placeholder","showCompleted","label","data","filteredData","fields","selectedFields","filter-term","row-click-handler","goToApplication","row-class","style","remainingHeight","ref","cell-contacts","item","contacts","c","key","id","href","email","cell-latest_log_entry_description","cell-latest_pending_next_action_entry","props","epTypeId","Number","default","String","sortable","resolveValue","cdwg","isCompleted","current_step","resolveSort","Array","step","this","Date","applications","expert_panel_type_id","date_completed","$route","$router","stepsToShow","showAllInfo","newValue","height","methods","getApplications","params","with","where","length","$store","dispatch","push","uuid","mounted","setup"],"mappings":"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","file":"js/application-summary.e4ca7e61.js","sourcesContent":["import { useRouter, useRoute } from 'vue-router'\nimport {computed} from 'vue'\n\nexport default function (defaultSort = null) {\n    const router = useRouter()\n    const route = useRoute()\n    if (!defaultSort){\n        console.log('Warning: defaultSort is deprecated.  Please provide a sort object: {field: \"fieldname\", desc: boolean}')\n        defaultSort = (defaultSort) ? defaultSort : {field: 'name', desc: false}\n    }\n    \n    const sort = computed({\n        immediate: true,\n        get() {\n            if (Object.keys(route.query).includes('sort-field')) {\n                return {\n                    field: route.query['sort-field'],\n                    desc: Boolean(parseInt(route.query['sort-desc']))\n                }\n            }\n            return defaultSort;\n        },\n        set(sortObj) {\n            const newSortQuery = {'sort-field': sortObj.field, 'sort-desc': sortObj.desc ? 1 : 0}\n    \n            const newQuery = {\n                ...route.query, \n                ...newSortQuery\n            };\n    \n            router.replace({path: route.path, query: newQuery})\n        }\n    });\n    \n    const filter = computed({\n        set(value) {\n            let currentQuery = route.query;\n            let currentPath = route.path;\n    \n            let updatedQuery = {...currentQuery};\n    \n            if (!value) {\n                delete updatedQuery.filter;\n            } else {\n                updatedQuery = {...currentQuery, ...{'filter': value} };\n            }\n    \n            router.replace({path: currentPath, query: updatedQuery})\n        },\n        get() {\n            return route.query.filter\n        },\n        immediate: true\n    });\n\n    return {\n        sort,\n        filter\n    }\n}\n","<template>\n    <div>\n        <applications-summary-table :ep-type-id=\"1\"></applications-summary-table>\n    </div>\n</template>\n<script>\nimport ApplicationsSummaryTable from '@/components/applications/ApplicationsSummaryTable'\n\nexport default {\n    name: 'GcepsSummary',\n    components: {\n        ApplicationsSummaryTable\n    },\n}\n</script>","import { render } from \"./SummaryGcep.vue?vue&type=template&id=182a980a\"\nimport script from \"./SummaryGcep.vue?vue&type=script&lang=js\"\nexport * from \"./SummaryGcep.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n    <div>\n        <applications-summary-table :ep-type-id=\"2\"></applications-summary-table>\n    </div>\n</template>\n<script>\nimport ApplicationsSummaryTable from '@/components/applications/ApplicationsSummaryTable'\n\nexport default {\n    name: 'GcepsSummary',\n    components: {\n        ApplicationsSummaryTable\n    },\n}\n</script>","import { render } from \"./SummaryVcep.vue?vue&type=template&id=58a89ca9\"\nimport script from \"./SummaryVcep.vue?vue&type=script&lang=js\"\nexport * from \"./SummaryVcep.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n    <div>\n        <div class=\"flex justify-between\">\n            <div class=\"mb-1 flex space-x-2\">\n                <label>Filter: <input type=\"text\" class=\"sm\" v-model=\"filter\" placeholder=\"filter\"></label>\n                <checkbox \n                    v-model=\"showCompleted\"\n                    label=\"Show completed\"\n                />\n            </div>\n        </div>\n        <data-table \n            :data=\"filteredData\" \n            :fields=\"selectedFields\" \n            :filter-term=\"filter\" \n            :row-click-handler=\"goToApplication\"\n            row-class=\"cursor-pointer\"\n            v-model:sort=\"sort\"\n            :style=\"remainingHeight\"\n            class=\"overflow-auto text-xs\"\n            ref=\"table\"\n        >\n            <template v-slot:cell-contacts=\"{item}\">\n                <ul>\n                    <li v-for=\"c in item.contacts\" :key=\"c.id\">\n                        <small><a :href=\"`mailto:${c.email}`\" class=\"text-blue-500\">{{c.name}}</a></small>\n                    </li>\n                </ul>\n            </template>\n            <template v-slot:cell-latest_log_entry_description=\"{value}\">\n                <div v-html=\"value\"></div>\n            </template>\n            <template v-slot:cell-latest_pending_next_action_entry=\"{value}\">\n                <div v-html=\"value\"></div>\n            </template>\n        </data-table>\n    </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex'\nimport sortAndFilter from '@/composables/router_aware_sort_and_filter'\n\nexport default {\n    name: 'SummaryVceps',\n    components: {\n    },\n    props: {\n        epTypeId: {\n            type: Number,\n            default: null\n        }\n    },\n    data() {\n        return {\n            fields: [\n                {\n                    name: 'name',\n                    label: 'Name',\n                    type: String,\n                    sortable: true\n                },\n                {\n                    name: 'cdwg.name',\n                    label: 'CDWG',\n                    type: String,\n                    sortable: true,\n                    resolveValue (item) {\n                        return item.cdwg ? item.cdwg.name : '';\n                    }\n                },\n                {\n                    name: 'current_step',\n                    label: 'Step',\n                    type: Number,\n                    sortable: true,\n                    resolveValue (item) {\n                        return item.isCompleted ? 'Completed' : item.current_step\n                    },\n                    resolveSort (item) {\n                        return item.isCompleted ? 5 : item.current_step\n                    }\n                },\n                {\n                    name: 'contacts',\n                    label: 'Contacts',\n                    type: Array,\n                    sortable: false,\n                    class: ['min-w-40'],\n                    step: 1\n                },\n                {\n                    name: 'first_scope_document.date_received',\n                    label: this.epTypeId == 2 ? 'Step 1 Received' : 'Application Received',\n                    type: Date,\n                    sortable: true,\n                    class: ['min-w-28'],\n                    step: 1\n\n                },\n                {\n                    name: 'approval_dates.step 1',\n                    label: this.epTypeId == 2 ? 'Step 1 Approved' : 'Application Approved',\n                    type: Date,\n                    sortable: true,\n                    class: ['min-w-28'],\n                    step: 1\n                },\n                {\n                    name: 'approval_dates.step 2',\n                    label: 'Step 2 Approved',\n                    type: Date,\n                    sortable: true,\n                    class: ['min-w-28'],\n                    step: 2\n                },\n                {\n                    name: 'approval_dates.step 3',\n                    label: 'Step 3 Approved',\n                    type: Date,\n                    sortable: true,\n                    class: ['min-w-28'],\n                    step: 3\n                },\n                {\n                    name: 'first_final_document.date_received',\n                    label: 'Step 4 Received',\n                    type: Date,\n                    sortable: true,\n                    class: ['min-w-28'],\n                    step: 4\n                },\n                {\n                    name: 'approval_dates.step 4',\n                    label: 'Step 4 Approved',\n                    type: Date,\n                    sortable: true,\n                    class: ['min-w-28'],\n                    step: 4\n                }\n            ]\n        }\n    },\n    computed: {\n        ...mapGetters({\n            applications: 'applications/all'\n        }),\n        filteredData() {\n            return this.applications\n                .filter(item => !this.epTypeId || item.expert_panel_type_id == this.epTypeId)\n                .filter(item => {\n                    if (!this.showCompleted) {\n                        return item.date_completed == null;\n                    }\n                    return true;\n                })\n        },\n        showCompleted: {\n            set(value) {\n                let currentQuery = this.$route.query;\n                let currentPath = this.$route.path;\n                \n                let updatedQuery = {...currentQuery};\n\n                if (!value) {\n                    delete updatedQuery['show-completed'];\n                } else {\n                    updatedQuery = {...currentQuery, ...{'show-completed': 1} };\n                }\n\n                this.$router.replace({path: currentPath, query: updatedQuery})\n            },\n            get() {\n                return Boolean(parseInt(this.$route.query['show-completed']))\n            },\n            immediate: true\n        },\n        selectedFields() {\n            const stepsToShow = this.epTypeId == 2 ? [1,2,3,4] : [1]\n            return this.fields.filter(field => !field.step || stepsToShow.includes(field.step))\n        },\n        showAllInfo: {\n            immediate: true,\n                get() {\n                    if (Object.keys(this.$route.query).includes('showAllInfo')) {\n                        return this.$route.query.showAllInfo\n                    }\n                    return 0\n                },\n                set(newValue) {\n                    const newQuery = {...this.$route.query};\n                    newQuery.showAllInfo = newValue\n\n                    this.$router.replace({path: this.$route.path, query: newQuery})\n                }            \n        },\n        remainingHeight () {\n            return {height: 'calc(100vh - 220px)'}\n        }\n    },\n    methods: {\n\n        getApplications () {\n            const params = {\n                with: [\n                    'latestLogEntry',\n                    'latestPendingNextAction',\n                    'type',\n                    'contacts',\n                    'firstScopeDocument',\n                    'firstFinalDocument'\n                ],\n            }\n\n            const where = {};\n\n            if (Object.keys(where).length > 0) {\n                params.where = where;\n            }\n\n            this.$store.dispatch('applications/getApplications', params);\n        },\n        goToApplication (item) {\n            this.$router.push({name: 'ApplicationDetail', params: {uuid: item.uuid}})\n        },\n    },\n    mounted () {\n        this.getApplications()\n    },\n    setup() {\n        const {sort, filter} = sortAndFilter();\n        // const showAllInfo = computedQueryParam('showAllInfo');\n\n        return {\n            sort,\n            filter,\n            // showAllInfo\n        }\n    }\n}\n</script>","import { render } from \"./ApplicationsSummaryTable.vue?vue&type=template&id=55a0d156\"\nimport script from \"./ApplicationsSummaryTable.vue?vue&type=script&lang=js\"\nexport * from \"./ApplicationsSummaryTable.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}