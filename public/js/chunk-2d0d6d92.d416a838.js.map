{"version":3,"sources":["webpack:///./src/components/people/PersonDetail.vue","webpack:///./src/components/people/MembershipList.vue","webpack:///./src/components/people/MembershipList.vue?3648","webpack:///./src/components/people/PersonMergeForm.vue","webpack:///./src/components/people/PersonMergeForm.vue?73e4","webpack:///./src/components/people/PersonDetail.vue?a770"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_component_router_link","to","_ctx","name","_component_note","_toDisplayString","id","_createBlock","$props","_component_icon_edit","width","heigh","_component_dictionary_row","label","_hoisted_4","email","_hoisted_5","institution","_component_tabs_container","_component_tab_item","_component_membership_list","person","_component_person_profile","_component_coi_list","visible","$options","length","first_name","_Fragment","_renderList","key","$setup","created_at","subject","innerHTML","body","onClick","_hoisted_8","_hoisted_10","_Teleport","_component_modal_dialog","$event","title","meta","_component_router_view","$data","_component_custom_email_form","mail-data","onSent","onCanceled","_hoisted_11","_hoisted_12","_hoisted_13","_component_button_row","submit-text","onSubmitted","submit-variant","_component_person_merge_form","obsolete","onSaved","_component_data_table","fields","data","sort","rowClickHandler","row-class","props","type","Object","required","field","desc","String","sortable","resolveValue","item","roles","map","r","join","permissions","p","Date","computed","memberships","this","m","group","Group","methods","goToGroup","$router","push","params","uuid","__exports__","_hoisted_1","_component_input_row","vertical","_component_person_search_select","allow-add","errors","authority_id","authority","default","emits","authorityCopy","obsoleteCopy","watch","immediate","handler","attributes","commitMerge","$store","dispatch","authorityId","obsoleteIds","$emit","isValidationError","response","cancelMerge","obsoleteId","components","TabsContainer","MembershipList","PersonProfile","PersonMergeForm","CoiList","emails","currentEmail","showResendDialog","showDeleteConfirmation","showMergeForm","mapGetters","showModal","get","$route","set","value","sortedMailLog","mailLog","a","b","parse","initResend","cleanupResend","initDelete","commitDelete","go","cancelDelete","initMerge","handleMerged","handleMergeCanceled","setup","formatDate","mounted","render"],"mappings":"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","file":"js/chunk-2d0d6d92.d416a838.js","sourcesContent":["<template>\n    <div>\n        <header class=\"pb-4\">\n            <router-link class=\"note\" to=\"/people\">People</router-link>\n            <h1 class=\"flex justify-between items-center\">\n                <div>\n                    {{person.name}}\n                    <note>ID: {{person.id}}</note>\n                </div>\n                <router-link \n                    :to=\"`/people/${uuid}/edit`\"\n                    class=\"btn btn-xs flex-grow-0\"\n                    v-if=\"(hasPermission('people-manage') || userIsPerson(person))\"\n                >\n                    <icon-edit width=\"16\" heigh=\"16\" />\n                </router-link>\n\n            </h1>\n            <dictionary-row label=\"Email\">\n                <template v-slot:label><strong>Email:</strong></template>\n                {{person.email}}\n            </dictionary-row>\n            <dictionary-row label=\"Institution\">\n                <template v-slot:label><strong>Institution:</strong></template>\n                {{person.institution ? person.institution.name : null}}\n            </dictionary-row>\n        </header>\n        <tabs-container>\n            <tab-item label=\"groups\">\n                <membership-list :person=\"person\"></membership-list>\n            </tab-item>\n            <tab-item label=\"Info\">\n                <person-profile :person=\"person\"></person-profile>\n            </tab-item>\n            <tab-item label=\"Conflict of Interest\">\n                <coi-list :person=\"person\"></coi-list>\n            </tab-item>\n            <!-- <tab-item label=\"Documents\">\n                docs\n            </tab-item> -->\n            <!-- <tab-item label=\"Training &amp; Attestations\">\n            </tab-item> -->\n            <tab-item label=\"Email Log\" :visible=\"hasPermission('people-manage') || userIsPerson(person)\">\n                <div v-if=\"sortedMailLog.length == 0\" class=\"well\">\n                    {{person.first_name}} has not received any mail via the GPM.\n                </div>\n                <div class=\"w-3/4 my-4 p-4 border\" v-for=\"email in sortedMailLog\" :key=\"email.id\">\n                    <dictionary-row label=\"Date/Time\">\n                        {{formatDate(email.created_at)}}\n                    </dictionary-row>\n                    <dictionary-row label=\"Subject\">\n                        {{email.subject}}\n                    </dictionary-row>\n                    <dictionary-row label=\"Body\">\n                        <div v-html=\"email.body\"></div>\n                    </dictionary-row>\n                    <button class=\"btn btn-xs\" @click.stop=\"initResend(email)\" v-if=\"hasPermission('people-manage')\">Resend</button>\n                </div>\n            </tab-item>\n            <tab-item label=\"Admin\" :visible=\"hasPermission('people-manage')\">\n                <section class=\"border my-4 p-4 bg-red-100 border-red-200 rounded\">\n                <h2 class=\"mb-4 text-red-800\">\n                    Here be dragons. Proceed with caution.\n                </h2>\n                <p><button class=\"btn btn red\" @click=\"initMerge\">Merge Person into another</button></p>\n                <p><button class=\"btn btn red\" @click=\"initDelete\">Delete Person</button></p>\n                </section>\n            </tab-item>\n        </tabs-container>\n        <teleport to=\"body\">\n            <modal-dialog v-model=\"showModal\" :title=\"$route.meta.title\">\n                <router-view name=\"modal\"></router-view>\n            </modal-dialog>\n            <modal-dialog title=\"Resend Email\" v-model=\"showResendDialog\">\n                <custom-email-form :mail-data=\"currentEmail\" @sent=\"cleanupResend\" @canceled=\"cleanupResend\"></custom-email-form>\n            </modal-dialog>\n            <modal-dialog :title=\"`You are about to delete ${person.name}`\" v-model=\"showDeleteConfirmation\">\n                <p>You are about to delete this person.  All related data will also be deleted including:</p>\n                <ul class=\"list-disc pl-6\">\n                    <li>User record, system roles, and system permissions (if account is activated)</li>\n                    <li>Invite</li>\n                    <li>Group Memberships and group roles (if any)</li>\n                </ul>\n                <div class=\"border my-4 px-2 py-1 font-bold bg-red-100 border-red-200 rounded text-red-800\">\n                    This cannot be undone.\n                </div>\n                <button-row \n                    :submit-text=\"`Delete ${person.name}`\" \n                    @submitted=\"commitDelete\"  \n                    @canceled=\"cancelDelete\" \n                    submit-variant=\"red\"\n                />\n            </modal-dialog>\n            <modal-dialog :title=\"`Merge ${person.name} into another person`\" v-model=\"showMergeForm\">\n                <person-merge-form :obsolete=\"person\" @saved=\"handleMerged\" @canceled=\"handleMergeCanceled\"></person-merge-form>\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex'\nimport {formatDateTime as formatDate} from '@/date_utils'\n\nimport TabsContainer from '../TabsContainer.vue'\nimport MembershipList from './MembershipList.vue'\nimport PersonProfile from '@/components/people/PersonProfile'\nimport PersonMergeForm from '@/components/people/PersonMergeForm'\nimport CoiList from '@/components/people/CoiList'\n\nexport default {\n    name: 'PersonDetail',\n    components: { \n        TabsContainer,\n        MembershipList,\n        PersonProfile,\n        PersonMergeForm,\n        CoiList,\n    },\n    props: {\n        uuid: {\n            required: true,\n            type: String\n        }\n    },\n    data() {\n        return {\n            emails: [],\n            currentEmail: {},\n            showResendDialog: null,\n            showDeleteConfirmation: false,\n            showMergeForm: false\n        }\n    },\n    watch: {\n        uuid: {\n            immediate: true,\n            handler: function () {\n                this.$store.dispatch('people/getPerson', {uuid: this.uuid})\n            }\n        }\n    },\n    computed: {\n        ...mapGetters({\n            person: 'people/currentItem'\n        }),\n        showModal: {\n            get() {\n                return this.$route.meta.showModal\n            },\n            set(value) {\n                if (value) {\n                    this.$router.push({name: 'PersonEdit', params: {uuid: this.person.uuid}})\n                }\n                this.$router.push({name: 'PersonDetail', params: {uuid: this.person.uuid}})\n            }\n        },\n        sortedMailLog () {\n            return [...this.person.mailLog].sort((a,b) => {\n                if (a.created_at == b.created_at) {\n                    return 0;\n                }\n                return (Date.parse(a.created_at) > Date.parse(b.created_at))\n                    ? -1 : 1;\n            })\n        }\n    },\n    methods: {\n        initResend (email) {\n            this.currentEmail = {...email};\n            this.showResendDialog = true;\n        },\n        cleanupResend () {\n            this.currentEmail = {},\n            this.showResendDialog = false;\n            this.$store.dispatch('people/getMail', this.person);\n        },\n        initDelete () {\n            this.showDeleteConfirmation = true;\n        },\n        async commitDelete () {\n            await this.$store.dispatch('people/deletePerson', this.person);\n            this.showDeleteConfirmation = false;\n            this.$router.go(-1);\n        },\n        cancelDelete () {\n            this.showDeleteConfirmation = false;\n        },\n        initMerge() {\n            this.showMergeForm = true;\n        },\n        handleMerged () {\n            this.showMergeForm = false;\n            this.$router.go(-1);\n        },\n        handleMergeCanceled () {\n            this.showMergeForm = false;\n        }\n    },\n    setup() {\n        return {\n            formatDate: formatDate\n        }\n    },\n    async mounted() {\n        await this.$store.dispatch('people/getPerson', {uuid: this.uuid})\n        this.$store.dispatch('people/getMail', this.person);\n    }\n}\n</script>","<template>\n    <div>\n        <data-table \n            :fields=\"fields\" \n            :data=\"memberships\" \n            v-model:sort=\"sort\"\n            :rowClickHandler=\"goToGroup\"\n            :row-class=\"() => 'cursor-pointer'\"\n        ></data-table>\n    </div>\n</template>\n<script>\nimport {Group} from '@/domain'\n\nexport default {\n    name: 'MembershipList',\n    props: {\n        person: {\n            type: Object,\n            required: true\n        }\n    },\n    data() {\n        return {\n            sort: {\n                field: 'group.displayName',\n                desc: false\n            },\n            fields: [\n                {\n                    name: 'group.displayName',\n                    type: String,\n                    sortable: true,\n                    label: 'Name'\n                },\n                {\n                    name: 'group.type.name',\n                    type: String,\n                    sortable: true,\n                    label: 'Type'\n                },\n                {\n                    name: 'roles',\n                    type: String,\n                    sortable: false,\n                    label: 'Roles',\n                    resolveValue (item) {\n                        return item.roles.map(r => r.name).join(', ');\n                    }\n                },\n                {\n                    name: 'permissions',\n                    type: String,\n                    sortable: false,\n                    label: 'Permissions',\n                    resolveValue (item) {\n                        return item.permissions.map(p => p.name).join(', ');\n                    }\n                },\n                {\n                    name: 'start_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Started'\n                },\n                {\n                    name: 'end_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Ended'\n                }\n\n\n            ]\n        }\n    },\n    computed: {\n        memberships () {\n            if (this.person.memberships) {\n                return this.person.memberships.map(m => {\n                    if (m.group) {\n                        m.group = new Group(m.group);\n                    }\n                    return m;\n                })\n            }\n\n            return [];\n        }\n    },\n    methods: {\n        goToGroup(item) {\n            this.$router.push({name: 'GroupDetail', params: {uuid: item.group.uuid}})\n        }\n\n    }\n}\n</script>","import { render } from \"./MembershipList.vue?vue&type=template&id=7757f912\"\nimport script from \"./MembershipList.vue?vue&type=script&lang=js\"\nexport * from \"./MembershipList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>\n        <p class=\"mb-8\">\n            Merging peple will do the following:\n            <ol class=\"list-decimal ml-6\">\n                <li>Add the authoritative person to all groups of which the obsolete person is a member.</li>\n                <li>Delete the obsolete person, their memberships, their invite, and their user account (if activated).</li>\n            </ol>\n        </p>\n        <input-row label=\"Merge\" vertical>\n            <template v-slot:label>\n                Merge <note class=\"inline-block\">(Obsolete person that will be deleted)</note>\n            </template>\n            <person-search-select v-model=\"obsoleteCopy\" :allow-add=\"false\"></person-search-select>\n            \n        </input-row>\n        <input-row label=\"Into\" :errors=\"errors.authority_id\" vertical>\n            <template v-slot:label>Into <note class=\"inline\">(Authoritative person)</note></template>\n            <person-search-select v-model=\"authorityCopy\" :allow-add=\"false\"></person-search-select>\n        </input-row>\n        <button-row submit-text=\"Merge\" @submitted=\"commitMerge\" @canceled=\"cancelMerge\" />\n    </div>\n</template>\n<script>\nimport { isValidationError } from '@/http';\n\nexport default {\n    name: 'PersonMergeForm',\n    props: {\n        authority: {\n            type: Object,\n            required: false\n        },\n        obsolete: {\n            type: Object,\n            default: () => ({})\n        }\n    },\n    emits: [\n        'saved',\n        'canceled'\n    ],\n    data() {\n        return {\n            authorityCopy: null,\n            obsoleteCopy: null,\n            errors: {}\n        }\n    },\n    watch: {\n        authority: {\n            immediate: true,\n            handler (to) {\n                if (!to) {\n                    return;\n                }\n                this.authorityCopy = {...to.attributes}\n            }\n        },\n        obsolete: {\n            immediate: true,\n            handler (to) {\n                if (!to) {\n                    return;\n                }\n                this.obsoleteCopy = {...to.attributes};\n            }\n        }\n    },\n    methods: {\n        async commitMerge () {\n            try {\n                this.errors = {};\n                await this.$store.dispatch(\n                    'people/mergePeople', \n                    {\n                        authority: this.authorityCopy, \n                        obsolete: this.obsoleteCopy\n                    }\n                );\n                this.authorityId = null;\n                this.obsoleteIds = null;\n                this.$emit('saved');\n            } catch (error) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors;\n                    return;\n                }\n            }\n        },\n        cancelMerge () {\n            this.authorityId = null;\n            this.obsoleteId = null;\n            this.$emit('canceled');\n        }\n    }\n}\n</script>","import { render } from \"./PersonMergeForm.vue?vue&type=template&id=dd7c1228\"\nimport script from \"./PersonMergeForm.vue?vue&type=script&lang=js\"\nexport * from \"./PersonMergeForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PersonDetail.vue?vue&type=template&id=132199a4\"\nimport script from \"./PersonDetail.vue?vue&type=script&lang=js\"\nexport * from \"./PersonDetail.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}