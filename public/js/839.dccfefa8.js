"use strict";(self["webpackChunkepam"]=self["webpackChunkepam"]||[]).push([[839],{4582:function(e,t,r){r.d(t,{A:function(){return i}});r(3725),r(5019);var o=r(6166),l=r(641);function i(e=null){const t=(0,o.rd)(),r=(0,o.lq)();e||(console.log('Warning: defaultSort is deprecated.  Please provide a sort object: {field: "fieldname", desc: boolean}'),e=e||{field:"name",desc:!1});const i=(0,l.EW)({immediate:!0,get(){return Object.keys(r.query).includes("sort-field")?{field:r.query["sort-field"],desc:Boolean(parseInt(r.query["sort-desc"]))}:e},set(e){const o={"sort-field":e.field,"sort-desc":e.desc?1:0},l={...r.query,...o};t.replace({path:r.path,query:l})}}),s=(0,l.EW)({set(e){let o=r.query,l=r.path,i={...o};e?i={...o,filter:e}:delete i.filter,t.replace({path:l,query:i})},get(){return r.query.filter},immediate:!0});return{sort:i,filter:s}}},5441:function(e,t,r){r.d(t,{A:function(){return g}});var o=r(641),l=r(33);const i={key:0},s={class:"block-title"},n=(0,o.eW)(" COI response for "),a={key:0},u={class:"text-sm response-data"},d={class:"flex-0"},c=(0,o.Lk)("p",{class:"mb-2"},"This is a legacy response.",-1),p={key:1,class:"response-data"};function m(e,t,r,m,b,h){const f=(0,o.g2)("dictionary-row");return h.response?((0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("h2",s,[n,r.coi.data.first_name?((0,o.uX)(),(0,o.CE)("span",a,(0,l.v_)(e.titleCase(`${r.coi.data.first_name} ${r.coi.data.last_name}`))+" in ",1)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,l.v_)(r.group.name)+" (v. "+(0,l.v_)(r.coi.version)+") ",1)]),(0,o.Lk)("div",u,[(0,o.bF)(f,{label:"Name","label-class":"font-bold"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(r.coi.data.first_name)+" "+(0,l.v_)(r.coi.data.last_name),1)])),_:1}),(0,o.bF)(f,{label:"Email","label-class":"font-bold"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(r.coi.data.email),1)])),_:1}),h.response.document_uuid?((0,o.uX)(),(0,o.Wv)(f,{key:0,label:"COI File","label-class":"font-bold"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",d,[c,(0,o.Lk)("button",{class:"btn btn-xs",onClick:t[0]||(t[0]=e=>h.downloadDocument(h.response.download_url.response))}," Download the COI. ")])])),_:1})):(0,o.Q3)("",!0),h.response.document_uuid?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",p,[(0,o.bF)(f,{label:h.response.work_fee_lab.question,vertical:!0,"label-class":"font-bold"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(h.getQuestionValue(h.response.work_fee_lab.response)),1)])),_:1},8,["label"]),"1.0.0"==h.version?((0,o.uX)(),(0,o.Wv)(f,{key:0,label:h.response.contributions_to_gd_in_ep.question,vertical:!0,"label-class":"font-bold"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(h.getQuestionValue(h.response.contributions_to_gd_in_ep.response))+" ",1),1==h.response.contributions_to_gd_in_ep.response?((0,o.uX)(),(0,o.Wv)(f,{key:0,label:h.response.contributions_to_genes.question,vertical:!0,class:"pb-1 mb-1 ml-4","label-class":"font-bold"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(h.getQuestionValue(h.response.contributions_to_genes.response)),1)])),_:1},8,["label"])):(0,o.Q3)("",!0)])),_:1},8,["label"])):(0,o.Q3)("",!0),"2.0.0"==h.version?((0,o.uX)(),(0,o.Wv)(f,{key:1,label:h.response.contributions_to_gd_in_group.question,vertical:!0,"label-class":"font-bold"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(h.getQuestionValue(h.response.contributions_to_gd_in_group.response))+" ",1),1==h.response.contributions_to_gd_in_group.response?((0,o.uX)(),(0,o.Wv)(f,{key:0,label:h.response.contributions_to_genes.question,vertical:!0,class:"pb-1 mb-1 ml-4","label-class":"font-bold"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(h.getQuestionValue(h.response.contributions_to_genes.response)),1)])),_:1},8,["label"])):(0,o.Q3)("",!0)])),_:1},8,["label"])):(0,o.Q3)("",!0),"1.0.0"==h.version?((0,o.uX)(),(0,o.Wv)(f,{key:2,label:h.response.independent_efforts.question,vertical:!0,"label-class":"font-bold"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(h.getQuestionValue(h.response.independent_efforts.response))+" ",1),[1,2].indexOf(h.response.independent_efforts.response)>-1?((0,o.uX)(),(0,o.Wv)(f,{key:0,label:h.response.independent_efforts_details.question,vertical:!0,class:"pb-1 mb-1 ml-4 border-none","label-class":"font-bold"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(h.getQuestionValue(h.response.independent_efforts_details.response)),1)])),_:1},8,["label"])):(0,o.Q3)("",!0)])),_:1},8,["label"])):(0,o.Q3)("",!0),(0,o.bF)(f,{label:h.response.coi.question,vertical:!0,class:"pb-1 mb-1","label-class":"font-bold"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(h.getQuestionValue(h.response.coi.response))+" ",1),[1,2].indexOf(h.response.coi.response)>-1?((0,o.uX)(),(0,o.Wv)(f,{key:0,label:h.response.coi_details.question,vertical:!0,class:"pb-1 mb-1 ml-4","label-class":"font-bold"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(h.getQuestionValue(h.response.coi_details.response)),1)])),_:1},8,["label"])):(0,o.Q3)("",!0)])),_:1},8,["label"])]))])])):(0,o.Q3)("",!0)}var b={props:{coi:{type:Object,required:!0},group:{type:Object,required:!0}},data(){return{}},computed:{isLegacy(){return!1},response(){return this.coi.response_document},version(){return this.coi.version}},methods:{getQuestionValue(e){return 1===e?"Yes":0===e?"No":2===e?"Unsure":e},downloadDocument(e){window.location=e}}},h=r(6262);const f=(0,h.A)(b,[["render",m]]);var g=f},1607:function(e,t,r){r.d(t,{A:function(){return C}});var o=r(641),l=r(3751);const i=(0,o.Lk)("p",null,"Three examples of ClinGen-approved curation and review protocols are below (additional details may be requested from the CDWG Oversight Committee). Check or describe the curation and review protocol that this Expert Panel will use.",-1),s={class:"mb-4"},n={class:"mt-2"},a=["disabled"],u=(0,o.Lk)("div",null,"Single biocurator curation with comprehensive GCEP review (presentation of all data on calls with GCEP votes). Note: definitive genes may be expedited with brief summaries.",-1),d={class:"mt-2 items-top"},c=["disabled"],p=(0,o.Lk)("p",null,"Paired review (biocurator & domain expert) with expedited GCEP review. Expert works closely with a curator on the initial summation of the information for expedited GCEP review (brief summary on a call with GCEP voting and/or electronic voting by GCEP). Definitive genes can move directly from biocurator to expedited GCEP review.",-1),m={class:"mt-2"},b=["disabled"],h=(0,o.Lk)("p",null,"Dual biocurator review with expedited GCEP review for concordant genes and full review for discordant genes.",-1),f={class:"flex space-x-2 items-start mt-3"},g=["disabled"],_=(0,o.Lk)("p",null,"Other",-1);function v(e,t,r,v,k,w){const y=(0,o.g2)("input-row");return(0,o.uX)(),(0,o.CE)("div",null,[i,(0,o.Lk)("div",s,[(0,o.bF)(y,{label:"",errors:r.errors.curation_review_protocol_id,vertical:""},{default:(0,o.k6)((()=>[(0,o.Lk)("div",null,[(0,o.Lk)("label",n,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=e=>w.group.expert_panel.curation_review_protocol_id=e),value:"1",disabled:!w.canEdit,onInput:t[1]||(t[1]=t=>e.$emit("update"))},null,40,a),[[l.XL,w.group.expert_panel.curation_review_protocol_id]]),u]),(0,o.Lk)("label",d,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=e=>w.group.expert_panel.curation_review_protocol_id=e),value:"2",disabled:!w.canEdit,onInput:t[3]||(t[3]=t=>e.$emit("update"))},null,40,c),[[l.XL,w.group.expert_panel.curation_review_protocol_id]]),p]),(0,o.Lk)("label",m,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=e=>w.group.expert_panel.curation_review_protocol_id=e),value:"3",disabled:!w.canEdit,onInput:t[5]||(t[5]=t=>e.$emit("update"))},null,40,b),[[l.XL,w.group.expert_panel.curation_review_protocol_id]]),h]),(0,o.Lk)("div",f,[(0,o.Lk)("label",null,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=e=>w.group.expert_panel.curation_review_protocol_id=e),value:"100",disabled:!w.canEdit,onInput:t[7]||(t[7]=t=>e.$emit("update"))},null,40,g),[[l.XL,w.group.expert_panel.curation_review_protocol_id]]),_]),(0,o.bF)(l.eB,{name:"slide-fade-down"},{default:(0,o.k6)((()=>[100==w.group.expert_panel.curation_review_protocol_id?((0,o.uX)(),(0,o.Wv)(y,{key:0,class:"flex-1 mt-0","label-width-class":"w-0",modelValue:w.group.expert_panel.curation_review_protocol_other,"onUpdate:modelValue":[t[8]||(t[8]=e=>w.group.expert_panel.curation_review_protocol_other=e),t[9]||(t[9]=t=>e.$emit("update"))],errors:r.errors.curation_review_protocol_other,type:"large-text"},null,8,["modelValue","errors"])):(0,o.Q3)("",!0)])),_:1})])])])),_:1},8,["errors"])])])}var k={name:"GcepOngoingPlansForm",props:{errors:{type:Object,required:!1,default:()=>({})},readonly:{type:Boolean,required:!1,default:!1}},computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]},set(e){this.$store.commit("groups/addItem",e)}},canEdit(){return this.hasAnyPermission(["ep-applications-manage",["application-edit",this.group]])&&!this.readonly}}},w=r(6262);const y=(0,w.A)(k,[["render",v]]);var C=y},6271:function(e,t,r){r.d(t,{A:function(){return p}});var o=r(641),l=r(33);const i={class:"mb-4"},s=(0,o.Lk)("p",{class:"text-sm mb-0"},"For all variants approved by either of the processes described above, a summary of approved variants should be sent to ensure that any members absent from a call have an opportunity to review each variant. The summary should be emailed to the full VCEP after the call and should summarize decisions that were made and invite feedback within a week.",-1),n={key:1};function a(e,t,r,a,u,d){const c=(0,o.g2)("input-row");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",i,[(0,o.bF)(c,{modelValue:d.group.expert_panel.meeting_frequency,"onUpdate:modelValue":[t[0]||(t[0]=e=>d.group.expert_panel.meeting_frequency=e),t[1]||(t[1]=t=>e.$emit("update"))],label:"Meeting/call frequency",errors:r.errors.meeting_frequency,placeholder:"Once per week","label-width-class":"w-44",disabled:!d.canEdit},null,8,["modelValue","errors","disabled"]),(0,o.bF)(c,{modelValue:d.group.expert_panel.curation_review_protocol_id,"onUpdate:modelValue":[t[2]||(t[2]=e=>d.group.expert_panel.curation_review_protocol_id=e),t[3]||(t[3]=t=>e.$emit("update"))],options:[{value:1,label:"Process #1: Biocurator review followed by VCEP discussion"},{value:2,label:"Process #2: Paired biocurator/expert review followed by expedited VCEP approval"}],type:"radio-group",errors:r.errors.curation_review_protocol_id,disabeld:!d.canEdit,label:"VCEP Standardized Review Process",vertical:""},null,8,["modelValue","errors","disabeld"])]),s,d.canEdit?((0,o.uX)(),(0,o.Wv)(c,{key:0,modelValue:d.group.expert_panel.curation_review_process_notes,"onUpdate:modelValue":[t[4]||(t[4]=e=>d.group.expert_panel.curation_review_process_notes=e),t[5]||(t[5]=t=>e.$emit("update"))],type:"large-text",label:"Curation and Review Process Notes",vertical:!0,"label-class":"font-bold"},null,8,["modelValue"])):((0,o.uX)(),(0,o.CE)("blockquote",n,(0,l.v_)(d.group.expert_panel.curation_review_process_notes),1))])}var u={name:"VcepOngoingPlansForm",props:{errors:{type:Object,required:!1,default:()=>({})},editing:{type:Boolean,required:!1,default:!0},readonly:{type:Boolean,required:!1,default:!1}},emits:["update"],computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]},set(e){this.$store.commit("groups/addItem",e)}},canEdit(){return this.hasAnyPermission(["ep-applications-manage",["application-edit",this.group]])&&!this.readonly}}},d=r(6262);const c=(0,d.A)(u,[["render",a]]);var p=c},5947:function(e,t,r){r.d(t,{A:function(){return Ce}});r(1339);var o=r(641),l=r(33),i=r(3751);const s={class:"flex justify-between items-end"},n={class:"flex space-x-2 items-center"},a=(0,o.Lk)("h2",null,"Members",-1),u={class:"flex space-x-2 items-center pb-0.5"},d={key:0},c={key:1,class:"flex space-x-2 items-center"},p=["href"],m={class:"btn btn-icon"},b=(0,o.eW)("Downloads:"),h=["href"],f=(0,o.eW)(" (PDF)"),g=["href"],_=(0,o.eW)(" (CSV)"),v={key:0},k={class:"flex justify-between px-2 space-x-2 bg-blue-200 rounded-lg"},w={class:"flex-1"},y=(0,o.Lk)("option",{value:null},"Select…",-1),C=["value"],x={class:"flex-1 py-2"},F={class:"flex-1 py-2"},L={class:"mt-3 py-2 w-full overflow-x-auto"},E=["onClick"],M={class:"flex space-x-2"},V={key:0},W=["onClick"],R={class:"flex space-x-2 items-center"},X=(0,o.Lk)("button",{class:"btn btn-xs"},"…",-1),A=["onClick"],P=["onClick"],q=["onClick"],$=["onClick"],D={key:1,class:"well"},Q={class:"text-lg"},I={class:"text-lg"},U={class:"text-lg"},O=(0,o.Lk)("p",null,[(0,o.Lk)("strong",null,"This cannot be undone.")],-1);function S(e,t,r,S,j,G){const N=(0,o.g2)("icon-filter"),T=(0,o.g2)("icon-add"),B=(0,o.g2)("router-link"),z=(0,o.g2)("popper"),K=(0,o.g2)("icon-envelope"),Y=(0,o.g2)("icon-download"),H=(0,o.g2)("dropdown-item"),J=(0,o.g2)("note"),Z=(0,o.g2)("dropdown-menu"),ee=(0,o.g2)("input-row"),te=(0,o.g2)("checkbox"),re=(0,o.g2)("icon-cheveron-right"),oe=(0,o.g2)("icon-cheveron-down"),le=(0,o.g2)("icon-view"),ie=(0,o.g2)("icon-exclamation"),se=(0,o.g2)("icon-notification"),ne=(0,o.g2)("popover"),ae=(0,o.g2)("icon-checkmark"),ue=(0,o.g2)("member-preview"),de=(0,o.g2)("data-table"),ce=(0,o.g2)("button-row"),pe=(0,o.g2)("modal-dialog"),me=(0,o.g2)("coi-detail");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("head",s,[(0,o.Lk)("div",n,[a,G.group.members.length>0?((0,o.uX)(),(0,o.CE)("button",{key:0,ref:"filterToggleButton",class:(0,l.C4)(["px-3 py-2 rounded-t transition-color",{"rounded-b":!j.showFilter,"bg-blue-200":j.showFilter}]),onClick:t[0]||(t[0]=(...e)=>G.toggleFilter&&G.toggleFilter(...e))},[(0,o.bF)(N,{width:"16",height:"16"})],2)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",u,[G.showAddMemberButton?((0,o.uX)(),(0,o.CE)("div",d,[(0,o.bF)(z,{content:"Add a member",hover:"",arrow:""},{default:(0,o.k6)((()=>[(0,o.bF)(B,{class:"btn btn-icon",to:e.append(e.$route.path,"members/add")},{default:(0,o.k6)((()=>[(0,o.bF)(T,{class:"inline-block"})])),_:1},8,["to"])])),_:1})])):(0,o.Q3)("",!0),G.showCoordinatorActions?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.bF)(z,{content:`Email ${G.filteredMembers.length} listed members`,hover:"",arrow:""},{default:(0,o.k6)((()=>[(0,o.Lk)("a",{href:`mailto:${G.filteredEmails.join(", ")}`,class:"btn btn-icon",onClick:t[1]||(t[1]=(...t)=>e.initEmailWithFiltered&&e.initEmailWithFiltered(...t))},[(0,o.bF)(K,{class:"inline-block",width:"16",height:"16"})],8,p)])),_:1},8,["content"]),(0,o.bF)(Z,{"hide-cheveron":"",orientation:"right"},{label:(0,o.k6)((()=>[(0,o.Lk)("button",m,[(0,o.bF)(Y,{width:"16",height:"16"})])])),default:(0,o.k6)((()=>[(0,o.bF)(H,{class:"text-right font-bold"},{default:(0,o.k6)((()=>[b])),_:1}),(0,o.bF)(H,{class:"text-right"},{default:(0,o.k6)((()=>[(0,o.Lk)("a",{href:`/api/report/groups/${G.group.uuid}/coi-report`},"COI Report",8,h),(0,o.bF)(J,{class:"inline"},{default:(0,o.k6)((()=>[f])),_:1})])),_:1}),G.showMemberReportButton?((0,o.uX)(),(0,o.Wv)(H,{key:0,class:"text-right"},{default:(0,o.k6)((()=>[(0,o.bF)(z,{class:"text-center text-sm p-1",content:`Export will include ${G.filteredMembers.length} members currently listed.`,hover:"",arrow:""},{default:(0,o.k6)((()=>[(0,o.Lk)("a",{href:G.exportUrl},"Member Export",8,g),(0,o.bF)(J,{class:"inline"},{default:(0,o.k6)((()=>[_])),_:1})])),_:1},8,["content"])])),_:1})):(0,o.Q3)("",!0)])),_:1}),G.group.isEp()&&G.showCoordinatorActions?((0,o.uX)(),(0,o.CE)("div",v)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])]),(0,o.bF)(i.eB,{name:"slide-fade-down"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.Lk)("div",k,[(0,o.Lk)("div",w,[(0,o.bF)(ee,{label:"Keyword",type:"text",modelValue:j.filters.keyword,"onUpdate:modelValue":t[2]||(t[2]=e=>j.filters.keyword=e),"label-width-class":"w-20"},null,8,["modelValue"]),(0,o.bF)(ee,{label:"Role","label-width-class":"w-20"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>j.filters.roleId=e)},[y,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(G.roles,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.name),9,C)))),128))],512),[[i.u1,j.filters.roleId]])])),_:1})]),(0,o.Lk)("div",x,[(0,o.bF)(te,{class:"block",label:"Needs COI",modelValue:j.filters.needsCoi,"onUpdate:modelValue":t[4]||(t[4]=e=>j.filters.needsCoi=e)},null,8,["modelValue"])]),(0,o.Lk)("div",F,[(0,o.bF)(te,{class:"block",label:"Hide Retired/Alumni",modelValue:j.filters.hideAlumns,"onUpdate:modelValue":t[5]||(t[5]=e=>j.filters.hideAlumns=e)},null,8,["modelValue"])])],512),[[i.aG,j.showFilter]])])),_:1}),(0,o.Lk)("div",L,[G.group.members.length>0?((0,o.uX)(),(0,o.Wv)(de,{key:0,fields:G.fieldsForGroupType,data:G.filteredMembers,sort:S.sort,"onUpdate:sort":t[7]||(t[7]=e=>S.sort=e),detailRows:!0,"row-class":e=>"cursor-pointer"+(e.isRetired?" retired-member":""),onRowClick:G.goToMember},{"cell-id":(0,o.k6)((({item:e})=>[(0,o.Lk)("button",{onClick:(0,i.D$)((t=>G.toggleItemDetails(e)),["stop"]),class:"w-9 align-center block -mx-3"},[e.showDetails?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(re,{key:0,class:"m-auto cursor-pointer"})),e.showDetails?((0,o.uX)(),(0,o.Wv)(oe,{key:1,class:"m-auto cursor-pointer"})):(0,o.Q3)("",!0)],8,E)])),"cell-roles":(0,o.k6)((({value:t})=>[(0,o.eW)((0,l.v_)(e.titleCase(t.map((e=>e.name)).join(", "))),1)])),"cell-coi_last_completed":(0,o.k6)((({item:t})=>[(0,o.Lk)("div",M,[t.coi_last_completed?((0,o.uX)(),(0,o.CE)("span",V,(0,l.v_)(e.formatDate(t.coi_last_completed)),1)):(0,o.Q3)("",!0),t.latest_coi_id?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"link cursor-pointer",onClick:(0,i.D$)((e=>G.viewCoi(t.latest_coi_id)),["stop"])},[(0,o.bF)(le)],8,W)):(0,o.Q3)("",!0),null===!t.coi_last_completed||t.coi_last_completed<e.yearAgo()?((0,o.uX)(),(0,o.Wv)(ie,{key:2,class:(0,l.C4)(G.getCoiDateStyle(t))},null,8,["class"])):(0,o.Q3)("",!0)])])),"cell-actions":(0,o.k6)((({item:l})=>[(0,o.Lk)("div",R,[G.hasAnyMemberPermission()&&!r.readonly?((0,o.uX)(),(0,o.Wv)(Z,{key:0,"hide-cheveron":!0,class:"relative block"},{label:(0,o.k6)((()=>[X])),default:(0,o.k6)((()=>[e.hasAnyPermission([["members-update",G.group],"groups-manage"])?((0,o.uX)(),(0,o.Wv)(H,{key:0},{default:(0,o.k6)((()=>[(0,o.Lk)("div",{onClick:e=>G.editMember(l)},"Update membership",8,A)])),_:2},1024)):(0,o.Q3)("",!0),(0,o.bo)((0,o.bF)(H,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",{onClick:e=>G.confirmRetireMember(l)},"Retire from group",8,P)])),_:2},1536),[[i.aG,!l.isRetired&&e.hasAnyPermission([["members-retire",G.group],"groups-manage"])]]),(0,o.bo)((0,o.bF)(H,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",{onClick:e=>G.confirmUnretire(l)},"Unretire from group",8,q)])),_:2},1536),[[i.aG,l.isRetired&&e.hasAnyPermission([["members-remove",G.group],"groups-manage"])]]),(0,o.bF)(H,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",{onClick:e=>G.confirmRemoveMember(l)},"Remove from group",8,$)])),_:2},1024)])),_:2},1024)):(0,o.Q3)("",!0),(0,o.Lk)("div",null,[(0,o.bF)(ne,{hover:"",arrow:"",content:"Receives notifications about this group.",placement:"top"},{default:(0,o.k6)((()=>[l.is_contact?((0,o.uX)(),(0,o.Wv)(se,{key:0,width:12,height:12,"icon-name":"Is a group contact",onClick:t[6]||(t[6]=(0,i.D$)((()=>{}),["stop"]))})):(0,o.Q3)("",!0)])),_:2},1024)])])])),"cell-requirements":(0,o.k6)((({item:e})=>[(0,o.bF)(ne,{hover:"",arrow:"",placement:"top"},{content:(0,o.k6)((()=>[(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(G.getRequirements(e),((e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[e.met?((0,o.uX)(),(0,o.Wv)(ae,{key:0,width:12,height:12,class:"inline-block text-green-600"})):((0,o.uX)(),(0,o.Wv)(ie,{key:1,width:12,height:12,class:"inline-block text-red-700"})),(0,o.eW)(" "+(0,l.v_)(e.label),1)])))),128))])])),default:(0,o.k6)((()=>[G.requirementsMet(e)?((0,o.uX)(),(0,o.Wv)(ae,{key:0,width:12,height:12,class:"text-green-600"})):((0,o.uX)(),(0,o.Wv)(ie,{key:1,width:12,height:12,class:"text-red-700"}))])),_:2},1024)])),detail:(0,o.k6)((({item:e})=>[(0,o.bF)(ue,{member:e,group:G.group},null,8,["member","group"])])),_:1},8,["fields","data","sort","row-class","onRowClick"])):((0,o.uX)(),(0,o.CE)("div",D," This group does not yet have any members. "))]),((0,o.uX)(),(0,o.Wv)(o.Im,{to:"body"},[(0,o.bF)(pe,{modelValue:j.showConfirmRetire,"onUpdate:modelValue":t[8]||(t[8]=e=>j.showConfirmRetire=e),size:"xs",title:`Retire ${G.selectedMemberName}?`},{default:(0,o.k6)((()=>[(0,o.Lk)("p",Q," Are you sure you want to retire "+(0,l.v_)(G.selectedMemberName)+" from this group? ",1),(0,o.bF)(ce,{onSubmit:G.retireMember,onCancel:G.cancelRetire,"submit-text":"Retire Member"},null,8,["onSubmit","onCancel"])])),_:1},8,["modelValue","title"]),(0,o.bF)(pe,{modelValue:j.showConfirmUnretire,"onUpdate:modelValue":t[9]||(t[9]=e=>j.showConfirmUnretire=e),size:"xs",title:`Retire ${G.selectedMemberName}?`},{default:(0,o.k6)((()=>[(0,o.Lk)("p",I," Are you sure you want to un-retire "+(0,l.v_)(G.selectedMemberName)+"? ",1),(0,o.bF)(ce,{onSubmit:G.unretireMember,onCancel:G.cancelUnretire,"submit-text":"Un-retire Member"},null,8,["onSubmit","onCancel"])])),_:1},8,["modelValue","title"]),(0,o.bF)(pe,{modelValue:j.showConfirmRemove,"onUpdate:modelValue":t[10]||(t[10]=e=>j.showConfirmRemove=e),size:"xs",title:`Remove ${G.selectedMemberName}?`},{default:(0,o.k6)((()=>[(0,o.Lk)("p",U," Are you sure you want to remove "+(0,l.v_)(G.selectedMemberName)+" from this group?",1),O,(0,o.bF)(ce,{onSubmit:G.removeMember,onCancel:G.cancelRemove,"submit-text":"Remove Member"},null,8,["onSubmit","onCancel"])])),_:1},8,["modelValue","title"]),(0,o.bF)(pe,{modelValue:j.showCoiDetail,"onUpdate:modelValue":t[11]||(t[11]=e=>j.showCoiDetail=e),size:"xl"},{default:(0,o.k6)((()=>[j.coi?((0,o.uX)(),(0,o.Wv)(me,{key:0,coi:j.coi,group:G.group},null,8,["coi","group"])):(0,o.Q3)("",!0)])),_:1},8,["modelValue"])]))])}r(3725),r(5019);var j=r(696),G=r(4582);const N={class:"px-8 py-4 inset"},T=(0,o.eW)(" RETIRED "),B={class:"md:flex flex-wrap space-x-4 text-sm"},z={class:"flex-1 md:flex flex-wrap"},K={class:"flex-1 mr-8"},Y={class:"flex-1 mr-4"},H={class:"mt-2"},J=(0,o.Lk)("h4",null,"Roles:",-1),Z={class:"ml-2"},ee={key:0},te=(0,o.Lk)("h4",null,"Biocurator Training:",-1),re={class:"ml-2"},oe={class:"mt-2"},le=(0,o.Lk)("h4",null,"Extra Permissions:",-1),ie={class:"ml-2"},se=(0,o.Lk)("div",null,null,-1),ne=(0,o.eW)(" View profile ");function ae(e,t,r,i,s,n){const a=(0,o.g2)("static-alert"),u=(0,o.g2)("profile-picture"),d=(0,o.g2)("note"),c=(0,o.g2)("dictionary-row"),p=(0,o.g2)("CredentialsView"),m=(0,o.g2)("ExpertisesView"),b=(0,o.g2)("object-dictionary"),h=(0,o.g2)("icon-checkmark"),f=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",N,[r.member.isRetired?((0,o.uX)(),(0,o.Wv)(a,{key:0,variant:"warning",class:"mb-3 float-right"},{default:(0,o.k6)((()=>[T])),_:1})):(0,o.Q3)("",!0),(0,o.Lk)("div",B,[(0,o.Lk)("div",null,[(0,o.bF)(u,{person:r.member.person,style:{width:"100px",height:"100px"},class:"rounded"},null,8,["person"]),(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.eW)("member id: "+(0,l.v_)(r.member.id),1)])),_:1})]),(0,o.Lk)("div",z,[(0,o.Lk)("div",K,[(0,o.bF)(c,{label:"Email"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(r.member.person.email),1)])),_:1}),(0,o.bF)(c,{label:"Institution"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(r.member.person.institution?r.member.person.institution.name:"--"),1)])),_:1}),(0,o.bF)(c,{label:"Credentials"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{person:r.member.person},null,8,["person"])])),_:1}),(0,o.bF)(c,{label:"Expertise"},{default:(0,o.k6)((()=>[(0,o.bF)(m,{person:r.member.person,legacyExpertise:r.member.legacy_expertise},null,8,["person","legacyExpertise"])])),_:1}),(0,o.bF)(b,{obj:r.member,only:["notes"]},null,8,["obj"]),(0,o.bF)(c,{label:"Start - End"},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(i.formatDate(r.member.start_date))+" - "+(0,l.v_)(i.formatDate(r.member.end_date)||"present"),1)])),_:1})]),(0,o.Lk)("div",Y,[(0,o.Lk)("div",H,[J,(0,o.Lk)("div",Z,(0,l.v_)(r.member.roles.length>0?r.member.roles.map((t=>e.titleCase(t.name))).join(", "):"--"),1)]),r.member.hasRole("biocurator")?((0,o.uX)(),(0,o.CE)("div",ee,[te,(0,o.Lk)("div",re,[(0,o.bF)(c,{label:"Level 1 training"},{default:(0,o.k6)((()=>[r.member.training_level_1?((0,o.uX)(),(0,o.Wv)(h,{key:0,class:"text-green-700"})):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(c,{label:"Level 2 training"},{default:(0,o.k6)((()=>[r.member.training_level_2?((0,o.uX)(),(0,o.Wv)(h,{key:0,class:"text-green-700"})):(0,o.Q3)("",!0)])),_:1})])])):(0,o.Q3)("",!0),(0,o.Lk)("div",oe,[le,(0,o.Lk)("div",ie,(0,l.v_)(r.member.permissions.length>0?r.member.permissions.map((e=>e.name)).join(", "):"--"),1)])])]),se]),(0,o.bF)(f,{class:"link",to:{name:"PersonDetail",params:{uuid:this.member.person.uuid}}},{default:(0,o.k6)((()=>[ne])),_:1},8,["to"])])}var ue=r(4736),de=r(367),ce=r(4201),pe=r(6514),me=r(2823),be=r(1877),he={name:"MemberPreview",components:{ProfilePicture:ce.A,CredentialsView:pe.A,ExpertisesView:me.A},props:{member:{type:ue.A,required:!0},group:{type:de.A,required:!0}},emits:["edit"],setup(){return{formatDate:be.Yq}}},fe=r(6262);const ge=(0,fe.A)(he,[["render",ae]]);var _e=ge,ve=r(5441),ke=r(7752),we={name:"MemberList",components:{MemberPreview:_e,CoiDetail:ve.A},props:{readonly:{type:Boolean,default:!1}},data(){return{showFilter:!1,showConfirmRetire:!1,showConfirmUnretire:!1,showConfirmRemove:!1,filters:{keyword:null,roleId:null,needsCoi:null,needsTraining:null,hideAlumns:!0},tableFields:[{name:"id",label:"",type:Number,sortable:!1},{name:"person.first_name",label:"First",type:String,sortable:!0},{name:"person.last_name",label:"Last",type:String,sortable:!0},{name:"person.timezone",label:"Closest City (for timezone)",type:String,sortable:!0},{name:"roles",label:"Roles",sortable:!0,sortFunction(e,t){const r=e.roles.map((e=>e.name)).join(","),o=t.roles.map((e=>e.name)).join(",");return r==o?0:r>o?1:-1}},{name:"coi_last_completed",label:"COI Completed",type:Date,sortable:!0},{name:"requirements",label:"Reqs",type:String,sortable:!1},{name:"actions",label:"",type:Object,sortable:!1}],selectedMember:null,members:[],showCoiDetail:!1,coi:null}},computed:{roles(){return ke.groups.roles},group(){return this.$store.getters["groups/currentItemOrNew"]},filteredMembers(){return this.group.members?this.group.members.filter((e=>this.matchesFilters(e))).filter((e=>this.filters.hideAlumns?null===e.end_date:e)):[]},filteredEmails(){return this.filteredMembers.map((e=>`${e.person.name} <${e.person.email}>`))},fieldsForGroupType(){const e=[...this.tableFields];return this.group.has_coi_requirement||e.splice(e.findIndex((e=>"coi_last_completed"==e.name)),1),this.group.isEp()||e.splice(e.findIndex((e=>"requirements"==e.name)),1),e},coiCuttoff(){const e=new Date;return e.setFullYear(e.getFullYear()-1),e},selectedMemberName(){return this.selectedMember?this.selectedMember.person.name:null},showCoordinatorActions(){return this.hasAnyMemberPermission(["groups-manage",["info-edit",this.group]])},showAddMemberButton(){return this.hasAnyPermission([["members-invite",this.group],"groups-manage","ep-applications-manage","annual-updates-manage"])&&!this.readonly},showMemberReportButton(){return this.hasAnyPermission([["members-invite",this.group],"groups-manage","ep-applications-manage","annual-updates-manage"])},exportUrl(){const e=`?member_ids=${this.filteredMembers.map((e=>e.id)).join(",")}`;return`/api/report/groups/${this.group.uuid}/member-export${e}`},features(){return this.$store.state.systemInfo.app.features}},watch:{group:{immediate:!0,handler(e,t){!e.id||t&&e.id==t.id||this.$store.dispatch("groups/getMembers",this.group)}}},setup(){const{sort:e,filter:t}=(0,G.A)({field:"person.last_name",desc:!1});return{sort:e,filter:t}},methods:{toggleFilter(){this.showFilter=!this.showFilter},matchesFilters(e){return!(this.filters.keyword&&!e.matchesKeyword(this.filters.keyword))&&(!(this.filters.roleId&&!e.hasRole(this.filters.roleId))&&((!this.filters.needsCoi||!e.coiUpToDate())&&(!this.filters.needsTraining||!e.trainingComplete())))},toggleItemDetails(e){e.showDetails=!e.showDetails},editMember(e){this.$router.push(this.append(this.$route.path,`members/${e.id}`))},confirmRetireMember(e){this.showConfirmRetire=!0,this.selectedMember=e},async retireMember(){try{await this.$store.dispatch("groups/memberRetire",{uuid:this.group.uuid,memberId:this.selectedMember.id,startDate:this.selectedMember.start_date,endDate:(new Date).toISOString()}),this.cancelRetire()}catch(e){console.error(e)}},cancelRetire(){this.selectedMember=null,this.showConfirmRetire=!1},async unretireMember(){try{await this.$store.dispatch("groups/memberUnretire",{uuid:this.group.uuid,memberId:this.selectedMember.id}),this.cancelUnretire()}catch(e){console.error(e)}},cancelUnretire(){this.selectedMember=null,this.showConfirmUnretire=!1},confirmRemoveMember(e){this.showConfirmRemove=!0,this.selectedMember=e},async removeMember(){try{await this.$store.dispatch("groups/memberRemove",{uuid:this.group.uuid,memberId:this.selectedMember.id,startDate:this.selectedMember.start_date,endDate:(new Date).toISOString()}),this.cancelRemove()}catch(e){console.error(e)}},cancelRemove(){this.selectedMember=null,this.showConfirmRemove=!1},goToMember(e){this.$router.push({name:"PersonDetail",params:{uuid:e.person.uuid}})},hasAnyMemberPermission(){const e=this.hasAnyPermission([["members-update",this.group],["members-retire",this.group],["members-remove",this.group],"groups-manage"]);return e},getCoiDateStyle(e){return null===e.coi_last_completed?"text-red-700":"text-yellow-500"},async viewCoi(e){this.showCoiDetail=!0,this.coi=await j.FH.get(`/api/cois/${e}`).then((e=>e.data))},downloadCoiReport(){const e=`/api/report/${this.group.coi_code}`;window.location=e},confirmUnretire(e){this.showConfirmUnretire=!0,this.selectedMember=e},requirementsMet(e){return(!this.group.has_coi_requirement||!e.needsCoi)&&!(this.group.isEp()&&!e.hasAnyExpertise)},getRequirements(e){const t={};return this.group.has_coi_requirement&&(t.coi={label:"COI is up to date",met:!e.needsCoi}),this.group.isEp()&&(t.expertise={label:"Expertise provided",met:e.hasAnyExpertise}),t}}};const ye=(0,fe.A)(we,[["render",S]]);var Ce=ye},4201:function(e,t,r){r.d(t,{A:function(){return c}});var o=r(641);const l={class:"border border-gray-300 bg-white overflow-hidden"},i=["src"];function s(e,t,r,s,n,a){return(0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("img",{src:a.photoUrl,class:"w-full"},null,8,i)])}var n=r(6747),a={name:"ProfilePicture",props:{person:{required:!0,type:n.A}},data(){return{}},computed:{hasProfilePhoto(){return null!==this.person.profile_photo},photoUrl(){return this.hasProfilePhoto?`/profile-photos/${this.person.profile_photo}`:"/images/default_profile.jpg"}},methods:{}},u=r(6262);const d=(0,u.A)(a,[["render",s]]);var c=d}}]);
//# sourceMappingURL=839.dccfefa8.js.map