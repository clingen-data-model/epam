{"version":3,"sources":["webpack:///./src/composables/router_aware_sort_and_filter.js","webpack:///./src/views/users/UserDetail.vue","webpack:///./src/views/users/UserDetail.vue?116e","webpack:///./src/views/users/UserList.vue","webpack:///./src/views/users/UserList.vue?27ae"],"names":["defaultSort","router","useRouter","route","useRoute","console","log","field","desc","sort","computed","immediate","get","Object","keys","query","includes","Boolean","parseInt","set","sortObj","newSortQuery","newQuery","replace","path","filter","value","currentQuery","currentPath","updatedQuery","_createElementVNode","class","_createElementBlock","_toDisplayString","$data","person","name","_createVNode","_component_object_dictionary","obj","$options","onClick","_hoisted_1","_component_data_table","fields","data","_createBlock","_Teleport","to","_component_modal_dialog","$event","title","_hoisted_2","_Fragment","_renderList","role","key","id","_component_checkbox","label","_ctx","display_name","_hoisted_4","permission","modelValue","disabled","_hoisted_8","_hoisted_9","_component_button_row","submit-text","onSubmitted","onCanceled","props","require","user","User","membershipFields","showEditForm","systemRoles","systemPermissions","values","configs","system","permissions","checkedRoles","checkedPermissions","userInfo","this","email","roles","map","r","join","additional_permissions","registered","formatDate","created_at","membershipInfo","memberships","m","group","expert_panel","extra_permissions","is_contact","checkedRolePermissionIds","checkedRolePerms","flat","p","Set","availableSystemRoles","hasRole","availableSystemPermissions","canEditUser","currentUser","$store","getters","hasPermission","currentUserIsUser","watch","handler","getUser","methods","api","then","response","resetCheckedRolesAndPermissions","getSystemRoles","initEdit","saveRolesAndPermissions","payload","role_ids","permission_ids","put","closeEditForm","mounted","__exports__","render","$setup","onRowClick","row-class","ref","paginated","header","type","placeholder","users","Number","sortable","String","filteredUsers","pattern","RegExp","u","match","triggerSearch","getUsers","currentPage","pageSize","setTotalItems","params","page","page_size","pageResponse","meta","total","goToUser","$router","push","setup","sortAndFilterSetup","created","debounce","$refs","dataTable","getItems"],"mappings":"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","file":"js/user-management.28729410.js","sourcesContent":["import { useRouter, useRoute } from 'vue-router'\nimport {computed} from 'vue'\n\nexport default function (defaultSort = null) {\n    const router = useRouter()\n    const route = useRoute()\n    if (!defaultSort){\n        console.log('Warning: defaultSort is deprecated.  Please provide a sort object: {field: \"fieldname\", desc: boolean}')\n        defaultSort = (defaultSort) ? defaultSort : {field: 'name', desc: false}\n    }\n    \n    const sort = computed({\n        immediate: true,\n        get() {\n            if (Object.keys(route.query).includes('sort-field')) {\n                return {\n                    field: route.query['sort-field'],\n                    desc: Boolean(parseInt(route.query['sort-desc']))\n                }\n            }\n            return defaultSort;\n        },\n        set(sortObj) {\n            const newSortQuery = {'sort-field': sortObj.field, 'sort-desc': sortObj.desc ? 1 : 0}\n    \n            const newQuery = {\n                ...route.query, \n                ...newSortQuery\n            };\n    \n            router.replace({path: route.path, query: newQuery})\n        }\n    });\n    \n    const filter = computed({\n        set(value) {\n            let currentQuery = route.query;\n            let currentPath = route.path;\n    \n            let updatedQuery = {...currentQuery};\n    \n            if (!value) {\n                delete updatedQuery.filter;\n            } else {\n                updatedQuery = {...currentQuery, ...{'filter': value} };\n            }\n    \n            router.replace({path: currentPath, query: updatedQuery})\n        },\n        get() {\n            return route.query.filter\n        },\n        immediate: true\n    });\n\n    return {\n        sort,\n        filter\n    }\n}\n","<template>\n    <div>\n        <h1>{{user.person.name || 'loading...'}}</h1>\n\n        <object-dictionary :obj=\"userInfo\"></object-dictionary>\n        <button class=\"btn btn-xs\" @click=\"initEdit\" v-if=\"canEditUser\">Edit system roles &amp; permissions</button>\n\n        <h2 class=\"mt-8 mb-2\">Memberships</h2>\n        <data-table :fields=\"membershipFields\" :data=\"membershipInfo\"></data-table>\n\n        <teleport to=\"body\">\n            <modal-dialog \n                v-model=\"showEditForm\" \n                title=\"Edit System Roles & Permissions\"\n            >\n                <h3 class=\"border-b mb-1\">Roles</h3>\n                <ul class=\"flex flex-wrap\">\n                    <li v-for=\"role in availableSystemRoles\" :key=\"role.id\" class=\"w-1/3 h-12\">\n                        <checkbox v-model=\"checkedRoles\" :label=\"titleCase(role.display_name)\" :value=\"role.id\" />\n                    </li>\n                </ul>\n\n                <h3 class=\"border-b mb-1\">Permissions</h3>\n                <ul class=\"flex flex-wrap\">\n                    <li v-for=\"permission in availableSystemPermissions\" :key=\"permission.id\" class=\"w-1/3 h-12\">\n                        <checkbox \n                            v-if=\"checkedRolePermissionIds.includes(permission.id)\"\n                            :modelValue=\"true\" :disabled=\"true\" :label=\"permission.display_name\"\n                        />\n                        <checkbox \n                            v-else\n                            v-model=\"checkedPermissions\"\n                            :label=\"titleCase(permission.display_name)\" \n                            :value=\"permission.id\" \n                        />\n                    </li>\n                </ul>\n\n                <div class=\"px-2 py-1 mb-2 mt-4 bg-gray-100 border relative text-xs\">\n                    <div class=\"flex space-x-2\">\n                    <strong>Legend: </strong>\n                        <checkbox label=\"Not granted\" />\n                        <checkbox :value=\"1\" :modelValue=\"true\" label=\"Granted\" />\n                        <checkbox :value=\"2\" :modelValue=\"true\"  disabled label=\"Granted w/ role\" />\n                    </div>\n                    <div class=\"absolute top-0 left-0 w-full h-full bg-pink-500 opacity-0\">&nbsp;</div>\n                </div>\n\n                <button-row \n                    submit-text=\"Save\" \n                    @submitted=\"saveRolesAndPermissions\"\n                    @canceled=\"closeEditForm\"\n                ></button-row>\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nimport User from '@/domain/user'\nimport {api} from '@/http'\nimport configs from '@/configs'\n\nexport default {\n    name: 'UserDetail',\n    props: {\n        id: {\n            require: true\n        }\n    },\n    data() {\n        return {\n            user: new User(),\n            membershipFields: [\n                {name: 'id'},\n                {name: 'group'},\n                {name: 'roles'},\n                {name: 'extra_permissions'}\n            ],\n            showEditForm: false,\n            systemRoles: [],\n            systemPermissions: Object.values(configs.system.permissions),\n            configs,\n            checkedRoles: [],\n            checkedPermissions: [],\n        }\n    },\n    computed: {\n        userInfo () {\n            return {\n                name: this.user.person.name,\n                email: this.user.person.email,\n                roles: this.user.roles.map(r => r.name).join(', '),\n                additional_permissions: this.user.permissions.map(r => r.name).join(', '),\n                registered: this.formatDate(this.user.created_at),\n            }\n        },\n        membershipInfo () {\n            return this.user.person.memberships.map(m => ({\n                    id: m.id,\n                    group: m.group.expert_panel.display_name,\n                    roles: m.roles.map(r => r.name).join(', '),\n                    extra_permissions: m.permissions.map(r => r.name).join(', ') || '',\n                    is_contact: m.is_contact ? 'Yes' : 'No',\n                }))\n        },\n        checkedRolePermissionIds () {\n            if (!this.systemRoles) {\n                return [];\n            }\n            const checkedRolePerms = this.systemRoles\n                                        .filter(r => this.checkedRoles.includes(r.id))\n                                        .map(r => r.permissions)\n                                        .flat()\n                                        .map(p => p.id);\n            return [...(new Set(checkedRolePerms))];\n        },\n        availableSystemRoles () {\n            return this.systemRoles.filter(r => {\n                if (this.hasRole('super-user')) return true;\n                if (this.hasRole('super-admin')) {\n                    if (r.name === 'super-user') return false;\n                    return true;\n                }\n                return false;\n            });\n        },\n        availableSystemPermissions () {\n            return this.systemPermissions.filter(p => {\n                if (this.hasRole('super-user')) return true;\n                if (this.hasRole('super-admin')) {\n                    if (p.name === 'logs-view') return false;\n                    return true;\n                }\n                return false;\n            });\n        },\n        canEditUser () {\n            const currentUser = this.$store.getters.currentUser;\n            if (!this.hasPermission('users-manage')) {\n                return false;\n            }\n\n            if (this.currentUserIsUser) {\n                return true;\n            }\n\n            if (currentUser.hasRole('super-user')) {\n                return true;\n            }\n\n            if (currentUser.hasRole('super-admin') && this.user.hasRole('admin')) {\n                return true;\n            }\n\n            return false;\n            \n        },\n        currentUserIsUser () {\n            return this.$store.getters.currentUser.id == this.user.id;\n        }\n    },\n    watch: {\n        id: {\n            immediate: true,\n            handler () {\n                this.getUser();\n            }\n        }\n    },\n    methods: {\n        async getUser () {\n            this.user = await api.get(`/api/users/${this.id}`)\n                            .then(response => {\n                                return new User(response.data)\n                            });\n            this.resetCheckedRolesAndPermissions();\n        },\n        resetCheckedRolesAndPermissions () {\n            this.checkedRoles = this.user.roles.map(r => r.id);\n            this.checkedPermissions = this.user.permissions.map(r => r.id);            \n        },\n        async getSystemRoles () {\n            this.systemRoles = await api.get(`/api/roles`)\n                                .then(response => response.data);\n        },\n        initEdit () {\n            this.showEditForm = true;\n        },\n        async saveRolesAndPermissions () {\n            const payload = {\n                role_ids: this.checkedRoles, \n                permission_ids: this.checkedPermissions\n            };\n\n            await api.put(`/api/users/${this.user.id}/roles-and-permissions`, payload);\n            this.showEditForm = false;\n\n            this.getUser();\n\n        },\n        closeEditForm () {\n            this.resetCheckedRolesAndPermissions();\n            this.showEditForm = false;\n        }\n    },\n    mounted () {\n        this.getSystemRoles();\n    }\n}\n</script>","import { render } from \"./UserDetail.vue?vue&type=template&id=7b7ce3c9\"\nimport script from \"./UserDetail.vue?vue&type=script&lang=js\"\nexport * from \"./UserDetail.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>\n        <h1>Users</h1>\n        <data-table \n            :fields=\"fields\" \n            :data=\"getUsers\" \n            v-model:sort=\"sort\" \n            @rowClick=\"goToUser\"\n            row-class=\"cursor-pointer\"\n            ref=\"dataTable\"\n            paginated\n        >\n            <template v-slot:header>\n                <div>Filter: &nbsp;<input type=\"text\" v-model=\"filter\" placeholder=\"name, email\"></div>\n            </template>\n        </data-table>\n    </div>\n</template>\n<script>\nimport {api} from '@/http'\nimport {debounce} from 'lodash-es'\nimport sortAndFilterSetup from '@/composables/router_aware_sort_and_filter'\n\nexport default {\n    name: 'ComponentName',\n    props: {\n        \n    },\n    data() {\n        return {\n            users: [],\n            fields: [\n                {\n                    name: 'id',\n                    type: Number,\n                    sortable: true\n                },\n                {\n                    name: 'person.name',\n                    label: 'Name',\n                    type: String,\n                    sortable: true\n                },\n                {\n                    name: 'person.email',\n                    label: 'Email',\n                    type: String,\n                    sortable: true\n                },\n                {\n                    name: 'actions',\n                    sortable: false,\n                    label: ''\n                }\n                \n            ]\n        }\n    },\n    computed: {\n        filteredUsers () {\n            if (!this.filter) {\n                return this.users;\n            }\n            const pattern = new RegExp(`.*${this.filter}.*`, 'i')\n            return this.users.filter(u => {\n                return u.person.name.match(pattern)\n                    || u.person.email.match(pattern);\n            });\n        }\n    },\n    watch: {\n        filter: {\n            immediate: true,\n            handler () {\n                if (this.triggerSearch) {\n                    this.triggerSearch()\n                }\n            }\n        },\n        sort: {\n            immediate: true,\n            handler () {\n                 if (this.triggerSearch) {\n                    this.triggerSearch()\n                }\n            }\n        }\n    },\n    methods: {\n        async getUsers (currentPage, pageSize, sort, setTotalItems) {\n            const params = {\n                page: currentPage,\n                page_size: pageSize,\n                'sort[field]': sort.field.name,\n                'sort[dir]': sort.desc ? 'DESC' : 'ASC',\n                'where[filterString]': this.filter,\n                paginated: true\n            }\n            console.log({params});\n            const pageResponse = await api.get('/api/users', {params: params})\n                                .then(response => response.data);\n            setTotalItems(pageResponse.meta.total);\n            return pageResponse.data;\n        },\n        goToUser (user) {\n            this.$router.push({name: 'UserDetail', params: {id: user.id}})\n        }\n    },\n    setup() {\n        const {sort, filter} = sortAndFilterSetup({\n            field: 'person.name',\n            desc: false\n        });\n\n        return {\n            sort,\n            filter,\n        }\n    },\n    created () {\n        this.triggerSearch = debounce(() => this.$refs.dataTable.getItems(), 500)\n    }\n}\n</script>","import { render } from \"./UserList.vue?vue&type=template&id=121f4a50\"\nimport script from \"./UserList.vue?vue&type=script&lang=js\"\nexport * from \"./UserList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}