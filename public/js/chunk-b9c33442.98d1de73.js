(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9c33442"],{"30d0":function(e,t,r){"use strict";r.r(t);r("4e82"),r("4de4"),r("d3b7");var n=r("7a23"),a=Object(n["createElementVNode"])("h1",null,"People",-1),i={class:"block mb-2",for:"filter-input"},c=Object(n["createTextVNode"])("Filter:Â ");function o(e,t,r,o,s,u){var l=Object(n["resolveComponent"])("data-table");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[a,Object(n["createVNode"])(l,{data:u.itemProvider,fields:s.fields,class:"width-full","row-click-handler":u.goToPerson,"row-class":"cursor-pointer",sort:o.sort,"onUpdate:sort":t[1]||(t[1]=function(e){return o.sort=e}),"page-size":20,paginated:"",ref:"dataTable"},{header:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("label",i,[c,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.filter=e}),placeholder:"filter"},null,512),[[n["vModelText"],o.filter]])])]})),_:1},8,["data","fields","row-click-handler","sort"])])}var s=r("1da1"),u=r("5530"),l=(r("96cf"),r("b0c0"),r("2ef0")),d=r("5502"),f=r("db04"),b=r("5257"),p=(r("fb6a"),20),h=Object(n["ref"])(0),m=function(e){var t=h.value*p,r=t+p-1;return e.slice(t,r)},g=[{name:"name",sortable:!0,type:String},{name:"email",sortable:!0,type:String},{name:"institution.name",label:"Institution",sortable:!0,type:String,resolveSort:function(e){return e.institution?e.institution.name:""}}],j={data:function(){return{fields:g}},computed:Object(u["a"])({},Object(d["b"])({currentUser:"currentUser"})),watch:{filter:{immediate:!0,handler:function(){this.triggerSearch&&this.triggerSearch()}},sort:{immediate:!0,handler:function(){this.triggerSearch&&this.triggerSearch()}}},methods:{goToPerson:function(e){this.$router.push("/people/"+e.uuid)},goToEditPerson:function(e){this.$router.push("/people/".concat(e.uuid,"/edit"))},canEdit:function(e){return!!this.hasPermission("people-manage")||this.currentUser.id==e.user_id},itemProvider:function(e,t,r,n){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var c,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return c={page:e,page_size:t,"sort[field]":r.field.name,"sort[dir]":r.desc?"DESC":"ASC","where[filterString]":a.filter},i.next=3,f["a"].get("/api/people",{params:c}).then((function(e){return e.data}));case 3:return o=i.sent,n(o.meta.total),i.abrupt("return",o.data);case 6:case"end":return i.stop()}}),i)})))()}},created:function(){var e=this;this.triggerSearch=Object(l["debounce"])((function(){return e.$refs.dataTable.getItems()}),500)},setup:function(){var e=Object(b["a"])(),t=e.sort,r=e.filter;return{sort:t,filter:r,pageSize:p,currentPage:h,getPageItems:m}}},O=r("6b0d"),v=r.n(O);const w=v()(j,[["render",o]]);t["default"]=w},5257:function(e,t,r){"use strict";var n=r("5530"),a=(r("caad"),r("2532"),r("b64b"),r("ac1f"),r("5319"),r("4de4"),r("d3b7"),r("6c02")),i=r("7a23");t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(a["d"])(),r=Object(a["c"])();e||(console.log('Warning: defaultSort is deprecated.  Please provide a sort object: {field: "fieldname", desc: boolean}'),e=e||{field:"name",desc:!1});var c=Object(i["computed"])({immediate:!0,get:function(){return Object.keys(r.query).includes("sort-field")?{field:r.query["sort-field"],desc:Boolean(parseInt(r.query["sort-desc"]))}:e},set:function(e){var a={"sort-field":e.field,"sort-desc":e.desc?1:0},i=Object(n["a"])(Object(n["a"])({},r.query),a);t.replace({path:r.path,query:i})}}),o=Object(i["computed"])({set:function(e){var a=r.query,i=r.path,c=Object(n["a"])({},a);e?c=Object(n["a"])(Object(n["a"])({},a),{filter:e}):delete c.filter,t.replace({path:i,query:c})},get:function(){return r.query.filter},immediate:!0});return{sort:c,filter:o}}}}]);
//# sourceMappingURL=chunk-b9c33442.98d1de73.js.map