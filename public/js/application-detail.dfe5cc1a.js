"use strict";(self["webpackChunkepam"]=self["webpackChunkepam"]||[]).push([[419],{8239:function(e,t,a){a.r(t),a.d(t,{default:function(){return st}});var l=a(641),o=a(953),n=a(3751),s=a(6278),i=a(6563),r=a(33);const u=(0,l.Lk)("strong",null,"Warning!!",-1),d=(0,l.eW)(" There are currently no contacts connected to this application! "),c={class:"flex space-x-2"},p=(0,l.eW)("Add Next Action"),m=(0,l.eW)("Add Log Entry"),g={class:"md:flex md:space-x-4"},b=(0,l.Lk)("h2",{class:"block-title"},"Advanced actions and controls",-1),v=(0,l.eW)(" Delete Application and all associated information. ");function h(e,t,a,o,n,s){const i=(0,l.g2)("static-alert"),h=(0,l.g2)("note"),k=(0,l.g2)("router-link"),f=(0,l.g2)("basic-info-data"),_=(0,l.g2)("next-actions"),C=(0,l.g2)("progress-chart"),w=(0,l.g2)("step-tabs"),x=(0,l.g2)("tab-item"),y=(0,l.g2)("application-log"),F=(0,l.g2)("tabs-container"),A=(0,l.g2)("ScreenTemplate"),E=(0,l.g2)("router-view"),L=(0,l.g2)("modal-dialog");return(0,l.uX)(),(0,l.CE)("div",null,[a.loading||e.group.hasContacts?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(i,{key:0,variant:"danger",class:"mb-4"},{default:(0,l.k6)((()=>[u,d])),_:1})),(0,l.bF)(A,{title:e.group.displayName,breadcrumbs:s.breadcrumbs},{"header-dev":(0,l.k6)((()=>[(0,l.bF)(h,null,{default:(0,l.k6)((()=>[(0,l.eW)(" Group ID: "+(0,r.v_)(e.group.id)+" | Expert Panel ID: "+(0,r.v_)(e.group.expert_panel.id),1)])),_:1})])),"header-right":(0,l.k6)((()=>[(0,l.Lk)("div",c,[(0,l.bF)(k,{to:{name:"NextAction"},class:"btn btn-sm"},{default:(0,l.k6)((()=>[p])),_:1}),(0,l.bF)(k,{to:{name:"LogEntry"},class:"btn btn-sm"},{default:(0,l.k6)((()=>[m])),_:1})])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",g,[(0,l.bF)(f,{class:"w-1/2 screen-block"}),s.application.next_actions?((0,l.uX)(),(0,l.Wv)(_,{key:0,"next-actions":s.application.next_actions,class:"w-1/2 space-y-2 md:px-4 md:py-2 bg-white border-b border-gray-200"},null,8,["next-actions"])):(0,l.Q3)("",!0)]),(0,l.bF)(C,{application:s.application,class:"py-4 screen-block"},null,8,["application"]),(0,l.bF)(F,null,{default:(0,l.k6)((()=>[(0,l.bF)(x,{label:"Application"},{default:(0,l.k6)((()=>[(0,l.bF)(w,{application:s.application,onUpdated:t[0]||(t[0]=t=>e.$emit("updated")),onApproved:t[1]||(t[1]=t=>e.$emit("updated"))},null,8,["application"])])),_:1}),(0,l.bF)(x,{label:"Application Log"},{default:(0,l.k6)((()=>[(0,l.bF)(y,{uuid:s.application.uuid},null,8,["uuid"])])),_:1}),(0,l.bF)(x,{label:"Advanced"},{default:(0,l.k6)((()=>[b,(0,l.bF)(k,{to:{name:"ConfirmDeleteApplication"},class:"btn red"},{default:(0,l.k6)((()=>[v])),_:1})])),_:1})])),_:1})])),_:1},8,["title","breadcrumbs"]),((0,l.uX)(),(0,l.Wv)(l.Im,{to:"body"},[(0,l.bF)(L,{modelValue:n.showModal,"onUpdate:modelValue":t[2]||(t[2]=e=>n.showModal=e),onClosed:s.handleModalClosed,title:e.$route.meta.title},{default:(0,l.k6)((()=>[(0,l.bF)(E,{ref:"modalView",onSaved:s.hideModal,onCanceled:s.hideModal},null,8,["onSaved","onCanceled"])])),_:1},8,["modelValue","onClosed","title"])]))])}var k=a(1984);const f={class:"text-sm"},_={class:"flex justify-between"},C=(0,l.Lk)("h3",null,"Next Actions",-1),w=(0,l.eW)(" Show completed "),x=["innerHTML"],y={class:"flex"},F={key:0},A={class:"flex space-x-1"},E={key:1,class:"well bg-gray-200 rounded border px-4 py-2 border-gray-300"},L=(0,l.eW)(" There are no pending "),W={key:0},X=(0,l.eW)(" next actions. ");function V(e,t,a,o,s,i){const u=(0,l.g2)("edit-icon-button"),d=(0,l.g2)("trash-icon-button"),c=(0,l.g2)("icon-checkmark"),p=(0,l.g2)("checkmark-button"),m=(0,l.g2)("data-table"),g=(0,l.g2)("complete-next-action-form"),b=(0,l.g2)("modal-dialog");return(0,l.uX)(),(0,l.CE)("div",f,[(0,l.Lk)("div",_,[C,(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>s.showCompleted=e)},null,512),[[n.lH,s.showCompleted]]),w])]),i.filteredNextActions.length>0?((0,l.uX)(),(0,l.Wv)(m,{key:0,fields:s.fields,data:i.filteredNextActions,sort:s.tableSort,"onUpdate:sort":t[1]||(t[1]=e=>s.tableSort=e)},{"cell-entry":(0,l.k6)((({item:e})=>[(0,l.Lk)("div",{innerHTML:e.entry},null,8,x)])),"cell-assigned_to":(0,l.k6)((({item:e})=>[(0,l.Lk)("div",y,[(0,l.eW)((0,r.v_)(e.assignee?e.assignee.name:"??")+"Â  ",1),e.assigned_to_name?((0,l.uX)(),(0,l.CE)("span",F," - "+(0,r.v_)(e.assigned_to_name),1)):(0,l.Q3)("",!0)])])),"cell-action":(0,l.k6)((({item:t})=>[(0,l.Lk)("div",A,[(0,l.bF)(u,{onClick:a=>e.$router.push({name:"EditNextAction",params:{uuid:i.application.uuid,id:t.id}})},null,8,["onClick"]),(0,l.bF)(d,{onClick:e=>i.initiateDelete(t)},null,8,["onClick"]),Boolean(t.date_completed)?((0,l.uX)(),(0,l.Wv)(c,{key:0,width:"20",height:"20",class:(0,r.C4)({"text-green-500":Boolean(t.date_completed),"text-gray-300":!Boolean(t.date_completed)})},null,8,["class"])):((0,l.uX)(),(0,l.Wv)(p,{key:1,onClick:(0,n.D$)((e=>i.startCompleting(t)),["prevent"]),title:"Mark complete"},null,8,["onClick"]))])])),_:1},8,["fields","data","sort"])):((0,l.uX)(),(0,l.CE)("div",E,[L,s.showCompleted?((0,l.uX)(),(0,l.CE)("span",W,"or completed")):(0,l.Q3)("",!0),X])),(0,l.bF)(b,{modelValue:s.showCreateModal,"onUpdate:modelValue":t[3]||(t[3]=e=>s.showCreateModal=e),title:"Complete next action"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{"next-action":s.selectedNextAction,onCanceled:t[2]||(t[2]=e=>s.showCreateModal=!1),onCompleted:i.handleCompleted},null,8,["next-action","onCompleted"])])),_:1},8,["modelValue"])])}a(3725),a(5019);const N=["innerHTML"];function D(e,t,a,o,n,s){const i=(0,l.g2)("dictionary-row"),r=(0,l.g2)("object-dictionary"),u=(0,l.g2)("input-row"),d=(0,l.g2)("button-row");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(i,{label:"Action"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{innerHTML:a.nextAction.entry},null,8,N)])),_:1}),(0,l.bF)(r,{obj:a.nextAction,show:["date_created","step","target_date"],dates:["target_date","date_created"]},null,8,["obj"]),(0,l.bF)(u,{label:"Date Completed",modelValue:n.dateCompleted,"onUpdate:modelValue":t[0]||(t[0]=e=>n.dateCompleted=e),type:"date",errors:n.errors.date_completed},null,8,["modelValue","errors"]),(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.Lk)("button",{class:"btn white",onClick:t[1]||(t[1]=(...e)=>s.cancel&&s.cancel(...e))},"Cancel"),(0,l.Lk)("button",{class:"btn blue",onClick:t[2]||(t[2]=(...e)=>s.markComplete&&s.markComplete(...e))},"Mark Complete")])),_:1})])}var I=a(8751),M={name:"ComponentName",props:{nextAction:{type:Object,required:!0}},data(){return{errors:[],dateCompleted:null}},computed:{...(0,s.L8)({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel}},methods:{async markComplete(){try{await this.$store.dispatch("applications/completeNextAction",{application:this.application,nextAction:this.nextAction,dateCompleted:this.dateCompleted}),this.clearForm(),this.$emit("completed"),this.showModal=!1}catch(e){(0,I.A)(e)&&(this.errors=e.response.data.errors)}},clearForm(){this.dateCompleted=null},cancel(){this.clearForm(),this.$emit("canceled")}}},R=a(6262);const $=(0,R.A)(M,[["render",D]]);var S=$,j=a(8743),U=a(8637),Q={name:"NextActions",components:{CompleteNextActionForm:S,CheckmarkButton:j["default"],TrashIconButton:U["default"]},props:{nextActions:{type:Array,required:!0}},data(){return{tableSort:{field:"target_date",desc:!1},showCompleted:!1,showDeleteConfirmation:!1,selectedNextAction:{},errors:{},showCreateModal:!1,fields:[{name:"entry",label:"Next Action",type:String},{name:"assigned_to",label:"Assigned to",sortable:!0,resolveValue(e){let t=e.assigned_to;return e.assigned_to_name&&(t+=`- ${e.assigned_to_name}`),t}},{name:"target_date",label:"Due Date",type:Date,sortable:!0},{name:"action",label:"",sortable:!1}]}},computed:{...(0,s.L8)({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel},filteredNextActions(){return this.nextActions?this.showCompleted?this.nextActions:this.nextActions.filter((e=>!e.date_completed)):[]}},methods:{startCompleting(e){this.selectedNextAction=e,this.showCreateModal=!0},handleCompleted(){this.$emit("completed"),this.showCreateModal=!1},initiateDelete(e){this.$router.push({name:"ConfirmDeleteNextAction",params:{applicationUuid:this.application.uuid,id:e.id}})}}};const G=(0,R.A)(Q,[["render",V]]);var B=G,O=a(2538),K=a(6252);const P={class:"flex justify-between border-b pb-2 min-w-fit"},T=(0,l.Lk)("h3",null,"Base Information",-1),H={key:0},q={key:0},J=["href"],Y={key:1};function z(e,t,a,o,n,s){const i=(0,l.g2)("dictionary-row"),u=(0,l.g2)("router-link"),d=(0,l.g2)("group-form"),c=(0,l.g2)("submission-wrapper"),p=(0,l.g2)("modal-dialog");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("div",P,[T,(0,l.Lk)("button",{class:"btn btn-xs",onClick:t[0]||(t[0]=e=>n.showInfoEdit=!0)},"Edit")]),(0,l.bF)(i,{"label-class":"font-bold w-40",label:"Long Base Name"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.application.long_base_name||"--"),1)])),_:1}),(0,l.bF)(i,{"label-class":"font-bold w-40",label:"Short Base Name"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.application.short_base_name||"--"),1)])),_:1}),(0,l.bF)(i,{"label-class":"font-bold w-40",label:"Affiliation ID"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.application.affiliation_id||"--"),1)])),_:1}),(0,l.bF)(i,{"label-class":"font-bold w-40",label:"CDWG"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.group.parent?s.group.parent.name:"--"),1)])),_:1}),(0,l.bF)(i,{"label-class":"font-bold w-40",label:"Chair(s)"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.group.chairs,((e,t)=>((0,l.uX)(),(0,l.CE)("span",{key:e.id},[(0,l.bF)(u,{to:{name:"PersonDetail",params:{id:e.id}}},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(e.person.name),1)])),_:2},1032,["to"]),t<s.group.chairs.length-1?((0,l.uX)(),(0,l.CE)("span",H,", ")):(0,l.Q3)("",!0)])))),128))])),_:1}),(0,l.bF)(i,{"label-class":"font-bold w-40",label:"Coordinator(s)"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.group.coordinators,((e,t)=>((0,l.uX)(),(0,l.CE)("span",{key:e.id},[(0,l.bF)(u,{to:{name:"PersonDetail",params:{id:e.id}}},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(e.person.name),1)])),_:2},1032,["to"]),t<s.group.coordinators.length-1?((0,l.uX)(),(0,l.CE)("span",q,", ")):(0,l.Q3)("",!0)])))),128))])),_:1}),(0,l.bF)(i,{"label-class":"font-bold w-40",label:"Website URL"},{default:(0,l.k6)((()=>[s.application.stepIsApproved(1)?((0,l.uX)(),(0,l.CE)("a",{key:0,href:`https://clinicalgenome.org/affiliation/${s.application.affiliation_id}`,target:"ep-website"}," https://clinicalgenome.org/affiliation/"+(0,r.v_)(s.application.affiliation_id),9,J)):((0,l.uX)(),(0,l.CE)("span",Y,"https://clinicalgenome.org/affiliation/"+(0,r.v_)(s.application.affiliation_id||"--"),1))])),_:1}),((0,l.uX)(),(0,l.Wv)(l.Im,{to:"body"},[(0,l.bF)(p,{modelValue:n.showInfoEdit,"onUpdate:modelValue":t[5]||(t[5]=e=>n.showInfoEdit=e),onClosed:t[6]||(t[6]=e=>n.showInfoEdit=!1),title:"Edit Group Info",size:"md"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{onSubmitted:t[3]||(t[3]=t=>e.$refs.infoForm.save()),onCanceled:t[4]||(t[4]=t=>e.$refs.infoForm.cancel())},{default:(0,l.k6)((()=>[(0,l.bF)(d,{ref:"infoForm",onCanceled:t[1]||(t[1]=e=>n.showInfoEdit=!1),onSaved:t[2]||(t[2]=e=>n.showInfoEdit=!1)},null,512)])),_:1})])),_:1},8,["modelValue"])]))])}var Z=a(8461),ee={name:"BasicInfoData",components:{GroupForm:Z.A},data(){return{showInfoEdit:!1}},computed:{group(){return this.$store.getters["groups/currentItemOrNew"]},application(){return this.group.expert_panel}},methods:{}};const te=(0,R.A)(ee,[["render",z]]);var ae=te,le={name:"ApplicationDetail",components:{ApplicationLog:k.A,NextActions:B,ProgressChart:O.A,StepTabs:K.A,BasicInfoData:ae},props:{loading:{type:Boolean,default:!1}},emits:["updated"],data(){return{showModal:!1}},watch:{$route(){this.showModal=!!this.$route.meta.showModal&&Boolean(this.$route.meta.showModal)}},computed:{...(0,s.L8)({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel},hasPendingNextAction(){return"undefined"!=typeof this.application&&this.application.latest_pending_next_action},breadcrumbs(){return this.group.uuid?[{label:this.group.displayName,route:{name:"GroupDetail",params:{uuid:this.group.uuid}}}]:[]}},methods:{hideModal(){this.$router.replace({name:"ApplicationDetail",params:{uuid:this.group.uuid}})},handleModalClosed(e){this.clearModalForm(e),this.$router.push({name:"ApplicationDetail",params:{uuid:this.group.uuid}})},clearModalForm(){"function"===typeof this.$refs.modalView.clearForm&&this.$refs.modalView.clearForm()}},mounted(){this.showModal=Boolean(this.$route.meta.showModal)}};const oe=(0,R.A)(le,[["render",h]]);var ne=oe,se=a(5682),ie=a(8500),re=a(5645),ue=a(696);const de={key:0,class:"mt-2"},ce=(0,l.Lk)("h3",null,"The following comments will be sent to the expert panel:",-1),pe=(0,l.Lk)("hr",null,null,-1),me=(0,l.Lk)("h3",null,"How should we proceed?",-1),ge={class:"flex px-4 space-x-4 items-center p-2 bg-gray-100 rounded-lg"},be=(0,l.Lk)("div",null," Reply to or create comments, suggestions, and required revisions in the comments section on the main screen. ",-1);var ve={__name:"JudgementForm",props:{modelValue:{type:Object,default:()=>({decision:null,notes:null})}},emits:["saved","canceled","update:modelValue"],setup(e,{emit:t}){const a=e,n=(0,l.WQ)("commentManager"),i=(0,s.Pj)(),r=(0,l.EW)((()=>i.getters["groups/currentItemOrNew"])),u=["request-revisions","approve-after-revisions","approve"],d=(0,o.KR)({}),c=(0,o.KR)({judgement:null,notes:null}),p=e=>{c.value=e};(0,l.wB)((()=>a.modelValue),(e=>{e&&p(e)}),{immediate:!0});const m=async()=>ue.FH.post(`/api/groups/${r.value.uuid}/application/judgements`,{decision:c.value.decision,notes:c.value.notes}).then((e=>(t("saved",e.data),h(),e.data))),g=async()=>{const e=`/api/groups/${r.value.uuid}/application/judgements/${c.value.id}`;return ue.FH.put(e,c.value).then((e=>(t("saved",e.data),e.data)))},b=async()=>{try{return c.value.id?await g():await m()}catch(e){(0,ue.Ah)(e)&&(d.value=e.response.data.errors)}},v=()=>{h(),t("canceled")},h=()=>{a.modelValue?p(a.modelValue):c.value={}};return(e,t)=>{const a=(0,l.g2)("radio-button-group"),s=(0,l.g2)("input-row"),i=(0,l.g2)("icon-exclamation"),r=(0,l.g2)("button-row");return(0,l.uX)(),(0,l.CE)("div",null,[(0,o.R1)(n).commentsForEp.length>0?((0,l.uX)(),(0,l.CE)("div",de,[ce,(0,l.bF)(re.A,{comments:(0,o.R1)(n).commentsForEp},null,8,["comments"])])):(0,l.Q3)("",!0),pe,(0,l.bF)(s,{errors:d.value.decision,vertical:""},{label:(0,l.k6)((()=>[me])),default:(0,l.k6)((()=>[(0,l.bF)(a,{modelValue:c.value.decision,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value.decision=e),options:u,labelAttribute:"label",size:"lg",vertical:""},null,8,["modelValue"])])),_:1},8,["errors"]),(0,l.bF)(s,{modelValue:c.value.notes,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value.notes=e),label:"Other notes for the expert panel",type:"large-text",errors:d.value.notes,vertical:""},null,8,["modelValue","errors"]),(0,l.Lk)("div",ge,[(0,l.bF)(i,{class:"text-blue-600 flex-shrink-0",width:"30",height:"30"}),be]),(0,l.bF)(r,{onSubmitted:b,onCanceled:v})])}}};const he=ve;var ke=he,fe=(a(2598),a(1300)),_e=a(9704);const Ce={key:0},we=(0,l.eW)(" Your Decision: "),xe={key:0,class:"mt-2"},ye=(0,l.Lk)("strong",null,"Notes: ",-1),Fe=(0,l.eW)(" You are about to delete your decision for this applicaiton. This cannot be undone. Are you sure you want to continue? ");var Ae={__name:"JudgementDetail",emits:["deleted"],setup(e,{emit:t}){const a=(0,s.Pj)(),n=(0,l.WQ)("latestSubmission"),i=(0,l.EW)((()=>a.getters["groups/currentItemOrNew"])),u=(0,l.EW)((()=>a.getters.currentUser)),d=(0,l.EW)({get(){return n.value&&n.value.judgements?n.value.judgements.find((e=>e.person_id==u.value.person.id)):null}}),c=(0,l.EW)((()=>(0,_e.b)(d.value.decision))),p=(0,o.KR)(!1),m=()=>{p.value=!0},g=(0,o.KR)(!1),b=()=>{g.value=!0},v=async()=>{await ue.FH.delete(`/api/groups/${i.value.uuid}/application/judgements/${d.value.id}`),g.value=!1,t("deleted")};return(e,t)=>{const a=(0,l.g2)("badge"),n=(0,l.g2)("modal-dialog"),s=(0,l.g2)("button-row");return(0,o.R1)(d)?((0,l.uX)(),(0,l.CE)("div",Ce,[(0,l.Lk)("h3",null,[we,(0,l.bF)(a,{color:(0,o.R1)(c),size:"lg"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)((0,o.R1)(fe.nx)((0,o.R1)(d).decision)),1)])),_:1},8,["color"])]),(0,o.R1)(d).notes?((0,l.uX)(),(0,l.CE)("div",xe,[(0,l.Lk)("p",null,[ye,(0,l.eW)((0,r.v_)((0,o.R1)(d).notes),1)])])):(0,l.Q3)("",!0),(0,l.Lk)("div",{class:"flex space-x-2"},[(0,l.Lk)("button",{class:"btn btn-xs",onClick:m},"Change Decision"),(0,l.Lk)("button",{class:"btn btn-xs",onClick:b},"Cancel Decision")]),((0,l.uX)(),(0,l.Wv)(l.Im,{to:"body"},[(0,l.bF)(n,{modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=e=>p.value=e),title:"Update Your Decision"},{default:(0,l.k6)((()=>[(0,l.bF)(ke,{modelValue:(0,o.R1)(d),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.i9)(d)?d.value=e:null),onSaved:t[1]||(t[1]=e=>p.value=!1),onCanceled:t[2]||(t[2]=e=>p.value=!1)},null,8,["modelValue"])])),_:1},8,["modelValue"]),(0,l.bF)(n,{modelValue:g.value,"onUpdate:modelValue":t[5]||(t[5]=e=>g.value=e),title:"Delete your decision for this applicaiton"},{footer:(0,l.k6)((()=>[(0,l.bF)(s,{"submit-text":"Yes, Delete",onSubmitted:v,onCanceled:t[4]||(t[4]=e=>g.value=!1)})])),default:(0,l.k6)((()=>[Fe])),_:1},8,["modelValue"])]))])):(0,l.Q3)("",!0)}}};const Ee=Ae;var Le=Ee;const We=e=>((0,l.Qi)("data-v-6dce958f"),e=e(),(0,l.jt)(),e),Xe={class:"flex flex-col space-y-2 screen-block"},Ve={class:"xl:w-3/4 flex flex-col space-y-2 border-between-children"},Ne=We((()=>(0,l.Lk)("h3",null,"Comments for the Expert Panel",-1))),De={class:"mb-2"},Ie={key:1,class:"note"},Me=We((()=>(0,l.Lk)("h3",null,"Internal Comments",-1))),Re={class:"mb-2"},$e={key:1,class:"note"},Se={key:0},je=We((()=>(0,l.Lk)("h3",null,"Other notes from the Core Group",-1))),Ue={key:1},Qe=We((()=>(0,l.Lk)("h3",null,"Other Approver's Judgements:",-1))),Ge={class:"text-lg"},Be={key:0,class:"ml-2 text-sm"},Oe=We((()=>(0,l.Lk)("strong",null,"Notes for EP: ",-1))),Ke=We((()=>(0,l.Lk)("hr",null,null,-1))),Pe={class:"pt-2 lg:flex lg:space-x-2 space-y-2 lg:space-y-0 items-start"},Te={class:"lg:w-3/5"},He={class:"flex space-x-2 items-center p-2 bg-gray-100 rounded-lg lg:w-2/5"},qe=We((()=>(0,l.Lk)("div",null,"Reply to or create comments, suggestions, and required revisions in the comments sections below.",-1)));var Je={__name:"ChairApproverControls",emits:["deleted","saved"],setup(e,{emit:t}){const a=(0,l.WQ)("commentManager"),n=(0,l.WQ)("latestSubmission"),i=(0,s.Pj)(),u=(0,o.KR)(!1),d=()=>{u.value=!0},c=(0,l.EW)((()=>n.value.judgements&&n.value.judgements.length>0&&n.value.judgements.filter((e=>e.person_id==i.getters.currentUser.person.id)).length>0)),p=(0,l.EW)((()=>n.value&&n.value.judgements?n.value.judgements.filter((e=>e.person_id!==i.getters.currentUser.person.id)):[])),m=(0,l.EW)((()=>a.value.commentsForEp.length>0)),g=(0,l.EW)((()=>a.value.openInternal.length>0)),b=e=>{u.value=!1,t("saved",e)};return(e,s)=>{const i=(0,l.g2)("badge"),v=(0,l.g2)("icon-arrow-down"),h=(0,l.g2)("modal-dialog");return(0,l.uX)(),(0,l.CE)("div",Xe,[(0,l.Lk)("div",Ve,[(0,l.Lk)("div",null,[Ne,(0,l.Lk)("div",De,[(0,o.R1)(m)?((0,l.uX)(),(0,l.Wv)(re.A,{key:0,comments:(0,o.R1)(a).commentsForEp},null,8,["comments"])):((0,l.uX)(),(0,l.CE)("div",Ie,"None"))])]),(0,l.Lk)("div",null,[Me,(0,l.Lk)("div",Re,[(0,o.R1)(g)?((0,l.uX)(),(0,l.Wv)(re.A,{key:0,comments:(0,o.R1)(a).openInternal},null,8,["comments"])):((0,l.uX)(),(0,l.CE)("div",$e,"None"))])]),(0,o.R1)(n).notes_for_chairs?((0,l.uX)(),(0,l.CE)("div",Se,[je,(0,l.Lk)("p",null,(0,r.v_)((0,o.R1)(n).notes_for_chairs),1)])):(0,l.Q3)("",!0),(0,o.R1)(p).length>0?((0,l.uX)(),(0,l.CE)("div",Ue,[Qe,(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,o.R1)(p),(t=>((0,l.uX)(),(0,l.CE)("li",{key:t.id,class:"mt-2 ml-2"},[(0,l.Lk)("div",Ge,[(0,l.eW)((0,r.v_)(t.person.name)+": ",1),(0,l.bF)(i,{color:(0,o.R1)(_e.b)(t)},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(e.titleCase(t.decision)),1)])),_:2},1032,["color"])]),t.notes?((0,l.uX)(),(0,l.CE)("p",Be,[Oe,(0,l.eW)((0,r.v_)(t.notes),1)])):(0,l.Q3)("",!0)])))),128))])])):(0,l.Q3)("",!0)]),Ke,(0,l.Lk)("div",Pe,[(0,l.Lk)("div",Te,[(0,o.R1)(c)?((0,l.uX)(),(0,l.Wv)(Le,{key:1,onDeleted:s[0]||(s[0]=e=>t("deleted")),onSaved:s[1]||(s[1]=e=>t("saved"))})):((0,l.uX)(),(0,l.CE)("button",{key:0,class:"block btn btn-lg blue",onClick:d}," Approve or request revisions "))]),(0,l.Lk)("div",He,[(0,l.bF)(v,{class:"text-blue-600 flex-shrink-0",width:"30",height:"30"}),qe,(0,l.bF)(v,{class:"text-blue-600 flex-shrink-0",width:"30",height:"30"})])]),((0,l.uX)(),(0,l.Wv)(l.Im,{to:"body"},[(0,l.bF)(h,{modelValue:u.value,"onUpdate:modelValue":s[3]||(s[3]=e=>u.value=e),title:"Approve or request revisions"},{default:(0,l.k6)((()=>[(0,l.bF)(ke,{onSaved:b,onCanceled:s[2]||(s[2]=e=>u.value=!1)})])),_:1},8,["modelValue"])]))])}}};const Ye=(0,R.A)(Je,[["__scopeId","data-v-6dce958f"]]);var ze=Ye,Ze=a(7339),et={__name:"ApplicationReview",emits:["deleted","saved"],setup(e,{emit:t}){const a=(0,s.Pj)(),n=(0,l.EW)((()=>a.getters["groups/currentItemOrNew"])),r=(0,l.EW)((()=>n.value.expert_panel)),u=(0,l.EW)((()=>n.value.uuid?[{label:n.value.displayName,route:{name:"GroupDetail",params:{uuid:n.value.uuid}}}]:[])),d=(0,l.EW)((()=>4==n.value.expert_panel.current_step?Ze.A:1==r.value.current_step?ie.A:null)),c=(0,l.EW)((()=>n.value.is_gcep?n.value.displayName:`${n.value.displayName} - ${n.value.expert_panel.currentStepName}`));return(e,a)=>((0,l.uX)(),(0,l.Wv)(se["default"],{title:(0,o.R1)(c),breadcrumbs:(0,o.R1)(u)},{default:(0,l.k6)((()=>[(0,o.R1)(i._m)("ep-applications-approve")?((0,l.uX)(),(0,l.Wv)(ze,{key:0,onDeleted:a[0]||(a[0]=e=>t("deleted")),onSaved:a[1]||(a[1]=e=>t("deleted"))})):(0,l.Q3)("",!0),((0,l.uX)(),(0,l.Wv)((0,l.$y)((0,o.R1)(d))))])),_:1},8,["title","breadcrumbs"]))}};const tt=et;var at=tt,lt=a(1047),ot={__name:"ApplicationDetail",props:{uuid:{type:String,requird:!0}},setup(e){const t=e,a=(0,o.KR)((0,lt.A)("App\\Modules\\Group\\Models\\Group",0));(0,l.Gt)("commentManager",a);const r=(0,s.Pj)(),u=(0,o.KR)(!1),d=(0,l.EW)((()=>r.getters["groups/currentItemOrNew"]));(0,l.Gt)("group",d);const c=(0,o.IJ)(at),p=(0,o.KR)({});(0,l.Gt)("latestSubmission",p);const m=()=>{ue.FH.get(`/api/groups/${d.value.uuid}/application/latest-submission`).then((e=>p.value=e.data)).catch((e=>console.log(e)))},g=async()=>{u.value=!0,await r.dispatch("groups/findAndSetCurrent",t.uuid),r.dispatch("groups/getDocuments",d.value),r.dispatch("groups/getNextActions",d.value),r.dispatch("groups/getSubmissions",d.value),m(),r.dispatch("groups/getMembers",d.value),r.dispatch("groups/getGenes",d.value),u.value=!1};return(0,l.wB)((()=>t.uuid),(async(e,t)=>{!e||t&&e==t||(await g(),a.value=(0,lt.A)("App\\Modules\\Group\\Models\\Group",d.value.id),a.value.getComments())}),{immediate:!0}),(0,l.sV)((async()=>{(0,i._m)("ep-applications-comment")&&(c.value=at),(0,i._m)("ep-applications-manage")&&(c.value=ne)})),(e,t)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[((0,l.uX)(),(0,l.Wv)((0,l.$y)((0,o.R1)(c)),{loading:u.value,onUpdated:g,onSaved:m,onDeleted:m},null,40,["loading"])),(0,l.bo)((0,l.Lk)("div",null,"Loadingâ¦",512),[[n.aG,u.value]])],64))}};const nt=ot;var st=nt}}]);
//# sourceMappingURL=application-detail.dfe5cc1a.js.map