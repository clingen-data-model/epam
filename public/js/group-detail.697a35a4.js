(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-detail"],{"0251":function(e,t,n){},"4f50":function(e,t,n){"use strict";var o=n("7a23"),r={class:"flex space-x-2 items-center mb-3"},c={key:0},a=Object(o["createTextVNode"])(" has"),i={key:1},l=Object(o["createTextVNode"])(" an "),u=Object(o["createTextVNode"])(" due on "),s=Object(o["createTextVNode"])(". "),d=Object(o["createTextVNode"])(" Complete the Annual Update ");function p(e,t,n,p,b,m){var O=Object(o["resolveComponent"])("icon-review"),j=Object(o["resolveComponent"])("router-link"),f=Object(o["resolveComponent"])("static-alert");return m.isPending&&b.annualReview.id?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0,variant:m.variant},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(O,{height:"30",width:"30"}),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("p",null,[n.showGroupName?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",c,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(n.group.displayName),1),a])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",i,"You have")),l,Object(o["createElementVNode"])("strong",null,"annual update for "+Object(o["toDisplayString"])(m.window.for_year),1),u,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.formatDate(m.window.end)),1),s]),n.group.uuid?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:0,class:"btn font-bold",to:{name:"AnnualUpdate",params:{uuid:n.group.uuid}}},{default:Object(o["withCtx"])((function(){return[d]})),_:1},8,["to"])):Object(o["createCommentVNode"])("",!0)])])]})),_:1},8,["variant"])):Object(o["createCommentVNode"])("",!0)}var b=n("db04"),m={name:"AnnualUpdateAlert",props:{group:{type:Object,required:!0},showGroupName:{type:Boolean,default:!1}},data:function(){return{annualReview:{},loading:!1}},computed:{window:function(){return this.annualReview.window?this.annualReview.window:{}},isPending:function(){return!this.annualReview.completed_at},variant:function(){var e=new Date;if(!this.window.end)return console.log("no window.end"),"warning";var t=new Date(Date.parse(this.window.end));return e>this.addDays(t,-7)?"danger":"warning"}},watch:{group:{immediate:!0,handler:function(){this.getAnnualUpdate()}}},methods:{getAnnualUpdate:function(){var e=this;this.group.uuid&&this.group.expert_panel.definition_is_approved&&(this.loading=!0,b["a"].get("/api/groups/".concat(this.group.uuid,"/expert-panel/annual-updates"),{headers:{"X-Ignore-Missing":1}}).then((function(t){e.annualReview=t.data})),this.loading=!1)}}},O=n("6b0d"),j=n.n(O);const f=j()(m,[["render",p]]);t["a"]=f},8067:function(e,t,n){},"8c58":function(e,t,n){"use strict";n("0251")},b47e:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r=Object(o["createElementVNode"])("h3",null," Plans for Ongoing Gene Review and Reanalysis and Discrepancy Resolution ",-1),c=Object(o["createElementVNode"])("br",null,null,-1),a={key:0,class:"bg-white bg-opacity-50 absolute top-0 left-0 right-0 bottom-0"},i=Object(o["createTextVNode"])(" You can complete these sections after your first Specifications Pilot has been approved. "),l={key:2},u=Object(o["createElementVNode"])("header",null,[Object(o["createElementVNode"])("h3",null,"Example Evidence Summaries")],-1),s={class:"relative"},d=Object(o["createTextVNode"])(" You can complete these sections after your first Specifications Pilot has been approved. "),p=Object(o["createTextVNode"])("The attestations below are read only. Attestations can only be completed during the application process."),b=Object(o["createElementVNode"])("h3",null,"Reanalysis & Discrepancy Resolution",-1),m=Object(o["createElementVNode"])("h3",null,"NHGRI Data Availability",-1),O={key:0},j=Object(o["createElementVNode"])("h2",{class:"pb-2 border-b mb-4"},"Application",-1),f=Object(o["createElementVNode"])("hr",null,null,-1),g={class:"border my-4 p-4 rounded"},h=Object(o["createElementVNode"])("h2",{class:"mb-4"},"Annual Update",-1),v=["href"],y={class:"border my-4 p-4 bg-red-100 border-red-200 rounded"},w=Object(o["createElementVNode"])("h2",{class:"mb-4 text-red-800"}," Here be dragons. Proceed with caution. ",-1),k={key:1,class:"border my-4 p-4 rounded"},C=Object(o["createElementVNode"])("h2",{class:"mb-4"},[Object(o["createTextVNode"])(" Dev tools "),Object(o["createElementVNode"])("span",{class:"text-gray-500"}," - don't use if you don't know.")],-1),V=Object(o["createElementVNode"])("br",null,null,-1),N=Object(o["createElementVNode"])("br",null,null,-1),E={class:"text-lg"},x=Object(o["createElementVNode"])("p",null,"This cannot be undone.",-1);function D(e,t,n,D,B,_){var S=this,U=Object(o["resolveComponent"])("annual-update-alert"),F=Object(o["resolveComponent"])("sustained-curation-review-alert"),T=Object(o["resolveComponent"])("group-detail-header"),A=Object(o["resolveComponent"])("application-summary"),R=Object(o["resolveComponent"])("member-list"),$=Object(o["resolveComponent"])("membership-description-form"),I=Object(o["resolveComponent"])("submission-wrapper"),M=Object(o["resolveComponent"])("tab-item"),L=Object(o["resolveComponent"])("scope-description-form"),P=Object(o["resolveComponent"])("static-alert"),G=Object(o["resolveComponent"])("evidence-summaries"),q=Object(o["resolveComponent"])("cspec-summary"),H=Object(o["resolveComponent"])("group-documents"),Y=Object(o["resolveComponent"])("note"),J=Object(o["resolveComponent"])("attestation-gcep"),W=Object(o["resolveComponent"])("attestation-reanalysis"),z=Object(o["resolveComponent"])("attestation-nhgri"),X=Object(o["resolveComponent"])("activity-log"),K=Object(o["resolveComponent"])("progress-chart"),Q=Object(o["resolveComponent"])("step-tabs"),Z=Object(o["resolveComponent"])("tabs-container"),ee=Object(o["resolveComponent"])("router-view"),te=Object(o["resolveComponent"])("modal-dialog"),ne=Object(o["resolveComponent"])("group-form"),oe=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[e.hasAnyPermission(["annual-updates-mange",["annual-update-manage",D.group]])?(Object(o["openBlock"])(),Object(o["createBlock"])(U,{key:0,group:D.group,class:"mb-2"},null,8,["group"])):Object(o["createCommentVNode"])("",!0),D.needsToReviewSustainedCuration&&e.hasAnyPermission(["ep-applications-manage",["application-edit",D.group]])?(Object(o["openBlock"])(),Object(o["createBlock"])(F,{key:1,group:D.group,class:"mb-2"},null,8,["group"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(T,{group:D.group,onShowEdit:_.showEdit},null,8,["group","onShowEdit"]),D.group.isApplying?(Object(o["openBlock"])(),Object(o["createBlock"])(A,{key:2,group:D.group},null,8,["group"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(Z,{onTabChanged:_.handleTabChange},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(M,{label:"Members"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(R,{group:D.group},null,8,["group"]),D.group.isVcep()?(Object(o["openBlock"])(),Object(o["createBlock"])(I,{key:0,onSubmitted:t[1]||(t[1]=function(e){return _.submitForm("saveMembershipDescription","editingExpertise")}),onCanceled:t[2]||(t[2]=function(e){return _.cancelForm("editingExpertise")}),"show-controls":B.editingExpertise},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])($,{ref:"membershipDescriptionFormRef",class:"mt-8",editing:B.editingExpertise,"onUpdate:editing":t[0]||(t[0]=function(e){return B.editingExpertise=e}),errors:B.errors},null,8,["editing","errors"])]})),_:1},8,["show-controls"])):Object(o["createCommentVNode"])("",!0)]})),_:1}),Object(o["createVNode"])(M,{label:"Scope",visible:D.group.isEp()},{default:Object(o["withCtx"])((function(){return[r,D.group.isEp()?(Object(o["openBlock"])(),Object(o["createBlock"])(I,{key:0,onSubmitted:t[4]||(t[4]=function(t){return e.$refs.groupGeneListRef.save()}),onCanceled:t[5]||(t[5]=function(t){return e.$refs.groupGeneListRef.cancel()}),"show-controls":B.editingGenes},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(D.groupGeneList),{ref:"groupGeneListRef",editing:B.editingGenes,"onUpdate:editing":t[3]||(t[3]=function(e){return B.editingGenes=e})},null,8,["editing"]))]})),_:1},8,["show-controls"])):Object(o["createCommentVNode"])("",!0),c,Object(o["createVNode"])(I,{visible:D.group.isEp(),onSubmitted:t[7]||(t[7]=function(e){return _.submitForm("saveScopeDescription","editingScopeDescription")}),onCanceled:t[8]||(t[8]=function(e){return _.cancelForm("editingScopeDescription")}),"show-controls":B.editingScopeDescription},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(L,{ref:"scopeDescriptionRef",editing:B.editingScopeDescription,"onUpdate:editing":t[6]||(t[6]=function(e){return B.editingScopeDescription=e}),errors:B.errors},null,8,["editing","errors"])]})),_:1},8,["visible","show-controls"])]})),_:1},8,["visible"]),Object(o["createVNode"])(M,{label:"Sustained Curation",visible:D.group.isEp(),class:"relative"},{default:Object(o["withCtx"])((function(){return[D.group.expert_panel.pilotSpecificationsIsApproved?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a)),D.group.expert_panel.pilotSpecificationsIsApproved?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(P,{key:1,variant:"info"},{default:Object(o["withCtx"])((function(){return[i]})),_:1})),Object(o["createVNode"])(I,{onSubmitted:t[9]||(t[9]=function(e){return _.submitForm("saveOngoingPlansForm")}),onCanceled:t[10]||(t[10]=function(e){return _.cancelForm()}),class:"pb-4",showControls:e.hasAnyPermission(["ep-applications-manage",["application-edit",D.group]])&&D.group.expert_panel.pilotSpecificationsIsApproved},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(D.ongoingPlansFormComponent),{ref:"ongoingPlansForm",errors:B.errors,readonly:!D.group.expert_panel.pilotSpecificationsIsApproved},null,8,["errors","readonly"]))]})),_:1},8,["showControls"]),D.group.isVcep()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",l,[u,Object(o["createVNode"])(G,{group:D.group,readonly:!D.group.expert_panel.pilotSpecificationsIsApproved,class:"pb-2 mb-4 border-b"},null,8,["group","readonly"])])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["visible"]),Object(o["createVNode"])(M,{label:"Specifications",visible:D.group.isVcep()},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",s,[D.group.expert_panel.pilotSpecificationsIsApproved?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(P,{key:0,variant:"info"},{default:Object(o["withCtx"])((function(){return[d]})),_:1})),Object(o["createVNode"])(q,{readonly:!D.group.expert_panel.pilotSpecificationsIsApproved},null,8,["readonly"])])]})),_:1},8,["visible"]),Object(o["createVNode"])(M,{label:"Documents"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(H)]})),_:1}),Object(o["createVNode"])(M,{label:"Attestations",visible:D.group.isEp()},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(Y,null,{default:Object(o["withCtx"])((function(){return[p]})),_:1}),D.group.isGcep()?(Object(o["openBlock"])(),Object(o["createBlock"])(J,{key:0,class:"pb-2 mb-4 border-b",disabled:!0})):Object(o["createCommentVNode"])("",!0),b,D.group.isVcep()?(Object(o["openBlock"])(),Object(o["createBlock"])(W,{key:1,class:"pb-2 mb-4 border-b",disabled:!0})):Object(o["createCommentVNode"])("",!0),m,Object(o["createVNode"])(z,{class:"pb-2 mb-4 border-b",disabled:!0})]})),_:1},8,["visible"]),Object(o["createVNode"])(M,{label:"Log",visible:e.hasPermission("groups-manage")||e.userInGroup(D.group)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(X,{"log-entries":D.logEntries,"api-url":"/api/groups/".concat(D.group.uuid,"/activity-logs"),"log-updated":D.getLogEntries},null,8,["log-entries","api-url","log-updated"]),Object(o["createElementVNode"])("button",{class:"btn btn-xs mt-1",onClick:t[11]||(t[11]=function(){return D.getLogEntries&&D.getLogEntries.apply(D,arguments)})},"Refresh")]})),_:1},8,["visible"]),Object(o["createVNode"])(M,{label:"Admin",visible:e.hasPermission("groups-manage")},{default:Object(o["withCtx"])((function(){return[D.group.isApplying?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",O,[j,Object(o["createVNode"])(K,{application:D.group.expert_panel,class:"pb-4 border-b border-gray-300 mb-6"},null,8,["application"]),D.group.isEp()?(Object(o["openBlock"])(),Object(o["createBlock"])(Q,{key:0,application:D.group.expert_panel,onStepApproved:D.getGroup},null,8,["application","onStepApproved"])):Object(o["createCommentVNode"])("",!0),f])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("section",g,[h,_.showCreateAnnualUpdateButton?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn",onClick:t[12]||(t[12]=function(){return _.createAnnualUpdateForLatestWindow&&_.createAnnualUpdateForLatestWindow.apply(_,arguments)})}," Create Annual Update for latest window. ")):D.group.expert_panel.annualUpdate?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:1,href:"/annual-updates/".concat(S.group.expert_panel.annualUpdate.id),target:"annual update"}," View Annual Update for "+Object(o["toDisplayString"])(S.group.expert_panel.annualUpdate.window.for_year),9,v)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("section",y,[w,Object(o["createElementVNode"])("button",{class:"btn btn red",onClick:t[13]||(t[13]=function(){return _.initDelete&&_.initDelete.apply(_,arguments)})},"Delete Group")]),"production"!==e.$store.state.systemInfo.env?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",k,[C,D.group.isVcep()&&D.group.expert_panel.has_approved_pilot?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn",onClick:t[14]||(t[14]=function(){return _.fakeCspecPilotApproved&&_.fakeCspecPilotApproved.apply(_,arguments)})}," Fake a Pilot Approved Message ")):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["visible"])]})),_:1},8,["onTabChanged"]),V,N,(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(te,{modelValue:D.showModal,"onUpdate:modelValue":t[15]||(t[15]=function(e){return D.showModal=e}),onClosed:_.handleModalClosed,title:this.$route.meta.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(ee,{ref:"modalView",onSaved:_.hideModal,onCanceled:_.hideModal},null,8,["onSaved","onCanceled"])]})),_:1},8,["modelValue","onClosed","title"]),Object(o["createVNode"])(te,{modelValue:B.showInfoEdit,"onUpdate:modelValue":t[20]||(t[20]=function(e){return B.showInfoEdit=e}),onClosed:t[21]||(t[21]=function(e){return B.showInfoEdit=!1}),title:"Edit Group Info",size:"sm"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(I,{onSubmitted:t[18]||(t[18]=function(t){return e.$refs.infoForm.save()}),onCanceled:t[19]||(t[19]=function(t){return e.$refs.infoForm.cancel()})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(ne,{ref:"infoForm",onCanceled:t[16]||(t[16]=function(e){return B.showInfoEdit=!1}),onSaved:t[17]||(t[17]=function(e){return B.showInfoEdit=!1})},null,512)]})),_:1})]})),_:1},8,["modelValue"]),Object(o["createVNode"])(te,{modelValue:B.showConfirmDelete,"onUpdate:modelValue":t[23]||(t[23]=function(e){return B.showConfirmDelete=e}),title:"Delete This Group?"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",E,[Object(o["createElementVNode"])("p",null," You are about to delete "+Object(o["toDisplayString"])(D.group.displayName)+" and all associated data. ",1),x]),Object(o["createVNode"])(oe,{"submit-text":"Delete this group.",onSubmitted:_.deleteGroup,onCanceled:t[22]||(t[22]=function(e){return B.showConfirmDelete=!1})},null,8,["onSubmitted"])]})),_:1},8,["modelValue"])]))])}var B=n("1da1"),_=(n("4de4"),n("d3b7"),n("ac1f"),n("5319"),n("96cf"),n("5502")),S=n("831e"),U=n("1874"),F=(n("4e82"),n("a4d3"),n("e01a"),{key:0,class:"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200"}),T={key:0,class:"flex space-x-1"},A=["onClick"],R=["onClick"],$=["innerHTML"];function I(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-edit"),l=Object(o["resolveComponent"])("icon-trash"),u=Object(o["resolveComponent"])("data-table"),s=Object(o["resolveComponent"])("log-entry-form"),d=Object(o["resolveComponent"])("modal-dialog"),p=Object(o["resolveComponent"])("activity-log-delete-confirmation");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[r.hasLogEntries?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:1,fields:r.fields,data:n.logEntries,sort:r.sort,"onUpdate:sort":t[0]||(t[0]=function(e){return r.sort=e})},{"cell-id":Object(o["withCtx"])((function(t){var n=t.item;return[e.hasPermission("groups-manage")?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",T,[Object(o["createElementVNode"])("button",{class:"btn btn-xs inline-block",onClick:function(e){return r.editLogEntry(n)}},[Object(o["createVNode"])(i,{width:"12"})],8,A),null===n.activity_type?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,onClick:function(e){return r.confirmDelete(n)},class:"btn btn-xs inline-block"},[Object(o["createVNode"])(l,{width:"12"})],8,R)):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)]})),"cell-description":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",{innerHTML:t.description,class:"links-blue"},null,8,$)]})),_:1},8,["fields","data","sort"])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",F," No log entries to display ")),Object(o["createVNode"])(d,{modelValue:r.editingEntry,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.editingEntry=e}),title:"Edit log entry"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{"log-entry":r.selectedEntry,"api-url":n.apiUrl,onSaved:r.closeEntryForm,onCanceled:r.closeEntryForm},null,8,["log-entry","api-url","onSaved","onCanceled"])]})),_:1},8,["modelValue"]),Object(o["createVNode"])(d,{modelValue:r.showDeleteConfirmation,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.showDeleteConfirmation=e}),title:"Delete this log entry?"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{logEntry:r.selectedEntry,"api-url":n.apiUrl,onCanceled:r.closeDeleteConfirmation,onDeleted:r.closeDeleteConfirmation},null,8,["logEntry","api-url","onCanceled","onDeleted"])]})),_:1},8,["modelValue"])])}var M=Object(o["createElementVNode"])("hr",null,null,-1);function L(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("rich-text-editor"),u=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{class:"log-entry-form",ref:"form-container"},{default:Object(o["withCtx"])((function(){return[M,Object(o["createVNode"])(i,{label:"Log Date",modelValue:r.newEntry.log_date,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.newEntry.log_date=e}),errors:r.errors.log_date,type:"date",ref:"logdate"},null,8,["modelValue","errors"]),Object(o["createVNode"])(i,{label:"Entry",errors:r.errors.entry},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:r.newEntry.entry,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.newEntry.entry=e})},null,8,["modelValue"])]})),_:1},8,["errors"]),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return r.cancel&&r.cancel.apply(r,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return r.save&&r.save.apply(r,arguments)})},"Save")]})),_:1})]})),_:1},512)}n("99af");var P=n("85fe"),G={name:"LogEntryForm",components:{RichTextEditor:P["default"]},props:{logEntry:{required:!1,default:function(){return{log_date:(new Date).toISOString(),step:null,entry:""}}},apiUrl:{required:!0,type:String}},emits:["saved"],setup:function(e,t){var n=Object(o["ref"])({log_date:(new Date).toISOString(),step:null,entry:""}),r=Object(o["ref"])({}),c=function(e){e&&e.created_at&&(n.value={id:e.id,log_date:new Date(Date.parse(e.created_at)).toISOString(),step:e.properties?e.properties.step:null,entry:e.description})},a=function(){n.value={log_date:(new Date).toISOString(),step:null,entry:""}},i=function(){var o=Object(B["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(o.prev=0,!n.value.id){o.next=6;break}return o.next=4,Object(S["e"])("".concat(e.apiUrl,"/").concat(n.value.id),n.value);case 4:o.next=8;break;case 6:return o.next=8,Object(S["d"])(e.apiUrl,n.value);case 8:return o.next=10,Object(S["b"])(e.apiUrl);case 10:a(),t.emit("saved",n.value),o.next=19;break;case 14:if(o.prev=14,o.t0=o["catch"](0),!o.t0.response||422!=o.t0.response.status||!o.t0.response.data.errors){o.next=19;break}return r.value=o.t0.response.data.errors,o.abrupt("return");case 19:case"end":return o.stop()}}),o,null,[[0,14]])})));return function(){return o.apply(this,arguments)}}(),l=function(){a(),t.emit("canceled")};return Object(o["watch"])((function(){return e.logEntry}),(function(e){c(e)}),{immediate:!0}),{newEntry:n,errors:r,syncEntry:c,initNewEntry:a,save:i,cancel:l}},mounted:function(){}},q=n("6b0d"),H=n.n(q);const Y=H()(G,[["render",L]]);var J=Y,W=(n("b0c0"),Object(o["createElementVNode"])("p",null,"You are about to delete the following log entry:",-1)),z={class:"border-y py-2"},X=["innerHTML"],K={key:0,class:"ml-4 mt-2 mb-4 text-gray-700 text-sm"},Q=Object(o["createElementVNode"])("div",null,"This can not be undone. Are you sure you want to continue?",-1),Z={key:0,class:"bg-red-200 text-red-900 rounded p-2 my-2"};function ee(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[W,Object(o["createElementVNode"])("div",z,[Object(o["createElementVNode"])("blockquote",null,[Object(o["createElementVNode"])("div",{innerHTML:n.logEntry.description},null,8,X)]),n.logEntry.causer?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",K,"Logged by "+Object(o["toDisplayString"])(n.logEntry.causer.name)+", "+Object(o["toDisplayString"])(r.logDate),1)):Object(o["createCommentVNode"])("",!0)]),Q,r.flattenedErrors.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Z,[Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.flattenedErrors,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t},Object(o["toDisplayString"])(e),1)})),128))])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(i,{onCanceled:t[0]||(t[0]=function(t){return e.$emit("canceled")}),onSubmitted:r.deleteLogEntry,submitText:"Delete Log Entry"},null,8,["onSubmitted"])])}n("0481"),n("4069"),n("07ac");var te=n("e328"),ne=n("033d"),oe={name:"ConfirmDeleteLogEntry",props:{logEntry:{required:!0,type:Object},apiUrl:{required:!0,type:String}},emits:["deleted","canceled"],setup:function(e,t){var n=Object(o["ref"])({}),r=Object(o["computed"])((function(){return Object(te["b"])(e.logEntry.properties.log_date)})),c=Object(o["computed"])((function(){return Object.values(n.value).flat()})),a=function(){var o=Object(B["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(S["a"])(e.apiUrl,e.logEntry.id);case 3:return t.emit("deleted"),o.next=6,Object(S["b"])(e.apiUrl);case 6:o.next=14;break;case 8:if(o.prev=8,o.t0=o["catch"](0),!Object(ne["a"])(o.t0)){o.next=13;break}return n.value=o.t0.response.data.errors,o.abrupt("return");case 13:n.value={a:o.t0.message};case 14:case"end":return o.stop()}}),o,null,[[0,8]])})));return function(){return o.apply(this,arguments)}}();return{errors:n,logDate:r,flattenedErrors:c,deleteLogEntry:a}}};n("8c58");const re=H()(oe,[["render",ee]]);var ce=re,ae=[{name:"created_at",label:"Created",sortName:"created_at",sortable:!0,type:Date},{name:"description",label:"Entry",sortable:!0,type:String},{name:"causer.name",label:"User",sortable:!0},{name:"id",label:"",sortable:!1}],ie={components:{LogEntryForm:J,ActivityLogDeleteConfirmation:ce},props:{logEntries:{required:!0,type:Array},apiUrl:{required:!0,type:String}},setup:function(e){var t=Object(o["ref"])({field:"created_at",desc:!0}),n=Object(o["ref"])({}),r=Object(o["ref"])(!1),c=Object(o["computed"])((function(){return e.logEntries.length>0})),a=function(e){r.value=!0,n.value=e},i=function(){r.value=!1,n.value={}},l=Object(o["ref"])(!1),u=function(e){n.value=e,l.value=!0},s=function(){l.value=!1,n.value={}};return{fields:Object(o["ref"])(ae),sort:t,selectedEntry:n,editingEntry:r,hasLogEntries:c,editLogEntry:a,closeEntryForm:i,showDeleteConfirmation:l,confirmDelete:u,closeDeleteConfirmation:s}}};n("b5c7");const le=H()(ie,[["render",I]]);var ue=le,se={key:0,class:"p-4 my-4 mb-8 border rounded-xl bg-white"},de={class:"mb-2"},pe=Object(o["createTextVNode"])(" Application Summary "),be={key:0},me={class:"px-8"},Oe={key:2},je=Object(o["createTextVNode"])("Approved"),fe={key:0,class:"flex-1"},ge={key:0,class:"mt-4"},he=Object(o["createElementVNode"])("button",{class:"btn blue btn-lg"},"Go to application",-1);function ve(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("requirements-badge"),l=Object(o["resolveComponent"])("icon-lock"),u=Object(o["resolveComponent"])("badge"),s=Object(o["resolveComponent"])("router-link");return n.group.isEp()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",se,[Object(o["createElementVNode"])("h2",de,[pe,a.applicationStarted&&n.group.isVcep()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",be," - "+Object(o["toDisplayString"])(this.currentMenuItem.title),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("ul",me,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.menu,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t,class:"py-1 flex justify-between border-b border-gray-300 my-2"},[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["flex justify-between",{"w-full":!a.isStep(e)}])},[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["w-56 text-lg",{"text-gray-400":a.isStep(e)&&e.isDisabled(n.group)}])},Object(o["toDisplayString"])(e.title),3),Object(o["createElementVNode"])("div",null,[a.isStep(e)?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,section:e},null,8,["section"])),a.isStep(e)&&e.isDisabled(n.group)?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,class:"inline text-gray-400",height:14,width:14})):Object(o["createCommentVNode"])("",!0),a.isStep(e)&&e.isComplete(n.group)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Oe,[Object(o["createVNode"])(u,{color:"green"},{default:Object(o["withCtx"])((function(){return[je]})),_:1})])):Object(o["createCommentVNode"])("",!0)])],2),a.isCurrentStep(e)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",fe,[Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.sections,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t,class:"pb-2 flex justify-between my-2"},[Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(e.title),1),Object(o["createVNode"])(i,{section:e},null,8,["section"])])})),128))])])):Object(o["createCommentVNode"])("",!0)])})),128))]),e.hasAnyPermission(["ep-applications-manage",["application-edit",n.group]])?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ge,[n.group.uuid?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,to:a.applicationRoute},{default:Object(o["withCtx"])((function(){return[he]})),_:1},8,["to"])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)}var ye=n("3a9d"),we=n("5313"),ke={name:"ApplicationSummary",components:{RequirementsBadge:ye["a"]},props:{group:{required:!0,type:Object}},data:function(){return{}},computed:{applicationStarted:function(){return!0},application:function(){return this.group.isVcep()?we["c"]:we["a"]},currentStep:function(){return this.group.expert_panel.current_step},applicationRoute:function(){return{name:"GroupApplication",params:{uuid:this.group.uuid},hash:"#".concat(this.currentMenuItem.id)}},currentMenuItem:function(){return this.application.getStep(this.group.expert_panel.current_step)},menu:function(){return this.application.steps.length>1?this.application.steps:this.application.steps[0].sections}},methods:{isStep:function(e){return Boolean(e.sections)},isCurrentStep:function(e){return!(!this.isStep(e)||this.application.getStep(this.group.expert_panel.current_step)!=e)}}};const Ce=H()(ke,[["render",ve]]);var Ve=Ce,Ne=n("8fec"),Ee=n("3926"),xe=n("a266"),De=n("abba"),Be=n("324b"),_e=n("206f"),Se=n("6ca3"),Ue=n("268c"),Fe=(n("a15b"),n("d81d"),{class:"pb-4"}),Te={class:"flex justify-between items-start"},Ae={class:"text-sm text-gray-800 mt-1 font-normal"},Re=Object(o["createTextVNode"])(" Short Name: "),$e=Object(o["createTextVNode"])(" | Affiliation ID: "),Ie={key:0},Me=Object(o["createElementVNode"])("strong",null,"Chairs:",-1),Le={key:0},Pe={key:1,class:"text-gray-500"},Ge=Object(o["createElementVNode"])("strong",null,"Coordinators:",-1),qe={key:0},He={key:1,class:"text-gray-500"};function Ye(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("group-breadcrumbs"),l=Object(o["resolveComponent"])("badge"),u=Object(o["resolveComponent"])("note"),s=Object(o["resolveComponent"])("dictionary-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("header",Fe,[Object(o["createVNode"])(i),Object(o["createElementVNode"])("h1",Te,[Object(o["createElementVNode"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.group.displayName)+" ",1),Object(o["createVNode"])(l,{color:n.group.statusColor,class:"text-xs"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.group.status?n.group.status.name:"loading..."),1)]})),_:1},8,["color"]),Object(o["createElementVNode"])("div",Ae,[Re,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(n.group.expert_panel.full_short_base_name||"--"),1),$e,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(n.group.expert_panel.affiliation_id||"--"),1)]),e.hasRole("super-user")?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,class:"font-normal mt-2"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(" group.id: "+Object(o["toDisplayString"])(n.group.id)+" ",1),n.group.isEp()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Ie," | expertPanel.id: "+Object(o["toDisplayString"])(n.group.expert_panel.id),1)):Object(o["createCommentVNode"])("",!0)]})),_:1})):Object(o["createCommentVNode"])("",!0)]),e.hasAnyPermission(["groups-manage",["info-edit",n.group]])?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=function(t){return e.$emit("showEdit")}),class:"btn btn-xs"}," Edit Group Info ")):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(s,{label:"Chairs:"},{label:Object(o["withCtx"])((function(){return[Me]})),default:Object(o["withCtx"])((function(){return[n.group.chairs.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Le,Object(o["toDisplayString"])(n.group.chairs.map((function(e){return e.person.name})).join(", ")),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Pe," None assigned "))]})),_:1}),Object(o["createVNode"])(s,{label:"Coordinators:"},{label:Object(o["withCtx"])((function(){return[Ge]})),default:Object(o["withCtx"])((function(){return[a.coordinators.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",qe,Object(o["toDisplayString"])(a.coordinators.map((function(e){return e.person.name})).join(", ")),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",He," None assigned "))]})),_:1})])}var Je=n("ae23"),We={name:"GroupDetailHeader",props:{group:{type:Je["a"],required:!0}},emits:["showEdit"],computed:{coordinators:function(){return this.group?this.group.members.filter((function(e){return e.hasRole("coordinator")})):[]}}};const ze=H()(We,[["render",Ye]]);var Xe=ze,Ke=n("0945"),Qe=n("4d1a"),Ze=n("a8af"),et=n("62a2"),tt=n("1d7f");function nt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("document-list");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(i,{documents:a.displayDocuments,documentUpdater:a.updateDocument,documentCreator:a.createDocument,documentDeleter:a.deleteDocument,canManage:a.canManageDocuments},null,8,["documents","documentUpdater","documentCreator","documentDeleter","canManage"])])}var ot={class:"flex justify-between py-2"},rt={class:"flex space-x-2"},ct=Object(o["createTextVNode"])(" Search: "),at=Object(o["createTextVNode"])(" Type:   "),it=Object(o["createElementVNode"])("option",{value:null},"Any",-1),lt=["value"],ut=["onClick"],st={class:"note"},dt={key:0},pt={key:1},bt=Object(o["createElementVNode"])("button",{class:"btn btn-xs"},"…",-1),mt=Object(o["createTextVNode"])("Download"),Ot=Object(o["createTextVNode"])("Update"),jt=Object(o["createTextVNode"])("Delete"),ft={class:"px-4 pb-4 border"},gt={key:0,class:"flex space-x-2 pt-2 border-t"},ht=["onClick"],vt=["onClick"],yt=["onClick"],wt={key:0},kt={key:0,class:"mb-3"},Ct=Object(o["createElementVNode"])("p",null,"Are you sure you want to continue?",-1);function Vt(e,t,n,r,c,a){var i=this,l=Object(o["resolveComponent"])("icon-cheveron-right"),u=Object(o["resolveComponent"])("icon-cheveron-down"),s=Object(o["resolveComponent"])("dropdown-item"),d=Object(o["resolveComponent"])("dropdown-menu"),p=Object(o["resolveComponent"])("object-dictionary"),b=Object(o["resolveComponent"])("data-table"),m=Object(o["resolveComponent"])("document-edit-form"),O=Object(o["resolveComponent"])("modal-dialog"),j=Object(o["resolveComponent"])("document-upload-form"),f=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["renderSlot"])(e.$slots,"heading",{},(function(){return[Object(o["createElementVNode"])("div",ot,[Object(o["createElementVNode"])("div",rt,[Object(o["createElementVNode"])("label",null,[ct,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",placeholder:"Fitler","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.keyword=e}),class:"sm"},null,512),[[o["vModelText"],c.keyword]])]),Object(o["createElementVNode"])("label",null,[at,Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.filterType=e})},[it,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.documentTypes,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{key:e.id,value:e.id},Object(o["toDisplayString"])(e.long_name),9,lt)})),128))],512),[[o["vModelSelect"],c.filterType]])])]),n.canManage?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn btn-xs",onClick:t[2]||(t[2]=function(){return a.initUpload&&a.initUpload.apply(a,arguments)})},"Upload")):Object(o["createCommentVNode"])("",!0)])]})),Object(o["createVNode"])(b,{fields:c.fields,data:a.filteredDocuments,sort:c.sort,"onUpdate:sort":t[3]||(t[3]=function(e){return c.sort=e}),detailRows:!0},{"cell-cheveron":Object(o["withCtx"])((function(e){var t=e.item;return[t.metadata?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,onClick:Object(o["withModifiers"])((function(e){return a.toggleItemDetails(t)}),["stop"]),class:"w-9 align-center block -mx-3"},[t.showDetails?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,class:"m-auto cursor-pointer"})),t.showDetails?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:1,class:"m-auto cursor-pointer"})):Object(o["createCommentVNode"])("",!0)],8,ut)):Object(o["createCommentVNode"])("",!0)]})),"cell-filename":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.filename)+" ",1),Object(o["createElementVNode"])("span",st,[t.type.is_versioned&&t.version?(Object(o["openBlock"])(),Object(o["createElementBlock"])("em",dt,"(version "+Object(o["toDisplayString"])(t.version)+")",1)):Object(o["createCommentVNode"])("",!0),t.is_final?(Object(o["openBlock"])(),Object(o["createElementBlock"])("em",pt," FINAL")):Object(o["createCommentVNode"])("",!0)])]})),"cell-actions":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createVNode"])(d,{hideCheveron:""},{label:Object(o["withCtx"])((function(){return[bt]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{onClick:function(e){return a.initDownload(t)}},{default:Object(o["withCtx"])((function(){return[mt]})),_:2},1032,["onClick"]),n.canManage?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,onClick:function(e){return a.initUpdate(t)}},{default:Object(o["withCtx"])((function(){return[Ot]})),_:2},1032,["onClick"])):Object(o["createCommentVNode"])("",!0),n.canManage?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:1,onClick:function(e){return a.initDelete(t)}},{default:Object(o["withCtx"])((function(){return[jt]})),_:2},1032,["onClick"])):Object(o["createCommentVNode"])("",!0)]})),_:2},1024)]})),detail:Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",ft,[Object(o["createVNode"])(p,{obj:t.metadata},null,8,["obj"]),n.canManage?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",gt,[Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.initDownload(t)}},"Download",8,ht),Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.initUpdate(t)}},"Update",8,vt),Object(o["createElementVNode"])("button",{class:"btn btn-xs red",onClick:function(e){return a.initDelete(t)}},"Delete",8,yt)])):Object(o["createCommentVNode"])("",!0)])]})),_:1},8,["fields","data","sort"]),(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(O,{modelValue:c.showEditForm,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.showEditForm=e}),title:"Update ".concat(c.activeDocument.filename)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{document:c.activeDocument,"save-function":i.commitUpdate,onSaved:t[4]||(t[4]=function(t){return e.$emit("updated")})},null,8,["document","save-function"])]})),_:1},8,["modelValue","title"]),Object(o["createVNode"])(O,{modelValue:c.showUploadForm,"onUpdate:modelValue":t[7]||(t[7]=function(e){return c.showUploadForm=e}),title:"Upload a new document"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j,{"save-function":i.commitCreate,onSaved:t[6]||(t[6]=function(t){return e.$emit("updated")})},null,8,["save-function"])]})),_:1},8,["modelValue"]),Object(o["createVNode"])(O,{modelValue:c.showDeleteConfirmation,"onUpdate:modelValue":t[8]||(t[8]=function(e){return c.showDeleteConfirmation=e}),title:"You are about to delete ".concat(c.activeDocument.filename)},{default:Object(o["withCtx"])((function(){return[c.activeDocument?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",wt,[c.activeDocument.is_final?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",kt," This version has been tagged as the final version of the document. ")):Object(o["createCommentVNode"])("",!0),Ct,Object(o["createVNode"])(f,{"submit-text":"Delete Document",onCanceled:a.cancelDelete,onSubmitted:a.commitDelete},null,8,["onCanceled","onSubmitted"])])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["modelValue","title"])]))])}var Nt=n("2909"),Et=(n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("466d"),n("db04")),xt={type:"file",ref:"fileInput"},Dt=Object(o["createElementVNode"])("option",{value:null},"Select...",-1),Bt=["value"];function _t(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("button-row"),u=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{label:"Document",errors:c.errors.file},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("input",xt,null,512)]})),_:1},8,["errors"]),Object(o["createVNode"])(i,{label:"Type",errors:c.errors.document_type_id},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.newDocument.document_type_id=e})},[Dt,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.documentTypes,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{value:e.id,key:e.id},Object(o["toDisplayString"])(e.long_name),9,Bt)})),128))],512),[[o["vModelSelect"],c.newDocument.document_type_id]])]})),_:1},8,["errors"]),Object(o["createVNode"])(i,{errors:c.errors.notes,label:"Notes"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.newDocument.notes=e}),cols:"30",rows:"10"},null,512),[[o["vModelText"],c.newDocument.notes]])]})),_:1},8,["errors"]),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn white",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]})),_:1})}var St=n("5530"),Ut=(n("159b"),n("b64b"),{props:{saveFunction:{type:Function,required:!0}},data:function(){return{newDocument:{file:null,document_type_id:this.documentTypeId,notes:null},errors:{}}},computed:Object(St["a"])(Object(St["a"])({},Object(_["c"])({documentTypes:function(e){return e.doctypes.items}})),{},{group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.expert_panel},isReviewed:function(){return Boolean(this.newDocument.date_reviewed)},documentType:function(){return 0==this.documentTypes.length?{}:this.$store.getters["doctypes/getItemById"](this.documentTypeId)}}),methods:{save:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=new FormData,Object.keys(e.newDocument).forEach((function(t){var o=e.newDocument[t];null!=o&&n.append(t,o)})),n.append("file",e.$refs.fileInput.files[0]),t.next=6,e.saveFunction(n);case 6:e.clearForm(),e.$emit("saved"),t.next=15;break;case 10:if(t.prev=10,t.t0=t["catch"](0),!Object(Et["b"])(t.t0)){t.next=15;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},cancel:function(){this.clearForm(),this.$emit("canceled")},clearForm:function(){this.initNewDocument(),this.clearErrors()},initNewDocument:function(){this.$refs.fileInput.value=null,this.newDocument={file:null,document_type_id:this.documentTypeId,notes:null}},clearErrors:function(){this.errors={}}},mounted:function(){this.$store.dispatch("doctypes/getItems")}});const Ft=H()(Ut,[["render",_t]]);var Tt=Ft,At=["value"];function Rt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("input-row"),u=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{label:"File"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.document.filename),1)]})),_:1}),Object(o["createVNode"])(l,{label:"Type",errors:c.errors.document_type_id},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.docProxy.document_type_id=e})},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.documentTypes,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{value:e.id,key:e.id},Object(o["toDisplayString"])(e.long_name),9,At)})),128))],512),[[o["vModelSelect"],c.docProxy.document_type_id]])]})),_:1},8,["errors"]),Object(o["createVNode"])(l,{errors:c.errors.notes,label:"Notes"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.docProxy.notes=e}),cols:"30",rows:"10"},null,512),[[o["vModelText"],c.docProxy.notes]])]})),_:1},8,["errors"]),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]})),_:1})}n("e9c4");var $t={name:"DocumentEditForm",props:{document:{required:!0,type:Object},saveFunction:{required:!0,type:Function}},emits:["saved"],data:function(){return{docProxy:{},errors:{}}},computed:Object(St["a"])({},Object(_["c"])({documentTypes:function(e){return e.doctypes.items}})),watch:{document:{immediate:!0,handler:function(){this.docProxy=JSON.parse(JSON.stringify(this.document))}}},methods:{cancel:function(){this.docProxy={},this.$emit("canceled")},save:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e.saveFunction(e.docProxy),e.$emit("saved"),t.next=9;break;case 5:throw t.prev=5,t.t0=t["catch"](0),Object(Et["b"])(t.t0)&&(e.errors=t.t0.response.data.errors),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))()}},mounted:function(){this.$store.dispatch("doctypes/getItems")}};const It=H()($t,[["render",Rt]]);var Mt=It,Lt={name:"DocumentList",components:{DocumentUploadForm:Tt,DocumentEditForm:Mt},emits:["updated"],props:{documents:{type:Array,required:!0},documentCreator:{type:Function,required:!1},documentUpdater:{type:Function,required:!1},documentDeleter:{type:Function,required:!1},canManage:{type:Boolean,default:!1}},data:function(){return{fields:[{name:"cheveron",label:"",sortable:!1},{name:"filename",label:"File",type:String,sortable:!0},{name:"type.long_name",label:"Type",type:String,sortable:!0},{name:"notes",type:String,sortable:!0},{name:"actions",label:"",type:String,sortable:!1}],sort:{field:"filename",desc:!1},keyword:null,filterType:null,documentTypes:[],activeDocument:{type:{}},showDeleteConfirmation:!1,showEditForm:!1,showUploadForm:!1}},computed:{filteredDocuments:function(){var e=this,t=Object(Nt["a"])(this.documents);if(this.keyword){var n=new RegExp(".*"+this.keyword+".*","i");t=t.filter((function(e){return e.filename.match(n)||e.notes&&e.notes.match(n)||e.type.name.match(n)}))}return this.filterType&&(t=t.filter((function(t){return t.document_type_id==e.filterType}))),t}},methods:{toggleItemDetails:function(e){e.showDetails=!e.showDetails},initDownload:function(e){window.location=e.download_url},initUpdate:function(e){this.showEditForm=!0,this.activeDocument=e},commitUpdate:function(e){console.log("commitUpdate",e),this.documentUpdater?this.documentUpdater(e):alert("we need a default document upload function"),this.$emit("updated"),this.showUploadForm=!1},initDelete:function(e){this.activeDocument=e,this.showDeleteConfirmation=!0},cancelDelete:function(){this.showDeleteConfirmation=!1,this.resetActiveDocument()},commitDelete:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.documentDeleter?e.documentDeleter(e.activeDocument):alert("we need to add a default document deleter."),e.showDeleteConfirmation=!1,e.resetActiveDocument(),e.$emit("updated");case 4:case"end":return t.stop()}}),t)})))()},initUpload:function(){this.showUploadForm=!0},commitCreate:function(e){console.log("commitCreate",this.documentCreator),this.documentCreator?this.documentCreator(e):alert("we need a default document upload function"),this.$emit("updated"),this.showUploadForm=!1},resetActiveDocument:function(){this.activeDocument={type:{}}}},mounted:function(){var e=this;Et["a"].get("/api/document-types").then((function(t){return e.documentTypes=t.data}))}};const Pt=H()(Lt,[["render",Vt]]);var Gt=Pt,qt={name:"GroupDocuments",components:{DocumentList:Gt},props:{},data:function(){return{}},computed:{group:{get:function(){return this.$store.getters["groups/currentItemOrNew"]}},displayDocuments:function(){return this.group.documents},canManageDocuments:function(){return this.hasAnyPermission(["groups-manage","ep-applications-manage",["info-edit",this.group]])}},methods:{updateDocument:function(e){var t=this;return Object(B["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.canManageDocuments){n.next=3;break}return t.$store.pushError("Permission denied"),n.abrupt("return");case 3:return n.next=5,t.$store.dispatch("groups/updateDocument",{group:t.group,document:e});case 5:case"end":return n.stop()}}),n)})))()},createDocument:function(e){var t=this;return Object(B["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.canManageDocuments){n.next=3;break}return t.$store.pushError("Permission denied"),n.abrupt("return");case 3:return n.next=5,t.$store.dispatch("groups/addDocument",{group:t.group,data:e});case 5:case"end":return n.stop()}}),n)})))()},deleteDocument:function(e){var t=this;return Object(B["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.canManageDocuments){n.next=3;break}return t.$store.pushError("Permission denied"),n.abrupt("return");case 3:return n.next=5,t.$store.dispatch("groups/deleteDocument",{group:t.group,document:e});case 5:case"end":return n.stop()}}),n)})))()}}};const Ht=H()(qt,[["render",nt]]);var Yt=Ht,Jt=n("4f50"),Wt=n("f8c8"),zt=n("2242"),Xt=n("f142"),Kt={name:"GroupDetail",components:{ActivityLog:ue,ApplicationSummary:Ve,AttestationGcep:Ne["a"],AttestationNhgri:Ee["a"],AttestationReanalysis:xe["a"],CspecSummary:De["a"],GroupDocuments:Yt,GroupForm:Ue["a"],GroupDetailHeader:Xe,EvidenceSummaries:Be["a"],GcepGeneList:_e["a"],GcepOngoingPlansForm:Se["a"],MemberList:Ke["a"],MembershipDescriptionForm:Qe["a"],ScopeDescriptionForm:Ze["a"],VcepGeneList:et["a"],VcepOngoingPlansForm:tt["a"],AnnualUpdateAlert:Jt["a"],StepTabs:Wt["a"],ProgressChart:zt["a"],SustainedCurationReviewAlert:Xt["default"]},props:{uuid:{type:String,required:!0}},data:function(){return{showInfoEdit:!1,editingExpertise:!1,editingScopeDescription:!1,editingGenes:!1,showConfirmDelete:!1,ongoingPlansErrors:{},errors:{}}},computed:{showCreateAnnualUpdateButton:function(){return this.hasPermission("annual-updates-manage")&&this.group.expert_panel&&!this.group.expert_panel.annualUpdate}},setup:function(e){var t=Object(_["d"])(),n=Object(o["ref"])(!1),r=Object(o["computed"])({get:function(){return t.getters["groups/currentItemOrNew"]},set:function(e){t.commit("groups/addItem",e)}}),c=Object(o["computed"])((function(){return r.value.isEp()?r.value.isVcep()?et["a"]:_e["a"]:null})),a=Object(o["computed"])((function(){return r.value.isVcep()?tt["a"]:Se["a"]})),i=function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(S["b"])("/api/groups/".concat(e.uuid,"/activity-logs"));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){t.dispatch("groups/find",e.uuid).then((function(){t.commit("groups/setCurrentItemIndexByUuid",e.uuid),r.value.isEp()&&(t.dispatch("groups/getGenes",r.value),t.dispatch("groups/getDocuments",r.value),r.value.isVcep()&&t.dispatch("groups/getEvidenceSummaries",r.value),t.dispatch("groups/getPendingTasks",r.value),t.dispatch("groups/getAnnualUpdate",r.value))}))},u=Object(o["computed"])((function(){return r.value.pendingTasks&&r.value.pendingTasks.filter((function(e){return 1===e.task_type_id})).length>0}));return Object(o["onMounted"])(Object(B["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l();case 1:case"end":return e.stop()}}),e)})))),{group:r,groupGeneList:c,showModal:n,ongoingPlansFormComponent:a,logEntries:S["c"],needsToReviewSustainedCuration:u,getLogEntries:i,getGroup:l}},watch:{$route:function(){this.showModal=!!this.$route.meta.showModal&&Boolean(this.$route.meta.showModal)}},methods:{hideModal:function(){this.$router.replace({name:"GroupDetail",params:{uuid:this.uuid}})},handleModalClosed:function(e){this.clearModalForm(e),this.$router.push({name:"GroupDetail",params:{uuid:this.uuid}})},clearModalForm:function(){"function"===typeof this.$refs.modalView.clearForm&&this.$refs.modalView.clearForm()},showEdit:function(){this.showInfoEdit=!0},cancelForm:function(e){this[e]=!1,this.errors={},this.revertGroupChanges()},submitForm:function(e,t){var n=this;return Object(B["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,n[e].apply(n.group);case 3:n[t]=!1,o.next=12;break;case 6:if(o.prev=6,o.t0=o["catch"](0),!Object(Et["b"])(o.t0)){o.next=11;break}return n.errors=o.t0.response.data.errors,o.abrupt("return");case 11:throw o.t0;case 12:case"end":return o.stop()}}),o,null,[[0,6]])})))()},saveMembershipDescription:function(){var e=this;return this.$store.dispatch("groups/membershipDescriptionUpdate",{uuid:this.group.uuid,membershipDescription:this.group.expert_panel.membership_description}).then((function(){e.$store.commit("pushSuccess","Description of expertise updated.")}))},saveScopeDescription:function(){var e=this;return this.$store.dispatch("groups/scopeDescriptionUpdate",{uuid:this.group.uuid,scopeDescription:this.group.expert_panel.scope_description}).then((function(t){return e.$store.commit("pushSuccess","Description of scope updated."),t}))},saveOngoingPlansForm:function(){var e=this,t=this.group,n=t.uuid,o=t.expert_panel;return this.$store.dispatch("groups/curationReviewProtocolUpdate",{uuid:n,expertPanel:o}).then((function(){e.$store.commit("pushSuccess","Curation review protocol updated.")}))},revertGroupChanges:function(){var e=this;return this.errors={},this.$store.dispatch("groups/find",this.group.uuid).then((function(){e.$store.commit("pushInfo","Update canceled.")}))},handleTabChange:function(e){"Log"==e&&Object(U["b"])("groups-manage")&&this.getLogEntries()},initDelete:function(){this.showConfirmDelete=!0},deleteGroup:function(){this.$store.dispatch("groups/delete",this.group.uuid),this.$store.commit("pushSuccess","Group deleted."),this.$router.push({name:"GroupList"})},fakeCspecPilotApproved:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("fake-pilot-approved"),t.prev=1,t.next=4,Et["a"].post("/api/groups/".concat(e.uuid,"/dev/fake-pilot-approved"));case 4:e.$store.dispatch("groups/getPendingTasks",e.group),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),418==t.t0.response.status&&e.$store.commit("pushError",t.t0.response.data);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()},createAnnualUpdateForLatestWindow:function(){this.$store.dispatch("groups/createAnnualUpdateForLatestWindow",this.group)}},mounted:function(){this.showModal=Boolean(this.$route.meta.showModal),this.showConfirmDelete=!1},beforeUnmount:function(){this.$store.commit("groups/clearCurrentItem")}};const Qt=H()(Kt,[["render",D]]);t["default"]=Qt},b5c7:function(e,t,n){"use strict";n("8067")}}]);
//# sourceMappingURL=group-detail.697a35a4.js.map