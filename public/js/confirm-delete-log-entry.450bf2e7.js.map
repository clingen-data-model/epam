{"version":3,"file":"js/confirm-delete-log-entry.450bf2e7.js","mappings":"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","sources":["webpack://epam/./src/adapters/log_entry_repository.js","webpack://epam/./src/components/log_entries/ConfirmDeleteLogEntry.vue","webpack://epam/./src/components/log_entries/ConfirmDeleteLogEntry.vue?749d","webpack://epam/./src/components/next_actions/ConfirmDeleteNextAction.vue","webpack://epam/./src/components/next_actions/ConfirmDeleteNextAction.vue?abf2"],"sourcesContent":["import {ref, computed} from 'vue';\nimport api from '@/http/api'\n\nconst _entries = ref([]);\n\nexport const logEntries = computed(() => {\n    return _entries.value;\n});\n\nexport const fetchEntries = async (apiUrl) => {\n    _entries.value = await api.get(apiUrl)\n        .then(response => response.data.data);\n}\n\nexport const saveEntry = async (apiUrl, entryData) => {\n    return await api.post(apiUrl, entryData)\n        .then(response => {\n            _entries.value.push(response.data);\n            return response.data\n        });\n}\n\nexport const updateEntry = async (apiUrl, entryData) => {\n    return await api.put(apiUrl, entryData)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == response.data.id);\n            _entries.value[entryIdx] = response.data;\n            return response.data\n        });\n}\n\nexport const deleteEntry = async (apiUrl, entryId) => {\n    return await api.delete(`${apiUrl}/${entryId}`)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == entryId);\n            _entries.value.splice(entryIdx, 1);\n\n            return response;\n        });\n}\n","<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n<template>\n    <div>\n        <h2>You are about to delete the following log entry:</h2>\n        <div class=\"border-y py-2\">\n        <blockquote>\n            <div v-html=\"logEntry.description\"></div>\n        </blockquote>\n        <div class=\"ml-4 mt-2 mb-4 text-gray-700 text-sm\" v-if=\"logEntry.causer\">Logged by {{logEntry.causer.name}}, {{logDate}}</div>\n        </div>\n\n        <div>This can not be undone. Are you sure you want to continue?</div>\n\n        <div v-if=\"flattenedErrors.length > 0\" class=\"bg-red-200 text-red-900 rounded p-2 my-2\">\n            <ul>\n                <li v-for=\"(err,idx) in flattenedErrors\" :key=\"idx\">\n                    {{err}}\n                </li>\n            </ul> \n        </div>\n        \n        <button-row @canceled=\"$router.go(-1)\" @submitted=\"deleteEntry\" submitText=\"Delete Log Entry\"></button-row>\n    </div>\n</template>\n<script>\nimport {mapGetters} from 'vuex'\nimport {isValidationError} from '@/http'\nimport {logEntries, deleteEntry} from '@/adapters/log_entry_repository'\n\nexport default {\n    name: 'ConfirmDeleteLogEntry',\n    props: {\n        id: {\n            required: true,\n            type: String,\n        }\n    },\n    data() {\n        return {\n            errors: {}\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        },\n        logEntry () {\n            const logEntry = this.logEntries.find(entry => entry.id == this.id);\n            return logEntry || {};\n        },\n        logDate () {\n            return this.formatDate(this.logEntry.created_at)\n        },\n        flattenedErrors () {\n            return Object.values(this.errors).flat();\n        }\n    },\n    watch: {\n        logEntry: {\n            immediate: true,\n            handler: function () {\n                if (!this.logEntry.id) {\n                    this.$router.go(-1);\n                }\n            }\n        }\n    },\n    methods: {\n        async deleteEntry()\n        {\n            try {\n                // await this.$store.dispatch('applications/deleteLogEntry', {application: this.application, logEntry:  this.logEntry});\n                await deleteEntry(`/api/groups/${this.group.uuid}/activity-logs`, this.id)\n                this.$router.go(-1);\n            } catch ( error ) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors;\n                }\n                this.errors = {a: error.message};\n                \n            }\n        }\n    },\n    setup () {\n        return {\n            logEntries\n        }\n    }\n}\n</script>","import { render } from \"./ConfirmDeleteLogEntry.vue?vue&type=template&id=0db916b1\"\nimport script from \"./ConfirmDeleteLogEntry.vue?vue&type=script&lang=js\"\nexport * from \"./ConfirmDeleteLogEntry.vue?vue&type=script&lang=js\"\n\nimport \"./ConfirmDeleteLogEntry.vue?vue&type=style&index=0&id=0db916b1&lang=postcss&scope=true\"\n\nimport exportComponent from \"/home/bpow/src/clingen/gpm/resources/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>            \n        <h2>You are about to delete the following next action:</h2>\n        <div class=\"border-y py-2\" v-if=\"nextAction\">\n            <div class=\"ml-4 my-3 text-sm\">\n                Created on: <strong>{{formatDate(nextAction.created_at)}}</strong>\n            </div>\n            <blockquote class=\"mb-4\">\n                <div v-html=\"nextAction.entry\"></div>\n            </blockquote>\n            <div class=\"ml-4 my-1 text-sm\" v-if=\"nextAction.assignee\">\n                Assigned to: \n                <strong>\n                    <span v-if=\"nextAction.assigned_to_name\">{{nextAction.assigned_to_name}} in </span> \n                    {{nextAction.assignee.name}}\n                </strong>\n            </div>\n            <div class=\"ml-4 mt-1 mb-4 text-sm\" v-if=\"nextAction.target_date\">\n                Target Date: <strong>{{formatDate(nextAction.target_date)}}</strong>\n            </div>\n        </div>\n\n    <div>This can not be undone. Are you sure you want to continue?</div>\n        \n    <button-row @canceled=\"$router.go(-1)\" @submitted=\"commitDelete\" submitText=\"Delete Log Entry\"></button-row>\n    </div>\n</template>\n<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n<script>\nimport {mapGetters} from 'vuex'\nimport { formatDate } from '@/date_utils'\nimport is_validation_error from '@/http/is_validation_error'\n\nexport default {\n    name: 'ConfirmDeleteNextAction',\n    props: {\n        uuid: {\n            required: true,\n            type: String\n        },\n        id: {\n            required: true,\n            type: String,\n        }\n    },\n    data() {\n        return {\n            errors: {}\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        },\n        nextAction () {\n            if (!this.application.next_actions) {\n                return {};\n            }\n            const next_action = this.application.next_actions.find(na => na.id == this.id);\n            return next_action || {};\n        },\n        flattenedErrors () {\n            return Object.values(this.errors).flat();\n        },\n        targetDate() {\n            return formatDate(this.nextAction.targetDate);\n        }\n    },\n    watch: {\n        nextAction: {\n            immediate: true,\n            handler: function () {\n                if (!this.nextAction.id) {\n                    this.$router.go(-1);\n                }\n            }\n        }\n    },\n    methods: {\n        formatDate(date) {\n            return formatDate(date);\n        },\n        async commitDelete()\n        {\n            try {\n                await this.$store.dispatch('applications/deleteNextAction', \n                                    {\n                                        application: this.application, \n                                        nextAction: this.nextAction\n                                    });\n                this.$router.go(-1);\n            } catch ( error ) {\n                if (is_validation_error(error)) {\n                    this.errors = error.response.data.errors;\n                }\n                this.errors = {a: error.message};\n                \n            }\n        }\n    }\n}\n</script>","import { render } from \"./ConfirmDeleteNextAction.vue?vue&type=template&id=4199c811\"\nimport script from \"./ConfirmDeleteNextAction.vue?vue&type=script&lang=js\"\nexport * from \"./ConfirmDeleteNextAction.vue?vue&type=script&lang=js\"\n\nimport \"./ConfirmDeleteNextAction.vue?vue&type=style&index=0&id=4199c811&lang=postcss&scope=true\"\n\nimport exportComponent from \"/home/bpow/src/clingen/gpm/resources/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_entries","ref","logEntries","computed","value","fetchEntries","async","api","get","apiUrl","then","response","data","saveEntry","entryData","post","push","updateEntry","put","entryIdx","findIndex","entry","id","deleteEntry","entryId","delete","splice","_createElementVNode","class","_createElementBlock","_hoisted_1","_hoisted_2","innerHTML","$options","description","causer","_hoisted_4","name","_hoisted_5","length","_hoisted_6","_Fragment","err","idx","key","_createVNode","_component_button_row","onCanceled","_ctx","go","onSubmitted","submitText","props","required","type","String","errors","mapGetters","group","application","this","expert_panel","logEntry","find","logDate","formatDate","created_at","flattenedErrors","Object","values","flat","watch","immediate","handler","$router","methods","uuid","error","isValidationError","a","message","setup","__exports__","render","_hoisted_3","assignee","_hoisted_7","assigned_to_name","target_date","_hoisted_10","_hoisted_12","nextAction","next_actions","next_action","na","targetDate","date","commitDelete","$store","dispatch","is_validation_error"],"sourceRoot":""}