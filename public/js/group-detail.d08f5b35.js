(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-detail"],{"0251":function(e,t,n){},"4f50":function(e,t,n){"use strict";var o=n("7a23"),r={class:"flex space-x-2 items-center mb-3"},c={key:0},a=Object(o["createTextVNode"])(" has"),i={key:1},l=Object(o["createTextVNode"])(" an "),u=Object(o["createTextVNode"])(" due on "),s=Object(o["createTextVNode"])(". "),d=Object(o["createTextVNode"])(" Complete the Annual Update ");function p(e,t,n,p,b,m){var O=Object(o["resolveComponent"])("icon-review"),j=Object(o["resolveComponent"])("router-link"),f=Object(o["resolveComponent"])("static-alert");return m.isPending&&b.annualReview.id?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0,variant:m.variant},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(O,{height:"30",width:"30"}),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("p",null,[n.showGroupName?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",c,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(n.group.displayName),1),a])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",i,"You have")),l,Object(o["createElementVNode"])("strong",null,"annual update for "+Object(o["toDisplayString"])(m.window.for_year),1),u,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.formatDate(m.window.end)),1),s]),n.group.uuid?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:0,class:"btn font-bold",to:{name:"AnnualUpdate",params:{uuid:n.group.uuid}}},{default:Object(o["withCtx"])((function(){return[d]})),_:1},8,["to"])):Object(o["createCommentVNode"])("",!0)])])]})),_:1},8,["variant"])):Object(o["createCommentVNode"])("",!0)}var b=n("db04"),m={name:"AnnualUpdateAlert",props:{group:{type:Object,required:!0},showGroupName:{type:Boolean,default:!1}},data:function(){return{annualReview:{},loading:!1}},computed:{window:function(){return this.annualReview.window?this.annualReview.window:{}},isPending:function(){return!this.annualReview.completed_at},variant:function(){var e=new Date;if(!this.window.end)return console.log("no window.end"),"warning";var t=new Date(Date.parse(this.window.end));return e>this.addDays(t,-7)?"danger":"warning"}},watch:{group:{immediate:!0,handler:function(){this.getAnnualUpdate()}}},methods:{getAnnualUpdate:function(){var e=this;this.group.uuid&&this.group.expert_panel.definition_is_approved&&(this.loading=!0,b["a"].get("/api/groups/".concat(this.group.uuid,"/expert-panel/annual-updates"),{headers:{"X-Ignore-Missing":1}}).then((function(t){e.annualReview=t.data})),this.loading=!1)}}},O=n("6b0d"),j=n.n(O);const f=j()(m,[["render",p]]);t["a"]=f},"5b76":function(e,t,n){"use strict";n("c54c")},8067:function(e,t,n){},"8c58":function(e,t,n){"use strict";n("0251")},b47e:function(e,t,n){"use strict";n.r(t);n("b0c0"),n("a15b"),n("d81d");var o=n("7a23"),r=function(e){return Object(o["pushScopeId"])("data-v-15f53acc"),e=e(),Object(o["popScopeId"])(),e},c={class:"flex space-x-4"},a={class:"flex-grow mt-4"},i=r((function(){return Object(o["createElementVNode"])("h3",null," Plans for Ongoing Gene Review and Reanalysis and Discrepancy Resolution ",-1)})),l=r((function(){return Object(o["createElementVNode"])("br",null,null,-1)})),u={key:0,class:"bg-white bg-opacity-50 absolute top-0 left-0 right-0 bottom-0"},s=Object(o["createTextVNode"])(" You can complete these sections after your first Specifications Pilot has been approved. "),d={key:2},p=r((function(){return Object(o["createElementVNode"])("header",null,[Object(o["createElementVNode"])("h3",null,"Example Evidence Summaries")],-1)})),b={class:"relative"},m=Object(o["createTextVNode"])(" You can complete these sections after your first Specifications Pilot has been approved. "),O=Object(o["createTextVNode"])("Documents are only available to members of this group."),j=Object(o["createTextVNode"])("The attestations below are read only. Attestations can only be completed during the application process."),f=r((function(){return Object(o["createElementVNode"])("h3",null,"Reanalysis & Discrepancy Resolution",-1)})),g=r((function(){return Object(o["createElementVNode"])("h3",null,"NHGRI Data Availability",-1)})),h={key:0},v=r((function(){return Object(o["createElementVNode"])("h2",{class:"pb-2 border-b mb-4"},"Application",-1)})),y=r((function(){return Object(o["createElementVNode"])("hr",null,null,-1)})),w={class:"border my-4 p-4 rounded"},k=r((function(){return Object(o["createElementVNode"])("h2",{class:"mb-4"},"Annual Update",-1)})),C=["href"],V={class:"border my-4 p-4 bg-red-100 border-red-200 rounded"},N=r((function(){return Object(o["createElementVNode"])("h2",{class:"mb-4 text-red-800"}," Here be dragons. Proceed with caution. ",-1)})),x={key:1,class:"border my-4 p-4 rounded"},E=r((function(){return Object(o["createElementVNode"])("h2",{class:"mb-4"},[Object(o["createTextVNode"])(" Dev tools "),Object(o["createElementVNode"])("span",{class:"text-gray-500"}," - don't use if you don't know.")],-1)})),D={key:0,class:"md:w-1/5 lg:w-1/4"},B=r((function(){return Object(o["createElementVNode"])("h2",{class:"mb-4"},"Subgroups",-1)})),_={class:"text-xs"},S={class:"text-lg"},U=r((function(){return Object(o["createElementVNode"])("p",null,"This cannot be undone.",-1)}));function T(e,t,n,r,T,F){var A=this,R=Object(o["resolveComponent"])("annual-update-alert"),$=Object(o["resolveComponent"])("sustained-curation-review-alert"),I=Object(o["resolveComponent"])("group-detail-header"),M=Object(o["resolveComponent"])("application-summary"),L=Object(o["resolveComponent"])("member-list"),P=Object(o["resolveComponent"])("membership-description-form"),G=Object(o["resolveComponent"])("submission-wrapper"),q=Object(o["resolveComponent"])("tab-item"),H=Object(o["resolveComponent"])("scope-description-form"),Y=Object(o["resolveComponent"])("static-alert"),J=Object(o["resolveComponent"])("evidence-summaries"),W=Object(o["resolveComponent"])("cspec-summary"),z=Object(o["resolveComponent"])("group-documents"),X=Object(o["resolveComponent"])("note"),K=Object(o["resolveComponent"])("attestation-gcep"),Q=Object(o["resolveComponent"])("attestation-reanalysis"),Z=Object(o["resolveComponent"])("attestation-nhgri"),ee=Object(o["resolveComponent"])("activity-log"),te=Object(o["resolveComponent"])("progress-chart"),ne=Object(o["resolveComponent"])("step-tabs"),oe=Object(o["resolveComponent"])("tabs-container"),re=Object(o["resolveComponent"])("dictionary-row"),ce=Object(o["resolveComponent"])("router-link"),ae=Object(o["resolveComponent"])("popover"),ie=Object(o["resolveComponent"])("router-view"),le=Object(o["resolveComponent"])("modal-dialog"),ue=Object(o["resolveComponent"])("group-form"),se=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[e.hasAnyPermission(["annual-updates-mange",["annual-update-manage",r.group]])?(Object(o["openBlock"])(),Object(o["createBlock"])(R,{key:0,group:r.group,class:"mb-2"},null,8,["group"])):Object(o["createCommentVNode"])("",!0),r.needsToReviewSustainedCuration&&e.hasAnyPermission(["ep-applications-manage",["application-edit",r.group]])?(Object(o["openBlock"])(),Object(o["createBlock"])($,{key:1,group:r.group,class:"mb-2"},null,8,["group"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(I,{group:r.group,onShowEdit:F.showEdit},null,8,["group","onShowEdit"]),Object(o["createElementVNode"])("div",c,[Object(o["createElementVNode"])("div",a,[r.group.isApplying?(Object(o["openBlock"])(),Object(o["createBlock"])(M,{key:0,group:r.group},null,8,["group"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(oe,{onTabChanged:F.handleTabChange},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(q,{label:"Members"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(L,{group:r.group},null,8,["group"]),r.group.isVcep()?(Object(o["openBlock"])(),Object(o["createBlock"])(G,{key:0,onSubmitted:t[1]||(t[1]=function(e){return F.submitForm("saveMembershipDescription","editingExpertise")}),onCanceled:t[2]||(t[2]=function(e){return F.cancelForm("editingExpertise")}),"show-controls":T.editingExpertise},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(P,{ref:"membershipDescriptionFormRef",class:"mt-8",editing:T.editingExpertise,"onUpdate:editing":t[0]||(t[0]=function(e){return T.editingExpertise=e}),errors:T.errors},null,8,["editing","errors"])]})),_:1},8,["show-controls"])):Object(o["createCommentVNode"])("",!0)]})),_:1}),Object(o["createVNode"])(q,{label:"Scope",visible:r.group.isEp()},{default:Object(o["withCtx"])((function(){return[i,r.group.isEp()?(Object(o["openBlock"])(),Object(o["createBlock"])(G,{key:0,onSubmitted:t[4]||(t[4]=function(t){return e.$refs.groupGeneListRef.save()}),onCanceled:t[5]||(t[5]=function(t){return e.$refs.groupGeneListRef.cancel()}),"show-controls":T.editingGenes},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(r.groupGeneList),{ref:"groupGeneListRef",editing:T.editingGenes,"onUpdate:editing":t[3]||(t[3]=function(e){return T.editingGenes=e})},null,8,["editing"]))]})),_:1},8,["show-controls"])):Object(o["createCommentVNode"])("",!0),l,Object(o["createVNode"])(G,{visible:r.group.isEp(),onSubmitted:t[7]||(t[7]=function(e){return F.submitForm("saveScopeDescription","editingScopeDescription")}),onCanceled:t[8]||(t[8]=function(e){return F.cancelForm("editingScopeDescription")}),"show-controls":T.editingScopeDescription},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(H,{ref:"scopeDescriptionRef",editing:T.editingScopeDescription,"onUpdate:editing":t[6]||(t[6]=function(e){return T.editingScopeDescription=e}),errors:T.errors},null,8,["editing","errors"])]})),_:1},8,["visible","show-controls"])]})),_:1},8,["visible"]),Object(o["createVNode"])(q,{label:"Sustained Curation",visible:r.group.isEp(),class:"relative"},{default:Object(o["withCtx"])((function(){return[r.group.expert_panel.pilotSpecificationsIsApproved?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",u)),r.group.expert_panel.pilotSpecificationsIsApproved?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(Y,{key:1,variant:"info"},{default:Object(o["withCtx"])((function(){return[s]})),_:1})),Object(o["createVNode"])(G,{onSubmitted:t[9]||(t[9]=function(e){return F.submitForm("saveOngoingPlansForm")}),onCanceled:t[10]||(t[10]=function(e){return F.cancelForm()}),class:"pb-4",showControls:e.hasAnyPermission(["ep-applications-manage",["application-edit",r.group]])&&r.group.expert_panel.pilotSpecificationsIsApproved},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(r.ongoingPlansFormComponent),{ref:"ongoingPlansForm",errors:T.errors,readonly:!r.group.expert_panel.pilotSpecificationsIsApproved},null,8,["errors","readonly"]))]})),_:1},8,["showControls"]),r.group.isVcep()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",d,[p,Object(o["createVNode"])(J,{group:r.group,readonly:!r.group.expert_panel.pilotSpecificationsIsApproved,class:"pb-2 mb-4 border-b"},null,8,["group","readonly"])])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["visible"]),Object(o["createVNode"])(q,{label:"Specifications",visible:r.group.isVcep()},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",b,[r.group.expert_panel.pilotSpecificationsIsApproved?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(Y,{key:0,variant:"info"},{default:Object(o["withCtx"])((function(){return[m]})),_:1})),Object(o["createVNode"])(W,{readonly:!r.group.expert_panel.pilotSpecificationsIsApproved},null,8,["readonly"])])]})),_:1},8,["visible"]),e.userInGroup(r.group)||e.hasPermission("groups-manage")?(Object(o["openBlock"])(),Object(o["createBlock"])(q,{key:0,label:"Documents"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(z),Object(o["createVNode"])(X,null,{default:Object(o["withCtx"])((function(){return[O]})),_:1})]})),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(q,{label:"Attestations",visible:r.group.isEp()},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(X,null,{default:Object(o["withCtx"])((function(){return[j]})),_:1}),r.group.isGcep()?(Object(o["openBlock"])(),Object(o["createBlock"])(K,{key:0,class:"pb-2 mb-4 border-b",disabled:!0})):Object(o["createCommentVNode"])("",!0),f,r.group.isVcep()?(Object(o["openBlock"])(),Object(o["createBlock"])(Q,{key:1,class:"pb-2 mb-4 border-b",disabled:!0})):Object(o["createCommentVNode"])("",!0),g,Object(o["createVNode"])(Z,{class:"pb-2 mb-4 border-b",disabled:!0})]})),_:1},8,["visible"]),Object(o["createVNode"])(q,{label:"Log",visible:e.hasPermission("groups-manage")||e.userInGroup(r.group)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(ee,{"log-entries":r.logEntries,"api-url":"/api/groups/".concat(r.group.uuid,"/activity-logs"),"log-updated":r.getLogEntries},null,8,["log-entries","api-url","log-updated"]),Object(o["createElementVNode"])("button",{class:"btn btn-xs mt-1",onClick:t[11]||(t[11]=function(){return r.getLogEntries&&r.getLogEntries.apply(r,arguments)})},"Refresh")]})),_:1},8,["visible"]),Object(o["createVNode"])(q,{label:"Admin",visible:e.hasPermission("groups-manage")},{default:Object(o["withCtx"])((function(){return[r.group.isApplying?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",h,[v,Object(o["createVNode"])(te,{application:r.group.expert_panel,class:"pb-4 border-b border-gray-300 mb-6"},null,8,["application"]),r.group.isEp()?(Object(o["openBlock"])(),Object(o["createBlock"])(ne,{key:0,application:r.group.expert_panel,onStepApproved:r.getGroup},null,8,["application","onStepApproved"])):Object(o["createCommentVNode"])("",!0),y])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("section",w,[k,F.showCreateAnnualUpdateButton?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn",onClick:t[12]||(t[12]=function(){return F.createAnnualUpdateForLatestWindow&&F.createAnnualUpdateForLatestWindow.apply(F,arguments)})}," Create Annual Update for latest window. ")):r.group.expert_panel.annualUpdate?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:1,href:"/annual-updates/".concat(A.group.expert_panel.annualUpdate.id),target:"annual update"}," View Annual Update for "+Object(o["toDisplayString"])(A.group.expert_panel.annualUpdate.window.for_year),9,C)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("section",V,[N,Object(o["createElementVNode"])("button",{class:"btn btn red",onClick:t[13]||(t[13]=function(){return F.initDelete&&F.initDelete.apply(F,arguments)})},"Delete Group")]),"production"!==e.$store.state.systemInfo.env?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",x,[E,r.group.isVcep()&&r.group.expert_panel.has_approved_pilot?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn",onClick:t[14]||(t[14]=function(){return F.fakeCspecPilotApproved&&F.fakeCspecPilotApproved.apply(F,arguments)})}," Fake a Pilot Approved Message ")):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["visible"])]})),_:1},8,["onTabChanged"])]),r.group.hasChildren?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",D,[B,Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.group.children,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:"child-group",key:e.id},[Object(o["createVNode"])(ae,{hover:"",arrow:"",placement:"top"},{content:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",_,[Object(o["createVNode"])(re,{label:"Status","label-class":"font-bold","label-width":"8em"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.status.name),1)]})),_:2},1024),e.chairs.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(re,{key:0,label:"Chairs","label-class":"font-bold","label-width":"8em",class:"my-1"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.coordinators.map((function(e){return e.person.name})).join(", ")),1)]})),_:2},1024)):Object(o["createCommentVNode"])("",!0),e.coordinators.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(re,{key:1,label:"Coordinators","label-class":"font-bold","label-width":"8em"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.coordinators.map((function(e){return e.person.name})).join(", ")),1)]})),_:2},1024)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(re,{label:"# Members","label-width":"8em","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.members_count),1)]})),_:2},1024)])]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(ce,{to:{name:"GroupDetail",params:{uuid:e.uuid}},class:"block"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.name),1)]})),_:2},1032,["to"])]})),_:2},1024)])})),128))])])):Object(o["createCommentVNode"])("",!0)]),(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(le,{modelValue:r.showModal,"onUpdate:modelValue":t[15]||(t[15]=function(e){return r.showModal=e}),onClosed:F.handleModalClosed,title:this.$route.meta.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(ie,{ref:"modalView",onSaved:F.hideModal,onCanceled:F.hideModal},null,8,["onSaved","onCanceled"])]})),_:1},8,["modelValue","onClosed","title"]),Object(o["createVNode"])(le,{modelValue:T.showInfoEdit,"onUpdate:modelValue":t[20]||(t[20]=function(e){return T.showInfoEdit=e}),onClosed:t[21]||(t[21]=function(e){return T.showInfoEdit=!1}),title:"Edit Group Info",size:"sm"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(G,{onSubmitted:t[18]||(t[18]=function(t){return e.$refs.infoForm.save()}),onCanceled:t[19]||(t[19]=function(t){return e.$refs.infoForm.cancel()})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(ue,{ref:"infoForm",onCanceled:t[16]||(t[16]=function(e){return T.showInfoEdit=!1}),onSaved:t[17]||(t[17]=function(e){return T.showInfoEdit=!1})},null,512)]})),_:1})]})),_:1},8,["modelValue"]),Object(o["createVNode"])(le,{modelValue:T.showConfirmDelete,"onUpdate:modelValue":t[23]||(t[23]=function(e){return T.showConfirmDelete=e}),title:"Delete This Group?"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",S,[Object(o["createElementVNode"])("p",null," You are about to delete "+Object(o["toDisplayString"])(r.group.displayName)+" and all associated data. ",1),U]),Object(o["createVNode"])(se,{"submit-text":"Delete this group.",onSubmitted:F.deleteGroup,onCanceled:t[22]||(t[22]=function(e){return T.showConfirmDelete=!1})},null,8,["onSubmitted"])]})),_:1},8,["modelValue"])]))])}var F=n("1da1"),A=(n("4de4"),n("d3b7"),n("ac1f"),n("5319"),n("96cf"),n("5502")),R=n("831e"),$=n("1874"),I=(n("4e82"),n("a4d3"),n("e01a"),{key:0,class:"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200"}),M={key:0,class:"flex space-x-1"},L=["onClick"],P=["onClick"],G=["innerHTML"];function q(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-edit"),l=Object(o["resolveComponent"])("icon-trash"),u=Object(o["resolveComponent"])("data-table"),s=Object(o["resolveComponent"])("log-entry-form"),d=Object(o["resolveComponent"])("modal-dialog"),p=Object(o["resolveComponent"])("activity-log-delete-confirmation");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[r.hasLogEntries?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:1,fields:r.fields,data:n.logEntries,sort:r.sort,"onUpdate:sort":t[0]||(t[0]=function(e){return r.sort=e})},{"cell-id":Object(o["withCtx"])((function(t){var n=t.item;return[e.hasPermission("groups-manage")?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",M,[Object(o["createElementVNode"])("button",{class:"btn btn-xs inline-block",onClick:function(e){return r.editLogEntry(n)}},[Object(o["createVNode"])(i,{width:"12"})],8,L),null===n.activity_type?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,onClick:function(e){return r.confirmDelete(n)},class:"btn btn-xs inline-block"},[Object(o["createVNode"])(l,{width:"12"})],8,P)):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)]})),"cell-description":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",{innerHTML:t.description,class:"links-blue"},null,8,G)]})),_:1},8,["fields","data","sort"])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",I," No log entries to display ")),Object(o["createVNode"])(d,{modelValue:r.editingEntry,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.editingEntry=e}),title:"Edit log entry"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{"log-entry":r.selectedEntry,"api-url":n.apiUrl,onSaved:r.closeEntryForm,onCanceled:r.closeEntryForm},null,8,["log-entry","api-url","onSaved","onCanceled"])]})),_:1},8,["modelValue"]),Object(o["createVNode"])(d,{modelValue:r.showDeleteConfirmation,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.showDeleteConfirmation=e}),title:"Delete this log entry?"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{logEntry:r.selectedEntry,"api-url":n.apiUrl,onCanceled:r.closeDeleteConfirmation,onDeleted:r.closeDeleteConfirmation},null,8,["logEntry","api-url","onCanceled","onDeleted"])]})),_:1},8,["modelValue"])])}var H=Object(o["createElementVNode"])("hr",null,null,-1);function Y(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("rich-text-editor"),u=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{class:"log-entry-form",ref:"form-container"},{default:Object(o["withCtx"])((function(){return[H,Object(o["createVNode"])(i,{label:"Log Date",modelValue:r.newEntry.log_date,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.newEntry.log_date=e}),errors:r.errors.log_date,type:"date",ref:"logdate"},null,8,["modelValue","errors"]),Object(o["createVNode"])(i,{label:"Entry",errors:r.errors.entry},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:r.newEntry.entry,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.newEntry.entry=e})},null,8,["modelValue"])]})),_:1},8,["errors"]),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return r.cancel&&r.cancel.apply(r,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return r.save&&r.save.apply(r,arguments)})},"Save")]})),_:1})]})),_:1},512)}n("99af");var J=n("85fe"),W={name:"LogEntryForm",components:{RichTextEditor:J["default"]},props:{logEntry:{required:!1,default:function(){return{log_date:(new Date).toISOString(),step:null,entry:""}}},apiUrl:{required:!0,type:String}},emits:["saved"],setup:function(e,t){var n=Object(o["ref"])({log_date:(new Date).toISOString(),step:null,entry:""}),r=Object(o["ref"])({}),c=function(e){e&&e.created_at&&(n.value={id:e.id,log_date:new Date(Date.parse(e.created_at)).toISOString(),step:e.properties?e.properties.step:null,entry:e.description})},a=function(){n.value={log_date:(new Date).toISOString(),step:null,entry:""}},i=function(){var o=Object(F["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(o.prev=0,!n.value.id){o.next=6;break}return o.next=4,Object(R["e"])("".concat(e.apiUrl,"/").concat(n.value.id),n.value);case 4:o.next=8;break;case 6:return o.next=8,Object(R["d"])(e.apiUrl,n.value);case 8:return o.next=10,Object(R["b"])(e.apiUrl);case 10:a(),t.emit("saved",n.value),o.next=19;break;case 14:if(o.prev=14,o.t0=o["catch"](0),!o.t0.response||422!=o.t0.response.status||!o.t0.response.data.errors){o.next=19;break}return r.value=o.t0.response.data.errors,o.abrupt("return");case 19:case"end":return o.stop()}}),o,null,[[0,14]])})));return function(){return o.apply(this,arguments)}}(),l=function(){a(),t.emit("canceled")};return Object(o["watch"])((function(){return e.logEntry}),(function(e){c(e)}),{immediate:!0}),{newEntry:n,errors:r,syncEntry:c,initNewEntry:a,save:i,cancel:l}},mounted:function(){}},z=n("6b0d"),X=n.n(z);const K=X()(W,[["render",Y]]);var Q=K,Z=Object(o["createElementVNode"])("p",null,"You are about to delete the following log entry:",-1),ee={class:"border-y py-2"},te=["innerHTML"],ne={key:0,class:"ml-4 mt-2 mb-4 text-gray-700 text-sm"},oe=Object(o["createElementVNode"])("div",null,"This can not be undone. Are you sure you want to continue?",-1),re={key:0,class:"bg-red-200 text-red-900 rounded p-2 my-2"};function ce(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Z,Object(o["createElementVNode"])("div",ee,[Object(o["createElementVNode"])("blockquote",null,[Object(o["createElementVNode"])("div",{innerHTML:n.logEntry.description},null,8,te)]),n.logEntry.causer?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ne,"Logged by "+Object(o["toDisplayString"])(n.logEntry.causer.name)+", "+Object(o["toDisplayString"])(r.logDate),1)):Object(o["createCommentVNode"])("",!0)]),oe,r.flattenedErrors.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",re,[Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.flattenedErrors,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t},Object(o["toDisplayString"])(e),1)})),128))])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(i,{onCanceled:t[0]||(t[0]=function(t){return e.$emit("canceled")}),onSubmitted:r.deleteLogEntry,submitText:"Delete Log Entry"},null,8,["onSubmitted"])])}n("0481"),n("4069"),n("07ac");var ae=n("e328"),ie=n("033d"),le={name:"ConfirmDeleteLogEntry",props:{logEntry:{required:!0,type:Object},apiUrl:{required:!0,type:String}},emits:["deleted","canceled"],setup:function(e,t){var n=Object(o["ref"])({}),r=Object(o["computed"])((function(){return Object(ae["b"])(e.logEntry.properties.log_date)})),c=Object(o["computed"])((function(){return Object.values(n.value).flat()})),a=function(){var o=Object(F["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(R["a"])(e.apiUrl,e.logEntry.id);case 3:return t.emit("deleted"),o.next=6,Object(R["b"])(e.apiUrl);case 6:o.next=14;break;case 8:if(o.prev=8,o.t0=o["catch"](0),!Object(ie["a"])(o.t0)){o.next=13;break}return n.value=o.t0.response.data.errors,o.abrupt("return");case 13:n.value={a:o.t0.message};case 14:case"end":return o.stop()}}),o,null,[[0,8]])})));return function(){return o.apply(this,arguments)}}();return{errors:n,logDate:r,flattenedErrors:c,deleteLogEntry:a}}};n("8c58");const ue=X()(le,[["render",ce]]);var se=ue,de=[{name:"created_at",label:"Created",sortName:"created_at",sortable:!0,type:Date},{name:"description",label:"Entry",sortable:!0,type:String},{name:"causer.name",label:"User",sortable:!0},{name:"id",label:"",sortable:!1}],pe={components:{LogEntryForm:Q,ActivityLogDeleteConfirmation:se},props:{logEntries:{required:!0,type:Array},apiUrl:{required:!0,type:String}},setup:function(e){var t=Object(o["ref"])({field:"created_at",desc:!0}),n=Object(o["ref"])({}),r=Object(o["ref"])(!1),c=Object(o["computed"])((function(){return e.logEntries.length>0})),a=function(e){r.value=!0,n.value=e},i=function(){r.value=!1,n.value={}},l=Object(o["ref"])(!1),u=function(e){n.value=e,l.value=!0},s=function(){l.value=!1,n.value={}};return{fields:Object(o["ref"])(de),sort:t,selectedEntry:n,editingEntry:r,hasLogEntries:c,editLogEntry:a,closeEntryForm:i,showDeleteConfirmation:l,confirmDelete:u,closeDeleteConfirmation:s}}};n("b5c7");const be=X()(pe,[["render",q]]);var me=be,Oe={key:0,class:"p-4 my-4 mb-8 border rounded-xl bg-white"},je={class:"mb-2"},fe=Object(o["createTextVNode"])(" Application Summary "),ge={key:0},he={class:"px-8"},ve={key:2},ye=Object(o["createTextVNode"])("Approved"),we={key:0,class:"flex-1"},ke={key:0,class:"mt-4"},Ce=Object(o["createElementVNode"])("button",{class:"btn blue btn-lg"},"Go to application",-1);function Ve(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("requirements-badge"),l=Object(o["resolveComponent"])("icon-lock"),u=Object(o["resolveComponent"])("badge"),s=Object(o["resolveComponent"])("router-link");return n.group.isEp()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Oe,[Object(o["createElementVNode"])("h2",je,[fe,a.applicationStarted&&n.group.isVcep()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",ge," - "+Object(o["toDisplayString"])(this.currentMenuItem.title),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("ul",he,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.menu,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t,class:"py-1 flex justify-between border-b border-gray-300 my-2"},[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["flex justify-between",{"w-full":!a.isStep(e)}])},[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["w-56 text-lg",{"text-gray-400":a.isStep(e)&&e.isDisabled(n.group)}])},Object(o["toDisplayString"])(e.title),3),Object(o["createElementVNode"])("div",null,[a.isStep(e)?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,section:e},null,8,["section"])),a.isStep(e)&&e.isDisabled(n.group)?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,class:"inline text-gray-400",height:14,width:14})):Object(o["createCommentVNode"])("",!0),a.isStep(e)&&e.isComplete(n.group)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ve,[Object(o["createVNode"])(u,{color:"green"},{default:Object(o["withCtx"])((function(){return[ye]})),_:1})])):Object(o["createCommentVNode"])("",!0)])],2),a.isCurrentStep(e)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",we,[Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.sections,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t,class:"pb-2 flex justify-between my-2"},[Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(e.title),1),Object(o["createVNode"])(i,{section:e},null,8,["section"])])})),128))])])):Object(o["createCommentVNode"])("",!0)])})),128))]),e.hasAnyPermission(["ep-applications-manage",["application-edit",n.group]])?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ke,[n.group.uuid?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,to:a.applicationRoute},{default:Object(o["withCtx"])((function(){return[Ce]})),_:1},8,["to"])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)}var Ne=n("3a9d"),xe=n("5313"),Ee={name:"ApplicationSummary",components:{RequirementsBadge:Ne["a"]},props:{group:{required:!0,type:Object}},data:function(){return{}},computed:{applicationStarted:function(){return!0},application:function(){return this.group.isVcep()?xe["c"]:xe["a"]},currentStep:function(){return this.group.expert_panel.current_step},applicationRoute:function(){return{name:"GroupApplication",params:{uuid:this.group.uuid},hash:"#".concat(this.currentMenuItem.id)}},currentMenuItem:function(){return this.application.getStep(this.group.expert_panel.current_step)},menu:function(){return this.application.steps.length>1?this.application.steps:this.application.steps[0].sections}},methods:{isStep:function(e){return Boolean(e.sections)},isCurrentStep:function(e){return!(!this.isStep(e)||this.application.getStep(this.group.expert_panel.current_step)!=e)}}};const De=X()(Ee,[["render",Ve]]);var Be=De,_e=n("8fec"),Se=n("3926"),Ue=n("a266"),Te=n("abba"),Fe=n("324b"),Ae=n("206f"),Re=n("6ca3"),$e=n("268c"),Ie={class:"flex justify-between items-start"},Me={class:"text-sm text-gray-800 mt-1 font-normal"},Le={key:0},Pe=Object(o["createTextVNode"])("Short Name: "),Ge=Object(o["createTextVNode"])(" | "),qe=Object(o["createTextVNode"])(" Affiliation ID: "),He={key:1},Ye=Object(o["createTextVNode"])(" | Part of the "),Je={key:0},We=Object(o["createElementVNode"])("strong",null,"Chairs:",-1),ze={key:0},Xe={key:1,class:"text-gray-500"},Ke=Object(o["createElementVNode"])("strong",null,"Coordinators:",-1),Qe={key:0},Ze={key:1,class:"text-gray-500"};function et(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("group-breadcrumbs"),l=Object(o["resolveComponent"])("badge"),u=Object(o["resolveComponent"])("router-link"),s=Object(o["resolveComponent"])("note"),d=Object(o["resolveComponent"])("dictionary-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("header",null,[Object(o["createVNode"])(i),Object(o["createElementVNode"])("h1",Ie,[Object(o["createElementVNode"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.group.displayName)+" ",1),Object(o["createVNode"])(l,{color:n.group.statusColor,class:"text-xs"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.group.status?n.group.status.name:"loading..."),1)]})),_:1},8,["color"]),Object(o["createElementVNode"])("div",Me,[a.showShortName?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Le,[Pe,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(n.group.expert_panel.full_short_base_name||"--"),1),Ge])):Object(o["createCommentVNode"])("",!0),qe,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(n.group.expert_panel.affiliation_id||"--"),1),n.group.parent_id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",He,[Ye,Object(o["createVNode"])(u,{to:{name:"GroupDetail",params:{uuid:n.group.parent.uuid}}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.group.parent.name),1)]})),_:1},8,["to"])])):Object(o["createCommentVNode"])("",!0)]),e.hasRole("super-user")?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,class:"font-normal mt-2"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(" group.id: "+Object(o["toDisplayString"])(n.group.id)+" ",1),n.group.isEp()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Je," | expertPanel.id: "+Object(o["toDisplayString"])(n.group.expert_panel.id),1)):Object(o["createCommentVNode"])("",!0)]})),_:1})):Object(o["createCommentVNode"])("",!0)]),e.hasAnyPermission(["groups-manage",["info-edit",n.group]])?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=function(t){return e.$emit("showEdit")}),class:"btn btn-xs"}," Edit Group Info ")):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(d,{label:"Chairs:"},{label:Object(o["withCtx"])((function(){return[We]})),default:Object(o["withCtx"])((function(){return[n.group.chairs.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ze,Object(o["toDisplayString"])(n.group.chairs.map((function(e){return e.person.name})).join(", ")),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Xe," None assigned "))]})),_:1}),Object(o["createVNode"])(d,{label:"Coordinators:"},{label:Object(o["withCtx"])((function(){return[Ke]})),default:Object(o["withCtx"])((function(){return[a.coordinators.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Qe,Object(o["toDisplayString"])(a.coordinators.map((function(e){return e.person.name})).join(", ")),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ze," None assigned "))]})),_:1})])}var tt=n("ae23"),nt={name:"GroupDetailHeader",props:{group:{type:tt["a"],required:!0}},emits:["showEdit"],computed:{coordinators:function(){return this.group?this.group.members.filter((function(e){return e.hasRole("coordinator")})):[]},showShortName:function(){return this.group.expert_panel.short_base_name!==this.group.expert_panel.long_base_name}}};const ot=X()(nt,[["render",et]]);var rt=ot,ct=n("0945"),at=n("4d1a"),it=n("a8af"),lt=n("62a2"),ut=n("1d7f");function st(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("document-list");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(i,{documents:a.displayDocuments,documentUpdater:a.updateDocument,documentCreator:a.createDocument,documentDeleter:a.deleteDocument,canManage:a.canManageDocuments},null,8,["documents","documentUpdater","documentCreator","documentDeleter","canManage"])])}var dt={class:"flex justify-between py-2"},pt={class:"flex space-x-2"},bt=Object(o["createTextVNode"])(" Search: "),mt=Object(o["createTextVNode"])(" Type:   "),Ot=Object(o["createElementVNode"])("option",{value:null},"Any",-1),jt=["value"],ft=["onClick"],gt={class:"note"},ht={key:0},vt={key:1},yt=Object(o["createElementVNode"])("button",{class:"btn btn-xs"},"…",-1),wt=Object(o["createTextVNode"])("Download"),kt=Object(o["createTextVNode"])("Update"),Ct=Object(o["createTextVNode"])("Delete"),Vt={class:"px-4 pb-4 border"},Nt={key:0,class:"flex space-x-2 pt-2 border-t"},xt=["onClick"],Et=["onClick"],Dt=["onClick"],Bt={key:0},_t={key:0,class:"mb-3"},St=Object(o["createElementVNode"])("p",null,"Are you sure you want to continue?",-1);function Ut(e,t,n,r,c,a){var i=this,l=Object(o["resolveComponent"])("icon-cheveron-right"),u=Object(o["resolveComponent"])("icon-cheveron-down"),s=Object(o["resolveComponent"])("dropdown-item"),d=Object(o["resolveComponent"])("dropdown-menu"),p=Object(o["resolveComponent"])("object-dictionary"),b=Object(o["resolveComponent"])("data-table"),m=Object(o["resolveComponent"])("document-edit-form"),O=Object(o["resolveComponent"])("modal-dialog"),j=Object(o["resolveComponent"])("document-upload-form"),f=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["renderSlot"])(e.$slots,"heading",{},(function(){return[Object(o["createElementVNode"])("div",dt,[Object(o["createElementVNode"])("div",pt,[Object(o["createElementVNode"])("label",null,[bt,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",placeholder:"Fitler","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.keyword=e}),class:"sm"},null,512),[[o["vModelText"],c.keyword]])]),Object(o["createElementVNode"])("label",null,[mt,Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.filterType=e})},[Ot,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.documentTypes,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{key:e.id,value:e.id},Object(o["toDisplayString"])(e.long_name),9,jt)})),128))],512),[[o["vModelSelect"],c.filterType]])])]),n.canManage?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn btn-xs",onClick:t[2]||(t[2]=function(){return a.initUpload&&a.initUpload.apply(a,arguments)})},"Upload")):Object(o["createCommentVNode"])("",!0)])]})),Object(o["createVNode"])(b,{fields:c.fields,data:a.filteredDocuments,sort:c.sort,"onUpdate:sort":t[3]||(t[3]=function(e){return c.sort=e}),detailRows:!0},{"cell-cheveron":Object(o["withCtx"])((function(e){var t=e.item;return[t.metadata?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,onClick:Object(o["withModifiers"])((function(e){return a.toggleItemDetails(t)}),["stop"]),class:"w-9 align-center block -mx-3"},[t.showDetails?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,class:"m-auto cursor-pointer"})),t.showDetails?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:1,class:"m-auto cursor-pointer"})):Object(o["createCommentVNode"])("",!0)],8,ft)):Object(o["createCommentVNode"])("",!0)]})),"cell-filename":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.filename)+" ",1),Object(o["createElementVNode"])("span",gt,[t.type.is_versioned&&t.version?(Object(o["openBlock"])(),Object(o["createElementBlock"])("em",ht,"(version "+Object(o["toDisplayString"])(t.version)+")",1)):Object(o["createCommentVNode"])("",!0),t.is_final?(Object(o["openBlock"])(),Object(o["createElementBlock"])("em",vt," FINAL")):Object(o["createCommentVNode"])("",!0)])]})),"cell-actions":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createVNode"])(d,{hideCheveron:""},{label:Object(o["withCtx"])((function(){return[yt]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{onClick:function(e){return a.initDownload(t)}},{default:Object(o["withCtx"])((function(){return[wt]})),_:2},1032,["onClick"]),n.canManage?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,onClick:function(e){return a.initUpdate(t)}},{default:Object(o["withCtx"])((function(){return[kt]})),_:2},1032,["onClick"])):Object(o["createCommentVNode"])("",!0),n.canManage?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:1,onClick:function(e){return a.initDelete(t)}},{default:Object(o["withCtx"])((function(){return[Ct]})),_:2},1032,["onClick"])):Object(o["createCommentVNode"])("",!0)]})),_:2},1024)]})),detail:Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",Vt,[Object(o["createVNode"])(p,{obj:t.metadata},null,8,["obj"]),n.canManage?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Nt,[Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.initDownload(t)}},"Download",8,xt),Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.initUpdate(t)}},"Update",8,Et),Object(o["createElementVNode"])("button",{class:"btn btn-xs red",onClick:function(e){return a.initDelete(t)}},"Delete",8,Dt)])):Object(o["createCommentVNode"])("",!0)])]})),_:1},8,["fields","data","sort"]),(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(O,{modelValue:c.showEditForm,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.showEditForm=e}),title:"Update ".concat(c.activeDocument.filename)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{document:c.activeDocument,"save-function":i.commitUpdate,onSaved:t[4]||(t[4]=function(t){return e.$emit("updated")})},null,8,["document","save-function"])]})),_:1},8,["modelValue","title"]),Object(o["createVNode"])(O,{modelValue:c.showUploadForm,"onUpdate:modelValue":t[7]||(t[7]=function(e){return c.showUploadForm=e}),title:"Upload a new document"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j,{"save-function":i.commitCreate,onSaved:t[6]||(t[6]=function(t){return e.$emit("updated")})},null,8,["save-function"])]})),_:1},8,["modelValue"]),Object(o["createVNode"])(O,{modelValue:c.showDeleteConfirmation,"onUpdate:modelValue":t[8]||(t[8]=function(e){return c.showDeleteConfirmation=e}),title:"You are about to delete ".concat(c.activeDocument.filename)},{default:Object(o["withCtx"])((function(){return[c.activeDocument?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Bt,[c.activeDocument.is_final?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",_t," This version has been tagged as the final version of the document. ")):Object(o["createCommentVNode"])("",!0),St,Object(o["createVNode"])(f,{"submit-text":"Delete Document",onCanceled:a.cancelDelete,onSubmitted:a.commitDelete},null,8,["onCanceled","onSubmitted"])])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["modelValue","title"])]))])}var Tt=n("2909"),Ft=(n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("466d"),n("db04")),At={type:"file",ref:"fileInput"},Rt=Object(o["createElementVNode"])("option",{value:null},"Select...",-1),$t=["value"];function It(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("button-row"),u=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{label:"Document",errors:c.errors.file},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("input",At,null,512)]})),_:1},8,["errors"]),Object(o["createVNode"])(i,{label:"Type",errors:c.errors.document_type_id},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.newDocument.document_type_id=e})},[Rt,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.documentTypes,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{value:e.id,key:e.id},Object(o["toDisplayString"])(e.long_name),9,$t)})),128))],512),[[o["vModelSelect"],c.newDocument.document_type_id]])]})),_:1},8,["errors"]),Object(o["createVNode"])(i,{errors:c.errors.notes,label:"Notes"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.newDocument.notes=e}),cols:"30",rows:"10"},null,512),[[o["vModelText"],c.newDocument.notes]])]})),_:1},8,["errors"]),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn white",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]})),_:1})}var Mt=n("5530"),Lt=(n("159b"),n("b64b"),{props:{saveFunction:{type:Function,required:!0}},data:function(){return{newDocument:{file:null,document_type_id:this.documentTypeId,notes:null},errors:{}}},computed:Object(Mt["a"])(Object(Mt["a"])({},Object(A["c"])({documentTypes:function(e){return e.doctypes.items}})),{},{group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.expert_panel},isReviewed:function(){return Boolean(this.newDocument.date_reviewed)},documentType:function(){return 0==this.documentTypes.length?{}:this.$store.getters["doctypes/getItemById"](this.documentTypeId)}}),methods:{save:function(){var e=this;return Object(F["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=new FormData,Object.keys(e.newDocument).forEach((function(t){var o=e.newDocument[t];null!=o&&n.append(t,o)})),n.append("file",e.$refs.fileInput.files[0]),t.next=6,e.saveFunction(n);case 6:e.clearForm(),e.$emit("saved"),t.next=15;break;case 10:if(t.prev=10,t.t0=t["catch"](0),!Object(Ft["b"])(t.t0)){t.next=15;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},cancel:function(){this.clearForm(),this.$emit("canceled")},clearForm:function(){this.initNewDocument(),this.clearErrors()},initNewDocument:function(){this.$refs.fileInput.value=null,this.newDocument={file:null,document_type_id:this.documentTypeId,notes:null}},clearErrors:function(){this.errors={}}},mounted:function(){this.$store.dispatch("doctypes/getItems")}});const Pt=X()(Lt,[["render",It]]);var Gt=Pt,qt=["value"];function Ht(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("input-row"),u=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{label:"File"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.document.filename),1)]})),_:1}),Object(o["createVNode"])(l,{label:"Type",errors:c.errors.document_type_id},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.docProxy.document_type_id=e})},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.documentTypes,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{value:e.id,key:e.id},Object(o["toDisplayString"])(e.long_name),9,qt)})),128))],512),[[o["vModelSelect"],c.docProxy.document_type_id]])]})),_:1},8,["errors"]),Object(o["createVNode"])(l,{errors:c.errors.notes,label:"Notes"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.docProxy.notes=e}),cols:"30",rows:"10"},null,512),[[o["vModelText"],c.docProxy.notes]])]})),_:1},8,["errors"]),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]})),_:1})}n("e9c4");var Yt={name:"DocumentEditForm",props:{document:{required:!0,type:Object},saveFunction:{required:!0,type:Function}},emits:["saved"],data:function(){return{docProxy:{},errors:{}}},computed:Object(Mt["a"])({},Object(A["c"])({documentTypes:function(e){return e.doctypes.items}})),watch:{document:{immediate:!0,handler:function(){this.docProxy=JSON.parse(JSON.stringify(this.document))}}},methods:{cancel:function(){this.docProxy={},this.$emit("canceled")},save:function(){var e=this;return Object(F["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e.saveFunction(e.docProxy),e.$emit("saved"),t.next=9;break;case 5:throw t.prev=5,t.t0=t["catch"](0),Object(Ft["b"])(t.t0)&&(e.errors=t.t0.response.data.errors),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))()}},mounted:function(){this.$store.dispatch("doctypes/getItems")}};const Jt=X()(Yt,[["render",Ht]]);var Wt=Jt,zt={name:"DocumentList",components:{DocumentUploadForm:Gt,DocumentEditForm:Wt},emits:["updated"],props:{documents:{type:Array,required:!0},documentCreator:{type:Function,required:!1},documentUpdater:{type:Function,required:!1},documentDeleter:{type:Function,required:!1},canManage:{type:Boolean,default:!1}},data:function(){return{fields:[{name:"cheveron",label:"",sortable:!1},{name:"filename",label:"File",type:String,sortable:!0},{name:"type.long_name",label:"Type",type:String,sortable:!0},{name:"notes",type:String,sortable:!0},{name:"actions",label:"",type:String,sortable:!1}],sort:{field:"filename",desc:!1},keyword:null,filterType:null,documentTypes:[],activeDocument:{type:{}},showDeleteConfirmation:!1,showEditForm:!1,showUploadForm:!1}},computed:{filteredDocuments:function(){var e=this,t=Object(Tt["a"])(this.documents);if(this.keyword){var n=new RegExp(".*"+this.keyword+".*","i");t=t.filter((function(e){return e.filename.match(n)||e.notes&&e.notes.match(n)||e.type.name.match(n)}))}return this.filterType&&(t=t.filter((function(t){return t.document_type_id==e.filterType}))),t}},methods:{toggleItemDetails:function(e){e.showDetails=!e.showDetails},initDownload:function(e){window.location=e.download_url},initUpdate:function(e){this.showEditForm=!0,this.activeDocument=e},commitUpdate:function(e){console.log("commitUpdate",e),this.documentUpdater?this.documentUpdater(e):alert("we need a default document upload function"),this.$emit("updated"),this.showUploadForm=!1},initDelete:function(e){this.activeDocument=e,this.showDeleteConfirmation=!0},cancelDelete:function(){this.showDeleteConfirmation=!1,this.resetActiveDocument()},commitDelete:function(){var e=this;return Object(F["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.documentDeleter?e.documentDeleter(e.activeDocument):alert("we need to add a default document deleter."),e.showDeleteConfirmation=!1,e.resetActiveDocument(),e.$emit("updated");case 4:case"end":return t.stop()}}),t)})))()},initUpload:function(){this.showUploadForm=!0},commitCreate:function(e){console.log("commitCreate",this.documentCreator),this.documentCreator?this.documentCreator(e):alert("we need a default document upload function"),this.$emit("updated"),this.showUploadForm=!1},resetActiveDocument:function(){this.activeDocument={type:{}}}},mounted:function(){var e=this;Ft["a"].get("/api/document-types").then((function(t){return e.documentTypes=t.data}))}};const Xt=X()(zt,[["render",Ut]]);var Kt=Xt,Qt={name:"GroupDocuments",components:{DocumentList:Kt},props:{},data:function(){return{}},computed:{group:{get:function(){return this.$store.getters["groups/currentItemOrNew"]}},displayDocuments:function(){return this.group.documents},canManageDocuments:function(){return this.hasAnyPermission(["groups-manage","ep-applications-manage",["info-edit",this.group]])}},methods:{updateDocument:function(e){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.canManageDocuments){n.next=3;break}return t.$store.pushError("Permission denied"),n.abrupt("return");case 3:return n.next=5,t.$store.dispatch("groups/updateDocument",{group:t.group,document:e});case 5:case"end":return n.stop()}}),n)})))()},createDocument:function(e){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.canManageDocuments){n.next=3;break}return t.$store.pushError("Permission denied"),n.abrupt("return");case 3:return n.next=5,t.$store.dispatch("groups/addDocument",{group:t.group,data:e});case 5:case"end":return n.stop()}}),n)})))()},deleteDocument:function(e){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.canManageDocuments){n.next=3;break}return t.$store.pushError("Permission denied"),n.abrupt("return");case 3:return n.next=5,t.$store.dispatch("groups/deleteDocument",{group:t.group,document:e});case 5:case"end":return n.stop()}}),n)})))()}}};const Zt=X()(Qt,[["render",st]]);var en=Zt,tn=n("4f50"),nn=n("f8c8"),on=n("2242"),rn=n("f142"),cn={name:"GroupDetail",components:{ActivityLog:me,ApplicationSummary:Be,AttestationGcep:_e["a"],AttestationNhgri:Se["a"],AttestationReanalysis:Ue["a"],CspecSummary:Te["a"],GroupDocuments:en,GroupForm:$e["a"],GroupDetailHeader:rt,EvidenceSummaries:Fe["a"],GcepGeneList:Ae["a"],GcepOngoingPlansForm:Re["a"],MemberList:ct["a"],MembershipDescriptionForm:at["a"],ScopeDescriptionForm:it["a"],VcepGeneList:lt["a"],VcepOngoingPlansForm:ut["a"],AnnualUpdateAlert:tn["a"],StepTabs:nn["a"],ProgressChart:on["a"],SustainedCurationReviewAlert:rn["default"]},props:{uuid:{type:String,required:!0}},data:function(){return{showInfoEdit:!1,editingExpertise:!1,editingScopeDescription:!1,editingGenes:!1,showConfirmDelete:!1,ongoingPlansErrors:{},errors:{}}},computed:{showCreateAnnualUpdateButton:function(){return this.hasPermission("annual-updates-manage")&&this.group.expert_panel&&!this.group.expert_panel.annualUpdate}},setup:function(e){var t=Object(A["d"])(),n=Object(o["ref"])(!1),r=Object(o["computed"])({get:function(){return t.getters["groups/currentItemOrNew"]},set:function(e){t.commit("groups/addItem",e)}}),c=Object(o["computed"])((function(){return r.value.isEp()?r.value.isVcep()?lt["a"]:Ae["a"]:null})),a=Object(o["computed"])((function(){return r.value.isVcep()?ut["a"]:Re["a"]})),i=function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(R["b"])("/api/groups/".concat(e.uuid,"/activity-logs"));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){t.dispatch("groups/find",e.uuid).then((function(){t.commit("groups/setCurrentItemIndexByUuid",e.uuid),t.dispatch("groups/getChildren",r.value),r.value.isEp()&&(t.dispatch("groups/getGenes",r.value),t.dispatch("groups/getDocuments",r.value),r.value.isVcep()&&t.dispatch("groups/getEvidenceSummaries",r.value),t.dispatch("groups/getPendingTasks",r.value),t.dispatch("groups/getAnnualUpdate",r.value))}))},u=Object(o["computed"])((function(){return r.value.pendingTasks&&r.value.pendingTasks.filter((function(e){return 1===e.task_type_id})).length>0}));return Object(o["watch"])((function(){return e.uuid}),(function(){return l()}),{immediate:!0}),Object(o["onMounted"])(Object(F["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),{group:r,groupGeneList:c,showModal:n,ongoingPlansFormComponent:a,logEntries:R["c"],needsToReviewSustainedCuration:u,getLogEntries:i,getGroup:l}},watch:{$route:function(){this.showModal=!!this.$route.meta.showModal&&Boolean(this.$route.meta.showModal)}},methods:{hideModal:function(){this.$router.replace({name:"GroupDetail",params:{uuid:this.uuid}})},handleModalClosed:function(e){this.clearModalForm(e),this.$router.push({name:"GroupDetail",params:{uuid:this.uuid}})},clearModalForm:function(){"function"===typeof this.$refs.modalView.clearForm&&this.$refs.modalView.clearForm()},showEdit:function(){this.showInfoEdit=!0},cancelForm:function(e){this[e]=!1,this.errors={},this.revertGroupChanges()},submitForm:function(e,t){var n=this;return Object(F["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,n[e].apply(n.group);case 3:n[t]=!1,o.next=12;break;case 6:if(o.prev=6,o.t0=o["catch"](0),!Object(Ft["b"])(o.t0)){o.next=11;break}return n.errors=o.t0.response.data.errors,o.abrupt("return");case 11:throw o.t0;case 12:case"end":return o.stop()}}),o,null,[[0,6]])})))()},saveMembershipDescription:function(){var e=this;return this.$store.dispatch("groups/membershipDescriptionUpdate",{uuid:this.group.uuid,membershipDescription:this.group.expert_panel.membership_description}).then((function(){e.$store.commit("pushSuccess","Description of expertise updated.")}))},saveScopeDescription:function(){var e=this;return this.$store.dispatch("groups/scopeDescriptionUpdate",{uuid:this.group.uuid,scopeDescription:this.group.expert_panel.scope_description}).then((function(t){return e.$store.commit("pushSuccess","Description of scope updated."),t}))},saveOngoingPlansForm:function(){var e=this,t=this.group,n=t.uuid,o=t.expert_panel;return this.$store.dispatch("groups/curationReviewProtocolUpdate",{uuid:n,expertPanel:o}).then((function(){e.$store.commit("pushSuccess","Curation review protocol updated.")}))},revertGroupChanges:function(){var e=this;return this.errors={},this.$store.dispatch("groups/find",this.group.uuid).then((function(){e.$store.commit("pushInfo","Update canceled.")}))},handleTabChange:function(e){"Log"==e&&Object($["b"])("groups-manage")&&this.getLogEntries()},initDelete:function(){this.showConfirmDelete=!0},deleteGroup:function(){this.$store.dispatch("groups/delete",this.group.uuid),this.$store.commit("pushSuccess","Group deleted."),this.$router.push({name:"GroupList"})},fakeCspecPilotApproved:function(){var e=this;return Object(F["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("fake-pilot-approved"),t.prev=1,t.next=4,Ft["a"].post("/api/groups/".concat(e.uuid,"/dev/fake-pilot-approved"));case 4:e.$store.dispatch("groups/getPendingTasks",e.group),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),418==t.t0.response.status&&e.$store.commit("pushError",t.t0.response.data);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()},createAnnualUpdateForLatestWindow:function(){this.$store.dispatch("groups/createAnnualUpdateForLatestWindow",this.group)}},mounted:function(){this.showModal=Boolean(this.$route.meta.showModal),this.showConfirmDelete=!1},beforeUnmount:function(){this.$store.commit("groups/clearCurrentItem")}};n("5b76");const an=X()(cn,[["render",T],["__scopeId","data-v-15f53acc"]]);t["default"]=an},b5c7:function(e,t,n){"use strict";n("8067")},c54c:function(e,t,n){}}]);
//# sourceMappingURL=group-detail.d08f5b35.js.map