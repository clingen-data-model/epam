{"version":3,"sources":["webpack:///./src/components/people/PersonDetail.vue","webpack:///./src/components/people/MembershipList.vue","webpack:///./src/components/people/MembershipList.vue?735e","webpack:///./src/components/people/PersonDetail.vue?137d"],"names":["class","person","name","id","hasPermission","userIsPerson","to","uuid","width","heigh","label","email","institution","sortedMailLog","length","titleCase","first_name","key","formatDate","created_at","subject","body","showModal","title","$route","meta","fields","data","memberships","sort","rowClickHandler","goToGroup","row-class","props","type","Object","required","field","desc","String","sortable","resolveValue","item","roles","map","r","join","permissions","p","Date","computed","this","m","group","methods","$router","push","params","render","components","TabsContainer","MembershipList","PersonProfile","CoiList","emails","watch","immediate","handler","$store","dispatch","get","set","value","mailLog","a","b","parse","setup","mounted"],"mappings":"sJAEgBA,MAAM,Q,+BACJ,U,GACFA,MAAM,qC,EAeiB,gCAAuB,cAAf,UAAM,G,EAId,gCAA6B,cAArB,gBAAY,G,+BAcnB,U,SAMcA,MAAM,Q,glBA1CxD,gCA6DM,YA5DF,gCAwBS,SAxBT,EAwBS,CAvBL,yBAAmB,Q,8BAAb,iBAAM,C,YACZ,gCAaK,KAbL,EAaK,CAZD,gCAGM,Y,0DAFA,EAAAC,OAAOC,MAAM,IACf,4BAA8B,Q,8BAAxB,iBAAI,C,6BAAJ,OAAI,6BAAE,EAAAD,OAAOE,IAAE,O,QAKd,EAAAC,cAAa,kBAAqB,EAAAC,aAAa,EAAAJ,S,yBAH1D,yBAMc,G,MALTK,GAAE,kBAAa,EAAAC,KAAb,SACHP,MAAM,0B,+BAGN,iBAAmC,CAAnC,yBAAmC,GAAxBQ,MAAM,KAAKC,MAAM,W,yDAIpC,yBAGiB,GAHDC,MAAM,SAAO,CACRA,MAAK,sBAAC,iBAAuB,CAAvB,M,8BAAkC,iBACzD,C,6BADyD,IACzD,6BAAE,EAAAT,OAAOU,OAAK,O,MAElB,yBAGiB,GAHDD,MAAM,eAAa,CACdA,MAAK,sBAAC,iBAA6B,CAA7B,M,8BAAwC,iBAC/D,C,6BAD+D,IAC/D,6BAAE,EAAAT,OAAOW,YAAc,EAAAX,OAAOW,YAAYV,KAAI,a,QAGtD,yBA+BiB,Q,8BA9Bb,iBAEW,CAFX,yBAEW,GAFDQ,MAAM,UAAQ,C,8BACpB,iBAAoD,CAApD,yBAAoD,GAAlCT,OAAQ,EAAAA,QAAM,uB,MAEpC,yBAEW,GAFDS,MAAM,QAAM,C,8BAClB,iBAAkD,CAAlD,yBAAkD,GAAjCT,OAAQ,EAAAA,QAAM,uB,MAEnC,yBAEW,GAFDS,MAAM,wBAAsB,C,8BAClC,iBAAsC,CAAtC,yBAAsC,GAA3BT,OAAQ,EAAAA,QAAM,uB,MAE7B,yBAEW,GAFDS,MAAM,aAAW,C,8BAAC,iBAE5B,C,YAGA,yBAeW,GAfDA,MAAM,aAAW,C,8BACvB,iBAEM,CAFyB,GAApB,EAAAG,cAAcC,Q,yBAAzB,gCAEM,MAFN,EAEM,6BADA,EAAAC,UAAU,EAAAd,OAAOe,aAAa,2CACpC,I,mEACA,gCAUM,2CAV6C,EAAAH,eAAa,SAAtBF,G,gCAA1C,gCAUM,OAVDX,MAAM,wBAAwDiB,IAAKN,EAAMR,I,CAC1E,yBAEiB,GAFDO,MAAM,aAAW,C,8BAC7B,iBAAgC,C,0DAA9B,EAAAQ,WAAWP,EAAMQ,aAAU,O,WAEjC,yBAEiB,GAFDT,MAAM,WAAS,C,8BAC3B,iBAAiB,C,0DAAfC,EAAMS,SAAO,O,WAEnB,yBAEiB,GAFDV,MAAM,QAAM,C,8BACxB,iBAA+B,CAA/B,gCAA+B,OAA1B,UAAQC,EAAMU,M,wDAKnC,yBAEe,G,WAFQ,EAAAC,U,qDAAA,EAAAA,UAAS,IAAGC,MAAO,EAAAC,OAAOC,KAAKF,O,+BAClD,iBAAwC,CAAxC,yBAAwC,GAA3BrB,KAAK,c,6OC3D1B,gCAQM,YAPF,yBAMc,GALTwB,OAAQ,EAAAA,OACRC,KAAM,EAAAC,YACCC,KAAM,EAAAA,K,+CAAA,EAAAA,KAAI,IACjBC,gBAAiB,EAAAC,UACjBC,YAAW,oC,qGAOT,GACX9B,KAAM,iBACN+B,MAAO,CACHhC,OAAQ,CACJiC,KAAMC,OACNC,UAAU,IAGlBT,KARW,WASP,MAAO,CACHE,KAAM,CACFQ,MAAO,oBACPC,MAAM,GAEVZ,OAAQ,CACJ,CACIxB,KAAM,oBACNgC,KAAMK,OACNC,UAAU,EACV9B,MAAO,QAEX,CACIR,KAAM,kBACNgC,KAAMK,OACNC,UAAU,EACV9B,MAAO,QAEX,CACIR,KAAM,QACNgC,KAAMK,OACNC,UAAU,EACV9B,MAAO,QACP+B,aALJ,SAKkBC,GACV,OAAOA,EAAKC,MAAMC,KAAI,SAAAC,GAAA,OAAKA,EAAE3C,QAAM4C,KAAK,QAGhD,CACI5C,KAAM,cACNgC,KAAMK,OACNC,UAAU,EACV9B,MAAO,cACP+B,aALJ,SAKkBC,GACV,OAAOA,EAAKK,YAAYH,KAAI,SAAAI,GAAA,OAAKA,EAAE9C,QAAM4C,KAAK,QAGtD,CACI5C,KAAM,aACNgC,KAAMe,KACNT,UAAU,EACV9B,MAAO,WAEX,CACIR,KAAM,WACNgC,KAAMe,KACNT,UAAU,EACV9B,MAAO,YAOvBwC,SAAU,CACNtB,YADM,WAEF,OAAIuB,KAAKlD,OAAO2B,YACLuB,KAAKlD,OAAO2B,YAAYgB,KAAI,SAAAQ,GAI/B,OAHIA,EAAEC,QACFD,EAAEC,MAAQ,IAAI,OAAMD,EAAEC,QAEnBD,KAIR,KAGfE,QAAS,CACLvB,UADK,SACKW,GACNS,KAAKI,QAAQC,KAAK,CAACtD,KAAM,cAAeuD,OAAQ,CAAClD,KAAMmC,EAAKW,MAAM9C,WCzF9E,EAAOmD,OAAS,EAED,Q,wBFoEA,GACXxD,KAAM,eACNyD,WAAY,CACRC,gBAAA,WACAC,iBACAC,gBAAA,KACAC,UAAA,MAEJ9B,MAAO,CACH1B,KAAM,CACF6B,UAAU,EACVF,KAAMK,SAGdZ,KAdW,WAeP,MAAO,CACHqC,OAAQ,KAGhBC,MAAO,CACH1D,KAAM,CACF2D,WAAW,EACXC,QAAS,WACLhB,KAAKiB,OAAOC,SAAS,mBAAoB,CAAC9D,KAAM4C,KAAK5C,UAIjE2C,SAAU,iCACH,eAAW,CACVjD,OAAQ,wBAFR,IAIJqB,UAAW,CACPgD,IADO,WAEH,OAAOnB,KAAK3B,OAAOC,KAAKH,WAE5BiD,IAJO,SAIHC,GACIA,GACArB,KAAKI,QAAQC,KAAK,CAACtD,KAAM,aAAcuD,OAAQ,CAAClD,KAAM4C,KAAKlD,OAAOM,QAEtE4C,KAAKI,QAAQC,KAAK,CAACtD,KAAM,eAAgBuD,OAAQ,CAAClD,KAAM4C,KAAKlD,OAAOM,UAG5EM,cAfM,WAgBF,OAAO,eAAIsC,KAAKlD,OAAOwE,SAAS5C,MAAK,SAAC6C,EAAEC,GACpC,OAAID,EAAEvD,YAAcwD,EAAExD,WACX,EAEH8B,KAAK2B,MAAMF,EAAEvD,YAAc8B,KAAK2B,MAAMD,EAAExD,aACzC,EAAI,QAIvBmC,QAAS,GAETuB,MAtDW,WAuDP,MAAO,CACH3D,WAAY,SAGd4D,QA3DK,WA2DK,wKACN,EAAKV,OAAOC,SAAS,mBAAoB,CAAC9D,KAAM,EAAKA,OAD/C,OAEZ,EAAK6D,OAAOC,SAAS,iBAAkB,EAAKpE,QAFhC,+CGjIpB,EAAOyD,OAASA,EAED","file":"js/chunk-2d0d6d92.89cc2bf6.js","sourcesContent":["<template>\n    <div>\n        <header class=\"pb-4\">\n            <note>People</note>\n            <h1 class=\"flex justify-between items-center\">\n                <div>\n                    {{person.name}}\n                    <note>ID: {{person.id}}</note>\n                </div>\n                <router-link \n                    :to=\"`/people/${uuid}/edit`\"\n                    class=\"btn btn-xs flex-grow-0\"\n                    v-if=\"(hasPermission('people-manage') || userIsPerson(person))\"\n                >\n                    <icon-edit width=\"16\" heigh=\"16\" />\n                </router-link>\n\n            </h1>\n            <dictionary-row label=\"Email\">\n                <template v-slot:label><strong>Email:</strong></template>\n                {{person.email}}\n            </dictionary-row>\n            <dictionary-row label=\"Institution\">\n                <template v-slot:label><strong>Institution:</strong></template>\n                {{person.institution ? person.institution.name : null}}\n            </dictionary-row>\n        </header>\n        <tabs-container>\n            <tab-item label=\"groups\">\n                <membership-list :person=\"person\"></membership-list>\n            </tab-item>\n            <tab-item label=\"Info\">\n                <person-profile :person=\"person\"></person-profile>\n            </tab-item>\n            <tab-item label=\"Conflict of Interest\">\n                <coi-list :person=\"person\"></coi-list>\n            </tab-item>\n            <tab-item label=\"Documents\">\n                docs\n            </tab-item>\n            <!-- <tab-item label=\"Training &amp; Attestations\">\n            </tab-item> -->\n            <tab-item label=\"Email Log\">\n                <div v-if=\"sortedMailLog.length == 0\" class=\"well\">\n                    {{titleCase(person.first_name)}} has not received any mail via the GPM.\n                </div>\n                <div class=\"w-3/4 my-4 p-4 border\" v-for=\"email in sortedMailLog\" :key=\"email.id\">\n                    <dictionary-row label=\"Date/Time\">\n                        {{formatDate(email.created_at)}}\n                    </dictionary-row>\n                    <dictionary-row label=\"Subject\">\n                        {{email.subject}}\n                    </dictionary-row>\n                    <dictionary-row label=\"Body\">\n                        <div v-html=\"email.body\"></div>\n                    </dictionary-row>\n                </div>\n            </tab-item>\n        </tabs-container>\n        <modal-dialog v-model=\"showModal\" :title=\"$route.meta.title\">\n            <router-view name=\"modal\"></router-view>\n        </modal-dialog>\n    </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex'\nimport {formatDateTime as formatDate} from '@/date_utils'\n\nimport TabsContainer from '../TabsContainer.vue'\nimport MembershipList from './MembershipList.vue'\nimport PersonProfile from '@/components/people/PersonProfile'\nimport CoiList from '@/components/people/CoiList'\n\nexport default {\n    name: 'PersonDetail',\n    components: { \n        TabsContainer,\n        MembershipList,\n        PersonProfile,\n        CoiList,\n    },\n    props: {\n        uuid: {\n            required: true,\n            type: String\n        }\n    },\n    data() {\n        return {\n            emails: []\n        }\n    },\n    watch: {\n        uuid: {\n            immediate: true,\n            handler: function () {\n                this.$store.dispatch('people/getPerson', {uuid: this.uuid})\n            }\n        }\n    },\n    computed: {\n        ...mapGetters({\n            person: 'people/currentItem'\n        }),\n        showModal: {\n            get() {\n                return this.$route.meta.showModal\n            },\n            set(value) {\n                if (value) {\n                    this.$router.push({name: 'PersonEdit', params: {uuid: this.person.uuid}})\n                }\n                this.$router.push({name: 'PersonDetail', params: {uuid: this.person.uuid}})\n            }\n        },\n        sortedMailLog () {\n            return [...this.person.mailLog].sort((a,b) => {\n                if (a.created_at == b.created_at) {\n                    return 0;\n                }\n                return (Date.parse(a.created_at) > Date.parse(b.created_at))\n                    ? -1 : 1;\n            })\n        }\n    },\n    methods: {\n    },\n    setup() {\n        return {\n            formatDate: formatDate\n        }\n    },\n    async mounted() {\n        await this.$store.dispatch('people/getPerson', {uuid: this.uuid})\n        this.$store.dispatch('people/getMail', this.person);\n    }\n}\n</script>","<template>\n    <div>\n        <data-table \n            :fields=\"fields\" \n            :data=\"memberships\" \n            v-model:sort=\"sort\"\n            :rowClickHandler=\"goToGroup\"\n            :row-class=\"() => 'cursor-pointer'\"\n        ></data-table>\n    </div>\n</template>\n<script>\nimport {Group} from '@/domain'\n\nexport default {\n    name: 'MembershipList',\n    props: {\n        person: {\n            type: Object,\n            required: true\n        }\n    },\n    data() {\n        return {\n            sort: {\n                field: 'group.displayName',\n                desc: false\n            },\n            fields: [\n                {\n                    name: 'group.displayName',\n                    type: String,\n                    sortable: true,\n                    label: 'Name'\n                },\n                {\n                    name: 'group.type.name',\n                    type: String,\n                    sortable: true,\n                    label: 'Type'\n                },\n                {\n                    name: 'roles',\n                    type: String,\n                    sortable: false,\n                    label: 'Roles',\n                    resolveValue (item) {\n                        return item.roles.map(r => r.name).join(', ');\n                    }\n                },\n                {\n                    name: 'permissions',\n                    type: String,\n                    sortable: false,\n                    label: 'Permissions',\n                    resolveValue (item) {\n                        return item.permissions.map(p => p.name).join(', ');\n                    }\n                },\n                {\n                    name: 'start_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Started'\n                },\n                {\n                    name: 'end_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Ended'\n                }\n\n\n            ]\n        }\n    },\n    computed: {\n        memberships () {\n            if (this.person.memberships) {\n                return this.person.memberships.map(m => {\n                    if (m.group) {\n                        m.group = new Group(m.group);\n                    }\n                    return m;\n                })\n            }\n\n            return [];\n        }\n    },\n    methods: {\n        goToGroup(item) {\n            this.$router.push({name: 'GroupDetail', params: {uuid: item.group.uuid}})\n        }\n\n    }\n}\n</script>","import { render } from \"./MembershipList.vue?vue&type=template&id=7757f912\"\nimport script from \"./MembershipList.vue?vue&type=script&lang=js\"\nexport * from \"./MembershipList.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./PersonDetail.vue?vue&type=template&id=ce36d5e2\"\nimport script from \"./PersonDetail.vue?vue&type=script&lang=js\"\nexport * from \"./PersonDetail.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}