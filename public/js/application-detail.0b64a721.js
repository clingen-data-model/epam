(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["application-detail"],{"0bd6":function(e,t,n){},"0cb2":function(e,t,n){var r=n("7b0b"),a=Math.floor,o="".replace,c=/\$([$&'`]|\d\d?|<[^>]*>)/g,i=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,l,u,s){var p=n+e.length,d=l.length,b=i;return void 0!==u&&(u=r(u),b=c),o.call(s,b,(function(r,o){var c;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(p);case"<":c=u[o.slice(1,-1)];break;default:var i=+o;if(0===i)return r;if(i>d){var s=a(i/10);return 0===s?r:s<=d?void 0===l[s-1]?o.charAt(1):l[s-1]+o.charAt(1):r}c=l[i-1]}return void 0===c?"":c}))}},"12ac":function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("7a23"),a={class:"bg-gray-200 px-4 py-2 flex justify-between border border-gray-300 rounded-t-xl"},o={class:"text-lg"},c={class:"flex space-x-2"},i=Object(r["g"])("Add Next Action"),l=Object(r["g"])("Add Log Entry"),u={class:"bg-white border border-t-0 border-gray-300 rounded-b  px-4 py-3 "},s=Object(r["h"])("hr",{class:"my-3"},null,-1),p=Object(r["h"])("hr",{class:"my-3"},null,-1);function d(e,t,n,d,b,f){var m=this,h=Object(r["z"])("router-link"),O=Object(r["z"])("next-action-banner"),j=Object(r["z"])("ep-attributes-form"),v=Object(r["z"])("progress-chart"),w=Object(r["z"])("step-tabs"),g=Object(r["z"])("tab-item"),y=Object(r["z"])("application-log"),_=Object(r["z"])("tabs-container"),C=Object(r["z"])("router-view"),x=Object(r["z"])("modal-dialog");return Object(r["r"])(),Object(r["e"])("div",null,[Object(r["h"])("div",null,[Object(r["h"])("div",a,[Object(r["h"])("h3",o,Object(r["B"])(e.application.name)+" - Current Step: "+Object(r["B"])(e.application.current_step),1),Object(r["h"])("div",c,[Object(r["h"])(h,{to:{name:"NextAction"},class:"btn btn-sm"},{default:Object(r["J"])((function(){return[i]})),_:1}),Object(r["h"])(h,{to:{name:"LogEntry"},class:"btn btn-sm"},{default:Object(r["J"])((function(){return[l]})),_:1})])]),Object(r["h"])("div",u,[f.hasPendingNextAction?(Object(r["r"])(),Object(r["e"])(O,{key:0,application:e.application,"next-action":e.application.latest_pending_next_action},null,8,["application","next-action"])):Object(r["f"])("",!0),Object(r["h"])(j,{application:e.application},null,8,["application"]),s,Object(r["h"])(v,{application:e.application},null,8,["application"]),p,Object(r["h"])(_,null,{default:Object(r["J"])((function(){return[Object(r["h"])(g,{label:"Application"},{default:Object(r["J"])((function(){return[Object(r["h"])(w,{application:e.application},null,8,["application"])]})),_:1}),Object(r["h"])(g,{label:"Application Log"},{default:Object(r["J"])((function(){return[Object(r["h"])(y,{uuid:e.application.uuid},null,8,["uuid"])]})),_:1}),Object(r["h"])(g,{label:"Dev Tools"},{default:Object(r["J"])((function(){return[Object(r["h"])("pre",null,Object(r["B"])(m.application),1)]})),_:1})]})),_:1})])]),Object(r["h"])(x,{modelValue:b.showModal,"onUpdate:modelValue":t[1]||(t[1]=function(e){return b.showModal=e}),onClosed:f.handleModalClosed},{default:Object(r["J"])((function(){return[Object(r["h"])(C,{ref:"modalView",onSaved:f.hideModal,onCanceled:f.hideModal},null,8,["onSaved","onCanceled"])]})),_:1},8,["modelValue","onClosed"])])}n("ac1f"),n("5319");var b=n("5530"),f=n("5502"),m={key:0,class:"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200"};function h(e,t,n,a,o,c){var i=Object(r["z"])("data-table");return Object(r["r"])(),Object(r["e"])("div",null,[c.hasLogEntries?(Object(r["r"])(),Object(r["e"])(i,{key:1,fields:o.fields,data:c.filteredLogEntries,sort:o.sort,"onUpdate:sort":t[1]||(t[1]=function(e){return o.sort=e})},null,8,["fields","data","sort"])):(Object(r["r"])(),Object(r["e"])("div",m,Object(r["B"])(c.noResultsMessage),1))])}n("4de4"),n("7db0"),n("a9e3"),n("96cf");var O=n("1da1"),j=[{name:"created_at",label:"Created",sortName:"created_at",sortable:!0,type:Date},{name:"description",label:"Entry",sortable:!0,type:String},{name:"causer.name",label:"User",sortable:!0}],v={props:{step:{required:!1,type:Number}},data:function(){return{fields:j,logEntries:[],sort:{field:j.find((function(e){return e.name="created_at"})),desc:!0}}},computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])({application:"currentItem"})),{},{hasLogEntries:function(){return this.filteredLogEntries.length>0},filteredLogEntries:function(){var e=this;return this.application&&this.application.log_entries&&this.step?this.application.log_entries.filter((function(t){return t.properties.step==e.step})):this.application&&this.application.log_entries?this.application.log_entries:[]},noResultsMessage:function(){return"number"==typeof this.step?"No progress log entries have been entered for step ".concat(this.step):"There are no log entries for this application"}}),methods:{getLogEntries:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getApplication",e.application.uuid);case 2:case"end":return t.stop()}}),t)})))()}},mounted:function(){}};v.render=h;var w=v,g={class:"py-1 flex space-x-2"};function y(e,t,n,a,o,c){var i=Object(r["z"])("input-row"),l=Object(r["z"])("application-contacts");return Object(r["r"])(),Object(r["e"])("div",null,[Object(r["h"])(i,{label:"Long Base Name",modelValue:o.appClone.long_base_name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.appClone.long_base_name=e}),placeholder:"Long base name",errors:o.errors.long_base_name},null,8,["modelValue","errors"]),Object(r["h"])(i,{label:"Short Base Name",modelValue:o.appClone.short_base_name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.appClone.short_base_name=e}),placeholder:"Short base name",errors:o.errors.short_base_name},null,8,["modelValue","errors"]),Object(r["h"])(i,{label:"Affiliation ID",modelValue:o.appClone.affiliation_id,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.appClone.affiliation_id=e}),placeholder:c.affiliationIdPlaceholder,errors:o.errors.affiliation_id},null,8,["modelValue","placeholder","errors"]),Object(r["h"])(i,{label:"CDWG",errors:o.errors.cdwg_id},{default:Object(r["J"])((function(){return[Object(r["K"])(Object(r["h"])("select",{name:"",id:"","onUpdate:modelValue":t[4]||(t[4]=function(e){return o.appClone.cdwg_id=e})},[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(c.cdwgs,(function(e){return Object(r["r"])(),Object(r["e"])("option",{value:e.id,key:e.id},Object(r["B"])(e.name),9,["value"])})),128))],512),[[r["F"],o.appClone.cdwg_id]])]})),_:1},8,["errors"]),Object(r["h"])(i,{label:"Contacts"},{default:Object(r["J"])((function(){return[Object(r["h"])(l)]})),_:1}),Object(r["h"])(i,{label:"Expert Panel URL"},{default:Object(r["J"])((function(){return[Object(r["h"])("div",{class:{"text-gray-400":!c.hasAffiliationId}},Object(r["B"])(c.affiliationUrl),3)]})),_:1}),Object(r["h"])("div",g,[Object(r["h"])("button",{class:"btn white btn-xs",onClick:t[5]||(t[5]=function(){return c.resetClone&&c.resetClone.apply(c,arguments)}),disabled:c.isClean},"Reset",8,["disabled"]),Object(r["h"])("button",{class:"btn blue btn-xs",onClick:t[6]||(t[6]=function(){return c.saveChanges&&c.saveChanges.apply(c,arguments)}),disabled:c.isClean},"Save Changes",8,["disabled"])])])}var _={class:"align-baseline"};function C(e,t,n,a,o,c){var i=Object(r["z"])("contact-row"),l=Object(r["z"])("new-contact-form"),u=Object(r["z"])("modal-dialog");return Object(r["r"])(),Object(r["e"])("div",null,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(e.application.contacts,(function(e){return Object(r["r"])(),Object(r["e"])(i,{key:e.id,contact:e},null,8,["contact"])})),128)),Object(r["h"])("div",_,[Object(r["h"])("button",{class:"btn btn-xs",onClick:t[1]||(t[1]=function(e){return o.showForm=!0})}," Add Contact ")]),Object(r["h"])(u,{modelValue:o.showForm,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.showForm=e})},{default:Object(r["J"])((function(){return[Object(r["h"])(l,{onDone:t[2]||(t[2]=function(e){return o.showForm=!1})})]})),_:1},8,["modelValue"])])}n("a15b");var x=Object(r["h"])("h4",{class:"text-lg mb-3 border-b pb-1"},"Confirm Contact Removal",-1),A={class:"mb-2"},D=Object(r["g"])(" You are about to remove "),S=Object(r["g"])(" as a contact for this application. Do you want to continue? "),k=Object(r["h"])("small",{class:"text-gray-500"},"NOTE: This will not delete the person's record in this system.",-1),R={key:0,class:"bg-red-200 bg-text-900 border-red-900 p-2"};function F(e,t,n,a,o,c){var i=Object(r["z"])("icon-close"),l=Object(r["z"])("button-row"),u=Object(r["z"])("modal-dialog");return Object(r["r"])(),Object(r["e"])("div",null,[Object(r["g"])(Object(r["B"])(n.contact.name)+" - ",1),Object(r["h"])("a",{class:"text-blue-500 underline",href:"mailto:".concat(n.contact.email)},Object(r["B"])(n.contact.email),9,["href"]),Object(r["g"])(" - "+Object(r["B"])(n.contact.phone)+" ",1),Object(r["h"])("button",{class:"btn-delete",onClick:t[1]||(t[1]=function(){return c.confirmRemove&&c.confirmRemove.apply(c,arguments)})},[Object(r["h"])(i,{height:8,width:8})]),Object(r["h"])(u,{modelValue:o.showRemoveConfirmation,"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.showRemoveConfirmation=e})},{default:Object(r["J"])((function(){return[x,Object(r["h"])("p",A,[D,Object(r["h"])("strong",null,Object(r["B"])(n.contact.name),1),S]),k,o.errors?(Object(r["r"])(),Object(r["e"])("ul",R,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(o.errors,(function(e,t){return Object(r["r"])(),Object(r["e"])("li",{key:t},Object(r["B"])(t)+": "+Object(r["B"])(e.join(", ")),1)})),128))])):Object(r["f"])("",!0),Object(r["h"])(l,null,{default:Object(r["J"])((function(){return[Object(r["h"])("div",{class:"btn",onClick:t[2]||(t[2]=function(){return c.cancel&&c.cancel.apply(c,arguments)})},"Cancel"),Object(r["h"])("div",{class:"btn blue",onClick:t[3]||(t[3]=function(){return c.save&&c.save.apply(c,arguments)})},"Yes, remove contact")]})),_:1})]})),_:1},8,["modelValue"])])}var V=function(e){return e.response&&422==e.response.status&&e.response.data.errors},$=Object(r["h"])("g",null,[Object(r["h"])("path",{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"})],-1);function z(e,t,n,a,o,c){var i=Object(r["z"])("icon-base");return Object(r["r"])(),Object(r["e"])(i,null,{default:Object(r["J"])((function(){return[$]})),_:1})}var B={};B.render=z;var I=B,J={components:{IconClose:I},props:{contact:{type:Object,required:!0}},emits:["saved","canceled","done","deleted"],data:function(){return{showRemoveConfirmation:!1,errors:null}},computed:Object(b["a"])({},Object(f["b"])({application:"currentItem"})),methods:{confirmRemove:function(){this.showRemoveConfirmation=!0},cancel:function(){this.showRemoveConfirmation=!1,this.$emit("canceled"),this.$emit("done")},save:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("removeConact save"),t.prev=1,t.next=4,e.$store.dispatch("removeContact",{application:e.application,contact:e.contact});case 4:console.log("now do this stuff"),e.showRemoveConfirmation=!1,e.$emit("saved"),e.$emit("deleted"),e.$emit("done"),t.next=17;break;case 11:if(t.prev=11,t.t0=t["catch"](1),!V(t.t0)){t.next=16;break}return alert(t.t0.response.data.errors),t.abrupt("return");case 16:throw t.t0;case 17:case"end":return t.stop()}}),t,null,[[1,11]])})))()}}};n("7d3d");J.render=F;var M=J,U=Object(r["h"])("h4",{class:"text-lg"},"Add a contact",-1),E={class:"flex space-x-4"},T={class:"flex-1"},N={key:0,class:"pt-2 border-l pl-2 flex-1"},L=Object(r["h"])("h5",{class:"font-bold border-b mb-1 pb-1"},"Matching people",-1),P={key:1,class:"text-xs"};function q(e,t,n,a,o,c){var i=Object(r["z"])("input-row"),l=Object(r["z"])("button-row");return Object(r["r"])(),Object(r["e"])("div",null,[U,Object(r["h"])("div",E,[Object(r["h"])("div",T,[Object(r["h"])(i,{type:"text",modelValue:o.newContact.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.newContact.email=e}),errors:o.errors.email,placeholder:"elenor@medplace.com",label:"Email"},null,8,["modelValue","errors"]),Object(r["h"])(i,{type:"text",modelValue:o.newContact.first_name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.newContact.first_name=e}),errors:o.errors.first_name,placeholder:"Elenor",label:"First name"},null,8,["modelValue","errors"]),Object(r["h"])(i,{type:"text",modelValue:o.newContact.last_name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.newContact.last_name=e}),errors:o.errors.last_name,placeholder:"Shelstrop",label:"Last name"},null,8,["modelValue","errors"]),Object(r["h"])(i,{type:"text",modelValue:o.newContact.phone,"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.newContact.phone=e}),errors:o.errors.phone,placeholder:"1-555-867-5309",label:"Phone"},null,8,["modelValue","errors"]),Object(r["h"])(l,null,{default:Object(r["J"])((function(){return[Object(r["h"])("button",{class:"btn",onClick:t[5]||(t[5]=function(){return c.cancel&&c.cancel.apply(c,arguments)})},"Cancel"),Object(r["h"])("button",{class:"btn blue",onClick:t[6]||(t[6]=function(){return c.save&&c.save.apply(c,arguments)})},"Save")]})),_:1})]),Object(r["h"])(r["b"],{name:"slide-fade"},{default:Object(r["J"])((function(){return[c.suggestedPeople.length>0?(Object(r["r"])(),Object(r["e"])("div",N,[L,Object(r["h"])("ul",null,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(c.suggestedPeople,(function(e){return Object(r["r"])(),Object(r["e"])("li",{key:e.uuid,class:["flex justify-between my-2",{"text-gray-400":c.isAlreadyContact(e)}],title:c.isAlreadyContact(e)?"This person is already a contact for this application":""},[Object(r["g"])(Object(r["B"])(e.name)+" ",1),c.isAlreadyContact(e)?(Object(r["r"])(),Object(r["e"])("span",P,"Already a contact")):(Object(r["r"])(),Object(r["e"])("button",{key:0,class:"btn btn-xs",onClick:function(t){return c.addExistingPersonAsContact(e)}}," Add as contact ",8,["onClick"]))],10,["title"])})),128))])])):Object(r["f"])("",!0)]})),_:1})])])}n("caad"),n("d81d"),n("2532");var X=n("ec26"),G={props:{},data:function(){return{createNew:!1,newContact:{first_name:null,last_name:null,email:null,phone:null,role:null,uuid:null},errors:{}}},emits:["canceled","saved","done"],computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])({application:"currentItem",people:"people"})),{},{suggestedPeople:function(){var e=this;return this.newContact.email?this.people.filter((function(t){return t.email.includes(e.newContact.email)})):[]}}),methods:{clearForm:function(){this.newContact={first_name:null,last_name:null,email:null,phone:null,role:null,uuid:null}},clearErrors:function(){this.errors={}},cancel:function(){this.clearForm(),this.$emit("canceled"),this.$emit("done")},save:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.clearErrors(),t.prev=1,n=Object(b["a"])({},e.newContact),n.uuid=Object(X["a"])(),t.next=6,e.$store.dispatch("createPerson",n);case 6:return t.next=8,e.$store.dispatch("addContact",{application:e.application,contact:e.$store.getters.personWithUuid(n.uuid)});case 8:e.clearForm(),e.$emit("saved"),e.$emit("done"),t.next=19;break;case 13:if(t.prev=13,t.t0=t["catch"](1),!V(t.t0)){t.next=18;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 18:throw t.t0;case 19:case"end":return t.stop()}}),t,null,[[1,13]])})))()},addExistingPersonAsContact:function(e){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:n.prev=0,t.$store.dispatch("addContact",{application:t.application,contact:e}),t.clearForm(),t.$emit("saved"),t.$emit("done"),n.next=13;break;case 7:if(n.prev=7,n.t0=n["catch"](0),!V(n.t0)){n.next=12;break}return t.errors=n.t0.response.data.errors,n.abrupt("return");case 12:throw n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,7]])})))()},isAlreadyContact:function(e){return this.application.contacts.map((function(e){return e.id})).includes(e.id)}},mounted:function(){this.$store.dispatch("getPeople")}};G.render=q;var Y=G,K={components:{ContactRow:M,NewContactForm:Y},props:{},data:function(){return{showForm:!1,errors:{}}},computed:Object(b["a"])({},Object(f["b"])({application:"currentItem"})),methods:{}};K.render=C;var W=K,H={components:{ApplicationContacts:W},props:{application:{required:!0,type:Object}},data:function(){return{appClone:this.application.clone(),errors:{}}},watch:{application:{immediate:!0,handler:function(){this.appClone=this.application.clone()}}},computed:{affiliationUrl:function(){return"https://clinicalgenome.org/affiliation/".concat(this.appClone.affiliation_id||this.affiliationIdPlaceholder)},affiliationIdPlaceholder:function(){return this.application&&1==this.application.ep_type_id?"4000XX":"5000XX"},cdwgs:function(){return this.$store.state.cdwgs.items},hasAffiliationId:function(){return Boolean(this.appClone.affiliation_id)},hasChanges:function(){var e=["long_base_name","short_base_name","cdwg_id","affiliation_id"];for(var t in e){var n=e[t];if((null!=this.application[n]||""!=this.appClone[n])&&this.application[n]!=this.appClone[n])return!0}return!1},isClean:function(){return!this.hasChanges}},methods:{saveChanges:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.clearErrors(),t.next=4,e.$store.dispatch("updateEpAttributes",e.appClone);case 4:e.resetClone(),t.next=13;break;case 7:if(t.prev=7,t.t0=t["catch"](0),!t.t0.response||422!=t.t0.response.status||!t.t0.response.data.errors){t.next=12;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 12:console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,7]])})))()},resetClone:function(){this.appClone=this.application.clone()},clearErrors:function(){this.errors={}}},mounted:function(){this.$store.dispatch("getCdwgs")}};H.render=y;var Q=H,Z={class:"px-2 py-2 bg-blue-200 rounded flex justify-between text-blue-800"},ee=Object(r["h"])("strong",null,"Next Action:",-1),te=Object(r["h"])("h4",{class:"text-lg"},"Complete next action",-1);function ne(e,t,n,a,o,c){var i=Object(r["z"])("object-dict"),l=Object(r["z"])("input-row"),u=Object(r["z"])("button-row"),s=Object(r["z"])("modal-dialog");return Object(r["r"])(),Object(r["e"])("div",null,[Object(r["h"])("div",Z,[Object(r["h"])("div",null,[ee,Object(r["g"])(" "+Object(r["B"])(n.nextAction.entry),1)]),Object(r["h"])("button",{class:"btn blue btn-xs",onClick:t[1]||(t[1]=function(e){return o.showModal=!0})},"Mark completed")]),Object(r["h"])(s,{modelValue:o.showModal,"onUpdate:modelValue":t[5]||(t[5]=function(e){return o.showModal=e})},{default:Object(r["J"])((function(){return[te,Object(r["h"])(i,{obj:n.nextAction,show:["date_created","entry","step","target_date"],dates:["target_date","date_created"]},null,8,["obj"]),Object(r["h"])(l,{label:"Date Completed",modelValue:o.dateCompleted,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.dateCompleted=e}),type:"date",errors:o.errors.date_completed},null,8,["modelValue","errors"]),Object(r["h"])(u,null,{default:Object(r["J"])((function(){return[Object(r["h"])("button",{class:"btn white",onClick:t[3]||(t[3]=function(){return c.cancel&&c.cancel.apply(c,arguments)})},"Cancel"),Object(r["h"])("button",{class:"btn blue",onClick:t[4]||(t[4]=function(){return c.markComplete&&c.markComplete.apply(c,arguments)})},"Mark Complete")]})),_:1})]})),_:1},8,["modelValue"])])}var re={props:{application:{type:Object,required:!0},nextAction:{type:Object,required:!0}},data:function(){return{showModal:!1,dateCompleted:null,errors:{}}},methods:{clearForm:function(){this.dateCompleted=null},markComplete:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("completeNextAction",{application:e.application,nextAction:e.nextAction,dateCompleted:e.dateCompleted}).then((function(){e.clearForm(),e.$emit("completed"),e.showModal=!1}));case 2:case"end":return t.stop()}}),t)})))()},cancel:function(){this.clearForm(),this.showModal=!1,this.$emit("canceled")}}};re.render=ne;var ae=re,oe=Object(r["M"])("data-v-6fa46a3a");Object(r["u"])("data-v-6fa46a3a");var ce=Object(r["h"])("h4",{class:"pb-2"},"EP Progress",-1),ie={class:"flex flex-row space-x-1"};Object(r["s"])();var le=oe((function(e,t,n,a,o,c){var i=Object(r["z"])("progress-step");return Object(r["r"])(),Object(r["e"])("div",null,[ce,Object(r["h"])("div",ie,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(c.steps,(function(e){return Object(r["r"])(),Object(r["e"])(i,{key:e,step:e,application:n.application},null,8,["step","application"])})),128))])])})),ue={class:"flex-1"},se={class:"flex flex-row-reverse justify-between bg-transparent mt-1"},pe={key:0};function de(e,t,n,a,o,c){return Object(r["r"])(),Object(r["e"])("div",ue,[Object(r["h"])("div",{class:["progress-step",c.displayClass]},null,2),Object(r["h"])("div",se,[Object(r["h"])("div",{class:{"-mr-10":!c.isLastStep}},Object(r["B"])(c.approvalDate),3),c.isFirstStep?(Object(r["r"])(),Object(r["e"])("div",pe,Object(r["B"])(c.dateInitiated),1)):Object(r["f"])("",!0)])])}var be=n("e328"),fe={props:{step:{type:Number,required:!0},application:{type:Object,required:!0}},data:function(){return{}},computed:{dateInitiated:function(){return Object(be["a"])(this.application.date_initiated)},approvalDate:function(){return this.application.approval_dates&&this.application.approval_dates["step "+this.step]?Object(be["a"])(this.application.approval_dates["step "+this.step]):" "},displayClass:function(){var e=[];return this.isApproved?e.push("approved"):this.isCurrentStep&&e.push("active"),this.isFirstStep&&e.push("rounded-l"),this.isLastStep&&e.push("rounded-r"),e.join(" ")},isCurrentStep:function(){return this.application.current_step==this.step},isApproved:function(){return this.application.approval_dates&&"undefined"!=typeof this.application.approval_dates["step ".concat(this.step)]},isFirstStep:function(){return 1==this.step},isLastStep:function(){var e=1==this.application.ep_type_id?1:4;return this.step==e}},methods:{}};n("fc85");fe.render=de;var me=fe,he={components:{ProgressStep:me},props:{application:{required:!0,type:Object}},computed:{steps:function(){return 2==this.application.ep_type_id?[1,2,3,4]:[1]}}};n("6dbc");he.render=le,he.__scopeId="data-v-6fa46a3a";var Oe=he,je={key:0};function ve(e,t,n,a,o,c){var i=Object(r["z"])("step-one"),l=Object(r["z"])("tab-item"),u=Object(r["z"])("step-two"),s=Object(r["z"])("step-three"),p=Object(r["z"])("step-four"),d=Object(r["z"])("tabs-container");return Object(r["r"])(),Object(r["e"])("div",null,[1==this.application.ep_type_id?(Object(r["r"])(),Object(r["e"])("div",je,[Object(r["h"])(i)])):Object(r["f"])("",!0),2==this.application.ep_type_id?(Object(r["r"])(),Object(r["e"])(d,{key:1,"tab-location":"right",modelValue:c.activeIndex,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.activeIndex=e})},{default:Object(r["J"])((function(){return[Object(r["h"])(l,{label:"Step 1 - Define"},{default:Object(r["J"])((function(){return[Object(r["h"])(i)]})),_:1}),Object(r["h"])(l,{label:"Step 2 - Draft Rules"},{default:Object(r["J"])((function(){return[Object(r["h"])(u)]})),_:1}),Object(r["h"])(l,{label:"Step 3 - Pilot Rules"},{default:Object(r["J"])((function(){return[Object(r["h"])(s)]})),_:1}),Object(r["h"])(l,{label:"Step 4 - Final Approval"},{default:Object(r["J"])((function(){return[Object(r["h"])(p)]})),_:1})]})),_:1},8,["modelValue"])):Object(r["f"])("",!0)])}function we(e,t,n,a,o,c){var i=Object(r["z"])("coi-log"),l=Object(r["z"])("base-step");return Object(r["r"])(),Object(r["e"])(l,{step:1,"document-name":"Scope and Membership Application","document-type":1,"document-gets-reviewed":!0,"approve-button-label":"Approve Scope and Membership"},{default:Object(r["J"])((function(){return[Object(r["h"])(i,{class:"mb-6",application:e.application},null,8,["application"])]})),_:1})}var ge={class:"mb-6"},ye={class:"text-lg font-bold mb-1"},_e={key:1,class:"pb-3 border-b"},Ce={href:"",class:"text-blue-500 underline"},xe={key:0,class:"border border-l-0 border-r-0 py-4 mb-6"},Ae={class:"mb-6"},De={class:"text-md font-bold mb-2"};function Se(e,t,n,a,o,c){var i=Object(r["z"])("document-manager"),l=Object(r["z"])("dictionary-row"),u=Object(r["z"])("approve-step-form"),s=Object(r["z"])("modal-dialog"),p=Object(r["z"])("application-log");return Object(r["r"])(),Object(r["e"])("div",null,[Object(r["y"])(e.$slots,"document",{},(function(){return[Object(r["h"])("div",ge,[Object(r["h"])("h3",ye,Object(r["B"])(n.documentName),1),e.application.stepIsApproved(n.step)?(Object(r["r"])(),Object(r["e"])("div",_e,[Object(r["h"])(l,{label:"Final Document"},{default:Object(r["J"])((function(){return[Object(r["h"])("a",Ce,Object(r["B"])(e.application.finalDocumentOfType(n.documentType).filename),1)]})),_:1}),Object(r["h"])(l,{label:"Date Received"},{default:Object(r["J"])((function(){return[Object(r["g"])(Object(r["B"])(c.firstDateReceived),1)]})),_:1}),Object(r["h"])(l,{label:"Date Reviewed"},{default:Object(r["J"])((function(){return[Object(r["g"])(Object(r["B"])(c.finalDateReviewed),1)]})),_:1}),Object(r["h"])(l,{label:"Date Approved"},{default:Object(r["J"])((function(){return[Object(r["g"])(Object(r["B"])(c.dateApproved),1)]})),_:1})])):(Object(r["r"])(),Object(r["e"])(i,{key:0,application:e.application,"document-type-id":n.documentType,getsReviewd:n.documentGetsReviewed,step:n.step},null,8,["application","document-type-id","getsReviewd","step"]))])]})),e.application.stepIsApproved(n.step)?Object(r["f"])("",!0):(Object(r["r"])(),Object(r["e"])("div",xe,[Object(r["h"])("button",{class:"btn btn-lg w-full",onClick:t[1]||(t[1]=function(){return c.startApproveStep&&c.startApproveStep.apply(c,arguments)}),disabled:!c.isCurrentStep,title:c.isCurrentStep?"Approve this step":"You can only approve the application's current step"},Object(r["B"])(n.approveButtonLabel),9,["disabled","title"]),Object(r["h"])(s,{modelValue:o.showApproveForm,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.showApproveForm=e})},{default:Object(r["J"])((function(){return[Object(r["h"])(u,{onSaved:c.hideApproveForm,onCanceled:c.hideApproveForm},null,8,["onSaved","onCanceled"])]})),_:1},8,["modelValue"])])),Object(r["y"])(e.$slots,"default"),Object(r["y"])(e.$slots,"log",{},(function(){return[Object(r["h"])("div",Ae,[Object(r["h"])("h4",De,"Step "+Object(r["B"])(n.step)+" Progress Log",1),Object(r["h"])(p,{step:n.step},null,8,["step"])])]}))])}var ke={class:"text-center"},Re={key:0};function Fe(e,t,n,a,o,c){var i=Object(r["z"])("data-table"),l=Object(r["z"])("document-upload-form"),u=Object(r["z"])("modal-dialog"),s=Object(r["z"])("document-reviewed-form");return Object(r["r"])(),Object(r["e"])("div",null,[Object(r["h"])("button",{class:"btn mb-2",onClick:t[1]||(t[1]=function(e){return o.showUploadForm=!0})}," Upload a new version "),c.filteredDocuments.length>0?(Object(r["r"])(),Object(r["e"])(i,{key:0,fields:c.filteredFields,data:c.filteredDocuments,sort:{field:o.fields[0],desc:!0}},{"cell-date_reviewed":Object(r["J"])((function(e){return[Object(r["h"])("div",ke,[e.value?(Object(r["r"])(),Object(r["e"])("span",Re,Object(r["B"])(e.value),1)):(Object(r["r"])(),Object(r["e"])("button",{key:1,class:"btn btn-xs",onClick:function(t){return c.showMarkReviewed(e.item)}},"Mark reviewed",8,["onClick"]))])]})),_:1},8,["fields","data","sort"])):Object(r["f"])("",!0),Object(r["h"])(u,{modelValue:o.showUploadForm,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.showUploadForm=e}),onClosed:t[3]||(t[3]=function(t){return e.$refs.uploadform.clearForm()})},{default:Object(r["J"])((function(){return[Object(r["h"])(l,{application:n.application,"document-type-id":n.documentTypeId,step:n.step,onCanceled:c.closeDialog,onSaved:c.closeDialog,ref:"uploadform"},null,8,["application","document-type-id","step","onCanceled","onSaved"])]})),_:1},8,["modelValue"]),Object(r["h"])(u,{modelValue:o.showReviewedForm,"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.showReviewedForm=e})},{default:Object(r["J"])((function(){return[Object(r["h"])(s,{document:o.activeDocument,application:n.application,onCanceled:c.hideReviewedForm,onSaved:c.hideReviewedForm},null,8,["document","application","onCanceled","onSaved"])]})),_:1},8,["modelValue"])])}n("c740"),n("fb6a");function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $e(e){if(Array.isArray(e))return Ve(e)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function ze(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n("25f0");function Be(e,t){if(e){if("string"===typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}function Ie(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Je(e){return $e(e)||ze(e)||Be(e)||Ie()}var Me={class:"text-xl font-semibold pb-2 border-b mb-4"},Ue={type:"file",ref:"fileInput"};function Ee(e,t,n,a,o,c){var i=Object(r["z"])("input-row"),l=Object(r["z"])("button-row");return Object(r["r"])(),Object(r["e"])("div",null,[Object(r["h"])("h4",Me,"Upload document type "+Object(r["B"])(n.documentTypeId),1),Object(r["h"])(i,{label:"Document",errors:o.errors.file},{default:Object(r["J"])((function(){return[Object(r["h"])("input",Ue,null,512)]})),_:1},8,["errors"]),Object(r["h"])(i,{label:"Date Received",type:"date",modelValue:o.newDocument.date_received,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.newDocument.date_received=e}),errors:o.errors.date_receoved},null,8,["modelValue","errors"]),Object(r["h"])(i,{label:"Date Reviewed",type:"date",modelValue:o.newDocument.date_reviewed,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.newDocument.date_reviewed=e}),errors:o.errors.date_reviewed},null,8,["modelValue","errors"]),Object(r["h"])(l,null,{default:Object(r["J"])((function(){return[Object(r["h"])("button",{class:"btn white",onClick:t[3]||(t[3]=function(){return c.cancel&&c.cancel.apply(c,arguments)})},"Cancel"),Object(r["h"])("button",{class:"btn blue",onClick:t[4]||(t[4]=function(){return c.saveDocument&&c.saveDocument.apply(c,arguments)})},"Save")]})),_:1})])}n("4160"),n("b64b"),n("159b");var Te={props:{application:{type:Object,required:!0},documentTypeId:{type:Number,required:!0},step:{type:Number,required:!1,default:null}},data:function(){return{newDocument:{file:null,date_received:Object(be["a"])(new Date),date_reviewed:null,step:this.step,document_category_id:this.documentTypeId},errors:{}}},methods:{saveDocument:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=new FormData,console.log(Object),Object.keys(e.newDocument).forEach((function(t){var r=e.newDocument[t];null!=r&&n.append(t,r)})),n.append("file",e.$refs.fileInput.files[0]),console.info("formData",n),t.next=8,e.$store.dispatch("addDocument",{application:e.application,documentData:n});case 8:e.clearForm(),e.$emit("saved"),t.next=17;break;case 12:if(t.prev=12,t.t0=t["catch"](0),!V(t.t0)){t.next=17;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))()},cancel:function(){this.clearForm(),this.$emit("closed")},clearForm:function(){this.initNewDocument(),this.clearErrors()},initNewDocument:function(){this.newDocument={file:null,date_received:Object(be["a"])(new Date),date_reviewed:null,step:this.step,document_category_id:this.documentTypeId}},clearErrors:function(){this.errors={}}}};Te.render=Ee;var Ne=Te,Le=Object(r["h"])("h3",{class:"text-lg border-b pb-1 mb-3"},"Mark Document Reviewed",-1);function Pe(e,t,n,a,o,c){var i=Object(r["z"])("input-row"),l=Object(r["z"])("button-row");return Object(r["r"])(),Object(r["e"])("div",null,[Le,Object(r["h"])(i,{modelValue:o.dateReviewed,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.dateReviewed=e}),label:"Date Reviewed",errors:o.errors.date_reviewed,type:"date"},null,8,["modelValue","errors"]),Object(r["h"])(l,null,{default:Object(r["J"])((function(){return[Object(r["h"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return c.cancel&&c.cancel.apply(c,arguments)})},"Cancel"),Object(r["h"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return c.saveDateReviewed&&c.saveDateReviewed.apply(c,arguments)})},"Mark Reviewed")]})),_:1})])}var qe={name:"DocumentReviewForm",props:{application:{type:Object,required:!0},document:{type:Object,required:!0}},data:function(){return{dateReviewed:null,errors:{}}},computed:{},methods:{saveDateReviewed:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("markDocumentReviewed",{application:e.application,document:e.document,dateReviewed:e.dateReviewed});case 3:e.clearForm(),e.$emit("saved"),t.next=12;break;case 7:if(t.prev=7,t.t0=t["catch"](0),!V(t.t0)){t.next=12;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cancel:function(){this.clearForm(),this.$emit("canceled")},clearForm:function(){this.dateReviewed=null}}};qe.render=Pe;var Xe=qe,Ge={name:"DocumentManager",components:{DocumentUploadForm:Ne,DocumentReviewedForm:Xe},props:{application:{type:Object,required:!0},documentTypeId:{type:Number,required:!0},getsReviewed:{type:Boolean,required:!1,default:!0},step:{type:Number,required:!1,default:null}},data:function(){return{showUploadForm:!1,showReviewedForm:!1,activeDocument:{},fields:[{name:"version",type:Number},{name:"filename",type:String},{name:"date_received",type:Date},{name:"date_reviewed",type:Date}]}},computed:{filteredFields:function(){var e=Je(this.fields);if(!this.getsReviewed){var t=e.findIndex((function(e){return e&&"date_reviewed"==e.name}));e=e.slice(0,t)}return e},filteredDocuments:function(){var e=this;return this.application&&this.application.documents?this.application.documents.filter((function(t){return t.document_category_id==e.documentTypeId})):[]}},methods:{showMarkReviewed:function(e){this.activeDocument=e,this.showReviewedForm=!0},hideReviewedForm:function(){this.showReviewedForm=!1},closeDialog:function(){this.showUploadForm=!1}}};Ge.render=Fe;var Ye=Ge,Ke={class:"text-lg"};function We(e,t,n,a,o,c){var i=Object(r["z"])("input-row"),l=Object(r["z"])("button-row");return Object(r["r"])(),Object(r["e"])("div",null,[Object(r["h"])("h3",Ke,"Approve Step "+Object(r["B"])(e.application.current_step),1),Object(r["h"])(i,{modelValue:o.dateApproved,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.dateApproved=e}),type:"date",errors:o.errors.date_approved,label:"Date Approved"},null,8,["modelValue","errors"]),Object(r["h"])(l,null,{default:Object(r["J"])((function(){return[Object(r["h"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return c.cancel&&c.cancel.apply(c,arguments)})},"Cancel"),Object(r["h"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return c.save&&c.save.apply(c,arguments)})},"Approve step "+Object(r["B"])(e.application.current_step),1)]})),_:1})])}var He={props:{},emits:["canceled","saved"],data:function(){return{dateApproved:null,errors:{}}},computed:Object(b["a"])({},Object(f["b"])({application:"currentItem"})),methods:{clearForm:function(){this.dateApproved=null},cancel:function(){this.clearForm(),this.$emit("canceled")},save:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={application:e.application,dateApproved:e.dateApproved},t.prev=1,t.next=4,e.$store.dispatch("approveCurrentStep",n);case 4:e.clearForm(),e.$emit("saved"),t.next=13;break;case 8:if(t.prev=8,t.t0=t["catch"](1),!V(t.t0)){t.next=13;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()}}};He.render=We;var Qe=He,Ze={components:{ApplicationLog:w,DocumentManager:Ye,ApproveStepForm:Qe},props:{step:{type:Number,required:!0},documentName:{type:String,required:!1,default:'Set a document-type attribute if you don\'t use the "document" slot'},documentType:{type:Number,required:!1,default:1},documentGetsReviewed:{type:Boolean,required:!1,default:!0},approveButtonLabel:{type:String,required:!1,default:'Set "approve-button-label" if not overriding slot "approve-button"'}},emits:["documentUploaded","stepApproved"],data:function(){return{showApproveForm:!1}},computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])({application:"currentItem"})),{},{isCurrentStep:function(){return this.step==this.application.current_step},finalDateReviewed:function(){return Object(be["a"])(this.application.finalDocumentOfType(this.documentType).date_reviewed)},firstDateReceived:function(){return Object(be["a"])(this.application.firstDocumentOfType(this.documentType).date_received)},dateApproved:function(){return Object(be["a"])(this.application.approvalDateForStep(this.step))}}),methods:{startApproveStep:function(){this.showApproveForm=!0},approveStep:function(){this.$store.dispatch("approveCurrentStep",{application:this.application,step:this.step})},hideApproveForm:function(){this.showApproveForm=!1}}};Ze.render=Se;var et=Ze,tt=Object(r["h"])("h4",{class:"text-md font-bold"},"Conflict of Interest",-1),nt=Object(r["h"])("div",{class:"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200"}," No Conflict of interest surveys completed ",-1);function rt(e,t,n,a,o,c){var i=Object(r["z"])("dictionary-row");return Object(r["r"])(),Object(r["e"])("div",null,[tt,Object(r["h"])(i,{label:"COI URL"},{default:Object(r["J"])((function(){return[Object(r["g"])(Object(r["B"])(n.application.survey_monkey_url),1)]})),_:1}),nt])}var at={props:{application:{required:!0,type:Object}},data:function(){return{}},computed:{},methods:{}};at.render=rt;var ot=at,ct={name:"StepOne",components:{BaseStep:et,CoiLog:ot},data:function(){return{}},computed:Object(b["a"])({},Object(f["b"])({application:"currentItem"})),methods:{}};ct.render=we;var it=ct;function lt(e,t,n,a,o,c){var i=Object(r["z"])("base-step");return Object(r["r"])(),Object(r["e"])(i,{step:2,"document-type":2,"document-name":"Draft Specifications","document-gets-reviewed":!1,"approve-button-label":"Approve Draft Specifications"})}var ut={name:"StepTwo",components:{BaseStep:et},props:{},data:function(){return{}},computed:Object(b["a"])({},Object(f["b"])({application:"currentItem"})),methods:{}};ut.render=lt;var st=ut,pt=Object(r["h"])("h3",{class:"text-lg font-bold mb-1"},"Final Specifications",-1),dt={key:0},bt={class:"mb-4"},ft=Object(r["h"])("h3",{class:"text-lg font-bold mb-1"},"Pilot Classifications",-1),mt={key:1,class:"pb-3 border-b mb-6"},ht={href:"",class:"text-blue-500 underline"},Ot=Object(r["h"])("br",null,null,-1),jt={href:"",class:"text-blue-500 underline"},vt=Object(r["h"])("br",null,null,-1);function wt(e,t,n,a,o,c){var i=Object(r["z"])("document-manager"),l=Object(r["z"])("dictionary-row"),u=Object(r["z"])("base-step");return Object(r["r"])(),Object(r["e"])(u,{step:3,"approve-button-label":"Approve Pilot and Specifications"},{document:Object(r["J"])((function(){return[pt,e.application.stepIsApproved(3)?(Object(r["r"])(),Object(r["e"])("div",mt,[Object(r["h"])(l,{label:"Final Specifications"},{default:Object(r["J"])((function(){return[Object(r["h"])("a",ht,Object(r["B"])(e.application.finalDocumentOfType(3).filename),1)]})),_:1}),Object(r["h"])(l,{label:"Date Received"},{default:Object(r["J"])((function(){return[Object(r["g"])(Object(r["B"])(c.formatDate(e.application.firstDocumentOfType(3).date_received)),1)]})),_:1}),Object(r["h"])(l,{label:"Date Reviewed"},{default:Object(r["J"])((function(){return[Object(r["g"])(Object(r["B"])(c.formatDate(e.application.finalDocumentOfType(3).date_reviewed)),1)]})),_:1}),Ot,Object(r["h"])(l,{label:"Final Pilot Classifications"},{default:Object(r["J"])((function(){return[Object(r["h"])("a",jt,Object(r["B"])(e.application.finalDocumentOfType(4).filename),1)]})),_:1}),Object(r["h"])(l,{label:"Date Received"},{default:Object(r["J"])((function(){return[Object(r["g"])(Object(r["B"])(c.formatDate(e.application.firstDocumentOfType(4).date_received)),1)]})),_:1}),Object(r["h"])(l,{label:"Date Reviewed"},{default:Object(r["J"])((function(){return[Object(r["g"])(Object(r["B"])(c.formatDate(e.application.finalDocumentOfType(4).date_reviewed)),1)]})),_:1}),vt,Object(r["h"])(l,{label:"Date Approved"},{default:Object(r["J"])((function(){return[Object(r["g"])(Object(r["B"])(c.formatDate(e.application.approvalDateForStep(3))),1)]})),_:1})])):(Object(r["r"])(),Object(r["e"])("div",dt,[Object(r["h"])("div",bt,[Object(r["h"])(i,{application:e.application,"document-type-id":4,getsReviewd:!1},null,8,["application"])]),Object(r["h"])("div",null,[ft,Object(r["h"])(i,{application:e.application,"document-type-id":5,getsReviewd:!1},null,8,["application"])])]))]})),_:1})}var gt={name:"StepThree",components:{BaseStep:et,DocumentManager:Ye},props:{},data:function(){return{}},computed:Object(b["a"])({},Object(f["b"])({application:"currentItem"})),methods:{formatDate:function(e){return Object(be["a"])(e)}}};gt.render=wt;var yt=gt;function _t(e,t,n,a,o,c){var i=Object(r["z"])("base-step");return Object(r["r"])(),Object(r["e"])(i,{step:4,"document-type":5,"document-name":"Final Approval","document-gets-reviewed":!0,"approve-button-label":"Approve Final Application"})}var Ct={name:"StepFour",components:{BaseStep:et},props:{},data:function(){return{}},computed:Object(b["a"])({},Object(f["b"])({application:"currentItem"})),methods:{}};Ct.render=_t;var xt=Ct,At={components:{StepOne:it,StepTwo:st,StepThree:yt,StepFour:xt},data:function(){return{activeStep:1}},computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])({application:"currentItem"})),{},{activeIndex:{deep:!0,get:function(){return this.application&&this.application.current_step?this.application.current_step-1:0},set:function(e){this.activeStep=e+1}}})};At.render=ve;var Dt=At,St={name:"ApplicationDetail",components:{ApplicationLog:w,EpAttributesForm:Q,NextActionBanner:ae,ProgressChart:Oe,StepTabs:Dt},props:{uuid:{type:String,required:!0}},data:function(){return{showModal:!1}},watch:{$route:function(){this.showModal=!!this.$route.meta.showModal&&Boolean(this.$route.meta.showModal)}},computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])({application:"currentItem"})),{},{hasPendingNextAction:function(){return"undefined"==typeof this.application?(console.log("this.application is undefined"),!1):this.application.latest_pending_next_action}}),methods:{hideModal:function(){this.$router.replace({name:"ApplicationDetail",params:{uuid:this.uuid}})},handleModalClosed:function(e){this.clearModalForm(e),this.$router.push({name:"ApplicationDetail",params:{uuid:this.uuid}})},clearModalForm:function(){"function"===typeof this.$refs.modalView.clearForm?(console.log("clearModalForm: call clearForm"),this.$refs.modalView.clearForm()):console.log("no clearForm function on component")}},mounted:function(){this.$store.dispatch("getApplication",this.uuid),this.showModal=Boolean(this.$route.meta.showModal)}};St.render=d;t["default"]=St},"43c2":function(e,t,n){},"4df4":function(e,t,n){"use strict";var r=n("0366"),a=n("7b0b"),o=n("9bdd"),c=n("e95a"),i=n("50c4"),l=n("8418"),u=n("35a1");e.exports=function(e){var t,n,s,p,d,b,f=a(e),m="function"==typeof this?this:Array,h=arguments.length,O=h>1?arguments[1]:void 0,j=void 0!==O,v=u(f),w=0;if(j&&(O=r(O,h>2?arguments[2]:void 0,2)),void 0==v||m==Array&&c(v))for(t=i(f.length),n=new m(t);t>w;w++)b=j?O(f[w],w):f[w],l(n,w,b);else for(p=v.call(f),d=p.next,n=new m;!(s=d.call(p)).done;w++)b=j?o(p,O,[s.value,w],!0):s.value,l(n,w,b);return n.length=w,n}},5319:function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),o=n("50c4"),c=n("a691"),i=n("1d80"),l=n("8aa5"),u=n("0cb2"),s=n("14c3"),p=Math.max,d=Math.min,b=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var f=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,h=f?"$":"$0";return[function(n,r){var a=i(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!f&&m||"string"===typeof r&&-1===r.indexOf(h)){var i=n(t,e,this,r);if(i.done)return i.value}var O=a(e),j=String(this),v="function"===typeof r;v||(r=String(r));var w=O.global;if(w){var g=O.unicode;O.lastIndex=0}var y=[];while(1){var _=s(O,j);if(null===_)break;if(y.push(_),!w)break;var C=String(_[0]);""===C&&(O.lastIndex=l(j,o(O.lastIndex),g))}for(var x="",A=0,D=0;D<y.length;D++){_=y[D];for(var S=String(_[0]),k=p(d(c(_.index),j.length),0),R=[],F=1;F<_.length;F++)R.push(b(_[F]));var V=_.groups;if(v){var $=[S].concat(R,k,j);void 0!==V&&$.push(V);var z=String(r.apply(void 0,$))}else z=u(S,j,k,R,V,r);k>=A&&(x+=j.slice(A,k)+z,A=k+S.length)}return x+j.slice(A)}]}))},"6dbc":function(e,t,n){"use strict";n("43c2")},"7d3d":function(e,t,n){"use strict";n("eed1")},"9bdd":function(e,t,n){var r=n("825a"),a=n("2a62");e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(c){throw a(e),c}}},a630:function(e,t,n){var r=n("23e7"),a=n("4df4"),o=n("1c7e"),c=!o((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:c},{from:a})},eed1:function(e,t,n){},fb6a:function(e,t,n){"use strict";var r=n("23e7"),a=n("861d"),o=n("e8b5"),c=n("23cb"),i=n("50c4"),l=n("fc6a"),u=n("8418"),s=n("b622"),p=n("1dde"),d=n("ae40"),b=p("slice"),f=d("slice",{ACCESSORS:!0,0:0,1:2}),m=s("species"),h=[].slice,O=Math.max;r({target:"Array",proto:!0,forced:!b||!f},{slice:function(e,t){var n,r,s,p=l(this),d=i(p.length),b=c(e,d),f=c(void 0===t?d:t,d);if(o(p)&&(n=p.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?a(n)&&(n=n[m],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return h.call(p,b,f);for(r=new(void 0===n?Array:n)(O(f-b,0)),s=0;b<f;b++,s++)b in p&&u(r,s,p[b]);return r.length=s,r}})},fc85:function(e,t,n){"use strict";n("0bd6")}}]);
//# sourceMappingURL=application-detail.0b64a721.js.map