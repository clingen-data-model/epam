{"version":3,"sources":["webpack:///./src/components/log_entries/ConfirmDeleteLogEntry.vue","webpack:///./src/components/log_entries/ConfirmDeleteLogEntry.vue?ed70","webpack:///./src/components/log_entries/ConfirmDeleteLogEntry.vue?ec82","webpack:///./src/adapters/log_entry_repository.js","webpack:///./src/components/next_actions/ConfirmDeleteNextAction.vue?3c23","webpack:///./src/components/next_actions/ConfirmDeleteNextAction.vue","webpack:///./src/components/next_actions/ConfirmDeleteNextAction.vue?313c"],"names":["_createElementVNode","class","_createElementBlock","_hoisted_1","innerHTML","$options","description","causer","_toDisplayString","name","_hoisted_5","length","_Fragment","_renderList","err","idx","key","_createVNode","_component_button_row","onCanceled","_ctx","go","onSubmitted","submitText","props","id","required","type","String","data","errors","computed","mapGetters","group","application","this","expert_panel","logEntry","logEntries","find","entry","logDate","formatDate","created_at","flattenedErrors","Object","values","flat","watch","immediate","handler","$router","methods","deleteEntry","uuid","isValidationError","response","a","message","setup","__exports__","render","_entries","ref","value","fetchEntries","apiUrl","api","get","then","saveEntry","entryData","post","push","updateEntry","put","entryIdx","findIndex","entryId","delete","splice","assignee","assigned_to_name","_hoisted_9","target_date","_hoisted_12","nextAction","next_actions","next_action","na","targetDate","date","commitDelete","$store","dispatch","is_validation_error"],"mappings":"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","file":"js/confirm-delete-log-entry.437ef838.js","sourcesContent":["<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n<template>\n    <div>\n        <h2>You are about to delete the following log entry:</h2>\n        <div class=\"border-y py-2\">\n        <blockquote>\n            <div v-html=\"logEntry.description\"></div>\n        </blockquote>\n        <div class=\"ml-4 mt-2 mb-4 text-gray-700 text-sm\" v-if=\"logEntry.causer\">Logged by {{logEntry.causer.name}}, {{logDate}}</div>\n        </div>\n\n        <div>This can not be undone. Are you sure you want to continue?</div>\n\n        <div v-if=\"flattenedErrors.length > 0\" class=\"bg-red-200 text-red-900 rounded p-2 my-2\">\n            <ul>\n                <li v-for=\"(err,idx) in flattenedErrors\" :key=\"idx\">\n                    {{err}}\n                </li>\n            </ul> \n        </div>\n        \n        <button-row @canceled=\"$router.go(-1)\" @submitted=\"deleteEntry\" submitText=\"Delete Log Entry\"></button-row>\n    </div>\n</template>\n<script>\nimport {mapGetters} from 'vuex'\nimport {isValidationError} from '@/http'\nimport {logEntries, deleteEntry} from '@/adapters/log_entry_repository'\n\nexport default {\n    name: 'ConfirmDeleteLogEntry',\n    props: {\n        id: {\n            required: true,\n            type: String,\n        }\n    },\n    data() {\n        return {\n            errors: {}\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        },\n        logEntry () {\n            const logEntry = this.logEntries.find(entry => entry.id == this.id);\n            return logEntry || {};\n        },\n        logDate () {\n            return this.formatDate(this.logEntry.created_at)\n        },\n        flattenedErrors () {\n            return Object.values(this.errors).flat();\n        }\n    },\n    watch: {\n        logEntry: {\n            immediate: true,\n            handler: function () {\n                if (!this.logEntry.id) {\n                    this.$router.go(-1);\n                }\n            }\n        }\n    },\n    methods: {\n        async deleteEntry()\n        {\n            try {\n                // await this.$store.dispatch('applications/deleteLogEntry', {application: this.application, logEntry:  this.logEntry});\n                await deleteEntry(`/api/groups/${this.group.uuid}/activity-logs`, this.id)\n                this.$router.go(-1);\n            } catch ( error ) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors;\n                }\n                this.errors = {a: error.message};\n                \n            }\n        }\n    },\n    setup () {\n        return {\n            logEntries\n        }\n    }\n}\n</script>","import { render } from \"./ConfirmDeleteLogEntry.vue?vue&type=template&id=0db916b1\"\nimport script from \"./ConfirmDeleteLogEntry.vue?vue&type=script&lang=js\"\nexport * from \"./ConfirmDeleteLogEntry.vue?vue&type=script&lang=js\"\n\nimport \"./ConfirmDeleteLogEntry.vue?vue&type=style&index=0&id=0db916b1&lang=postcss&scope=true\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ConfirmDeleteLogEntry.vue?vue&type=style&index=0&id=0db916b1&lang=postcss&scope=true\"","import {ref, computed} from 'vue';\nimport api from '@/http/api'\n\nconst _entries = ref([]);\n\nexport const logEntries = computed(() => {\n    return _entries.value;\n});\n\nexport const fetchEntries = async (apiUrl) => {\n    _entries.value = await api.get(apiUrl)\n        .then(response => response.data.data);\n}\n\nexport const saveEntry = async (apiUrl, entryData) => {\n    return await api.post(apiUrl, entryData)\n        .then(response => {\n            _entries.value.push(response.data);\n            return response.data\n        });\n}\n\nexport const updateEntry = async (apiUrl, entryData) => {\n    return await api.put(apiUrl, entryData)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == response.data.id);\n            _entries.value[entryIdx] = response.data;\n            return response.data\n        });\n}\n\nexport const deleteEntry = async (apiUrl, entryId) => {\n    return await api.delete(`${apiUrl}/${entryId}`)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == entryId);\n            _entries.value.splice(entryIdx, 1);\n\n            return response;\n        });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ConfirmDeleteNextAction.vue?vue&type=style&index=0&id=4199c811&lang=postcss&scope=true\"","<template>\n    <div>            \n        <h2>You are about to delete the following next action:</h2>\n        <div class=\"border-y py-2\" v-if=\"nextAction\">\n            <div class=\"ml-4 my-3 text-sm\">\n                Created on: <strong>{{formatDate(nextAction.created_at)}}</strong>\n            </div>\n            <blockquote class=\"mb-4\">\n                <div v-html=\"nextAction.entry\"></div>\n            </blockquote>\n            <div class=\"ml-4 my-1 text-sm\" v-if=\"nextAction.assignee\">\n                Assigned to: \n                <strong>\n                    <span v-if=\"nextAction.assigned_to_name\">{{nextAction.assigned_to_name}} in </span> \n                    {{nextAction.assignee.name}}\n                </strong>\n            </div>\n            <div class=\"ml-4 mt-1 mb-4 text-sm\" v-if=\"nextAction.target_date\">\n                Target Date: <strong>{{formatDate(nextAction.target_date)}}</strong>\n            </div>\n        </div>\n\n    <div>This can not be undone. Are you sure you want to continue?</div>\n        \n    <button-row @canceled=\"$router.go(-1)\" @submitted=\"commitDelete\" submitText=\"Delete Log Entry\"></button-row>\n    </div>\n</template>\n<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n<script>\nimport {mapGetters} from 'vuex'\nimport { formatDate } from '@/date_utils'\nimport is_validation_error from '@/http/is_validation_error'\n\nexport default {\n    name: 'ConfirmDeleteNextAction',\n    props: {\n        uuid: {\n            required: true,\n            type: String\n        },\n        id: {\n            required: true,\n            type: String,\n        }\n    },\n    data() {\n        return {\n            errors: {}\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        },\n        nextAction () {\n            if (!this.application.next_actions) {\n                return {};\n            }\n            const next_action = this.application.next_actions.find(na => na.id == this.id);\n            return next_action || {};\n        },\n        flattenedErrors () {\n            return Object.values(this.errors).flat();\n        },\n        targetDate() {\n            return formatDate(this.nextAction.targetDate);\n        }\n    },\n    watch: {\n        nextAction: {\n            immediate: true,\n            handler: function () {\n                if (!this.nextAction.id) {\n                    this.$router.go(-1);\n                }\n            }\n        }\n    },\n    methods: {\n        formatDate(date) {\n            return formatDate(date);\n        },\n        async commitDelete()\n        {\n            try {\n                await this.$store.dispatch('applications/deleteNextAction', \n                                    {\n                                        application: this.application, \n                                        nextAction: this.nextAction\n                                    });\n                this.$router.go(-1);\n            } catch ( error ) {\n                if (is_validation_error(error)) {\n                    this.errors = error.response.data.errors;\n                }\n                this.errors = {a: error.message};\n                \n            }\n        }\n    }\n}\n</script>","import { render } from \"./ConfirmDeleteNextAction.vue?vue&type=template&id=4199c811\"\nimport script from \"./ConfirmDeleteNextAction.vue?vue&type=script&lang=js\"\nexport * from \"./ConfirmDeleteNextAction.vue?vue&type=script&lang=js\"\n\nimport \"./ConfirmDeleteNextAction.vue?vue&type=style&index=0&id=4199c811&lang=postcss&scope=true\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}