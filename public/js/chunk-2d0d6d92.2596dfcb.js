(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6d92"],{"73ff":function(e,t,n){"use strict";n.r(t);n("b0c0");var o=n("7a23"),r={class:"pb-4"},a=Object(o["createTextVNode"])("People"),c={class:"flex justify-between items-center"},i=Object(o["createElementVNode"])("strong",null,"Email:",-1),l=Object(o["createElementVNode"])("strong",null,"Institution:",-1),s=Object(o["createTextVNode"])(" docs "),u={key:0,class:"well"},d=["innerHTML"],b=["onClick"];function p(e,t,n,p,m,j){var O=Object(o["resolveComponent"])("router-link"),f=Object(o["resolveComponent"])("note"),h=Object(o["resolveComponent"])("icon-edit"),w=Object(o["resolveComponent"])("dictionary-row"),g=Object(o["resolveComponent"])("membership-list"),V=Object(o["resolveComponent"])("tab-item"),C=Object(o["resolveComponent"])("person-profile"),N=Object(o["resolveComponent"])("coi-list"),v=Object(o["resolveComponent"])("tabs-container"),x=Object(o["resolveComponent"])("router-view"),y=Object(o["resolveComponent"])("modal-dialog"),k=Object(o["resolveComponent"])("custom-email-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("header",r,[Object(o["createVNode"])(O,{class:"note",to:"/people"},{default:Object(o["withCtx"])((function(){return[a]})),_:1}),Object(o["createElementVNode"])("h1",c,[Object(o["createElementVNode"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.person.name)+" ",1),Object(o["createVNode"])(f,null,{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("ID: "+Object(o["toDisplayString"])(e.person.id),1)]})),_:1})]),e.hasPermission("people-manage")||e.userIsPerson(e.person)?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,to:"/people/".concat(n.uuid,"/edit"),class:"btn btn-xs flex-grow-0"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{width:"16",heigh:"16"})]})),_:1},8,["to"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(w,{label:"Email"},{label:Object(o["withCtx"])((function(){return[i]})),default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.person.email),1)]})),_:1}),Object(o["createVNode"])(w,{label:"Institution"},{label:Object(o["withCtx"])((function(){return[l]})),default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.person.institution?e.person.institution.name:null),1)]})),_:1})]),Object(o["createVNode"])(v,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(V,{label:"groups"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{person:e.person},null,8,["person"])]})),_:1}),Object(o["createVNode"])(V,{label:"Info"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(C,{person:e.person},null,8,["person"])]})),_:1}),Object(o["createVNode"])(V,{label:"Conflict of Interest"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(N,{person:e.person},null,8,["person"])]})),_:1}),Object(o["createVNode"])(V,{label:"Documents"},{default:Object(o["withCtx"])((function(){return[s]})),_:1}),Object(o["createVNode"])(V,{label:"Email Log"},{default:Object(o["withCtx"])((function(){return[0==j.sortedMailLog.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",u,Object(o["toDisplayString"])(e.titleCase(e.person.first_name))+" has not received any mail via the GPM. ",1)):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(j.sortedMailLog,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"w-3/4 my-4 p-4 border",key:e.id},[Object(o["createVNode"])(w,{label:"Date/Time"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(p.formatDate(e.created_at)),1)]})),_:2},1024),Object(o["createVNode"])(w,{label:"Subject"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.subject),1)]})),_:2},1024),Object(o["createVNode"])(w,{label:"Body"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",{innerHTML:e.body},null,8,d)]})),_:2},1024),Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:Object(o["withModifiers"])((function(t){return j.initResend(e)}),["stop"])},"Resend",8,b)])})),128))]})),_:1})]})),_:1}),(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(y,{modelValue:j.showModal,"onUpdate:modelValue":t[0]||(t[0]=function(e){return j.showModal=e}),title:e.$route.meta.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(x,{name:"modal"})]})),_:1},8,["modelValue","title"]),Object(o["createVNode"])(y,{title:"Resend Email",modelValue:m.showResendDialog,"onUpdate:modelValue":t[1]||(t[1]=function(e){return m.showResendDialog=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(k,{"mail-data":m.currentEmail,onSent:j.cleanupResend,onCanceled:j.cleanupResend},null,8,["mail-data","onSent","onCanceled"])]})),_:1},8,["modelValue"])]))])}var m=n("1da1"),j=n("2909"),O=n("5530"),f=(n("96cf"),n("4e82"),n("5502")),h=n("e328"),w=n("b442");function g(e,t,n,r,a,c){var i=Object(o["resolveComponent"])("data-table");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(i,{fields:a.fields,data:c.memberships,sort:a.sort,"onUpdate:sort":t[0]||(t[0]=function(e){return a.sort=e}),rowClickHandler:c.goToGroup,"row-class":function(){return"cursor-pointer"}},null,8,["fields","data","sort","rowClickHandler","row-class"])])}n("a15b"),n("d81d");var V=n("5313"),C={name:"MembershipList",props:{person:{type:Object,required:!0}},data:function(){return{sort:{field:"group.displayName",desc:!1},fields:[{name:"group.displayName",type:String,sortable:!0,label:"Name"},{name:"group.type.name",type:String,sortable:!0,label:"Type"},{name:"roles",type:String,sortable:!1,label:"Roles",resolveValue:function(e){return e.roles.map((function(e){return e.name})).join(", ")}},{name:"permissions",type:String,sortable:!1,label:"Permissions",resolveValue:function(e){return e.permissions.map((function(e){return e.name})).join(", ")}},{name:"start_date",type:Date,sortable:!0,label:"Started"},{name:"end_date",type:Date,sortable:!0,label:"Ended"}]}},computed:{memberships:function(){return this.person.memberships?this.person.memberships.map((function(e){return e.group&&(e.group=new V["b"](e.group)),e})):[]}},methods:{goToGroup:function(e){this.$router.push({name:"GroupDetail",params:{uuid:e.group.uuid}})}}},N=n("6b0d"),v=n.n(N);const x=v()(C,[["render",g]]);var y=x,k=n("c226"),D=n("6a6b"),_={name:"PersonDetail",components:{TabsContainer:w["default"],MembershipList:y,PersonProfile:k["a"],CoiList:D["a"]},props:{uuid:{required:!0,type:String}},data:function(){return{emails:[],currentEmail:{},showResendDialog:null}},watch:{uuid:{immediate:!0,handler:function(){this.$store.dispatch("people/getPerson",{uuid:this.uuid})}}},computed:Object(O["a"])(Object(O["a"])({},Object(f["b"])({person:"people/currentItem"})),{},{showModal:{get:function(){return this.$route.meta.showModal},set:function(e){e&&this.$router.push({name:"PersonEdit",params:{uuid:this.person.uuid}}),this.$router.push({name:"PersonDetail",params:{uuid:this.person.uuid}})}},sortedMailLog:function(){return Object(j["a"])(this.person.mailLog).sort((function(e,t){return e.created_at==t.created_at?0:Date.parse(e.created_at)>Date.parse(t.created_at)?-1:1}))}}),methods:{initResend:function(e){this.currentEmail=Object(O["a"])({},e),this.showResendDialog=!0},cleanupResend:function(e){this.currentEmail={},this.showResendDialog=!1,this.$store.dispatch("people/getMail",this.person)}},setup:function(){return{formatDate:h["c"]}},mounted:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("people/getPerson",{uuid:e.uuid});case 2:e.$store.dispatch("people/getMail",e.person);case 3:case"end":return t.stop()}}),t)})))()}};const E=v()(_,[["render",p]]);t["default"]=E}}]);
//# sourceMappingURL=chunk-2d0d6d92.2596dfcb.js.map