{"version":3,"sources":["webpack:///./src/components/log_entries/ActivityLog.vue?8a3f","webpack:///./src/components/people/PersonDetail.vue","webpack:///./src/components/people/MembershipList.vue","webpack:///./src/components/people/MembershipList.vue?3648","webpack:///./src/components/people/PersonMergeForm.vue","webpack:///./src/components/people/PersonMergeForm.vue?73e4","webpack:///./src/components/people/PersonDetail.vue?a770","webpack:///./src/adapters/log_entry_repository.js","webpack:///./src/components/log_entries/ActivityLogDeleteConfirmation.vue?f51c","webpack:///./src/components/log_entries/ActivityLog.vue","webpack:///./src/components/log_entries/ActivityLogEntryForm.vue","webpack:///./src/components/log_entries/ActivityLogEntryForm.vue?c2e6","webpack:///./src/components/log_entries/ActivityLogDeleteConfirmation.vue","webpack:///./src/components/log_entries/ActivityLogDeleteConfirmation.vue?5cdc","webpack:///./src/components/log_entries/ActivityLog.vue?e3e2"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_component_router_link","to","_ctx","name","_component_note","_toDisplayString","id","_createBlock","$props","_component_icon_edit","width","heigh","_component_dictionary_row","label","_hoisted_4","email","_hoisted_5","institution","_component_tabs_container","_component_tab_item","_component_membership_list","person","_component_person_profile","_component_coi_list","visible","$options","length","first_name","_Fragment","_renderList","key","$setup","created_at","subject","innerHTML","body","onClick","_hoisted_8","_component_activity_log","log-entries","api-url","uuid","log-updated","_hoisted_10","_Teleport","_component_modal_dialog","$event","title","meta","_component_router_view","$data","_component_custom_email_form","mail-data","onSent","onCanceled","_hoisted_11","_hoisted_12","_hoisted_13","_component_button_row","submit-text","onSubmitted","submit-variant","_component_person_merge_form","obsolete","onSaved","_component_data_table","fields","data","sort","rowClickHandler","row-class","props","type","Object","required","field","desc","String","sortable","resolveValue","item","roles","map","r","join","permissions","p","Date","computed","memberships","this","m","group","Group","methods","goToGroup","$router","push","params","__exports__","_hoisted_1","_component_input_row","vertical","_component_person_search_select","allow-add","errors","authority_id","authority","default","emits","authorityCopy","obsoleteCopy","watch","immediate","handler","attributes","commitMerge","$store","dispatch","authorityId","obsoleteIds","$emit","isValidationError","response","cancelMerge","obsoleteId","components","TabsContainer","MembershipList","PersonProfile","PersonMergeForm","CoiList","ActivityLog","emails","currentEmail","showResendDialog","showDeleteConfirmation","showMergeForm","getLogEntries","mapGetters","showModal","get","$route","set","value","sortedMailLog","mailLog","a","b","parse","initResend","cleanupResend","initDelete","commitDelete","go","cancelDelete","initMerge","handleMerged","handleMergeCanceled","setup","fetchEntries","formatDate","logEntries","mounted","render","_entries","ref","apiUrl","api","then","saveEntry","entryData","post","updateEntry","put","entryIdx","findIndex","entry","deleteEntry","entryId","delete","splice","cell-id","_withCtx","activity_type","_component_icon_trash","cell-description","description","_component_log_entry_form","log-entry","_component_activity_log_delete_confirmation","logEntry","onDeleted","_component_form_container","log_date","_component_rich_text_editor","RichTextEditor","toISOString","step","context","newEntry","syncEntry","properties","initNewEntry","save","emit","status","cancel","causer","err","idx","submitText","logDate","flattenedErrors","values","flat","deleteLogEntry","is_validation_error","message","sortName","colspan","formatTime","LogEntryForm","ActivityLogDeleteConfirmation","Array","selectedEntry","editingEntry","hasLogEntries","editLogEntry","closeEntryForm","confirmDelete","closeDeleteConfirmation"],"mappings":"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","file":"js/chunk-b60d9240.8d297427.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ActivityLog.vue?vue&type=style&index=0&id=0094185e&lang=postcss\"","<template>\n    <div>\n        <header class=\"pb-4\">\n            <router-link class=\"note\" to=\"/people\">People</router-link>\n            <h1 class=\"flex justify-between items-center\">\n                <div>\n                    {{person.name}}\n                    <note>ID: {{person.id}}</note>\n                </div>\n                <router-link \n                    :to=\"`/people/${uuid}/edit`\"\n                    class=\"btn btn-xs flex-grow-0\"\n                    v-if=\"(hasPermission('people-manage') || userIsPerson(person))\"\n                >\n                    <icon-edit width=\"16\" heigh=\"16\" />\n                </router-link>\n\n            </h1>\n            <dictionary-row label=\"Email\">\n                <template v-slot:label><strong>Email:</strong></template>\n                {{person.email}}\n            </dictionary-row>\n            <dictionary-row label=\"Institution\">\n                <template v-slot:label><strong>Institution:</strong></template>\n                {{person.institution ? person.institution.name : null}}\n            </dictionary-row>\n        </header>\n        <tabs-container>\n            <tab-item label=\"groups\">\n                <membership-list :person=\"person\"></membership-list>\n            </tab-item>\n            <tab-item label=\"Info\">\n                <person-profile :person=\"person\"></person-profile>\n            </tab-item>\n            <tab-item label=\"Conflict of Interest\">\n                <coi-list :person=\"person\"></coi-list>\n            </tab-item>\n            <!-- <tab-item label=\"Documents\">\n                docs\n            </tab-item> -->\n            <!-- <tab-item label=\"Training &amp; Attestations\">\n            </tab-item> -->\n            <tab-item label=\"Email Log\" :visible=\"hasPermission('people-manage') || userIsPerson(person)\">\n                <div v-if=\"sortedMailLog.length == 0\" class=\"well\">\n                    {{person.first_name}} has not received any mail via the GPM.\n                </div>\n                <div class=\"w-3/4 my-4 p-4 border\" v-for=\"email in sortedMailLog\" :key=\"email.id\">\n                    <dictionary-row label=\"Date/Time\">\n                        {{formatDate(email.created_at)}}\n                    </dictionary-row>\n                    <dictionary-row label=\"Subject\">\n                        {{email.subject}}\n                    </dictionary-row>\n                    <dictionary-row label=\"Body\">\n                        <div v-html=\"email.body\"></div>\n                    </dictionary-row>\n                    <button class=\"btn btn-xs\" @click.stop=\"initResend(email)\" v-if=\"hasPermission('people-manage')\">Resend</button>\n                </div>\n            </tab-item>\n            <tab-item label=\"Log\" :visible=\"hasPermission('people-manage')\">\n                <activity-log\n                    :log-entries=\"logEntries\"\n                    :api-url=\"`/api/people/${person.uuid}/activity-logs`\"\n                    v-bind:log-updated=\"getLogEntries\"\n                ></activity-log>\n                <button class=\"btn btn-xs mt-1\" @click=\"getLogEntries\">Refresh</button>\n            </tab-item> \n            <tab-item label=\"Admin\" :visible=\"hasPermission('people-manage')\">\n                <section class=\"border my-4 p-4 bg-red-100 border-red-200 rounded\">\n                <h2 class=\"mb-4 text-red-800\">\n                    Here be dragons. Proceed with caution.\n                </h2>\n                <p><button class=\"btn btn red\" @click=\"initMerge\">Merge Person into another</button></p>\n                <p><button class=\"btn btn red\" @click=\"initDelete\">Delete Person</button></p>\n                </section>\n            </tab-item>\n        </tabs-container>\n        <teleport to=\"body\">\n            <modal-dialog v-model=\"showModal\" :title=\"$route.meta.title\">\n                <router-view name=\"modal\"></router-view>\n            </modal-dialog>\n            <modal-dialog title=\"Resend Email\" v-model=\"showResendDialog\">\n                <custom-email-form :mail-data=\"currentEmail\" @sent=\"cleanupResend\" @canceled=\"cleanupResend\"></custom-email-form>\n            </modal-dialog>\n            <modal-dialog :title=\"`You are about to delete ${person.name}`\" v-model=\"showDeleteConfirmation\">\n                <p>You are about to delete this person.  All related data will also be deleted including:</p>\n                <ul class=\"list-disc pl-6\">\n                    <li>User record, system roles, and system permissions (if account is activated)</li>\n                    <li>Invite</li>\n                    <li>Group Memberships and group roles (if any)</li>\n                </ul>\n                <div class=\"border my-4 px-2 py-1 font-bold bg-red-100 border-red-200 rounded text-red-800\">\n                    This cannot be undone.\n                </div>\n                <button-row \n                    :submit-text=\"`Delete ${person.name}`\" \n                    @submitted=\"commitDelete\"  \n                    @canceled=\"cancelDelete\" \n                    submit-variant=\"red\"\n                />\n            </modal-dialog>\n            <modal-dialog :title=\"`Merge ${person.name} into another person`\" v-model=\"showMergeForm\">\n                <person-merge-form :obsolete=\"person\" @saved=\"handleMerged\" @canceled=\"handleMergeCanceled\"></person-merge-form>\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex'\nimport {formatDateTime as formatDate} from '@/date_utils'\nimport { logEntries, fetchEntries } from \"@/adapters/log_entry_repository\";\n\nimport TabsContainer from '../TabsContainer.vue'\nimport MembershipList from './MembershipList.vue'\nimport PersonProfile from '@/components/people/PersonProfile'\nimport PersonMergeForm from '@/components/people/PersonMergeForm'\nimport CoiList from '@/components/people/CoiList'\nimport ActivityLog from \"@/components/log_entries/ActivityLog\";\n\n\nexport default {\n    name: 'PersonDetail',\n    components: { \n        TabsContainer,\n        MembershipList,\n        PersonProfile,\n        PersonMergeForm,\n        CoiList,\n        ActivityLog\n    },\n    props: {\n        uuid: {\n            required: true,\n            type: String\n        }\n    },\n    data() {\n        return {\n            emails: [],\n            currentEmail: {},\n            showResendDialog: null,\n            showDeleteConfirmation: false,\n            showMergeForm: false\n        }\n    },\n    watch: {\n        uuid: {\n            immediate: true,\n            handler: function () {\n                this.$store.dispatch('people/getPerson', {uuid: this.uuid});\n                this.getLogEntries();\n            }\n        }\n    },\n    computed: {\n        ...mapGetters({\n            person: 'people/currentItem'\n        }),\n        showModal: {\n            get() {\n                return this.$route.meta.showModal\n            },\n            set(value) {\n                if (value) {\n                    this.$router.push({name: 'PersonEdit', params: {uuid: this.person.uuid}})\n                }\n                this.$router.push({name: 'PersonDetail', params: {uuid: this.person.uuid}})\n            }\n        },\n        sortedMailLog () {\n            return [...this.person.mailLog].sort((a,b) => {\n                if (a.created_at == b.created_at) {\n                    return 0;\n                }\n                return (Date.parse(a.created_at) > Date.parse(b.created_at))\n                    ? -1 : 1;\n            })\n        }\n    },\n    methods: {\n        initResend (email) {\n            this.currentEmail = {...email};\n            this.showResendDialog = true;\n        },\n        cleanupResend () {\n            this.currentEmail = {},\n            this.showResendDialog = false;\n            this.$store.dispatch('people/getMail', this.person);\n        },\n        initDelete () {\n            this.showDeleteConfirmation = true;\n        },\n        async commitDelete () {\n            await this.$store.dispatch('people/deletePerson', this.person);\n            this.showDeleteConfirmation = false;\n            this.$router.go(-1);\n        },\n        cancelDelete () {\n            this.showDeleteConfirmation = false;\n        },\n        initMerge() {\n            this.showMergeForm = true;\n        },\n        handleMerged () {\n            this.showMergeForm = false;\n            this.$router.go(-1);\n        },\n        handleMergeCanceled () {\n            this.showMergeForm = false;\n        },\n    },\n    setup(props) {\n        const getLogEntries = async () => {\n            await fetchEntries(`/api/people/${props.uuid}/activity-logs`);\n        };\n\n        return {\n            formatDate: formatDate,\n            logEntries,\n            getLogEntries\n        }\n    },\n    async mounted() {\n        await this.$store.dispatch('people/getPerson', {uuid: this.uuid})\n        this.$store.dispatch('people/getMail', this.person);\n    }\n}\n</script>","<template>\n    <div>\n        <data-table \n            :fields=\"fields\" \n            :data=\"memberships\" \n            v-model:sort=\"sort\"\n            :rowClickHandler=\"goToGroup\"\n            :row-class=\"() => 'cursor-pointer'\"\n        ></data-table>\n    </div>\n</template>\n<script>\nimport {Group} from '@/domain'\n\nexport default {\n    name: 'MembershipList',\n    props: {\n        person: {\n            type: Object,\n            required: true\n        }\n    },\n    data() {\n        return {\n            sort: {\n                field: 'group.displayName',\n                desc: false\n            },\n            fields: [\n                {\n                    name: 'group.displayName',\n                    type: String,\n                    sortable: true,\n                    label: 'Name'\n                },\n                {\n                    name: 'group.type.name',\n                    type: String,\n                    sortable: true,\n                    label: 'Type'\n                },\n                {\n                    name: 'roles',\n                    type: String,\n                    sortable: false,\n                    label: 'Roles',\n                    resolveValue (item) {\n                        return item.roles.map(r => r.name).join(', ');\n                    }\n                },\n                {\n                    name: 'permissions',\n                    type: String,\n                    sortable: false,\n                    label: 'Permissions',\n                    resolveValue (item) {\n                        return item.permissions.map(p => p.name).join(', ');\n                    }\n                },\n                {\n                    name: 'start_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Started'\n                },\n                {\n                    name: 'end_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Ended'\n                }\n\n\n            ]\n        }\n    },\n    computed: {\n        memberships () {\n            if (this.person.memberships) {\n                return this.person.memberships.map(m => {\n                    if (m.group) {\n                        m.group = new Group(m.group);\n                    }\n                    return m;\n                })\n            }\n\n            return [];\n        }\n    },\n    methods: {\n        goToGroup(item) {\n            this.$router.push({name: 'GroupDetail', params: {uuid: item.group.uuid}})\n        }\n\n    }\n}\n</script>","import { render } from \"./MembershipList.vue?vue&type=template&id=7757f912\"\nimport script from \"./MembershipList.vue?vue&type=script&lang=js\"\nexport * from \"./MembershipList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>\n        <p class=\"mb-8\">\n            Merging peple will do the following:\n            <ol class=\"list-decimal ml-6\">\n                <li>Add the authoritative person to all groups of which the obsolete person is a member.</li>\n                <li>Delete the obsolete person, their memberships, their invite, and their user account (if activated).</li>\n            </ol>\n        </p>\n        <input-row label=\"Merge\" vertical>\n            <template v-slot:label>\n                Merge <note class=\"inline-block\">(Obsolete person that will be deleted)</note>\n            </template>\n            <person-search-select v-model=\"obsoleteCopy\" :allow-add=\"false\"></person-search-select>\n            \n        </input-row>\n        <input-row label=\"Into\" :errors=\"errors.authority_id\" vertical>\n            <template v-slot:label>Into <note class=\"inline\">(Authoritative person)</note></template>\n            <person-search-select v-model=\"authorityCopy\" :allow-add=\"false\"></person-search-select>\n        </input-row>\n        <button-row submit-text=\"Merge\" @submitted=\"commitMerge\" @canceled=\"cancelMerge\" />\n    </div>\n</template>\n<script>\nimport { isValidationError } from '@/http';\n\nexport default {\n    name: 'PersonMergeForm',\n    props: {\n        authority: {\n            type: Object,\n            required: false\n        },\n        obsolete: {\n            type: Object,\n            default: () => ({})\n        }\n    },\n    emits: [\n        'saved',\n        'canceled'\n    ],\n    data() {\n        return {\n            authorityCopy: null,\n            obsoleteCopy: null,\n            errors: {}\n        }\n    },\n    watch: {\n        authority: {\n            immediate: true,\n            handler (to) {\n                if (!to) {\n                    return;\n                }\n                this.authorityCopy = {...to.attributes}\n            }\n        },\n        obsolete: {\n            immediate: true,\n            handler (to) {\n                if (!to) {\n                    return;\n                }\n                this.obsoleteCopy = {...to.attributes};\n            }\n        }\n    },\n    methods: {\n        async commitMerge () {\n            try {\n                this.errors = {};\n                await this.$store.dispatch(\n                    'people/mergePeople', \n                    {\n                        authority: this.authorityCopy, \n                        obsolete: this.obsoleteCopy\n                    }\n                );\n                this.authorityId = null;\n                this.obsoleteIds = null;\n                this.$emit('saved');\n            } catch (error) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors;\n                    return;\n                }\n            }\n        },\n        cancelMerge () {\n            this.authorityId = null;\n            this.obsoleteId = null;\n            this.$emit('canceled');\n        }\n    }\n}\n</script>","import { render } from \"./PersonMergeForm.vue?vue&type=template&id=dd7c1228\"\nimport script from \"./PersonMergeForm.vue?vue&type=script&lang=js\"\nexport * from \"./PersonMergeForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PersonDetail.vue?vue&type=template&id=59da2ad0\"\nimport script from \"./PersonDetail.vue?vue&type=script&lang=js\"\nexport * from \"./PersonDetail.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import {ref, computed} from 'vue';\nimport api from '@/http/api'\n\nconst _entries = ref([]);\n\nexport const logEntries = computed(() => {\n    return _entries.value;\n});\n\nexport const fetchEntries = async (apiUrl) => {\n    _entries.value = await api.get(apiUrl)\n        .then(response => response.data.data);\n}\n\nexport const saveEntry = async (apiUrl, entryData) => {\n    return await api.post(apiUrl, entryData)\n        .then(response => {\n            _entries.value.push(response.data);\n            return response.data\n        });\n}\n\nexport const updateEntry = async (apiUrl, entryData) => {\n    return await api.put(apiUrl, entryData)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == response.data.id);\n            _entries.value[entryIdx] = response.data;\n            return response.data\n        });\n}\n\nexport const deleteEntry = async (apiUrl, entryId) => {\n    return await api.delete(`${apiUrl}/${entryId}`)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == entryId);\n            _entries.value.splice(entryIdx, 1);\n\n            return response;\n        });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ActivityLogDeleteConfirmation.vue?vue&type=style&index=0&id=33176996&lang=postcss&scope=true\"","<style lang=\"postcss\">\n    .links-blue a {\n        @apply text-blue-500;\n    }\n</style>\n<template>\n    <div>\n        <div class=\"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200\" v-if=\"!hasLogEntries\">\n            No log entries to display\n        </div>\n        <data-table :fields=\"fields\" :data=\"logEntries\" v-model:sort=\"sort\" v-else>\n            <template v-slot:cell-id=\"{item}\">\n                <div class=\"flex space-x-1\" v-if=\"hasPermission('groups-manage')\">\n                    <button class=\"btn btn-xs inline-block\"  @click=\"editLogEntry(item)\">\n                        <icon-edit width=\"12\"></icon-edit>\n                    </button>\n                    <button \n                        @click=\"confirmDelete(item)\"\n                        v-if=\"item.activity_type === null\"\n                        class=\"btn btn-xs inline-block\"\n                    >\n                        <icon-trash width=\"12\"></icon-trash>\n                    </button>\n                </div>\n            </template>\n            <template v-slot:cell-description=\"{item}\">\n                <div v-html=\"item.description\" class=\"links-blue\"></div>\n            </template>\n        </data-table>\n        <modal-dialog v-model=\"editingEntry\" title=\"Edit log entry\">\n            <log-entry-form \n                :log-entry=\"selectedEntry\" \n                :api-url=\"apiUrl\"\n                @saved=\"closeEntryForm\"\n                @canceled=\"closeEntryForm\"\n            ></log-entry-form>\n        </modal-dialog>\n\n        <modal-dialog v-model=\"showDeleteConfirmation\" title=\"Delete this log entry?\">\n            <activity-log-delete-confirmation \n                :logEntry=\"selectedEntry\" \n                :api-url=\"apiUrl\"\n                @canceled=\"closeDeleteConfirmation\"\n                @deleted=\"closeDeleteConfirmation\"\n            ></activity-log-delete-confirmation>\n        </modal-dialog>\n    </div>\n</template>\n<script>\nimport { ref, computed } from 'vue'\n\nimport LogEntryForm from '@/components/log_entries/ActivityLogEntryForm'\nimport ActivityLogDeleteConfirmation from '@/components/log_entries/ActivityLogDeleteConfirmation'\nimport {formatDate, formatTime} from '@/date_utils'\n\nconst fields = [\n    {\n        name: 'created_at',\n        label: 'Date & Time',\n        sortName: 'created_at',\n        sortable: true,\n        resolveValue ({created_at}) {\n            return (created_at) ? formatDate(created_at) : null;\n        },\n        type: Date,\n        colspan: 2,\n        class: 'w-16'\n    },\n    {\n        name: 'created_at',\n        label: 'Time',\n        sortName: 'created_at',\n        sortable: false,\n        resolveValue ({created_at}) {\n            return (created_at) ? formatTime(created_at) : null;\n        },\n        class: \"w-28\",\n        type: Date,\n    },\n    {\n        name: 'description',\n        label: 'Entry',\n        sortable: true,\n        type: String\n    },\n    {\n        name: 'causer.name',\n        label: 'User',\n        sortable: true\n    },\n    {\n        name: 'id',\n        label: '',\n        sortable: false,\n    }\n];\n\nexport default {\n    components: {\n        LogEntryForm,\n        ActivityLogDeleteConfirmation\n    },\n    props: {\n        logEntries: {\n            required: true,\n            type: Array,\n        },\n        apiUrl: {\n            required: true,\n            type: String\n        }\n    },\n    setup (props) {\n        const sort = ref({\n            field: 'created_at',\n            desc: true\n        });\n        const selectedEntry = ref({});\n        const editingEntry = ref(false);\n\n        const hasLogEntries = computed(() => {\n            return props.logEntries.length > 0;\n        });\n\n        const editLogEntry = entry => {\n            editingEntry.value = true;\n            selectedEntry.value = entry;\n        };\n\n        const closeEntryForm = () => {\n            editingEntry.value = false;\n            selectedEntry.value = {};\n        }\n\n        const showDeleteConfirmation = ref(false);\n        const confirmDelete = (entry) => {\n            selectedEntry.value = entry;\n            showDeleteConfirmation.value = true;\n        }\n        const closeDeleteConfirmation = () => {\n            showDeleteConfirmation.value = false;\n            selectedEntry.value = {};\n        }\n\n        return {\n            fields: ref(fields),\n            sort,\n            selectedEntry,\n            editingEntry,\n            hasLogEntries,\n            editLogEntry,\n            closeEntryForm,\n            showDeleteConfirmation,\n            confirmDelete,\n            closeDeleteConfirmation\n        }\n    }\n}\n</script>","<template>\n    <form-container class=\"log-entry-form\" ref=\"form-container\">\n        <hr>\n        <input-row label=\"Log Date\" \n            v-model=\"newEntry.log_date\" \n            :errors=\"errors.log_date\" \n            type=\"date\" \n            ref=\"logdate\"\n        ></input-row>\n        <input-row label=\"Entry\" :errors=\"errors.entry\">\n            <rich-text-editor v-model=\"newEntry.entry\"></rich-text-editor>\n        </input-row>\n        <button-row>\n            <button class=\"btn\" @click=\"cancel\">Cancel</button>\n            <button class=\"btn blue\" @click=\"save\">Save</button>\n        </button-row>\n    </form-container>\n</template>\n<script>\nimport { ref, watch } from 'vue'\nimport RichTextEditor from '@/components/forms/RichTextEditor'\nimport {saveEntry, updateEntry, fetchEntries} from '@/adapters/log_entry_repository'\n\n\nexport default {\n    name: 'LogEntryForm',\n    components: {\n        RichTextEditor\n    },\n    props: {\n        logEntry: {\n            required: false,\n            default: () => {\n                return {\n                    log_date: new Date().toISOString(),\n                    step: null,\n                    entry: '',\n                }\n            }\n        },\n        apiUrl: {\n            required: true,\n            type: String\n        }\n    },\n    emits: [\n        'saved',\n    ],\n    setup (props, context) {\n        const newEntry = ref({\n            log_date: new Date().toISOString(),\n            step: null,\n            entry: '',\n        });\n        const errors = ref({});\n\n        const syncEntry =  (entry) => {\n            if (!entry || !entry.created_at) {\n                return;\n            }\n\n            newEntry.value = {\n                id: entry.id,\n                log_date: new Date(Date.parse((entry.created_at))).toISOString(),\n                step: entry.properties ? entry.properties.step : null,\n                entry: entry.description\n            }\n        }\n\n        const initNewEntry = () => {\n            newEntry.value = {\n                log_date: new Date().toISOString(),\n                step: null,\n                entry: ''\n            }\n        }\n\n        const save = async () => {\n            try {\n                if (newEntry.value.id) {\n                    await updateEntry(`${props.apiUrl}/${newEntry.value.id}`, newEntry.value);\n                } else {\n                    await saveEntry(props.apiUrl, newEntry.value);\n                }\n\n                await fetchEntries(props.apiUrl);\n                initNewEntry();\n                context.emit('saved', newEntry.value);\n            } catch (error) {\n                if (error.response && error.response.status == 422 && error.response.data.errors) {\n                    errors.value = error.response.data.errors\n                    return;\n                }\n            }\n        };\n\n        const cancel = () => {\n            initNewEntry();\n            context.emit('canceled');\n        }\n\n        watch(\n            () => props.logEntry, \n            (to) => {\n                syncEntry(to)\n            },\n            {immediate: true}\n        );\n\n        return {\n            newEntry,\n            errors,\n            syncEntry,\n            initNewEntry,\n            save,\n            cancel,\n        }\n    },\n    mounted() {\n        // this.$el.querySelectorAll('input')[0].focus();\n    }\n}\n</script>","import { render } from \"./ActivityLogEntryForm.vue?vue&type=template&id=3a21cbe5\"\nimport script from \"./ActivityLogEntryForm.vue?vue&type=script&lang=js\"\nexport * from \"./ActivityLogEntryForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n<template>\n    <div>\n        <p>You are about to delete the following log entry:</p>\n\n        <div class=\"border-y py-2\">\n        <blockquote>\n            <div v-html=\"logEntry.description\"></div>\n        </blockquote>\n        <div class=\"ml-4 mt-2 mb-4 text-gray-700 text-sm\" v-if=\"logEntry.causer\">Logged by {{logEntry.causer.name}}, {{logDate}}</div>\n        </div>\n\n        <div>This can not be undone. Are you sure you want to continue?</div>\n\n        <div v-if=\"flattenedErrors.length > 0\" class=\"bg-red-200 text-red-900 rounded p-2 my-2\">\n            <ul>\n                <li v-for=\"(err,idx) in flattenedErrors\" :key=\"idx\">\n                    {{err}}\n                </li>\n            </ul> \n        </div>\n        \n        <button-row @canceled=\"$emit('canceled')\" @submitted=\"deleteLogEntry\" submitText=\"Delete Log Entry\"></button-row>\n    </div>\n</template>\n<script>\nimport {ref, computed} from 'vue';\nimport { formatDate } from '@/date_utils';\nimport is_validation_error from '@/http/is_validation_error';\nimport { fetchEntries, deleteEntry } from '@/adapters/log_entry_repository'\n\n\nexport default {\n    name: 'ConfirmDeleteLogEntry',\n    props: {\n        logEntry: {\n            required: true,\n            type: Object,\n        },\n        apiUrl: {\n            required: true,\n            type: String\n        }\n    },\n    emits: [\n        'deleted',\n        'canceled'\n    ],\n    setup (props, context) {\n        const errors = ref({});\n        const logDate = computed(() => {\n            return formatDate(props.logEntry.properties.log_date)\n        });\n        const flattenedErrors = computed(() => {\n            return Object.values(errors.value).flat();\n        });\n\n        const deleteLogEntry = async () => {\n            try {\n                await deleteEntry(props.apiUrl, props.logEntry.id);\n                context.emit('deleted')\n                await fetchEntries(props.apiUrl);\n            } catch (error) {\n                if (is_validation_error(error)) {\n                    errors.value = error.response.data.errors;\n                    return;\n                }\n                errors.value = {a: error.message};\n            }\n        }\n\n\n        return {\n            errors,\n            logDate,\n            flattenedErrors,\n            deleteLogEntry\n        }\n    }\n}\n</script>","import { render } from \"./ActivityLogDeleteConfirmation.vue?vue&type=template&id=33176996\"\nimport script from \"./ActivityLogDeleteConfirmation.vue?vue&type=script&lang=js\"\nexport * from \"./ActivityLogDeleteConfirmation.vue?vue&type=script&lang=js\"\n\nimport \"./ActivityLogDeleteConfirmation.vue?vue&type=style&index=0&id=33176996&lang=postcss&scope=true\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ActivityLog.vue?vue&type=template&id=0094185e\"\nimport script from \"./ActivityLog.vue?vue&type=script&lang=js\"\nexport * from \"./ActivityLog.vue?vue&type=script&lang=js\"\n\nimport \"./ActivityLog.vue?vue&type=style&index=0&id=0094185e&lang=postcss\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}