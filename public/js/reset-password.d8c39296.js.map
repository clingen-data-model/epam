{"version":3,"file":"js/reset-password.d8c39296.js","mappings":"wLAEaA,MAAM,mE,8HADfC,EAAAA,EAAAA,IAUOC,EAAAA,CAVDC,MAAM,sBAAsBH,MAAM,iB,mBACpC,IAEM,CAF6EI,EAAAA,iBAAc,WAAjGC,EAAAA,EAAAA,IAEM,MAFNC,GAEM,QADAF,EAAAA,gBAAc,iBAEpBC,EAAAA,EAAAA,IAKM,UAJFE,EAAAA,EAAAA,IAAwFC,EAAAA,C,WAApEJ,EAAAA,M,qCAAAA,EAAAA,MAAK,GAAEK,KAAK,OAAOC,MAAM,QAASC,OAAQP,EAAAA,OAAOQ,O,gCAC8BC,EAAAA,WAAQ,WAA3GZ,EAAAA,EAAAA,IAAyHO,EAAAA,C,iBAArGJ,EAAAA,S,qCAAAA,EAAAA,SAAQ,GAAEK,KAAK,WAAWC,MAAM,eAAgBC,OAAQP,EAAAA,OAAOU,U,iDAC8CD,EAAAA,WAAQ,WAAzIZ,EAAAA,EAAAA,IAAuJO,EAAAA,C,iBAAnIJ,EAAAA,sB,qCAAAA,EAAAA,sBAAqB,GAAEK,KAAK,WAAWC,MAAM,mBAAoBC,OAAQP,EAAAA,OAAOW,uB,kDACpGR,EAAAA,EAAAA,IAAqGS,EAAAA,CAAxF,eAAa,EAAQ,cAAaH,EAAAA,WAAaI,gBAAeJ,EAAAA,a,8EAOvF,GACIK,MAAO,CAEP,EACAC,IAAAA,GACI,MAAO,CACHP,MAAO,KACPD,OAAQ,CAAC,EACTG,SAAU,KACVC,sBAAuB,KACvBK,eAAgB,KAExB,EACAC,SAAU,CACNC,QAAAA,GACI,OAAOC,QAAQC,KAAKC,OAAOC,MAAMC,MACrC,EACAC,UAAAA,GACI,OAAOJ,KAAKF,SAAW,iBAAmB,0BAC9C,GAEJO,QAAS,CACLC,YAAAA,GACIC,EAAAA,EAAIC,KAAK,gCAAiC,CAACpB,MAAOY,KAAKZ,QAClDqB,MAAKC,IACFV,KAAKJ,eAAiBc,EAASf,KAAKgB,MAAM,IAE7CC,OAAMC,KACCC,EAAAA,EAAAA,GAAoBD,KACpBb,KAAKb,OAAS0B,EAAMH,SAASf,KAAKR,OACtC,GAEZ,EACA4B,iBAAAA,GACI,MAAMpB,EAAO,CACTQ,MAAOH,KAAKC,OAAOC,MAAMC,MACzBf,MAAOY,KAAKZ,MACZE,SAAUU,KAAKV,SACfC,sBAAuBS,KAAKT,uBAGhCgB,EAAAA,EAAIC,KAAK,sBAAuBb,GAC3Bc,MAAK,KACFT,KAAKgB,OAAOC,SAAS,QAAS,CAAC7B,MAAOY,KAAKZ,MAAOE,SAAUU,KAAKV,WAC5DmB,MAAK,KACFT,KAAKgB,OAAOC,SAAS,kBACrBjB,KAAKkB,QAAQC,QAAQ,IAAI,GAC3B,IAETP,OAAMC,KACCC,EAAAA,EAAAA,GAAoBD,KACpBb,KAAKb,OAAS0B,EAAMH,SAASf,KAAKR,OACtC,GAEZ,EACAiC,WAAAA,GACQpB,KAAKF,SACLE,KAAKe,oBAITf,KAAKM,cACT,I,UCzER,MAAMe,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://epam/./src/views/ResetPassword.vue","webpack://epam/./src/views/ResetPassword.vue?9dd8"],"sourcesContent":["<template>\n    <card title=\"Reset Your Password\" class=\"w-2/3 mx-auto\">\n        <div class=\"p-2 rounded border border-green-300 bg-green-100 text-green-700\" v-if=\"successMessage\">\n            {{successMessage}}\n        </div>\n        <div v-else>\n            <input-row v-model=\"email\" type=\"text\" label=\"Email\" :errors=\"errors.email\"></input-row>\n            <input-row v-model=\"password\" type=\"password\" label=\"New password\" :errors=\"errors.password\" v-if=\"hasToken\"></input-row>\n            <input-row v-model=\"password_confirmation\" type=\"password\" label=\"Confirm password\" :errors=\"errors.password_confirmation\" v-if=\"hasToken\"></input-row>\n            <button-row :show-cancel=\"false\" :submit-text=\"submitText\" @submitClicked=\"submitReset\"></button-row>\n        </div>\n    </card>\n</template>\n<script>\nimport api from '../http/api'\nimport is_validation_error from '../http/is_validation_error'\nexport default {\n    props: {\n\n    },\n    data() {\n        return {\n            email: null,\n            errors: {},\n            password: null,\n            password_confirmation: null,\n            successMessage: null\n        }\n    },\n    computed: {\n        hasToken () {\n            return Boolean(this.$route.query.token)\n        },\n        submitText () {\n            return this.hasToken ? 'Reset Password' : 'Send Password Reset Link';\n        }\n    },\n    methods: {\n        getResetLink() {\n            api.post('/api/send-reset-password-link', {email: this.email})\n                .then(response => {\n                    this.successMessage = response.data.status;\n                })\n                .catch(error => {\n                    if (is_validation_error(error)) {\n                        this.errors = error.response.data.errors\n                    }\n                });\n        },\n        submitNewPassword () {\n            const data = {\n                token: this.$route.query.token,\n                email: this.email,\n                password: this.password,\n                password_confirmation: this.password_confirmation,\n            };\n\n            api.post('/api/reset-password', data)\n                .then(() => {\n                    this.$store.dispatch('login', {email: this.email, password: this.password})\n                        .then(() => {\n                            this.$store.dispatch('getCurrentUser');\n                            this.$router.replace('/');\n                        })\n                })\n                .catch(error => {\n                    if (is_validation_error(error)) {\n                        this.errors = error.response.data.errors\n                    }\n                })\n        },\n        submitReset() {\n            if (this.hasToken) {\n                this.submitNewPassword()\n                return;\n            }\n\n            this.getResetLink();\n        }\n    }\n}\n</script>\n","import { render } from \"./ResetPassword.vue?vue&type=template&id=403f772a\"\nimport script from \"./ResetPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ResetPassword.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/bpow/src/clingen/gpm/resources/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createBlock","_component_card","title","$data","_createElementBlock","_hoisted_1","_createVNode","_component_input_row","type","label","errors","email","$options","password","password_confirmation","_component_button_row","onSubmitClicked","props","data","successMessage","computed","hasToken","Boolean","this","$route","query","token","submitText","methods","getResetLink","api","post","then","response","status","catch","error","is_validation_error","submitNewPassword","$store","dispatch","$router","replace","submitReset","__exports__","render"],"sourceRoot":""}