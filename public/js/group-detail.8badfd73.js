(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-detail"],{"0251":function(e,t,n){},"4f50":function(e,t,n){"use strict";var o=n("7a23"),r={class:"flex space-x-2 items-center mb-3"},c={key:0},a=Object(o["createTextVNode"])(" has"),i={key:1},l=Object(o["createTextVNode"])(" an "),u=Object(o["createTextVNode"])(" due on "),s=Object(o["createTextVNode"])(". "),d=Object(o["createTextVNode"])(" Complete the Annual Update ");function p(e,t,n,p,b,m){var j=Object(o["resolveComponent"])("icon-review"),O=Object(o["resolveComponent"])("router-link"),f=Object(o["resolveComponent"])("static-alert");return m.isPending&&b.annualReview.id?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0,variant:m.variant},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(j,{height:"30",width:"30"}),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("p",null,[n.showGroupName?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",c,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(n.group.displayName),1),a])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",i,"You have")),l,Object(o["createElementVNode"])("strong",null,"annual update for "+Object(o["toDisplayString"])(m.window.for_year),1),u,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.formatDate(m.window.end)),1),s]),n.group.uuid?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,class:"btn font-bold",to:{name:"AnnualUpdate",params:{uuid:n.group.uuid}}},{default:Object(o["withCtx"])((function(){return[d]})),_:1},8,["to"])):Object(o["createCommentVNode"])("",!0)])])]})),_:1},8,["variant"])):Object(o["createCommentVNode"])("",!0)}var b=n("db04"),m={name:"AnnualUpdateAlert",props:{group:{type:Object,required:!0},showGroupName:{type:Boolean,default:!1}},data:function(){return{annualReview:{},loading:!1}},computed:{window:function(){return this.annualReview.window?this.annualReview.window:{}},isPending:function(){return!this.annualReview.completed_at},variant:function(){var e=new Date;if(!this.window.end)return console.log("no window.end"),"warning";var t=new Date(Date.parse(this.window.end));return e>this.addDays(t,-7)?"danger":"warning"}},watch:{group:{immediate:!0,handler:function(){this.getAnnualUpdate()}}},methods:{getAnnualUpdate:function(){var e=this;this.group.uuid&&this.group.expert_panel.definition_is_approved&&(this.loading=!0,b["a"].get("/api/groups/".concat(this.group.uuid,"/expert-panel/annual-updates"),{headers:{"X-Ignore-Missing":1}}).then((function(t){e.annualReview=t.data})),this.loading=!1)}}},j=n("6b0d"),O=n.n(j);const f=O()(m,[["render",p]]);t["a"]=f},8067:function(e,t,n){},"8c58":function(e,t,n){"use strict";n("0251")},b47e:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r=Object(o["createElementVNode"])("h3",null," Plans for Ongoing Gene Review and Reanalysis and Discrepancy Resolution ",-1),c=Object(o["createElementVNode"])("br",null,null,-1),a={key:0,class:"bg-white bg-opacity-50 absolute top-0 left-0 right-0 bottom-0"},i=Object(o["createTextVNode"])(" You can complete these sections after your first Specifications Pilot has been approved. "),l={key:2},u=Object(o["createElementVNode"])("header",null,[Object(o["createElementVNode"])("h3",null,"Example Evidence Summaries")],-1),s={class:"relative"},d=Object(o["createTextVNode"])(" You can complete these sections after your first Specifications Pilot has been approved. "),p=Object(o["createTextVNode"])("The attestations below are read only. Attestations can only be completed during the application process."),b=Object(o["createElementVNode"])("h3",null,"Reanalysis & Discrepancy Resolution",-1),m=Object(o["createElementVNode"])("h3",null,"NHGRI Data Availability",-1),j={key:0},O=Object(o["createElementVNode"])("h2",{class:"pb-2 border-b mb-4"},"Application",-1),f=Object(o["createElementVNode"])("hr",null,null,-1),g={class:"border my-4 p-4 bg-red-100 border-red-200 rounded"},h=Object(o["createElementVNode"])("h2",{class:"mb-4 text-red-800"}," Here be dragons. Proceed with caution. ",-1),v={key:1,class:"border my-4 p-4 rounded"},y=Object(o["createElementVNode"])("h2",{class:"mb-4"},[Object(o["createTextVNode"])(" Dev tools "),Object(o["createElementVNode"])("span",{class:"text-gray-500"}," - don't use if you don't know.")],-1),w=Object(o["createElementVNode"])("br",null,null,-1),k=Object(o["createElementVNode"])("br",null,null,-1),C={class:"text-lg"},V=Object(o["createElementVNode"])("p",null,"This cannot be undone.",-1);function N(e,t,n,N,E,x){var D=Object(o["resolveComponent"])("annual-update-alert"),B=Object(o["resolveComponent"])("sustained-curation-review-alert"),_=Object(o["resolveComponent"])("group-detail-header"),S=Object(o["resolveComponent"])("application-summary"),U=Object(o["resolveComponent"])("member-list"),T=Object(o["resolveComponent"])("membership-description-form"),F=Object(o["resolveComponent"])("submission-wrapper"),R=Object(o["resolveComponent"])("tab-item"),A=Object(o["resolveComponent"])("scope-description-form"),M=Object(o["resolveComponent"])("static-alert"),$=Object(o["resolveComponent"])("evidence-summaries"),I=Object(o["resolveComponent"])("cspec-summary"),P=Object(o["resolveComponent"])("group-documents"),G=Object(o["resolveComponent"])("note"),L=Object(o["resolveComponent"])("attestation-gcep"),q=Object(o["resolveComponent"])("attestation-reanalysis"),H=Object(o["resolveComponent"])("attestation-nhgri"),Y=Object(o["resolveComponent"])("activity-log"),J=Object(o["resolveComponent"])("progress-chart"),z=Object(o["resolveComponent"])("step-tabs"),X=Object(o["resolveComponent"])("tabs-container"),K=Object(o["resolveComponent"])("router-view"),Q=Object(o["resolveComponent"])("modal-dialog"),W=Object(o["resolveComponent"])("group-form"),Z=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[e.hasAnyPermission(["annual-updates-mange",["annual-update-manage",N.group]])?(Object(o["openBlock"])(),Object(o["createBlock"])(D,{key:0,group:N.group,class:"mb-2"},null,8,["group"])):Object(o["createCommentVNode"])("",!0),N.needsToReviewSustainedCuration&&e.hasAnyPermission(["ep-applications-manage",["application-edit",N.group]])?(Object(o["openBlock"])(),Object(o["createBlock"])(B,{key:1,group:N.group,class:"mb-2"},null,8,["group"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(_,{group:N.group,onShowEdit:x.showEdit},null,8,["group","onShowEdit"]),N.group.isApplying?(Object(o["openBlock"])(),Object(o["createBlock"])(S,{key:2,group:N.group},null,8,["group"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(X,{onTabChanged:x.handleTabChange},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(R,{label:"Members"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(U,{group:N.group},null,8,["group"]),N.group.isVcep()?(Object(o["openBlock"])(),Object(o["createBlock"])(F,{key:0,onSubmitted:t[1]||(t[1]=function(e){return x.submitForm("saveMembershipDescription","editingExpertise")}),onCanceled:t[2]||(t[2]=function(e){return x.cancelForm("editingExpertise")}),"show-controls":E.editingExpertise},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(T,{ref:"membershipDescriptionFormRef",class:"mt-8",editing:E.editingExpertise,"onUpdate:editing":t[0]||(t[0]=function(e){return E.editingExpertise=e}),errors:E.errors},null,8,["editing","errors"])]})),_:1},8,["show-controls"])):Object(o["createCommentVNode"])("",!0)]})),_:1}),Object(o["createVNode"])(R,{label:"Scope",visible:N.group.isEp()},{default:Object(o["withCtx"])((function(){return[r,N.group.isEp()?(Object(o["openBlock"])(),Object(o["createBlock"])(F,{key:0,onSubmitted:t[4]||(t[4]=function(t){return e.$refs.groupGeneListRef.save()}),onCanceled:t[5]||(t[5]=function(t){return e.$refs.groupGeneListRef.cancel()}),"show-controls":E.editingGenes},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(N.groupGeneList),{ref:"groupGeneListRef",editing:E.editingGenes,"onUpdate:editing":t[3]||(t[3]=function(e){return E.editingGenes=e})},null,8,["editing"]))]})),_:1},8,["show-controls"])):Object(o["createCommentVNode"])("",!0),c,Object(o["createVNode"])(F,{visible:N.group.isEp(),onSubmitted:t[7]||(t[7]=function(e){return x.submitForm("saveScopeDescription","editingScopeDescription")}),onCanceled:t[8]||(t[8]=function(e){return x.cancelForm("editingScopeDescription")}),"show-controls":E.editingScopeDescription},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(A,{ref:"scopeDescriptionRef",editing:E.editingScopeDescription,"onUpdate:editing":t[6]||(t[6]=function(e){return E.editingScopeDescription=e}),errors:E.errors},null,8,["editing","errors"])]})),_:1},8,["visible","show-controls"])]})),_:1},8,["visible"]),Object(o["createVNode"])(R,{label:"Sustained Curation",visible:N.group.isEp(),class:"relative"},{default:Object(o["withCtx"])((function(){return[N.group.expert_panel.pilotSpecificationsIsApproved?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a)),N.group.expert_panel.pilotSpecificationsIsApproved?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(M,{key:1,variant:"info"},{default:Object(o["withCtx"])((function(){return[i]})),_:1})),Object(o["createVNode"])(F,{onSubmitted:t[9]||(t[9]=function(e){return x.submitForm("saveOngoingPlansForm")}),onCanceled:t[10]||(t[10]=function(e){return x.cancelForm()}),class:"pb-4",showControls:e.hasAnyPermission(["ep-applications-manage",["application-edit",N.group]])&&N.group.expert_panel.pilotSpecificationsIsApproved},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(N.ongoingPlansFormComponent),{ref:"ongoingPlansForm",errors:E.errors,readonly:!N.group.expert_panel.pilotSpecificationsIsApproved},null,8,["errors","readonly"]))]})),_:1},8,["showControls"]),N.group.isVcep()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",l,[u,Object(o["createVNode"])($,{group:N.group,readonly:!N.group.expert_panel.pilotSpecificationsIsApproved,class:"pb-2 mb-4 border-b"},null,8,["group","readonly"])])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["visible"]),Object(o["createVNode"])(R,{label:"Specifications",visible:N.group.isVcep()},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",s,[N.group.expert_panel.pilotSpecificationsIsApproved?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(M,{key:0,variant:"info"},{default:Object(o["withCtx"])((function(){return[d]})),_:1})),Object(o["createVNode"])(I,{readonly:!N.group.expert_panel.pilotSpecificationsIsApproved},null,8,["readonly"])])]})),_:1},8,["visible"]),Object(o["createVNode"])(R,{label:"Documents"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(P)]})),_:1}),Object(o["createVNode"])(R,{label:"Attestations",visible:N.group.isEp()},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(G,null,{default:Object(o["withCtx"])((function(){return[p]})),_:1}),N.group.isGcep()?(Object(o["openBlock"])(),Object(o["createBlock"])(L,{key:0,class:"pb-2 mb-4 border-b",disabled:!0})):Object(o["createCommentVNode"])("",!0),b,N.group.isVcep()?(Object(o["openBlock"])(),Object(o["createBlock"])(q,{key:1,class:"pb-2 mb-4 border-b",disabled:!0})):Object(o["createCommentVNode"])("",!0),m,Object(o["createVNode"])(H,{class:"pb-2 mb-4 border-b",disabled:!0})]})),_:1},8,["visible"]),Object(o["createVNode"])(R,{label:"Log",visible:e.hasPermission("groups-manage")||e.userInGroup(N.group)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(Y,{"log-entries":N.logEntries,"api-url":"/api/groups/".concat(N.group.uuid,"/activity-logs"),"log-updated":N.getLogEntries},null,8,["log-entries","api-url","log-updated"]),Object(o["createElementVNode"])("button",{class:"btn btn-xs mt-1",onClick:t[11]||(t[11]=function(){return N.getLogEntries&&N.getLogEntries.apply(N,arguments)})},"Refresh")]})),_:1},8,["visible"]),Object(o["createVNode"])(R,{label:"Admin",visible:e.hasPermission("groups-manage")},{default:Object(o["withCtx"])((function(){return[N.group.isApplying?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",j,[O,Object(o["createVNode"])(J,{application:N.group.expert_panel,class:"pb-4 border-b border-gray-300 mb-6"},null,8,["application"]),N.group.isEp()?(Object(o["openBlock"])(),Object(o["createBlock"])(z,{key:0,application:N.group.expert_panel,onStepApproved:N.getGroup},null,8,["application","onStepApproved"])):Object(o["createCommentVNode"])("",!0),f])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("section",g,[h,Object(o["createElementVNode"])("button",{class:"btn btn red",onClick:t[12]||(t[12]=function(){return x.initDelete&&x.initDelete.apply(x,arguments)})},"Delete Group")]),"production"!==e.$store.state.systemInfo.env?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",v,[y,N.group.isVcep()&&N.group.expert_panel.has_approved_pilot?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn",onClick:t[13]||(t[13]=function(){return x.fakeCspecPilotApproved&&x.fakeCspecPilotApproved.apply(x,arguments)})}," Fake a Pilot Approved Message ")):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["visible"])]})),_:1},8,["onTabChanged"]),w,k,(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(Q,{modelValue:N.showModal,"onUpdate:modelValue":t[14]||(t[14]=function(e){return N.showModal=e}),onClosed:x.handleModalClosed,title:this.$route.meta.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(K,{ref:"modalView",onSaved:x.hideModal,onCanceled:x.hideModal},null,8,["onSaved","onCanceled"])]})),_:1},8,["modelValue","onClosed","title"]),Object(o["createVNode"])(Q,{modelValue:E.showInfoEdit,"onUpdate:modelValue":t[19]||(t[19]=function(e){return E.showInfoEdit=e}),onClosed:t[20]||(t[20]=function(e){return E.showInfoEdit=!1}),title:"Edit Group Info",size:"sm"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(F,{onSubmitted:t[17]||(t[17]=function(t){return e.$refs.infoForm.save()}),onCanceled:t[18]||(t[18]=function(t){return e.$refs.infoForm.cancel()})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(W,{ref:"infoForm",onCanceled:t[15]||(t[15]=function(e){return E.showInfoEdit=!1}),onSaved:t[16]||(t[16]=function(e){return E.showInfoEdit=!1})},null,512)]})),_:1})]})),_:1},8,["modelValue"]),Object(o["createVNode"])(Q,{modelValue:E.showConfirmDelete,"onUpdate:modelValue":t[22]||(t[22]=function(e){return E.showConfirmDelete=e}),title:"Delete This Group?"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",C,[Object(o["createElementVNode"])("p",null," You are about to delete "+Object(o["toDisplayString"])(N.group.displayName)+" and all associated data. ",1),V]),Object(o["createVNode"])(Z,{"submit-text":"Delete this group.",onSubmitted:x.deleteGroup,onCanceled:t[21]||(t[21]=function(e){return E.showConfirmDelete=!1})},null,8,["onSubmitted"])]})),_:1},8,["modelValue"])]))])}var E=n("1da1"),x=(n("4de4"),n("d3b7"),n("ac1f"),n("5319"),n("96cf"),n("5502")),D=n("831e"),B=n("1874"),_=(n("4e82"),n("a4d3"),n("e01a"),{key:0,class:"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200"}),S={key:0,class:"flex space-x-1"},U=["onClick"],T=["onClick"],F=["innerHTML"];function R(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-edit"),l=Object(o["resolveComponent"])("icon-trash"),u=Object(o["resolveComponent"])("data-table"),s=Object(o["resolveComponent"])("log-entry-form"),d=Object(o["resolveComponent"])("modal-dialog"),p=Object(o["resolveComponent"])("activity-log-delete-confirmation");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[r.hasLogEntries?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:1,fields:r.fields,data:n.logEntries,sort:r.sort,"onUpdate:sort":t[0]||(t[0]=function(e){return r.sort=e})},{"cell-id":Object(o["withCtx"])((function(t){var n=t.item;return[e.hasPermission("groups-manage")?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",S,[Object(o["createElementVNode"])("button",{class:"btn btn-xs inline-block",onClick:function(e){return r.editLogEntry(n)}},[Object(o["createVNode"])(i,{width:"12"})],8,U),null===n.activity_type?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,onClick:function(e){return r.confirmDelete(n)},class:"btn btn-xs inline-block"},[Object(o["createVNode"])(l,{width:"12"})],8,T)):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)]})),"cell-description":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",{innerHTML:t.description,class:"links-blue"},null,8,F)]})),_:1},8,["fields","data","sort"])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",_," No log entries to display ")),Object(o["createVNode"])(d,{modelValue:r.editingEntry,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.editingEntry=e}),title:"Edit log entry"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{"log-entry":r.selectedEntry,"api-url":n.apiUrl,onSaved:r.closeEntryForm,onCanceled:r.closeEntryForm},null,8,["log-entry","api-url","onSaved","onCanceled"])]})),_:1},8,["modelValue"]),Object(o["createVNode"])(d,{modelValue:r.showDeleteConfirmation,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.showDeleteConfirmation=e}),title:"Delete this log entry?"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{logEntry:r.selectedEntry,"api-url":n.apiUrl,onCanceled:r.closeDeleteConfirmation,onDeleted:r.closeDeleteConfirmation},null,8,["logEntry","api-url","onCanceled","onDeleted"])]})),_:1},8,["modelValue"])])}var A=Object(o["createElementVNode"])("hr",null,null,-1);function M(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("rich-text-editor"),u=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{class:"log-entry-form",ref:"form-container"},{default:Object(o["withCtx"])((function(){return[A,Object(o["createVNode"])(i,{label:"Log Date",modelValue:r.newEntry.log_date,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.newEntry.log_date=e}),errors:r.errors.log_date,type:"date",ref:"logdate"},null,8,["modelValue","errors"]),Object(o["createVNode"])(i,{label:"Entry",errors:r.errors.entry},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:r.newEntry.entry,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.newEntry.entry=e})},null,8,["modelValue"])]})),_:1},8,["errors"]),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return r.cancel&&r.cancel.apply(r,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return r.save&&r.save.apply(r,arguments)})},"Save")]})),_:1})]})),_:1},512)}n("99af");var $=n("85fe"),I={name:"LogEntryForm",components:{RichTextEditor:$["default"]},props:{logEntry:{required:!1,default:function(){return{log_date:new Date,step:null,entry:""}}},apiUrl:{required:!0,type:String}},setup:function(e,t){var n=Object(o["ref"])({log_date:new Date,step:null,entry:""}),r=Object(o["ref"])({}),c=function(e){e&&e.created_at&&(n.value={id:e.id,log_date:new Date(Date.parse(e.created_at)),step:e.properties?e.properties.step:null,entry:e.description})},a=function(){n.value={log_date:new Date,step:null,entry:""}},i=function(){var o=Object(E["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(o.prev=0,!n.value.id){o.next=6;break}return o.next=4,Object(D["e"])("".concat(e.apiUrl,"/").concat(n.value.id),n.value);case 4:o.next=8;break;case 6:return o.next=8,Object(D["d"])(e.apiUrl,n.value);case 8:return o.next=10,Object(D["b"])(e.apiUrl);case 10:a(),t.emit("saved",n.value),o.next=19;break;case 14:if(o.prev=14,o.t0=o["catch"](0),!o.t0.response||422!=o.t0.response.status||!o.t0.response.data.errors){o.next=19;break}return r.value=o.t0.response.data.errors,o.abrupt("return");case 19:case"end":return o.stop()}}),o,null,[[0,14]])})));return function(){return o.apply(this,arguments)}}(),l=function(){a(),t.emit("canceled")};return Object(o["watch"])((function(){return e.logEntry}),(function(e){c(e)}),{immediate:!0}),{newEntry:n,errors:r,syncEntry:c,initNewEntry:a,save:i,cancel:l}},mounted:function(){}},P=n("6b0d"),G=n.n(P);const L=G()(I,[["render",M]]);var q=L,H=(n("b0c0"),Object(o["createElementVNode"])("p",null,"You are about to delete the following log entry:",-1)),Y={class:"border-y py-2"},J=["innerHTML"],z={key:0,class:"ml-4 mt-2 mb-4 text-gray-700 text-sm"},X=Object(o["createElementVNode"])("div",null,"This can not be undone. Are you sure you want to continue?",-1),K={key:0,class:"bg-red-200 text-red-900 rounded p-2 my-2"};function Q(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[H,Object(o["createElementVNode"])("div",Y,[Object(o["createElementVNode"])("blockquote",null,[Object(o["createElementVNode"])("div",{innerHTML:n.logEntry.description},null,8,J)]),n.logEntry.causer?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",z,"Logged by "+Object(o["toDisplayString"])(n.logEntry.causer.name)+", "+Object(o["toDisplayString"])(r.logDate),1)):Object(o["createCommentVNode"])("",!0)]),X,r.flattenedErrors.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",K,[Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.flattenedErrors,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t},Object(o["toDisplayString"])(e),1)})),128))])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(i,{onCanceled:t[0]||(t[0]=function(t){return e.$emit("canceled")}),onSubmitted:r.deleteLogEntry,submitText:"Delete Log Entry"},null,8,["onSubmitted"])])}n("0481"),n("4069"),n("07ac");var W=n("e328"),Z=n("033d"),ee={name:"ConfirmDeleteLogEntry",props:{logEntry:{required:!0,type:Object},apiUrl:{required:!0,type:String}},emits:["deleted","canceled"],setup:function(e,t){var n=Object(o["ref"])({}),r=Object(o["computed"])((function(){return Object(W["b"])(e.logEntry.properties.log_date)})),c=Object(o["computed"])((function(){return Object.values(n.value).flat()})),a=function(){var o=Object(E["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(D["a"])(e.apiUrl,e.logEntry.id);case 3:return t.emit("deleted"),o.next=6,Object(D["b"])(e.apiUrl);case 6:o.next=14;break;case 8:if(o.prev=8,o.t0=o["catch"](0),!Object(Z["a"])(o.t0)){o.next=13;break}return n.value=o.t0.response.data.errors,o.abrupt("return");case 13:n.value={a:o.t0.message};case 14:case"end":return o.stop()}}),o,null,[[0,8]])})));return function(){return o.apply(this,arguments)}}();return{errors:n,logDate:r,flattenedErrors:c,deleteLogEntry:a}}};n("8c58");const te=G()(ee,[["render",Q]]);var ne=te,oe=[{name:"created_at",label:"Created",sortName:"created_at",sortable:!0,type:Date},{name:"description",label:"Entry",sortable:!0,type:String},{name:"causer.name",label:"User",sortable:!0},{name:"id",label:"",sortable:!1}],re={components:{LogEntryForm:q,ActivityLogDeleteConfirmation:ne},props:{logEntries:{required:!0,type:Array},apiUrl:{required:!0,type:String}},setup:function(e){var t=Object(o["ref"])({field:"created_at",desc:!0}),n=Object(o["ref"])({}),r=Object(o["ref"])(!1),c=Object(o["computed"])((function(){return e.logEntries.length>0})),a=function(e){r.value=!0,n.value=e},i=function(){r.value=!1,n.value={}},l=Object(o["ref"])(!1),u=function(e){n.value=e,l.value=!0},s=function(){l.value=!1,n.value={}};return{fields:Object(o["ref"])(oe),sort:t,selectedEntry:n,editingEntry:r,hasLogEntries:c,editLogEntry:a,closeEntryForm:i,showDeleteConfirmation:l,confirmDelete:u,closeDeleteConfirmation:s}}};n("b5c7");const ce=G()(re,[["render",R]]);var ae=ce,ie={key:0,class:"p-4 my-4 mb-8 border rounded-xl bg-white"},le={class:"mb-2"},ue=Object(o["createTextVNode"])(" Application Summary "),se={key:0},de={class:"px-8"},pe={key:2},be=Object(o["createTextVNode"])("Approved"),me={key:0,class:"flex-1"},je={key:0,class:"mt-4"},Oe=Object(o["createElementVNode"])("button",{class:"btn blue btn-lg"},"Go to application",-1);function fe(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("requirements-badge"),l=Object(o["resolveComponent"])("icon-lock"),u=Object(o["resolveComponent"])("badge"),s=Object(o["resolveComponent"])("router-link");return n.group.isEp()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ie,[Object(o["createElementVNode"])("h2",le,[ue,a.applicationStarted&&n.group.isVcep()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",se," - "+Object(o["toDisplayString"])(this.currentMenuItem.title),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("ul",de,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.menu,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t,class:"py-1 flex justify-between border-b border-gray-300 my-2"},[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["flex justify-between",{"w-full":!a.isStep(e)}])},[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["w-56 text-lg",{"text-gray-400":a.isStep(e)&&e.isDisabled(n.group)}])},Object(o["toDisplayString"])(e.title),3),Object(o["createElementVNode"])("div",null,[a.isStep(e)?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,section:e},null,8,["section"])),a.isStep(e)&&e.isDisabled(n.group)?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,class:"inline text-gray-400",height:14,width:14})):Object(o["createCommentVNode"])("",!0),a.isStep(e)&&e.isComplete(n.group)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",pe,[Object(o["createVNode"])(u,{color:"green"},{default:Object(o["withCtx"])((function(){return[be]})),_:1})])):Object(o["createCommentVNode"])("",!0)])],2),a.isCurrentStep(e)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",me,[Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.sections,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t,class:"pb-2 flex justify-between my-2"},[Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(e.title),1),Object(o["createVNode"])(i,{section:e},null,8,["section"])])})),128))])])):Object(o["createCommentVNode"])("",!0)])})),128))]),e.hasAnyPermission(["ep-applications-manage",["application-edit",n.group]])?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",je,[n.group.uuid?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,to:a.applicationRoute},{default:Object(o["withCtx"])((function(){return[Oe]})),_:1},8,["to"])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)}var ge=n("3a9d"),he=n("5313"),ve={name:"ApplicationSummary",components:{RequirementsBadge:ge["a"]},props:{group:{required:!0,type:Object}},data:function(){return{}},computed:{applicationStarted:function(){return!0},application:function(){return this.group.isVcep()?he["c"]:he["a"]},currentStep:function(){return this.group.expert_panel.current_step},applicationRoute:function(){return{name:"GroupApplication",params:{uuid:this.group.uuid},hash:"#".concat(this.currentMenuItem.id)}},currentMenuItem:function(){return this.application.getStep(this.group.expert_panel.current_step)},menu:function(){return this.application.steps.length>1?this.application.steps:this.application.steps[0].sections}},methods:{isStep:function(e){return Boolean(e.sections)},isCurrentStep:function(e){return!(!this.isStep(e)||this.application.getStep(this.group.expert_panel.current_step)!=e)}}};const ye=G()(ve,[["render",fe]]);var we=ye,ke=n("8fec"),Ce=n("3926"),Ve=n("a266"),Ne=n("abba"),Ee=n("324b"),xe=n("206f"),De=n("6ca3"),Be=n("268c"),_e=(n("a15b"),n("d81d"),{class:"pb-4"}),Se={class:"flex justify-between items-center"},Ue={key:0},Te=Object(o["createElementVNode"])("strong",null,"Chairs:",-1),Fe={key:0},Re={key:1,class:"text-gray-500"},Ae=Object(o["createElementVNode"])("strong",null,"Coordinators:",-1),Me={key:0},$e={key:1,class:"text-gray-500"};function Ie(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("group-breadcrumbs"),l=Object(o["resolveComponent"])("badge"),u=Object(o["resolveComponent"])("note"),s=Object(o["resolveComponent"])("dictionary-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("header",_e,[Object(o["createVNode"])(i),Object(o["createElementVNode"])("h1",Se,[Object(o["createElementVNode"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.group.displayName)+" ",1),Object(o["createVNode"])(l,{color:n.group.statusColor,class:"text-xs"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.group.status?n.group.status.name:"loading..."),1)]})),_:1},8,["color"]),e.hasRole("super-user")?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,class:"font-normal"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(" group.id: "+Object(o["toDisplayString"])(n.group.id)+" ",1),n.group.isEp()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Ue," | expertPanel.id: "+Object(o["toDisplayString"])(n.group.expert_panel.id),1)):Object(o["createCommentVNode"])("",!0)]})),_:1})):Object(o["createCommentVNode"])("",!0)]),e.hasAnyPermission(["groups-manage",["info-edit",n.group]])?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=function(t){return e.$emit("showEdit")}),class:"btn btn-xs"}," Edit Group Info ")):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(s,{label:"Chairs:"},{label:Object(o["withCtx"])((function(){return[Te]})),default:Object(o["withCtx"])((function(){return[n.group.chairs.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Fe,Object(o["toDisplayString"])(n.group.chairs.map((function(e){return e.person.name})).join(", ")),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Re," None assigned "))]})),_:1}),Object(o["createVNode"])(s,{label:"Coordinators:"},{label:Object(o["withCtx"])((function(){return[Ae]})),default:Object(o["withCtx"])((function(){return[a.coordinators.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Me,Object(o["toDisplayString"])(a.coordinators.map((function(e){return e.person.name})).join(", ")),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",$e," None assigned "))]})),_:1})])}var Pe=n("ae23"),Ge={name:"GroupDetailHeader",props:{group:{type:Pe["a"],required:!0}},emits:["showEdit"],computed:{coordinators:function(){return this.group?this.group.members.filter((function(e){return e.hasRole("coordinator")})):[]}}};const Le=G()(Ge,[["render",Ie]]);var qe=Le,He=n("0945"),Ye=n("4d1a"),Je=n("a8af"),ze=n("62a2"),Xe=n("1d7f");function Ke(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("document-list");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(i,{documents:a.displayDocuments,documentUpdater:a.updateDocument,documentCreator:a.createDocument,documentDeleter:a.deleteDocument,canManage:a.canManageDocuments},null,8,["documents","documentUpdater","documentCreator","documentDeleter","canManage"])])}var Qe={class:"flex justify-between py-2"},We={class:"flex space-x-2"},Ze=Object(o["createTextVNode"])(" Search: "),et=Object(o["createTextVNode"])(" Type:   "),tt=Object(o["createElementVNode"])("option",{value:null},"Any",-1),nt=["value"],ot=["onClick"],rt={class:"note"},ct={key:0},at={key:1},it=Object(o["createElementVNode"])("button",{class:"btn btn-xs"},"…",-1),lt=Object(o["createTextVNode"])("Download"),ut=Object(o["createTextVNode"])("Update"),st=Object(o["createTextVNode"])("Delete"),dt={class:"px-4 pb-4 border"},pt={key:0,class:"flex space-x-2 pt-2 border-t"},bt=["onClick"],mt=["onClick"],jt=["onClick"],Ot={key:0},ft={key:0,class:"mb-3"},gt=Object(o["createElementVNode"])("p",null,"Are you sure you want to continue?",-1);function ht(e,t,n,r,c,a){var i=this,l=Object(o["resolveComponent"])("icon-cheveron-right"),u=Object(o["resolveComponent"])("icon-cheveron-down"),s=Object(o["resolveComponent"])("dropdown-item"),d=Object(o["resolveComponent"])("dropdown-menu"),p=Object(o["resolveComponent"])("object-dictionary"),b=Object(o["resolveComponent"])("data-table"),m=Object(o["resolveComponent"])("document-edit-form"),j=Object(o["resolveComponent"])("modal-dialog"),O=Object(o["resolveComponent"])("document-upload-form"),f=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["renderSlot"])(e.$slots,"heading",{},(function(){return[Object(o["createElementVNode"])("div",Qe,[Object(o["createElementVNode"])("div",We,[Object(o["createElementVNode"])("label",null,[Ze,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",placeholder:"Fitler","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.keyword=e}),class:"sm"},null,512),[[o["vModelText"],c.keyword]])]),Object(o["createElementVNode"])("label",null,[et,Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.filterType=e})},[tt,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.documentTypes,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{key:e.id,value:e.id},Object(o["toDisplayString"])(e.long_name),9,nt)})),128))],512),[[o["vModelSelect"],c.filterType]])])]),n.canManage?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn btn-xs",onClick:t[2]||(t[2]=function(){return a.initUpload&&a.initUpload.apply(a,arguments)})},"Upload")):Object(o["createCommentVNode"])("",!0)])]})),Object(o["createVNode"])(b,{fields:c.fields,data:a.filteredDocuments,sort:c.sort,"onUpdate:sort":t[3]||(t[3]=function(e){return c.sort=e}),detailRows:!0},{"cell-cheveron":Object(o["withCtx"])((function(e){var t=e.item;return[t.metadata?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,onClick:Object(o["withModifiers"])((function(e){return a.toggleItemDetails(t)}),["stop"]),class:"w-9 align-center block -mx-3"},[t.showDetails?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,class:"m-auto cursor-pointer"})),t.showDetails?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:1,class:"m-auto cursor-pointer"})):Object(o["createCommentVNode"])("",!0)],8,ot)):Object(o["createCommentVNode"])("",!0)]})),"cell-filename":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.filename)+" ",1),Object(o["createElementVNode"])("span",rt,[t.type.is_versioned&&t.version?(Object(o["openBlock"])(),Object(o["createElementBlock"])("em",ct,"(version "+Object(o["toDisplayString"])(t.version)+")",1)):Object(o["createCommentVNode"])("",!0),t.is_final?(Object(o["openBlock"])(),Object(o["createElementBlock"])("em",at," FINAL")):Object(o["createCommentVNode"])("",!0)])]})),"cell-actions":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createVNode"])(d,{hideCheveron:""},{label:Object(o["withCtx"])((function(){return[it]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{onClick:function(e){return a.initDownload(t)}},{default:Object(o["withCtx"])((function(){return[lt]})),_:2},1032,["onClick"]),n.canManage?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,onClick:function(e){return a.initUpdate(t)}},{default:Object(o["withCtx"])((function(){return[ut]})),_:2},1032,["onClick"])):Object(o["createCommentVNode"])("",!0),n.canManage?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:1,onClick:function(e){return a.initDelete(t)}},{default:Object(o["withCtx"])((function(){return[st]})),_:2},1032,["onClick"])):Object(o["createCommentVNode"])("",!0)]})),_:2},1024)]})),detail:Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",dt,[Object(o["createVNode"])(p,{obj:t.metadata},null,8,["obj"]),n.canManage?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",pt,[Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.initDownload(t)}},"Download",8,bt),Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.initUpdate(t)}},"Update",8,mt),Object(o["createElementVNode"])("button",{class:"btn btn-xs red",onClick:function(e){return a.initDelete(t)}},"Delete",8,jt)])):Object(o["createCommentVNode"])("",!0)])]})),_:1},8,["fields","data","sort"]),(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(j,{modelValue:c.showEditForm,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.showEditForm=e}),title:"Update ".concat(c.activeDocument.filename)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{document:c.activeDocument,"save-function":i.commitUpdate},null,8,["document","save-function"])]})),_:1},8,["modelValue","title"]),Object(o["createVNode"])(j,{modelValue:c.showUploadForm,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.showUploadForm=e}),title:"Upload a new document"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,{"save-function":i.commitCreate},null,8,["save-function"])]})),_:1},8,["modelValue"]),Object(o["createVNode"])(j,{modelValue:c.showDeleteConfirmation,"onUpdate:modelValue":t[6]||(t[6]=function(e){return c.showDeleteConfirmation=e}),title:"You are about to delete ".concat(c.activeDocument.filename)},{default:Object(o["withCtx"])((function(){return[c.activeDocument?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ot,[c.activeDocument.is_final?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",ft," This version has been tagged as the final version of the document. ")):Object(o["createCommentVNode"])("",!0),gt,Object(o["createVNode"])(f,{"submit-text":"Delete Document",onCanceled:a.cancelDelete,onSubmitted:a.commitDelete},null,8,["onCanceled","onSubmitted"])])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["modelValue","title"])]))])}var vt=n("2909"),yt=(n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("466d"),n("db04")),wt={type:"file",ref:"fileInput"},kt=Object(o["createElementVNode"])("option",{value:null},"Select...",-1),Ct=["value"];function Vt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("button-row"),u=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{label:"Document",errors:c.errors.file},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("input",wt,null,512)]})),_:1},8,["errors"]),Object(o["createVNode"])(i,{label:"Type",errors:c.errors.document_type_id},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.newDocument.document_type_id=e})},[kt,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.documentTypes,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{value:e.id,key:e.id},Object(o["toDisplayString"])(e.long_name),9,Ct)})),128))],512),[[o["vModelSelect"],c.newDocument.document_type_id]])]})),_:1},8,["errors"]),Object(o["createVNode"])(i,{errors:c.errors.notes,label:"Notes"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.newDocument.notes=e}),cols:"30",rows:"10"},null,512),[[o["vModelText"],c.newDocument.notes]])]})),_:1},8,["errors"]),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn white",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]})),_:1})}var Nt=n("5530"),Et=(n("159b"),n("b64b"),{props:{saveFunction:{type:Function,required:!0}},data:function(){return{newDocument:{file:null,document_type_id:this.documentTypeId,notes:null},errors:{}}},computed:Object(Nt["a"])(Object(Nt["a"])({},Object(x["c"])({documentTypes:function(e){return e.doctypes.items}})),{},{group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.expert_panel},isReviewed:function(){return Boolean(this.newDocument.date_reviewed)},documentType:function(){return 0==this.documentTypes.length?{}:this.$store.getters["doctypes/getItemById"](this.documentTypeId)}}),methods:{save:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=new FormData,Object.keys(e.newDocument).forEach((function(t){var o=e.newDocument[t];null!=o&&n.append(t,o)})),n.append("file",e.$refs.fileInput.files[0]),t.next=6,e.saveFunction(n);case 6:e.clearForm(),e.$emit("saved"),t.next=15;break;case 10:if(t.prev=10,t.t0=t["catch"](0),!Object(yt["b"])(t.t0)){t.next=15;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},cancel:function(){this.clearForm(),this.$emit("canceled")},clearForm:function(){this.initNewDocument(),this.clearErrors()},initNewDocument:function(){this.$refs.fileInput.value=null,this.newDocument={file:null,document_type_id:this.documentTypeId,notes:null}},clearErrors:function(){this.errors={}}},mounted:function(){this.$store.dispatch("doctypes/getItems")}});const xt=G()(Et,[["render",Vt]]);var Dt=xt,Bt=["value"];function _t(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("input-row"),u=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{label:"File"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.document.filename),1)]})),_:1}),Object(o["createVNode"])(l,{label:"Type",errors:c.errors.document_type_id},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.docProxy.document_type_id=e})},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.documentTypes,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{value:e.id,key:e.id},Object(o["toDisplayString"])(e.long_name),9,Bt)})),128))],512),[[o["vModelSelect"],c.docProxy.document_type_id]])]})),_:1},8,["errors"]),Object(o["createVNode"])(l,{errors:c.errors.notes,label:"Notes"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.docProxy.notes=e}),cols:"30",rows:"10"},null,512),[[o["vModelText"],c.docProxy.notes]])]})),_:1},8,["errors"]),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]})),_:1})}n("e9c4");var St={name:"DocumentEditForm",props:{document:{required:!0,type:Object},saveFunction:{required:!0,type:Function}},emits:["saved"],data:function(){return{docProxy:{},errors:{}}},computed:Object(Nt["a"])({},Object(x["c"])({documentTypes:function(e){return e.doctypes.items}})),watch:{document:{immediate:!0,handler:function(){this.docProxy=JSON.parse(JSON.stringify(this.document))}}},methods:{cancel:function(){this.docProxy={},this.$emit("canceled")},save:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e.saveFunction(e.docProxy),e.$emit("saved"),t.next=9;break;case 5:throw t.prev=5,t.t0=t["catch"](0),Object(yt["b"])(t.t0)&&(e.errors=t.t0.response.data.errors),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))()}},mounted:function(){this.$store.dispatch("doctypes/getItems")}};const Ut=G()(St,[["render",_t]]);var Tt=Ut,Ft={name:"DocumentList",components:{DocumentUploadForm:Dt,DocumentEditForm:Tt},props:{documents:{type:Array,required:!0},documentCreator:{type:Function,required:!1},documentUpdater:{type:Function,required:!1},documentDeleter:{type:Function,required:!1},canManage:{type:Boolean,default:!1}},data:function(){return{fields:[{name:"cheveron",label:"",sortable:!1},{name:"filename",label:"File",type:String,sortable:!0},{name:"type.long_name",label:"Type",type:String,sortable:!0},{name:"notes",type:String,sortable:!0},{name:"actions",label:"",type:String,sortable:!1}],sort:{field:"filename",desc:!1},keyword:null,filterType:null,documentTypes:[],activeDocument:{type:{}},showDeleteConfirmation:!1,showEditForm:!1,showUploadForm:!1}},computed:{filteredDocuments:function(){var e=this,t=Object(vt["a"])(this.documents);if(this.keyword){var n=new RegExp(".*"+this.keyword+".*","i");t=t.filter((function(e){return e.filename.match(n)||e.notes&&e.notes.match(n)||e.type.name.match(n)}))}return this.filterType&&(t=t.filter((function(t){return t.document_type_id==e.filterType}))),t}},methods:{toggleItemDetails:function(e){e.showDetails=!e.showDetails},initDownload:function(e){window.location=e.download_url},initUpdate:function(e){this.showEditForm=!0,this.activeDocument=e},commitUpdate:function(e){console.log("commitUpdate",e),this.documentUpdater?this.documentUpdater(e):alert("we need a default document upload function"),this.showUploadForm=!1},initDelete:function(e){this.activeDocument=e,this.showDeleteConfirmation=!0},cancelDelete:function(){this.showDeleteConfirmation=!1,this.resetActiveDocument()},commitDelete:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.documentDeleter?e.documentDeleter(e.activeDocument):alert("we need to add a default document deleter."),e.showDeleteConfirmation=!1,e.resetActiveDocument();case 3:case"end":return t.stop()}}),t)})))()},initUpload:function(){this.showUploadForm=!0},commitCreate:function(e){console.log("commitCreate",this.documentCreator),this.documentCreator?this.documentCreator(e):alert("we need a default document upload function"),this.showUploadForm=!1},resetActiveDocument:function(){this.activeDocument={type:{}}}},mounted:function(){var e=this;yt["a"].get("/api/document-types").then((function(t){return e.documentTypes=t.data}))}};const Rt=G()(Ft,[["render",ht]]);var At=Rt,Mt={name:"GroupDocuments",components:{DocumentList:At},props:{},data:function(){return{}},computed:{group:{get:function(){return this.$store.getters["groups/currentItemOrNew"]}},displayDocuments:function(){return this.group.documents},canManageDocuments:function(){return this.hasAnyPermission(["groups-manage","ep-applications-manage",["info-edit",this.group]])}},methods:{updateDocument:function(e){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.canManageDocuments){n.next=3;break}return t.$store.pushError("Permission denied"),n.abrupt("return");case 3:return n.next=5,t.$store.dispatch("groups/updateDocument",{group:t.group,document:e});case 5:case"end":return n.stop()}}),n)})))()},createDocument:function(e){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.canManageDocuments){n.next=3;break}return t.$store.pushError("Permission denied"),n.abrupt("return");case 3:return n.next=5,t.$store.dispatch("groups/addDocument",{group:t.group,data:e});case 5:case"end":return n.stop()}}),n)})))()},deleteDocument:function(e){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.canManageDocuments){n.next=3;break}return t.$store.pushError("Permission denied"),n.abrupt("return");case 3:return n.next=5,t.$store.dispatch("groups/deleteDocument",{group:t.group,document:e});case 5:case"end":return n.stop()}}),n)})))()}}};const $t=G()(Mt,[["render",Ke]]);var It=$t,Pt=n("4f50"),Gt=n("f8c8"),Lt=n("2242"),qt=n("f142"),Ht={name:"GroupDetail",components:{ActivityLog:ae,ApplicationSummary:we,AttestationGcep:ke["a"],AttestationNhgri:Ce["a"],AttestationReanalysis:Ve["a"],CspecSummary:Ne["a"],GroupDocuments:It,GroupForm:Be["a"],GroupDetailHeader:qe,EvidenceSummaries:Ee["a"],GcepGeneList:xe["a"],GcepOngoingPlansForm:De["a"],MemberList:He["a"],MembershipDescriptionForm:Ye["a"],ScopeDescriptionForm:Je["a"],VcepGeneList:ze["a"],VcepOngoingPlansForm:Xe["a"],AnnualUpdateAlert:Pt["a"],StepTabs:Gt["a"],ProgressChart:Lt["a"],SustainedCurationReviewAlert:qt["default"]},props:{uuid:{type:String,required:!0}},data:function(){return{showInfoEdit:!1,editingExpertise:!1,editingScopeDescription:!1,editingGenes:!1,showConfirmDelete:!1,ongoingPlansErrors:{},errors:{}}},setup:function(e){var t=Object(x["d"])(),n=Object(o["ref"])(!1),r=Object(o["computed"])({get:function(){return t.getters["groups/currentItemOrNew"]},set:function(e){t.commit("groups/addItem",e)}}),c=Object(o["computed"])((function(){return r.value.isEp()?r.value.isVcep()?ze["a"]:xe["a"]:null})),a=Object(o["computed"])((function(){return r.value.isVcep()?Xe["a"]:De["a"]})),i=function(){var t=Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(D["b"])("/api/groups/".concat(e.uuid,"/activity-logs"));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){t.dispatch("groups/find",e.uuid).then((function(){t.commit("groups/setCurrentItemIndexByUuid",e.uuid),r.value.isEp()&&(t.dispatch("groups/getGenes",r.value),t.dispatch("groups/getDocuments",r.value),r.value.isVcep()&&t.dispatch("groups/getEvidenceSummaries",r.value),t.dispatch("groups/getPendingTasks",r.value))}))},u=Object(o["computed"])((function(){return r.value.pendingTasks&&r.value.pendingTasks.filter((function(e){return 1===e.task_type_id})).length>0}));return Object(o["onMounted"])(Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l();case 1:case"end":return e.stop()}}),e)})))),{group:r,groupGeneList:c,showModal:n,ongoingPlansFormComponent:a,logEntries:D["c"],needsToReviewSustainedCuration:u,getLogEntries:i,getGroup:l}},watch:{$route:function(){this.showModal=!!this.$route.meta.showModal&&Boolean(this.$route.meta.showModal)}},methods:{hideModal:function(){this.$router.replace({name:"GroupDetail",params:{uuid:this.uuid}})},handleModalClosed:function(e){this.clearModalForm(e),this.$router.push({name:"GroupDetail",params:{uuid:this.uuid}})},clearModalForm:function(){"function"===typeof this.$refs.modalView.clearForm&&this.$refs.modalView.clearForm()},showEdit:function(){this.showInfoEdit=!0},cancelForm:function(e){this[e]=!1,this.errors={},this.revertGroupChanges()},submitForm:function(e,t){var n=this;return Object(E["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,n[e].apply(n.group);case 3:n[t]=!1,o.next=12;break;case 6:if(o.prev=6,o.t0=o["catch"](0),!Object(yt["b"])(o.t0)){o.next=11;break}return n.errors=o.t0.response.data.errors,o.abrupt("return");case 11:throw o.t0;case 12:case"end":return o.stop()}}),o,null,[[0,6]])})))()},saveMembershipDescription:function(){var e=this;return this.$store.dispatch("groups/membershipDescriptionUpdate",{uuid:this.group.uuid,membershipDescription:this.group.expert_panel.membership_description}).then((function(){e.$store.commit("pushSuccess","Description of expertise updated.")}))},saveScopeDescription:function(){var e=this;return this.$store.dispatch("groups/scopeDescriptionUpdate",{uuid:this.group.uuid,scopeDescription:this.group.expert_panel.scope_description}).then((function(t){return e.$store.commit("pushSuccess","Description of scope updated."),t}))},saveOngoingPlansForm:function(){var e=this,t=this.group,n=t.uuid,o=t.expert_panel;return this.$store.dispatch("groups/curationReviewProtocolUpdate",{uuid:n,expertPanel:o}).then((function(){e.$store.commit("pushSuccess","Curation review protocol updated.")}))},revertGroupChanges:function(){var e=this;return this.errors={},this.$store.dispatch("groups/find",this.group.uuid).then((function(){e.$store.commit("pushInfo","Update canceled.")}))},handleTabChange:function(e){"Log"==e&&Object(B["b"])("groups-manage")&&this.getLogEntries()},initDelete:function(){this.showConfirmDelete=!0},deleteGroup:function(){this.$store.dispatch("groups/delete",this.group.uuid),this.$store.commit("pushSuccess","Group deleted."),this.$router.push({name:"GroupList"})},fakeCspecPilotApproved:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("fake-pilot-approved"),t.prev=1,t.next=4,yt["a"].post("/api/groups/".concat(e.uuid,"/dev/fake-pilot-approved"));case 4:e.$store.dispatch("groups/getPendingTasks",e.group),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),418==t.t0.response.status&&e.$store.commit("pushError",t.t0.response.data);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()}},mounted:function(){this.showModal=Boolean(this.$route.meta.showModal),this.showConfirmDelete=!1},beforeUnmount:function(){this.$store.commit("groups/clearCurrentItem")}};const Yt=G()(Ht,[["render",N]]);t["default"]=Yt},b5c7:function(e,t,n){"use strict";n("8067")}}]);
//# sourceMappingURL=group-detail.8badfd73.js.map