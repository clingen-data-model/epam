{"version":3,"sources":["webpack:///./src/components/log_entries/ActivityLog.vue?4303","webpack:///./src/components/people/PersonDetail.vue","webpack:///./src/components/people/MembershipList.vue","webpack:///./src/components/people/MembershipList.vue?3648","webpack:///./src/components/people/PersonMergeForm.vue","webpack:///./src/components/people/PersonMergeForm.vue?73e4","webpack:///./src/components/people/PersonMailLog.vue","webpack:///./src/components/people/PersonMailLog.vue?d1af","webpack:///./src/components/people/PersonDetail.vue?a770","webpack:///./src/adapters/log_entry_repository.js","webpack:///./src/components/log_entries/ActivityLogDeleteConfirmation.vue?655e","webpack:///./src/components/log_entries/ActivityLog.vue","webpack:///./src/components/log_entries/ActivityLogEntryForm.vue","webpack:///./src/components/log_entries/ActivityLogEntryForm.vue?c2e6","webpack:///./src/components/log_entries/ActivityLogDeleteConfirmation.vue","webpack:///./src/components/log_entries/ActivityLogDeleteConfirmation.vue?5cdc","webpack:///./src/components/log_entries/ActivityLog.vue?e3e2"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_component_profile_picture","person","_ctx","style","_component_router_link","to","name","_component_note","_toDisplayString","id","_createBlock","$props","_component_icon_edit","width","heigh","_component_dictionary_row","label","_hoisted_6","email","_hoisted_7","institution","_component_tabs_container","_component_tab_item","_hoisted_8","_component_membership_list","_hoisted_9","_component_person_profile","_component_coi_list","visible","first_name","_component_refresh_button","loading","$data","onClick","$options","_component_person_mail_log","mail","_hoisted_12","_component_activity_log","log-entries","$setup","api-url","uuid","log-updated","_hoisted_14","_Teleport","_component_modal_dialog","$event","title","meta","_component_router_view","_hoisted_15","_hoisted_16","_hoisted_17","_component_button_row","submit-text","onSubmitted","onCanceled","submit-variant","_component_person_merge_form","obsolete","onSaved","_component_data_table","fields","data","sort","rowClickHandler","row-class","props","type","Object","required","field","desc","String","sortable","resolveValue","item","roles","map","r","join","permissions","p","Date","computed","memberships","this","m","group","Group","methods","goToGroup","$router","push","params","__exports__","_hoisted_1","_component_input_row","vertical","_component_person_search_select","allow-add","errors","authority_id","authority","default","emits","authorityCopy","obsoleteCopy","watch","immediate","handler","attributes","commitMerge","$store","dispatch","authorityId","obsoleteIds","$emit","isValidationError","response","cancelMerge","obsoleteId","length","_Fragment","_renderList","key","_hoisted_2","created_at","_hoisted_3","i","address","cc","_hoisted_4","_hoisted_5","bcc","subject","_hoisted_10","innerHTML","body","_hoisted_13","_component_custom_email_form","mail-data","onSent","Array","currentEmail","showResendDialog","initResend","cleanupResend","components","TabsContainer","MembershipList","PersonProfile","PersonMergeForm","CoiList","ActivityLog","PersonMailLog","ProfilePicture","showDeleteConfirmation","showMergeForm","mailLoading","logsLoading","coordinatesPerson","getLogEntries","getMailLog","mapGetters","showModal","get","$route","set","value","sortedMailLog","mailLog","a","b","parse","initDelete","commitDelete","go","cancelDelete","initMerge","handleMerged","handleMergeCanceled","fetchEntries","setup","formatDate","logEntries","render","_entries","ref","apiUrl","api","then","saveEntry","entryData","post","updateEntry","put","entryIdx","findIndex","entry","deleteEntry","entryId","delete","splice","cell-id","_withCtx","activity_type","_component_icon_trash","cell-description","description","_component_log_entry_form","log-entry","_component_activity_log_delete_confirmation","logEntry","onDeleted","store","useStore","newEntry","log_date","toISOString","step","getters","syncEntry","initNewEntry","save","status","cancel","causer","err","idx","submitText","context","logDate","flattenedErrors","values","flat","deleteLogEntry","emit","is_validation_error","message","sortName","colspan","hideHeader","formatTime","LogEntryForm","ActivityLogDeleteConfirmation","selectedEntry","editingEntry","hasLogEntries","editLogEntry","closeEntryForm","confirmDelete","closeDeleteConfirmation"],"mappings":"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","file":"js/chunk-39f36daa.abadbb34.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ActivityLog.vue?vue&type=style&index=0&id=29e4205d&lang=postcss\"","<template>\n    <div>\n        <header class=\"pb-4\">\n            <div class=\"flex space-x-4\">\n                \n                <profile-picture :person=\"person\" style=\"width: 155px\" class=\"rounded-lg\" />\n\n                <div class=\"flex-1\">\n                    <router-link class=\"note\" to=\"/people\">People</router-link>\n                    <h1 class=\"flex justify-between items-center\">\n                        <div>\n                            {{person.name}}\n                            <note>ID: {{person.id}}</note>\n                        </div>\n                        <router-link \n                            :to=\"`/people/${uuid}/edit`\"\n                            class=\"btn btn-xs flex-grow-0\"\n                            v-if=\"(hasPermission('people-manage') || userIsPerson(person)) || coordinatesPerson(person)\"\n                        >\n                            <icon-edit width=\"16\" heigh=\"16\" />\n                        </router-link>\n\n                    </h1>\n                    <dictionary-row label=\"Email\">\n                        <template v-slot:label><strong>Email:</strong></template>\n                        {{person.email}}\n                    </dictionary-row>\n                    <dictionary-row label=\"Institution\">\n                        <template v-slot:label><strong>Institution:</strong></template>\n                        {{person.institution ? person.institution.name : null}}\n                    </dictionary-row>\n                </div>\n            </div>\n        </header>\n        <tabs-container>\n            <tab-item label=\"groups\">\n                <h2>Groups</h2>\n                <membership-list :person=\"person\"></membership-list>\n            </tab-item>\n            <tab-item label=\"Info\">\n                <h2>Profile</h2>\n                <person-profile :person=\"person\"></person-profile>\n            </tab-item>\n            <tab-item label=\"Conflict of Interest\">\n                <coi-list :person=\"person\"></coi-list>\n            </tab-item>\n            <!-- <tab-item label=\"Documents\">\n                docs\n            </tab-item> -->\n            <!-- <tab-item label=\"Training &amp; Attestations\">\n            </tab-item> -->\n\n            <tab-item label=\"Email Log\" :visible=\"hasPermission('people-manage') || userIsPerson(person) || coordinatesPerson(person)\">\n                <header class=\"flex space-x-4 items-center\">\n                    <h2>Mail sent to {{person.first_name}}</h2>\n                    <refresh-button :loading=\"mailLoading\" @click=\"getMailLog\"/>\n                </header>\n                <person-mail-log :person=\"person\" :mail=\"sortedMailLog\"></person-mail-log>\n            </tab-item>\n\n            <tab-item label=\"Log\" :visible=\"hasPermission('people-manage') || coordinatesPerson(person)\">\n                <div class=\"flex space-x-4 items-center\">\n                    <h2>Log Entries</h2>\n                    <refresh-button :loading=\"logsLoading\" @click=\"getLogEntries\"/>\n                </div>\n                <activity-log\n                    :log-entries=\"logEntries\"\n                    :api-url=\"`/api/people/${person.uuid}/activity-logs`\"\n                    v-bind:log-updated=\"getLogEntries\"\n                ></activity-log>\n            </tab-item> \n\n            <tab-item label=\"Admin\" :visible=\"hasPermission('people-manage')\">\n                <section class=\"border my-4 p-4 bg-red-100 border-red-200 rounded\">\n                <h2 class=\"mb-4 text-red-800\">\n                    Here be dragons. Proceed with caution.\n                </h2>\n                <p><button class=\"btn btn red\" @click=\"initMerge\">Merge Person into another</button></p>\n                <p><button class=\"btn btn red\" @click=\"initDelete\">Delete Person</button></p>\n                </section>\n            </tab-item>\n\n        </tabs-container>\n\n        <teleport to=\"body\">\n            <modal-dialog v-model=\"showModal\" :title=\"$route.meta.title\">\n                <router-view name=\"modal\"></router-view>\n            </modal-dialog>\n            <modal-dialog :title=\"`You are about to delete ${person.name}`\" v-model=\"showDeleteConfirmation\">\n                <p>You are about to delete this person.  All related data will also be deleted including:</p>\n                <ul class=\"list-disc pl-6\">\n                    <li>User record, system roles, and system permissions (if account is activated)</li>\n                    <li>Invite</li>\n                    <li>Group Memberships and group roles (if any)</li>\n                </ul>\n                <div class=\"border my-4 px-2 py-1 font-bold bg-red-100 border-red-200 rounded text-red-800\">\n                    This cannot be undone.\n                </div>\n                <button-row \n                    :submit-text=\"`Delete ${person.name}`\" \n                    @submitted=\"commitDelete\"  \n                    @canceled=\"cancelDelete\" \n                    submit-variant=\"red\"\n                />\n            </modal-dialog>\n            <modal-dialog :title=\"`Merge ${person.name} into another person`\" v-model=\"showMergeForm\">\n                <person-merge-form :obsolete=\"person\" @saved=\"handleMerged\" @canceled=\"handleMergeCanceled\"></person-merge-form>\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex'\nimport {formatDateTime as formatDate} from '@/date_utils'\nimport { logEntries, fetchEntries } from \"@/adapters/log_entry_repository\";\n\nimport TabsContainer from '../TabsContainer.vue'\nimport MembershipList from './MembershipList.vue'\nimport PersonProfile from '@/components/people/PersonProfile.vue'\nimport PersonMergeForm from '@/components/people/PersonMergeForm.vue'\nimport CoiList from '@/components/people/CoiList.vue'\nimport ActivityLog from \"@/components/log_entries/ActivityLog\";\nimport PersonMailLog from \"@/components/people/PersonMailLog\";\nimport ProfilePicture from \"@/components/people/ProfilePicture\";\n\n\nexport default {\n    name: 'PersonDetail',\n    components: { \n        TabsContainer,\n        MembershipList,\n        PersonProfile,\n        PersonMergeForm,\n        CoiList,\n        ActivityLog,\n        PersonMailLog,\n        ProfilePicture,\n    },\n    props: {\n        uuid: {\n            required: true,\n            type: String\n        }\n    },\n    data() {\n        return {\n            showDeleteConfirmation: false,\n            showMergeForm: false,\n            mailLoading: false,\n            logsLoading: false,\n        }\n    },\n    watch: {\n        uuid: {\n            immediate: true,\n            handler: async function () {\n                await this.$store.dispatch('people/getPerson', {uuid: this.uuid});\n                if (this.coordinatesPerson(this.person)) {\n                    this.getLogEntries();\n                    this.getMailLog();\n                }\n            }\n        },\n        'person.memberships': function (to) {\n            if (to.length > 0) {\n                this.getLogEntries();\n                this.getMailLog();\n            }\n        }\n    },\n    computed: {\n        ...mapGetters({\n            person: 'people/currentItem'\n        }),\n        showModal: {\n            get() {\n                return this.$route.meta.showModal\n            },\n            set(value) {\n                if (value) {\n                    this.$router.push({name: 'PersonEdit', params: {uuid: this.person.uuid}})\n                }\n                this.$router.push({name: 'PersonDetail', params: {uuid: this.person.uuid}})\n            }\n        },\n        sortedMailLog () {\n            return [...this.person.mailLog].sort((a,b) => {\n                if (a.created_at == b.created_at) {\n                    return 0;\n                }\n                return (Date.parse(a.created_at) > Date.parse(b.created_at))\n                    ? -1 : 1;\n            })\n        },\n    },\n    methods: {\n        initDelete () {\n            this.showDeleteConfirmation = true;\n        },\n        async commitDelete () {\n            await this.$store.dispatch('people/deletePerson', this.person);\n            this.showDeleteConfirmation = false;\n            this.$router.go(-1);\n        },\n        cancelDelete () {\n            this.showDeleteConfirmation = false;\n        },\n        initMerge() {\n            this.showMergeForm = true;\n        },\n        handleMerged () {\n            this.showMergeForm = false;\n            this.$router.go(-1);\n        },\n        handleMergeCanceled () {\n            this.showMergeForm = false;\n        },\n        async getMailLog() {\n            this.mailLoading = true;\n            await this.$store.dispatch('people/getMail', this.person);\n            this.mailLoading = false;\n        },\n        async getLogEntries () {\n            this.logsLoading = true;\n            await this.fetchEntries(`/api/people/${this.uuid}/activity-logs`);\n            this.logsLoading = false;\n        }\n    },\n    setup() {\n        return {\n            formatDate: formatDate,\n            logEntries,\n            fetchEntries\n        }\n    },\n}\n</script>","<template>\n    <div>\n        <data-table \n            :fields=\"fields\" \n            :data=\"memberships\" \n            v-model:sort=\"sort\"\n            :rowClickHandler=\"goToGroup\"\n            :row-class=\"() => 'cursor-pointer'\"\n        ></data-table>\n    </div>\n</template>\n<script>\nimport {Group} from '@/domain'\n\nexport default {\n    name: 'MembershipList',\n    props: {\n        person: {\n            type: Object,\n            required: true\n        }\n    },\n    data() {\n        return {\n            sort: {\n                field: 'group.displayName',\n                desc: false\n            },\n            fields: [\n                {\n                    name: 'group.displayName',\n                    type: String,\n                    sortable: true,\n                    label: 'Name'\n                },\n                {\n                    name: 'group.type.name',\n                    type: String,\n                    sortable: true,\n                    label: 'Type'\n                },\n                {\n                    name: 'roles',\n                    type: String,\n                    sortable: false,\n                    label: 'Roles',\n                    resolveValue (item) {\n                        return item.roles.map(r => r.name).join(', ');\n                    }\n                },\n                {\n                    name: 'permissions',\n                    type: String,\n                    sortable: false,\n                    label: 'Permissions',\n                    resolveValue (item) {\n                        return item.permissions.map(p => p.name).join(', ');\n                    }\n                },\n                {\n                    name: 'start_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Started'\n                },\n                {\n                    name: 'end_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Ended'\n                }\n\n\n            ]\n        }\n    },\n    computed: {\n        memberships () {\n            if (this.person.memberships) {\n                return this.person.memberships.map(m => {\n                    if (m.group) {\n                        m.group = new Group(m.group);\n                    }\n                    return m;\n                })\n            }\n\n            return [];\n        }\n    },\n    methods: {\n        goToGroup(item) {\n            this.$router.push({name: 'GroupDetail', params: {uuid: item.group.uuid}})\n        }\n\n    }\n}\n</script>","import { render } from \"./MembershipList.vue?vue&type=template&id=7757f912\"\nimport script from \"./MembershipList.vue?vue&type=script&lang=js\"\nexport * from \"./MembershipList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>\n        <p class=\"mb-8\">\n            Merging peple will do the following:\n            <ol class=\"list-decimal ml-6\">\n                <li>Add the authoritative person to all groups of which the obsolete person is a member.</li>\n                <li>Delete the obsolete person, their memberships, their invite, and their user account (if activated).</li>\n            </ol>\n        </p>\n        <input-row label=\"Merge\" vertical>\n            <template v-slot:label>\n                Merge <note class=\"inline-block\">(Obsolete person that will be deleted)</note>\n            </template>\n            <person-search-select v-model=\"obsoleteCopy\" :allow-add=\"false\"></person-search-select>\n            \n        </input-row>\n        <input-row label=\"Into\" :errors=\"errors.authority_id\" vertical>\n            <template v-slot:label>Into <note class=\"inline\">(Authoritative person)</note></template>\n            <person-search-select v-model=\"authorityCopy\" :allow-add=\"false\"></person-search-select>\n        </input-row>\n        <button-row submit-text=\"Merge\" @submitted=\"commitMerge\" @canceled=\"cancelMerge\" />\n    </div>\n</template>\n<script>\nimport { isValidationError } from '@/http';\n\nexport default {\n    name: 'PersonMergeForm',\n    props: {\n        authority: {\n            type: Object,\n            required: false\n        },\n        obsolete: {\n            type: Object,\n            default: () => ({})\n        }\n    },\n    emits: [\n        'saved',\n        'canceled'\n    ],\n    data() {\n        return {\n            authorityCopy: null,\n            obsoleteCopy: null,\n            errors: {}\n        }\n    },\n    watch: {\n        authority: {\n            immediate: true,\n            handler (to) {\n                if (!to) {\n                    return;\n                }\n                this.authorityCopy = {...to.attributes}\n            }\n        },\n        obsolete: {\n            immediate: true,\n            handler (to) {\n                if (!to) {\n                    return;\n                }\n                this.obsoleteCopy = {...to.attributes};\n            }\n        }\n    },\n    methods: {\n        async commitMerge () {\n            try {\n                this.errors = {};\n                await this.$store.dispatch(\n                    'people/mergePeople', \n                    {\n                        authority: this.authorityCopy, \n                        obsolete: this.obsoleteCopy\n                    }\n                );\n                this.authorityId = null;\n                this.obsoleteIds = null;\n                this.$emit('saved');\n            } catch (error) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors;\n                    return;\n                }\n            }\n        },\n        cancelMerge () {\n            this.authorityId = null;\n            this.obsoleteId = null;\n            this.$emit('canceled');\n        }\n    }\n}\n</script>","import { render } from \"./PersonMergeForm.vue?vue&type=template&id=dd7c1228\"\nimport script from \"./PersonMergeForm.vue?vue&type=script&lang=js\"\nexport * from \"./PersonMergeForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>\n        <div v-if=\"mail.length == 0\" class=\"well\">\n            {{person.first_name}} has not received any mail via the GPM.\n        </div>\n        <div class=\"w-3/4 my-4 p-4 border\" v-for=\"email in mail\" :key=\"email.id\">\n            <span class=\"text-gray-600\">Sent at</span> {{formatDate(email.created_at)}}\n            <div><span class=\"text-gray-600\">To:</span> {{email.to.map(i => i.address).join(', ')}}</div>\n            <div v-if=\"email.cc\"><span class=\"text-gray-600\">CC:</span> {{email.cc.map(i => i.address).join(', ')}}</div>\n            <div v-if=\"email.bcc\"><span class=\"text-gray-600\">BCC:</span> {{email.bcc.map(i => i.address).join(', ')}}</div>\n            <div class=\"mt-1\"><span class=\"text-gray-600\">Subject:</span> {{email.subject}}</div>\n            <hr>\n            <div v-html=\"email.body\"></div>\n            <hr>\n            <button v-if=\"hasPermission('people-manage') || coordinatesPerson(person)\"\n                @click.stop=\"initResend(email)\"\n                class=\"btn btn-xs\" \n            >\n                Resend\n            </button>\n        </div>\n        <teleport to=\"body\">\n            <modal-dialog title=\"Resend Email\" v-model=\"showResendDialog\">\n                <custom-email-form :mail-data=\"currentEmail\" @sent=\"cleanupResend\" @canceled=\"cleanupResend\"></custom-email-form>\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nexport default {\n    name: 'ComponentName',\n    props: {\n        person: {\n            type: Object,\n            required: true\n        },\n        mail: {\n            type: Array,\n            required: true\n        }\n    },\n    data() {\n        return {\n            currentEmail: {},\n            showResendDialog: null,\n        }\n    },\n    computed: {\n\n    },\n    methods: {\n        initResend (email) {\n            this.currentEmail = {...email};\n            this.showResendDialog = true;\n        },\n        cleanupResend () {\n            this.currentEmail = {},\n            this.showResendDialog = false;\n            this.$store.dispatch('people/getMail', this.person);\n        },\n    }\n}\n</script>","import { render } from \"./PersonMailLog.vue?vue&type=template&id=0e975ef4\"\nimport script from \"./PersonMailLog.vue?vue&type=script&lang=js\"\nexport * from \"./PersonMailLog.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PersonDetail.vue?vue&type=template&id=d2fd98c4\"\nimport script from \"./PersonDetail.vue?vue&type=script&lang=js\"\nexport * from \"./PersonDetail.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import {ref, computed} from 'vue';\nimport api from '@/http/api'\n\nconst _entries = ref([]);\n\nexport const logEntries = computed(() => {\n    return _entries.value;\n});\n\nexport const fetchEntries = async (apiUrl) => {\n    _entries.value = await api.get(apiUrl)\n        .then(response => response.data.data);\n}\n\nexport const saveEntry = async (apiUrl, entryData) => {\n    return await api.post(apiUrl, entryData)\n        .then(response => {\n            _entries.value.push(response.data);\n            return response.data\n        });\n}\n\nexport const updateEntry = async (apiUrl, entryData) => {\n    return await api.put(apiUrl, entryData)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == response.data.id);\n            _entries.value[entryIdx] = response.data;\n            return response.data\n        });\n}\n\nexport const deleteEntry = async (apiUrl, entryId) => {\n    return await api.delete(`${apiUrl}/${entryId}`)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == entryId);\n            _entries.value.splice(entryIdx, 1);\n\n            return response;\n        });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ActivityLogDeleteConfirmation.vue?vue&type=style&index=0&id=890ab792&lang=postcss&scope=true\"","<style lang=\"postcss\">\n    .links-blue a {\n        @apply text-blue-500;\n    }\n</style>\n<template>\n    <div>\n        <div class=\"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200\" v-if=\"!hasLogEntries\">\n            No log entries to display\n        </div>\n        <data-table :fields=\"fields\" :data=\"logEntries\" v-model:sort=\"sort\" v-else>\n            <template v-slot:cell-id=\"{item}\">\n                <div class=\"flex space-x-1\" v-if=\"hasPermission('groups-manage')\">\n                    <button class=\"btn btn-xs inline-block\"  @click=\"editLogEntry(item)\">\n                        <icon-edit width=\"12\"></icon-edit>\n                    </button>\n                    <button \n                        @click=\"confirmDelete(item)\"\n                        v-if=\"item.activity_type === null\"\n                        class=\"btn btn-xs inline-block\"\n                    >\n                        <icon-trash width=\"12\"></icon-trash>\n                    </button>\n                </div>\n            </template>\n            <template v-slot:cell-description=\"{item}\">\n                <div v-html=\"item.description\" class=\"links-blue\"></div>\n            </template>\n        </data-table>\n        <modal-dialog v-model=\"editingEntry\" title=\"Edit log entry\">\n            <log-entry-form \n                :log-entry=\"selectedEntry\" \n                :api-url=\"apiUrl\"\n                @saved=\"closeEntryForm\"\n                @canceled=\"closeEntryForm\"\n            ></log-entry-form>\n        </modal-dialog>\n\n        <modal-dialog v-model=\"showDeleteConfirmation\" title=\"Delete this log entry?\">\n            <activity-log-delete-confirmation \n                :logEntry=\"selectedEntry\" \n                :api-url=\"apiUrl\"\n                @canceled=\"closeDeleteConfirmation\"\n                @deleted=\"closeDeleteConfirmation\"\n            ></activity-log-delete-confirmation>\n        </modal-dialog>\n    </div>\n</template>\n<script>\nimport { ref, computed } from 'vue'\n\nimport LogEntryForm from '@/components/log_entries/ActivityLogEntryForm.vue'\nimport ActivityLogDeleteConfirmation from '@/components/log_entries/ActivityLogDeleteConfirmation.vue'\nimport {formatDate, formatTime} from '@/date_utils'\n\nconst fields = [\n    {\n        name: 'created_at',\n        label: 'Date & Time',\n        sortName: 'created_at',\n        sortable: true,\n        resolveValue ({created_at}) {\n            return (created_at) ? formatDate(created_at) : null;\n        },\n        type: Date,\n        colspan: 2,\n        class: 'w-16'\n    },\n    {\n        name: 'created_at',\n        label: 'Time',\n        sortName: 'created_at',\n        hideHeader: true,\n        sortable: false,\n        resolveValue ({created_at}) {\n            return (created_at) ? formatTime(created_at) : null;\n        },\n        class: \"w-28\",\n        type: Date,\n    },\n    {\n        name: 'description',\n        label: 'Entry',\n        sortable: true,\n        type: String\n    },\n    {\n        name: 'causer.name',\n        label: 'User',\n        sortable: true\n    },\n    {\n        name: 'id',\n        label: '',\n        sortable: false,\n    }\n];\n\nexport default {\n    components: {\n        LogEntryForm,\n        ActivityLogDeleteConfirmation\n    },\n    props: {\n        logEntries: {\n            required: true,\n            type: Array,\n        },\n        apiUrl: {\n            required: true,\n            type: String\n        }\n    },\n    setup (props) {\n        // DATA\n        const sort = ref({\n            field: 'created_at',\n            desc: true\n        });\n        const selectedEntry = ref({});\n        const editingEntry = ref(false);\n        const showDeleteConfirmation = ref(false);\n\n        // COMPUTED\n        const hasLogEntries = computed(() => {\n            return props.logEntries.length > 0;\n        });\n\n        // METHODS\n        const editLogEntry = entry => {\n            editingEntry.value = true;\n            selectedEntry.value = entry;\n        };\n\n        const closeEntryForm = () => {\n            editingEntry.value = false;\n            selectedEntry.value = {};\n        }\n        \n        const confirmDelete = (entry) => {\n            selectedEntry.value = entry;\n            showDeleteConfirmation.value = true;\n        }\n        const closeDeleteConfirmation = () => {\n            showDeleteConfirmation.value = false;\n            selectedEntry.value = {};\n        }\n\n        return {\n            fields: ref(fields),\n            sort,\n            selectedEntry,\n            editingEntry,\n            hasLogEntries,\n            editLogEntry,\n            closeEntryForm,\n            showDeleteConfirmation,\n            confirmDelete,\n            closeDeleteConfirmation\n        }\n    }\n}\n</script>","<template>\n    <form-container class=\"log-entry-form\" ref=\"form-container\">\n        <input-row label=\"Log Date\" \n            v-model=\"newEntry.log_date\" \n            :errors=\"errors.log_date\" \n            type=\"date\" \n            ref=\"logdate\"\n        ></input-row>\n        <StepInput :errors=\"errors.step\" v-if=\"group.isVcep()\" v-model=\"newEntry.step\"/>\n        <input-row label=\"Entry\" :errors=\"errors.entry\">\n            <RichTextEditor v-model=\"newEntry.entry\" />\n        </input-row>\n        <button-row>\n            <button class=\"btn\" @click=\"cancel\">Cancel</button>\n            <button class=\"btn blue\" @click=\"save\">Save</button>\n        </button-row>\n    </form-container>\n</template>\n<script setup>\n    import { ref, watch, defineProps, defineEmits, computed } from 'vue'\n    import {useStore} from 'vuex'\n    import RichTextEditor from '@/components/forms/RichTextEditor.vue'\n    import StepInput from '@/components/forms/StepInput.vue'\n    import {saveEntry, updateEntry, fetchEntries} from '@/adapters/log_entry_repository'\n\n    const props = defineProps({\n        logEntry: {\n                required: false,\n                default: () => {\n                    return {\n                        log_date: new Date().toISOString(),\n                        step: null,\n                        entry: '',\n                    }\n                }\n            },\n            apiUrl: {\n                required: true,\n                type: String\n            }\n    });\n    const emits = defineEmits(['saved'])\n    const store = useStore();\n\n    // DATA\n    const newEntry = ref({\n        log_date: new Date().toISOString(),\n        step: null,\n        entry: '',\n    });\n    const errors = ref({});\n\n    //COMPUTED\n    const group = computed(() => store.getters['groups/currentItemOrNew']);\n\n    // METHODS\n    const syncEntry =  (entry) => {\n        if (!entry || !entry.created_at) {\n            return;\n        }\n\n        newEntry.value = {\n            id: entry.id,\n            log_date: new Date(Date.parse((entry.created_at))).toISOString(),\n            step: entry.step,\n            entry: entry.description\n        }\n    }\n\n    const initNewEntry = () => {\n        newEntry.value = {\n            log_date: new Date().toISOString(),\n            step: null,\n            entry: ''\n        }\n    }\n\n    const save = async () => {\n        try {\n            if (newEntry.value.id) {\n                await updateEntry(`${props.apiUrl}/${newEntry.value.id}`, newEntry.value);\n            } else {\n                await saveEntry(props.apiUrl, newEntry.value);\n            }\n\n            await fetchEntries(props.apiUrl);\n            initNewEntry();\n            emits('saved', newEntry.value);\n        } catch (error) {\n            if (error.response && error.response.status == 422 && error.response.data.errors) {\n                errors.value = error.response.data.errors\n                return;\n            }\n        }\n    };\n\n    const cancel = () => {\n        initNewEntry();\n        emits('canceled');\n    }\n\n    watch(\n        () => props.logEntry, \n        (to) => {\n            syncEntry(to)\n        },\n        {immediate: true}\n    );\n</script>","import script from \"./ActivityLogEntryForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ActivityLogEntryForm.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n<template>\n    <div>\n        <p>You are about to delete the following log entry:</p>\n\n        <div class=\"border-y py-2\">\n        <blockquote>\n            <div v-html=\"logEntry.description\"></div>\n        </blockquote>\n        <div class=\"ml-4 mt-2 mb-4 text-gray-700 text-sm\" v-if=\"logEntry.causer\">Logged by {{logEntry.causer.name}}, {{logDate}}</div>\n        </div>\n\n        <div>This can not be undone. Are you sure you want to continue?</div>\n\n        <div v-if=\"flattenedErrors.length > 0\" class=\"bg-red-200 text-red-900 rounded p-2 my-2\">\n            <ul>\n                <li v-for=\"(err,idx) in flattenedErrors\" :key=\"idx\">\n                    {{err}}\n                </li>\n            </ul> \n        </div>\n        \n        <button-row @canceled=\"$emit('canceled')\" @submitted=\"deleteLogEntry\" submitText=\"Delete Log Entry\"></button-row>\n    </div>\n</template>\n<script>\nimport {ref, computed} from 'vue';\nimport { formatDate } from '@/date_utils';\nimport is_validation_error from '@/http/is_validation_error';\nimport { fetchEntries, deleteEntry } from '@/adapters/log_entry_repository'\n\n\nexport default {\n    name: 'ConfirmDeleteLogEntry',\n    props: {\n        logEntry: {\n            required: true,\n            type: Object,\n        },\n        apiUrl: {\n            required: true,\n            type: String\n        }\n    },\n    emits: [\n        'deleted',\n        'canceled'\n    ],\n    setup (props, context) {\n        const errors = ref({});\n        const logDate = computed(() => {\n            return formatDate(props.logEntry.log_date)\n        });\n        const flattenedErrors = computed(() => {\n            return Object.values(errors.value).flat();\n        });\n\n        const deleteLogEntry = async () => {\n            try {\n                await deleteEntry(props.apiUrl, props.logEntry.id);\n                context.emit('deleted')\n                await fetchEntries(props.apiUrl);\n            } catch (error) {\n                if (is_validation_error(error)) {\n                    errors.value = error.response.data.errors;\n                    return;\n                }\n                errors.value = {a: error.message};\n            }\n        }\n\n\n        return {\n            errors,\n            logDate,\n            flattenedErrors,\n            deleteLogEntry\n        }\n    }\n}\n</script>","import { render } from \"./ActivityLogDeleteConfirmation.vue?vue&type=template&id=890ab792\"\nimport script from \"./ActivityLogDeleteConfirmation.vue?vue&type=script&lang=js\"\nexport * from \"./ActivityLogDeleteConfirmation.vue?vue&type=script&lang=js\"\n\nimport \"./ActivityLogDeleteConfirmation.vue?vue&type=style&index=0&id=890ab792&lang=postcss&scope=true\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ActivityLog.vue?vue&type=template&id=29e4205d\"\nimport script from \"./ActivityLog.vue?vue&type=script&lang=js\"\nexport * from \"./ActivityLog.vue?vue&type=script&lang=js\"\n\nimport \"./ActivityLog.vue?vue&type=style&index=0&id=29e4205d&lang=postcss\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}