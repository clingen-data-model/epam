{"version":3,"sources":["webpack:///./src/components/people/PersonDetail.vue","webpack:///./src/components/people/MembershipList.vue","webpack:///./src/components/people/MembershipList.vue?3648","webpack:///./src/components/people/PersonDetail.vue?a770"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_component_router_link","to","_ctx","name","_component_note","_toDisplayString","id","_createBlock","$props","_component_icon_edit","width","heigh","_component_dictionary_row","label","_hoisted_4","email","_hoisted_5","institution","_component_tabs_container","_component_tab_item","_component_membership_list","person","_component_person_profile","_component_coi_list","$options","length","first_name","_Fragment","_renderList","key","$setup","created_at","subject","innerHTML","body","_component_modal_dialog","$event","title","meta","_component_router_view","_component_data_table","fields","$data","data","sort","rowClickHandler","row-class","props","type","Object","required","field","desc","String","sortable","resolveValue","item","roles","map","r","join","permissions","p","Date","computed","memberships","this","m","group","Group","methods","goToGroup","$router","push","params","uuid","__exports__","components","TabsContainer","MembershipList","PersonProfile","CoiList","emails","watch","immediate","handler","$store","dispatch","mapGetters","showModal","get","$route","set","value","sortedMailLog","mailLog","a","b","parse","setup","formatDate","mounted","render"],"mappings":"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","file":"js/chunk-2d0d6d92.a54a2874.js","sourcesContent":["<template>\n    <div>\n        <header class=\"pb-4\">\n            <router-link class=\"note\" to=\"/people\">People</router-link>\n            <h1 class=\"flex justify-between items-center\">\n                <div>\n                    {{person.name}}\n                    <note>ID: {{person.id}}</note>\n                </div>\n                <router-link \n                    :to=\"`/people/${uuid}/edit`\"\n                    class=\"btn btn-xs flex-grow-0\"\n                    v-if=\"(hasPermission('people-manage') || userIsPerson(person))\"\n                >\n                    <icon-edit width=\"16\" heigh=\"16\" />\n                </router-link>\n\n            </h1>\n            <dictionary-row label=\"Email\">\n                <template v-slot:label><strong>Email:</strong></template>\n                {{person.email}}\n            </dictionary-row>\n            <dictionary-row label=\"Institution\">\n                <template v-slot:label><strong>Institution:</strong></template>\n                {{person.institution ? person.institution.name : null}}\n            </dictionary-row>\n        </header>\n        <tabs-container>\n            <tab-item label=\"groups\">\n                <membership-list :person=\"person\"></membership-list>\n            </tab-item>\n            <tab-item label=\"Info\">\n                <person-profile :person=\"person\"></person-profile>\n            </tab-item>\n            <tab-item label=\"Conflict of Interest\">\n                <coi-list :person=\"person\"></coi-list>\n            </tab-item>\n            <tab-item label=\"Documents\">\n                docs\n            </tab-item>\n            <!-- <tab-item label=\"Training &amp; Attestations\">\n            </tab-item> -->\n            <tab-item label=\"Email Log\">\n                <div v-if=\"sortedMailLog.length == 0\" class=\"well\">\n                    {{titleCase(person.first_name)}} has not received any mail via the GPM.\n                </div>\n                <div class=\"w-3/4 my-4 p-4 border\" v-for=\"email in sortedMailLog\" :key=\"email.id\">\n                    <dictionary-row label=\"Date/Time\">\n                        {{formatDate(email.created_at)}}\n                    </dictionary-row>\n                    <dictionary-row label=\"Subject\">\n                        {{email.subject}}\n                    </dictionary-row>\n                    <dictionary-row label=\"Body\">\n                        <div v-html=\"email.body\"></div>\n                    </dictionary-row>\n                </div>\n            </tab-item>\n        </tabs-container>\n        <modal-dialog v-model=\"showModal\" :title=\"$route.meta.title\">\n            <router-view name=\"modal\"></router-view>\n        </modal-dialog>\n    </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex'\nimport {formatDateTime as formatDate} from '@/date_utils'\n\nimport TabsContainer from '../TabsContainer.vue'\nimport MembershipList from './MembershipList.vue'\nimport PersonProfile from '@/components/people/PersonProfile'\nimport CoiList from '@/components/people/CoiList'\n\nexport default {\n    name: 'PersonDetail',\n    components: { \n        TabsContainer,\n        MembershipList,\n        PersonProfile,\n        CoiList,\n    },\n    props: {\n        uuid: {\n            required: true,\n            type: String\n        }\n    },\n    data() {\n        return {\n            emails: []\n        }\n    },\n    watch: {\n        uuid: {\n            immediate: true,\n            handler: function () {\n                this.$store.dispatch('people/getPerson', {uuid: this.uuid})\n            }\n        }\n    },\n    computed: {\n        ...mapGetters({\n            person: 'people/currentItem'\n        }),\n        showModal: {\n            get() {\n                return this.$route.meta.showModal\n            },\n            set(value) {\n                if (value) {\n                    this.$router.push({name: 'PersonEdit', params: {uuid: this.person.uuid}})\n                }\n                this.$router.push({name: 'PersonDetail', params: {uuid: this.person.uuid}})\n            }\n        },\n        sortedMailLog () {\n            return [...this.person.mailLog].sort((a,b) => {\n                if (a.created_at == b.created_at) {\n                    return 0;\n                }\n                return (Date.parse(a.created_at) > Date.parse(b.created_at))\n                    ? -1 : 1;\n            })\n        }\n    },\n    methods: {\n    },\n    setup() {\n        return {\n            formatDate: formatDate\n        }\n    },\n    async mounted() {\n        await this.$store.dispatch('people/getPerson', {uuid: this.uuid})\n        this.$store.dispatch('people/getMail', this.person);\n    }\n}\n</script>","<template>\n    <div>\n        <data-table \n            :fields=\"fields\" \n            :data=\"memberships\" \n            v-model:sort=\"sort\"\n            :rowClickHandler=\"goToGroup\"\n            :row-class=\"() => 'cursor-pointer'\"\n        ></data-table>\n    </div>\n</template>\n<script>\nimport {Group} from '@/domain'\n\nexport default {\n    name: 'MembershipList',\n    props: {\n        person: {\n            type: Object,\n            required: true\n        }\n    },\n    data() {\n        return {\n            sort: {\n                field: 'group.displayName',\n                desc: false\n            },\n            fields: [\n                {\n                    name: 'group.displayName',\n                    type: String,\n                    sortable: true,\n                    label: 'Name'\n                },\n                {\n                    name: 'group.type.name',\n                    type: String,\n                    sortable: true,\n                    label: 'Type'\n                },\n                {\n                    name: 'roles',\n                    type: String,\n                    sortable: false,\n                    label: 'Roles',\n                    resolveValue (item) {\n                        return item.roles.map(r => r.name).join(', ');\n                    }\n                },\n                {\n                    name: 'permissions',\n                    type: String,\n                    sortable: false,\n                    label: 'Permissions',\n                    resolveValue (item) {\n                        return item.permissions.map(p => p.name).join(', ');\n                    }\n                },\n                {\n                    name: 'start_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Started'\n                },\n                {\n                    name: 'end_date',\n                    type: Date,\n                    sortable: true,\n                    label: 'Ended'\n                }\n\n\n            ]\n        }\n    },\n    computed: {\n        memberships () {\n            if (this.person.memberships) {\n                return this.person.memberships.map(m => {\n                    if (m.group) {\n                        m.group = new Group(m.group);\n                    }\n                    return m;\n                })\n            }\n\n            return [];\n        }\n    },\n    methods: {\n        goToGroup(item) {\n            this.$router.push({name: 'GroupDetail', params: {uuid: item.group.uuid}})\n        }\n\n    }\n}\n</script>","import { render } from \"./MembershipList.vue?vue&type=template&id=7757f912\"\nimport script from \"./MembershipList.vue?vue&type=script&lang=js\"\nexport * from \"./MembershipList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PersonDetail.vue?vue&type=template&id=2e7f6502\"\nimport script from \"./PersonDetail.vue?vue&type=script&lang=js\"\nexport * from \"./PersonDetail.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}