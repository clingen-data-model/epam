{"version":3,"sources":["webpack:///./src/composables/router_aware_sort_and_filter.js","webpack:///./src/views/SummaryGcep.vue","webpack:///./src/views/SummaryGcep.vue?7d22","webpack:///./src/views/SummaryVcep.vue","webpack:///./src/views/SummaryVcep.vue?b198","webpack:///./src/components/applications/ApplicationsSummaryTable.vue","webpack:///./src/components/applications/ApplicationsSummaryTable.vue?43d0"],"names":["defaultSort","router","useRouter","route","useRoute","field","desc","sort","computed","immediate","get","Object","keys","query","includes","Boolean","parseInt","set","sortObj","newSortQuery","newQuery","replace","path","filter","value","currentQuery","currentPath","updatedQuery","ep-type-id","name","components","ApplicationsSummaryTable","render","class","type","placeholder","showCompleted","data","filteredData","fields","selectedFields","filter-term","row-click-handler","goToApplication","row-class","style","remainingHeight","ref","cell-contacts","item","contacts","c","key","id","href","email","cell-latest_log_entry_description","cell-latest_pending_next_action_entry","props","epTypeId","Number","default","label","String","sortable","resolveValue","cdwg","isCompleted","current_step","resolveSort","Array","step","this","Date","applications","ep_type_id","date_completed","$route","$router","stepsToShow","showAllInfo","newValue","height","methods","getApplications","params","with","where","length","$store","dispatch","push","uuid","mounted","setup"],"mappings":"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","file":"js/application-summary.cec1e04f.js","sourcesContent":["import { useRouter, useRoute } from 'vue-router'\nimport {computed} from 'vue'\n\nexport default function (defaultSort = null) {\n    const router = useRouter()\n    const route = useRoute()\n    defaultSort = (defaultSort) ? defaultSort : {field: 'name', desc: false}\n    \n    const sort = computed({\n        immediate: true,\n        get() {\n            if (Object.keys(route.query).includes('sort-field')) {\n                return {\n                    field: route.query['sort-field'],\n                    desc: Boolean(parseInt(route.query['sort-desc']))\n                }\n            }\n            return defaultSort;\n        },\n        set(sortObj) {\n            const newSortQuery = {'sort-field': sortObj.field, 'sort-desc': sortObj.desc ? 1 : 0}\n    \n            const newQuery = {\n                ...route.query, \n                ...newSortQuery\n            };\n    \n            router.replace({path: route.path, query: newQuery})\n        }\n    });\n    \n    const filter = computed({\n        set(value) {\n            let currentQuery = route.query;\n            let currentPath = route.path;\n    \n            let updatedQuery = {...currentQuery};\n    \n            if (!value) {\n                delete updatedQuery.filter;\n            } else {\n                updatedQuery = {...currentQuery, ...{'filter': value} };\n            }\n    \n            router.replace({path: currentPath, query: updatedQuery})\n        },\n        get() {\n            return route.query.filter\n        },\n        immediate: true\n    });\n\n    return {\n        sort,\n        filter\n    }\n}\n","<template>\n    <div>\n        <applications-summary-table :ep-type-id=\"1\"></applications-summary-table>\n    </div>\n</template>\n<script>\nimport ApplicationsSummaryTable from '@/components/applications/ApplicationsSummaryTable'\n\nexport default {\n    name: 'GcepsSummary',\n    components: {\n        ApplicationsSummaryTable\n    },\n}\n</script>","import { render } from \"./SummaryGcep.vue?vue&type=template&id=182a980a\"\nimport script from \"./SummaryGcep.vue?vue&type=script&lang=js\"\nexport * from \"./SummaryGcep.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n    <div>\n        <applications-summary-table :ep-type-id=\"2\"></applications-summary-table>\n    </div>\n</template>\n<script>\nimport ApplicationsSummaryTable from '@/components/applications/ApplicationsSummaryTable'\n\nexport default {\n    name: 'GcepsSummary',\n    components: {\n        ApplicationsSummaryTable\n    },\n}\n</script>","import { render } from \"./SummaryVcep.vue?vue&type=template&id=58a89ca9\"\nimport script from \"./SummaryVcep.vue?vue&type=script&lang=js\"\nexport * from \"./SummaryVcep.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n    <div>\n        <div class=\"flex justify-between\">\n            <div class=\"mb-1 flex space-x-2\">\n                <label>Filter: <input type=\"text\" class=\"sm\" v-model=\"filter\" placeholder=\"filter\"></label>\n                <label>\n                    <input type=\"checkbox\" v-model=\"showCompleted\">\n                    Show completed\n                </label>\n            </div>\n        </div>\n        <data-table \n            :data=\"filteredData\" \n            :fields=\"selectedFields\" \n            :filter-term=\"filter\" \n            :row-click-handler=\"goToApplication\"\n            row-class=\"cursor-pointer\"\n            v-model:sort=\"sort\"\n            :style=\"remainingHeight\"\n            class=\"overflow-auto text-xs\"\n            ref=\"table\"\n        >\n            <template v-slot:cell-contacts=\"{item}\">\n                <ul>\n                    <li v-for=\"c in item.contacts\" :key=\"c.id\">\n                        <small><a :href=\"`mailto:${c.email}`\" class=\"text-blue-500\">{{c.name}}</a></small>\n                    </li>\n                </ul>\n            </template>\n            <template v-slot:cell-latest_log_entry_description=\"{value}\">\n                <div v-html=\"value\"></div>\n            </template>\n            <template v-slot:cell-latest_pending_next_action_entry=\"{value}\">\n                <div v-html=\"value\"></div>\n            </template>\n        </data-table>\n    </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex'\nimport sortAndFilter from '@/composables/router_aware_sort_and_filter'\n\nexport default {\n    name: 'SummaryVceps',\n    components: {\n    },\n    props: {\n        epTypeId: {\n            type: Number,\n            default: null\n        }\n    },\n    data() {\n        return {\n            fields: [\n                {\n                    name: 'name',\n                    label: 'Name',\n                    type: String,\n                    sortable: true\n                },\n                {\n                    name: 'cdwg.name',\n                    label: 'CDWG',\n                    type: String,\n                    sortable: true,\n                    resolveValue (item) {\n                        return item.cdwg ? item.cdwg.name : '';\n                    }\n                },\n                {\n                    name: 'current_step',\n                    label: 'Step',\n                    type: Number,\n                    sortable: true,\n                    resolveValue (item) {\n                        return item.isCompleted ? 'Completed' : item.current_step\n                    },\n                    resolveSort (item) {\n                        return item.isCompleted ? 5 : item.current_step\n                    }\n                },\n                {\n                    name: 'contacts',\n                    label: 'Contacts',\n                    type: Array,\n                    sortable: false,\n                    class: ['min-w-40'],\n                    step: 1\n                },\n                {\n                    name: 'first_scope_document.date_received',\n                    label: this.epTypeId == 2 ? 'Step 1 Received' : 'Application Received',\n                    type: Date,\n                    sortable: true,\n                    class: ['min-w-28'],\n                    step: 1\n\n                },\n                {\n                    name: 'approval_dates.step 1',\n                    label: this.epTypeId == 2 ? 'Step 1 Approved' : 'Application Approved',\n                    type: Date,\n                    sortable: true,\n                    class: ['min-w-28'],\n                    step: 1\n                },\n                {\n                    name: 'approval_dates.step 2',\n                    label: 'Step 2 Approved',\n                    type: Date,\n                    sortable: true,\n                    class: ['min-w-28'],\n                    step: 2\n                },\n                {\n                    name: 'approval_dates.step 3',\n                    label: 'Step 3 Approved',\n                    type: Date,\n                    sortable: true,\n                    class: ['min-w-28'],\n                    step: 3\n                },\n                {\n                    name: 'first_final_document.date_received',\n                    label: 'Step 4 Received',\n                    type: Date,\n                    sortable: true,\n                    class: ['min-w-28'],\n                    step: 4\n                },\n                {\n                    name: 'approval_dates.step 4',\n                    label: 'Step 4 Approved',\n                    type: Date,\n                    sortable: true,\n                    class: ['min-w-28'],\n                    step: 4\n                }\n            ]\n        }\n    },\n    computed: {\n        ...mapGetters({\n            applications: 'applications/all'\n        }),\n        filteredData() {\n            return this.applications\n                .filter(item => !this.epTypeId || item.ep_type_id == this.epTypeId)\n                .filter(item => {\n                    if (!this.showCompleted) {\n                        return item.date_completed == null;\n                    }\n                    return true;\n                })\n        },\n        showCompleted: {\n            set(value) {\n                let currentQuery = this.$route.query;\n                let currentPath = this.$route.path;\n                \n                let updatedQuery = {...currentQuery};\n\n                if (!value) {\n                    delete updatedQuery['show-completed'];\n                } else {\n                    updatedQuery = {...currentQuery, ...{'show-completed': 1} };\n                }\n\n                this.$router.replace({path: currentPath, query: updatedQuery})\n            },\n            get() {\n                return Boolean(parseInt(this.$route.query['show-completed']))\n            },\n            immediate: true\n        },\n        selectedFields() {\n            const stepsToShow = this.epTypeId == 2 ? [1,2,3,4] : [1]\n            return this.fields.filter(field => !field.step || stepsToShow.includes(field.step))\n        },\n        showAllInfo: {\n            immediate: true,\n                get() {\n                    if (Object.keys(this.$route.query).includes('showAllInfo')) {\n                        return this.$route.query.showAllInfo\n                    }\n                    return 0\n                },\n                set(newValue) {\n                    const newQuery = {...this.$route.query};\n                    newQuery.showAllInfo = newValue\n\n                    this.$router.replace({path: this.$route.path, query: newQuery})\n                }            \n        },\n        remainingHeight () {\n            return {height: 'calc(100vh - 220px)'}\n        }\n    },\n    methods: {\n\n        getApplications () {\n            const params = {\n                with: [\n                    'latestLogEntry',\n                    'latestPendingNextAction',\n                    'type',\n                    'contacts',\n                    'firstScopeDocument',\n                    'firstFinalDocument'\n                ],\n            }\n\n            const where = {};\n\n            if (Object.keys(where).length > 0) {\n                params.where = where;\n            }\n\n            this.$store.dispatch('applications/getApplications', params);\n        },\n        goToApplication (item) {\n            this.$router.push({name: 'ApplicationDetail', params: {uuid: item.uuid}})\n        },\n    },\n    mounted () {\n        this.getApplications()\n    },\n    setup() {\n        const {sort, filter} = sortAndFilter();\n        // const showAllInfo = computedQueryParam('showAllInfo');\n\n        return {\n            sort,\n            filter,\n            // showAllInfo\n        }\n    }\n}\n</script>","import { render } from \"./ApplicationsSummaryTable.vue?vue&type=template&id=8bff8b8e\"\nimport script from \"./ApplicationsSummaryTable.vue?vue&type=script&lang=js\"\nexport * from \"./ApplicationsSummaryTable.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}