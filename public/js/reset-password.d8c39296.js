"use strict";(self["webpackChunkepam"]=self["webpackChunkepam"]||[]).push([[450],{3387:function(e,s,r){r.r(s),r.d(s,{default:function(){return c}});var t=r(641),o=r(33);const a={key:0,class:"p-2 rounded border border-green-300 bg-green-100 text-green-700"},n={key:1};function i(e,s,r,i,l,u){const d=(0,t.g2)("input-row"),p=(0,t.g2)("button-row"),m=(0,t.g2)("card");return(0,t.uX)(),(0,t.Wv)(m,{title:"Reset Your Password",class:"w-2/3 mx-auto"},{default:(0,t.k6)((()=>[l.successMessage?((0,t.uX)(),(0,t.CE)("div",a,(0,o.v_)(l.successMessage),1)):((0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(d,{modelValue:l.email,"onUpdate:modelValue":s[0]||(s[0]=e=>l.email=e),type:"text",label:"Email",errors:l.errors.email},null,8,["modelValue","errors"]),u.hasToken?((0,t.uX)(),(0,t.Wv)(d,{key:0,modelValue:l.password,"onUpdate:modelValue":s[1]||(s[1]=e=>l.password=e),type:"password",label:"New password",errors:l.errors.password},null,8,["modelValue","errors"])):(0,t.Q3)("",!0),u.hasToken?((0,t.uX)(),(0,t.Wv)(d,{key:1,modelValue:l.password_confirmation,"onUpdate:modelValue":s[2]||(s[2]=e=>l.password_confirmation=e),type:"password",label:"Confirm password",errors:l.errors.password_confirmation},null,8,["modelValue","errors"])):(0,t.Q3)("",!0),(0,t.bF)(p,{"show-cancel":!1,"submit-text":u.submitText,onSubmitClicked:u.submitReset},null,8,["submit-text","onSubmitClicked"])]))])),_:1})}var l=r(7684),u=r(8751),d={props:{},data(){return{email:null,errors:{},password:null,password_confirmation:null,successMessage:null}},computed:{hasToken(){return Boolean(this.$route.query.token)},submitText(){return this.hasToken?"Reset Password":"Send Password Reset Link"}},methods:{getResetLink(){l.A.post("/api/send-reset-password-link",{email:this.email}).then((e=>{this.successMessage=e.data.status})).catch((e=>{(0,u.A)(e)&&(this.errors=e.response.data.errors)}))},submitNewPassword(){const e={token:this.$route.query.token,email:this.email,password:this.password,password_confirmation:this.password_confirmation};l.A.post("/api/reset-password",e).then((()=>{this.$store.dispatch("login",{email:this.email,password:this.password}).then((()=>{this.$store.dispatch("getCurrentUser"),this.$router.replace("/")}))})).catch((e=>{(0,u.A)(e)&&(this.errors=e.response.data.errors)}))},submitReset(){this.hasToken?this.submitNewPassword():this.getResetLink()}}},p=r(6262);const m=(0,p.A)(d,[["render",i]]);var c=m}}]);
//# sourceMappingURL=reset-password.d8c39296.js.map