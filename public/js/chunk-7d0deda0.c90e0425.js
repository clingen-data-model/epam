(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d0deda0"],{1081:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function o(e,t,n,o,i,a){var c=Object(r["resolveComponent"])("profile-form");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createVNode"])(c,{person:a.person,modelValue:a.person,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.person=e}),onSaved:t[1]||(t[1]=function(e){return a.goBack()}),onCanceled:t[2]||(t[2]=function(e){return a.goBack()})},null,8,["person","modelValue"])])}var i=n("5f08"),a={name:"PersonEdit",components:{ProfileForm:i["a"]},props:{uuid:{required:!0,type:String}},computed:{person:function(){return this.$store.getters["people/currentItem"]}},watch:{uuid:{immediate:!0,handler:function(){this.$store.dispatch("people/getPerson",{uuid:this.uuid})}}},methods:{goBack:function(){this.$router.go(-1)}}},c=n("6b0d"),u=n.n(c);const l=u()(a,[["render",o]]);t["default"]=l},"48e8":function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));n("d3b7"),n("159b"),n("b64b"),n("d81d"),n("b0c0");var r=n("7a23"),o=n("f96b"),i=n("025e"),a=n("2297"),c=n("05b6"),u=n("526b"),l=Object(r["ref"])({countries:[],primaryOccupations:[],races:[],ethnicities:[],genders:[]}),s=Object(r["computed"])((function(){return[{name:"first_name"},{name:"last_name"},{name:"email"},{name:"institution_id",label:"Institution",type:"component",component:c["default"]},{name:"credentials",type:"large-text"},{name:"biography",type:"large-text"},{name:"*",type:"component",label:"Address",component:u["default"]},{name:"country_id",label:"Country",type:"select",options:l.value.countries},{name:"phone"},{name:"timezone",label:"Timezone",type:"component",component:a["default"]}]})),p=Object(r["computed"])((function(){return[{name:"primary_occupation_id",label:"Primary Occupation",type:"select",options:l.value.primaryOccupations},{name:"primary_occupation_other",label:" ",type:"text",placeholder:"Details",show:function(e){return 100==e.primary_occupation_id}},{name:"race_id",label:"Race",type:"select",options:l.value.races},{name:"race_other",label:" ",type:"text",placeholder:"Details",show:function(e){return 100==e.race_id}},{name:"ethnicity_id",label:"Ethnicity",type:"select",options:l.value.ethnicities},{name:"enthnicity_other",label:" ",type:"text",placeholder:"Details",show:function(e){return 100==e.enthnicity_id}},{name:"gender_id",label:"Gender",type:"select",options:l.value.genders},{name:"gender_other",label:" ",type:"text",placeholder:"Details",show:function(e){return 100==e.gender_id}}]})),d=function(){Object.keys(l.value).forEach((function(e){o["a"].get("/api/people/lookups/".concat(Object(i["c"])(e))).then((function(t){l.value[e]=t.data.data.map((function(e){return{value:e.id,label:e.name}}))})).catch((function(e){return console.error(e)}))}))}},"5f08":function(e,t,n){"use strict";var r=n("7a23"),o=Object(r["createElementVNode"])("h3",null,"Profile",-1),i=Object(r["createElementVNode"])("hr",{class:"my-4"},null,-1);function a(e,t,n,a,c,u){var l=Object(r["resolveComponent"])("data-form"),s=Object(r["resolveComponent"])("button-row");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[o,Object(r["createVNode"])(l,{fields:u.fields,modelValue:c.profile,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.profile=e}),errors:c.errors},null,8,["fields","modelValue","errors"]),i,Object(r["createVNode"])(s,{onSubmitted:u.save,onCanceled:t[1]||(t[1]=function(e){return u.cancel()}),"submit-text":"Save"},null,8,["onSubmitted"])])}var c=n("1da1"),u=n("5530"),l=n("2909"),s=(n("96cf"),n("4de4"),n("d3b7"),n("caad"),n("b0c0"),n("033d")),p=n("48e8"),d={name:"ProfileForm",components:{},props:{person:{type:Object,required:!0}},emits:["saved","canceled"],data:function(){return{errors:{},profile:{},page:"profile",institutionId:null,timezone:null}},computed:{fields:function(){var e=Object(l["a"])(this.profileFields);return this.hasPermission("people-manage")||this.userIsPerson(this.person)||(e=e.filter((function(e){return["first_name","last_name","email"].includes(e.name)}))),e},title:function(){return"profile"==this.page?"Please fill out your profile":"Please share your demographic information."}},watch:{person:function(){this.initProfile()}},methods:{initProfile:function(){this.profile=Object(u["a"])({},this.person.attributes)},save:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("people/updateProfile",{uuid:e.person.uuid,attributes:e.profile}).then((function(){e.$store.dispatch("getCurrentUser",{force:!0}),e.$store.commit("pushSuccess","Your profile has been updated.")}));case 3:e.errors={},e.$emit("saved"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),Object(s["a"])(t.t0)&&(e.errors=t.t0.response.data.errors);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cancel:function(){this.initProfile(),this.errors={},this.$emit("canceled")}},setup:function(){return Object(r["onMounted"])((function(){return Object(p["b"])()})),{profileFields:p["d"],demographicFields:p["a"],getLookups:p["b"],lookups:p["c"]}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.initProfile();case 1:case"end":return t.stop()}}),t)})))()}},m=n("6b0d"),f=n.n(m);const b=f()(d,[["render",a]]);t["a"]=b}}]);
//# sourceMappingURL=chunk-7d0deda0.c90e0425.js.map