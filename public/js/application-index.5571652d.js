(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["application-index","create-application-form"],{"0049":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a=Object(r["withScopeId"])("data-v-4ce544c6");Object(r["pushScopeId"])("data-v-4ce544c6");var o={class:"home"},c={class:"mb-2 mt-4"},i={class:"tabs"},l=Object(r["createTextVNode"])("VCEPS"),s=Object(r["createTextVNode"])("GCEPS"),d={class:"p-4 border rounded-tr-lg rounded-b-lg bg-white"};Object(r["popScopeId"])();var u=a((function(e,t,n,u,p,b){var f=Object(r["resolveComponent"])("router-link"),m=Object(r["resolveComponent"])("router-view"),h=Object(r["resolveComponent"])("create-application-form"),v=Object(r["resolveComponent"])("modal-dialog");return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])("button",{onClick:t[1]||(t[1]=function(e){return p.showModal=!0}),class:"btn blue"},"Initiate Application"),Object(r["createVNode"])("div",c,[Object(r["createVNode"])("div",i,[Object(r["createVNode"])(f,{to:{name:"vceps"},class:"tab"},{default:a((function(){return[l]})),_:1}),Object(r["createVNode"])(f,{to:{name:"gceps"},class:"tab"},{default:a((function(){return[s]})),_:1})]),Object(r["createVNode"])("div",d,[Object(r["createVNode"])(m)])]),Object(r["createVNode"])(v,{modelValue:p.showModal,"onUpdate:modelValue":t[3]||(t[3]=function(e){return p.showModal=e}),size:"md",onClosed:t[4]||(t[4]=function(t){return e.$refs.initiateform.initForm()})},{default:a((function(){return[Object(r["createVNode"])(h,{name:"modal",onCanceled:t[2]||(t[2]=function(e){return p.showModal=!1}),onSaved:b.handleApplicationInitiated,ref:"initiateform"},null,8,["onSaved"])]})),_:1},8,["modelValue"])])})),p=n("3f17"),b={name:"ApplicationsIndex",components:{CreateApplicationForm:p["default"]},data:function(){return{showModal:!1}},computed:{},methods:{handleApplicationInitiated:function(e){this.showModal=!1,this.$router.push({name:"AddContact",params:{uuid:e.uuid}})}}};n("6531");b.render=u,b.__scopeId="data-v-4ce544c6";t["default"]=b},"008e":function(e,t,n){},"0cb2":function(e,t,n){var r=n("7b0b"),a=Math.floor,o="".replace,c=/\$([$&'`]|\d\d?|<[^>]*>)/g,i=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,l,s,d){var u=n+e.length,p=l.length,b=i;return void 0!==s&&(s=r(s),b=c),o.call(d,b,(function(r,o){var c;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(u);case"<":c=s[o.slice(1,-1)];break;default:var i=+o;if(0===i)return r;if(i>p){var d=a(i/10);return 0===d?r:d<=p?void 0===l[d-1]?o.charAt(1):l[d-1]+o.charAt(1):r}c=l[i-1]}return void 0===c?"":c}))}},"2b61":function(e,t,n){"use strict";n.r(t);var r=n("7a23");function a(e,t,n,a,o,c){var i=Object(r["resolveComponent"])("applications-table");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])(i,{"ep-type-id":1})])}var o=n("eb82"),c={components:{ApplicationsTable:o["a"]},props:{},data:function(){return{}}};c.render=a;t["default"]=c},"3f17":function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("7a23"),a=Object(r["createVNode"])("h4",{class:"text-xl font-semibold pb-2 border-b mb-4"},"Initiate Application",-1),o=Object(r["createVNode"])("option",{value:null},"Select...",-1),c=Object(r["createTextVNode"])("   "),i=Object(r["createTextVNode"])("   "),l=Object(r["createVNode"])("label",{for:"show-initiation-checkbox"},"Backdate this initiation",-1);function s(e,t,n,s,d,u){var p=this,b=Object(r["resolveComponent"])("input-row"),f=Object(r["resolveComponent"])("button-row"),m=Object(r["resolveComponent"])("form-container");return Object(r["openBlock"])(),Object(r["createBlock"])(m,{onKeydown:Object(r["withKeys"])(u.save,["enter"])},{default:Object(r["withCtx"])((function(){return[a,Object(r["createVNode"])(b,{label:"Working Name",errors:d.errors.working_name,type:"text",modelValue:p.app.working_name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return p.app.working_name=e}),placeholder:"A recognizable name"},null,8,["errors","modelValue"]),Object(r["createVNode"])(b,{label:"CDWG",errors:d.errors.cdwg_id},{default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createVNode"])("select",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return d.app.cdwg_id=e})},[o,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.cdwgs,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("option",{key:e.id,value:e.id},Object(r["toDisplayString"])(e.name),9,["value"])})),128))],512),[[r["vModelSelect"],d.app.cdwg_id]])]})),_:1},8,["errors"]),Object(r["createVNode"])(b,{label:"EP Type",errors:d.errors.ep_type_id},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(d.epTypes,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:e.id},[Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"radio",value:e.id,"onUpdate:modelValue":t[3]||(t[3]=function(e){return d.app.ep_type_id=e}),id:"ep-".concat(e.id,"-radio")},null,8,["value","id"]),[[r["vModelRadio"],d.app.ep_type_id]]),c,Object(r["createVNode"])("label",{for:"ep-".concat(e.id,"-radio")},Object(r["toDisplayString"])(e.name),9,["for"])])})),128))])]})),_:1},8,["errors"]),Object(r["createVNode"])(b,{errors:d.errors.date_initiated},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",null,[Object(r["createVNode"])("div",null,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=function(e){return d.showInitiationDate=e}),id:"show-initiation-checkbox"},null,512),[[r["vModelCheckbox"],d.showInitiationDate]]),i,l]),Object(r["withDirectives"])(Object(r["createVNode"])(b,{type:"date",label:"Initiation Date",modelValue:d.app.date_initiated,"onUpdate:modelValue":t[5]||(t[5]=function(e){return d.app.date_initiated=e})},null,8,["modelValue"]),[[r["vShow"],d.showInitiationDate]])])]})),_:1},8,["errors"]),Object(r["createVNode"])(f,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("button",{class:"btn",onClick:t[6]||(t[6]=function(){return u.cancel&&u.cancel.apply(u,arguments)})},"Cancel"),Object(r["createVNode"])("button",{class:"btn blue",onClick:t[7]||(t[7]=function(){return u.save&&u.save.apply(u,arguments)})},"Initiate Application")]})),_:1})]})),_:1},8,["onKeydown"])}n("b64b"),n("96cf");var d=n("1da1"),u=n("5530"),p=n("5502"),b=n("e328"),f={name:"CreateApplicationForm",props:{},emits:["canceled","saved"],data:function(){return{visible:!1,showInitiationDate:!1,app:{working_name:null,cdwg_id:null,ep_type_id:null,date_initiated:Object(b["a"])(new Date)},epTypes:[{name:"GCEP",id:1},{name:"VCEP",id:2}],errors:{}}},computed:Object(u["a"])(Object(u["a"])({},Object(p["b"])({cdwgs:"cdwgs/all"})),{},{hasErrors:function(){return Object.keys(this.errors).length>0}}),watch:{"app.working_name":function(){this.clearErrors("working_name")},"app.cdwg_id":function(){this.clearErrors("cdwg_id")},"app.ep_type_id":function(){this.clearErrors("ep_type_id")}},methods:{cancel:function(){this.initForm(),this.$emit("canceled")},save:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/initiateApplication",e.app);case 3:e.$emit("saved",e.app),t.next=12;break;case 6:if(t.prev=6,t.t0=t["catch"](0),!t.t0.response||422!=t.t0.response.status||!t.t0.response.data.errors){t.next=11;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 11:throw t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,6]])})))()},initForm:function(){this.initErrors(),this.initAppData()},initAppData:function(){this.app={working_name:null,cdwg_id:null,ep_type_id:null,date_initiated:Object(b["a"])(new Date)}},clearErrors:function(e){e?delete this.errors[e]:this.initErrors()},initErrors:function(){this.errors={}}}};f.render=s;t["default"]=f},5257:function(e,t,n){"use strict";n("4de4"),n("caad"),n("b64b"),n("ac1f"),n("2532"),n("5319");var r=n("5530"),a=n("6c02"),o=n("7a23");t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(a["d"])(),n=Object(a["c"])();e=e||{field:"name",desc:!1};var c=Object(o["computed"])({immediate:!0,get:function(){return Object.keys(n.query).includes("sort-field")?{field:n.query["sort-field"],desc:Boolean(parseInt(n.query["sort-desc"]))}:e},set:function(e){var a={"sort-field":e.field,"sort-desc":e.desc?1:0},o=Object(r["a"])(Object(r["a"])({},n.query),a);t.replace({path:n.path,query:o})}}),i=Object(o["computed"])({set:function(e){var a=n.query,o=n.path,c=Object(r["a"])({},a);e?c=Object(r["a"])(Object(r["a"])({},a),{filter:e}):delete c.filter,t.replace({path:o,query:c})},get:function(){return n.query.filter},immediate:!0});return{sort:c,filter:i}}},5319:function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),o=n("50c4"),c=n("a691"),i=n("1d80"),l=n("8aa5"),s=n("0cb2"),d=n("14c3"),u=Math.max,p=Math.min,b=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var f=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,h=f?"$":"$0";return[function(n,r){var a=i(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!f&&m||"string"===typeof r&&-1===r.indexOf(h)){var i=n(t,e,this,r);if(i.done)return i.value}var v=a(e),j=String(this),O="function"===typeof r;O||(r=String(r));var w=v.global;if(w){var y=v.unicode;v.lastIndex=0}var g=[];while(1){var _=d(v,j);if(null===_)break;if(g.push(_),!w)break;var V=String(_[0]);""===V&&(v.lastIndex=l(j,o(v.lastIndex),y))}for(var k="",N=0,x=0;x<g.length;x++){_=g[x];for(var A=String(_[0]),C=u(p(c(_.index),j.length),0),I=[],S=1;S<_.length;S++)I.push(b(_[S]));var D=_.groups;if(O){var B=[A].concat(I,C,j);void 0!==D&&B.push(D);var E=String(r.apply(void 0,B))}else E=s(A,j,C,I,D,r);C>=N&&(k+=j.slice(N,C)+E,N=C+A.length)}return k+j.slice(N)}]}))},6531:function(e,t,n){"use strict";n("008e")},d659:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function a(e,t,n,a,o,c){var i=Object(r["resolveComponent"])("applications-table");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])(i,{"ep-type-id":2})])}var o=n("eb82"),c={components:{ApplicationsTable:o["a"]}};c.render=a;t["default"]=c},eb82:function(e,t,n){"use strict";n("4de4"),n("b0c0");var r=n("7a23"),a={class:"flex justify-between"},o={class:"mb-1 flex space-x-2"},c=Object(r["createTextVNode"])("Filter: "),i=Object(r["createTextVNode"])(" Show completed ");function l(e,t,n,l,s,d){var u=Object(r["resolveComponent"])("data-table");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])("div",a,[Object(r["createVNode"])("div",o,[Object(r["createVNode"])("label",null,[c,Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"text",class:"sm","onUpdate:modelValue":t[1]||(t[1]=function(e){return l.filter=e}),placeholder:"filter"},null,512),[[r["vModelText"],l.filter]])]),Object(r["createVNode"])("label",null,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=function(e){return d.showCompleted=e})},null,512),[[r["vModelCheckbox"],d.showCompleted]]),i])]),Object(r["createVNode"])("div",null,[Object(r["createVNode"])("button",{class:["btn btn-xs",{blue:0==d.showAllInfo}],onClick:t[3]||(t[3]=function(e){return d.showAllInfo=0})},"Summary",2),Object(r["createVNode"])("button",{class:["btn btn-xs",{blue:1==d.showAllInfo}],onClick:t[4]||(t[4]=function(e){return d.showAllInfo=1})},"All Info",2)])]),Object(r["createVNode"])(u,{data:d.filteredData,fields:d.selectedFields,"filter-term":l.filter,"row-click-handler":d.goToApplication,"row-class":"cursor-pointer",sort:l.sort,"onUpdate:sort":t[5]||(t[5]=function(e){return l.sort=e}),style:d.remainingHeight,class:"overflow-auto",ref:"table"},{"cell-contacts":Object(r["withCtx"])((function(e){var t=e.item;return[Object(r["createVNode"])("ul",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t.contacts,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("li",{key:e.id},[Object(r["createVNode"])("small",null,[Object(r["createVNode"])("a",{href:"mailto:".concat(e.email),class:"text-blue-500"},Object(r["toDisplayString"])(e.name),9,["href"])])])})),128))])]})),_:1},8,["data","fields","filter-term","row-click-handler","sort","style"])])}n("99af"),n("caad"),n("a9e3"),n("b64b"),n("ac1f"),n("2532"),n("5319");var s=n("2909"),d=n("5530"),u=n("5502"),p=n("e328"),b=n("5257"),f={components:{},props:{epTypeId:{type:Number,default:null}},data:function(){return{fields:[{name:"id",label:"ID",type:Number,sortable:!0},{name:"name",label:"Name",type:String,sortable:!0},{name:"cdwg.name",label:"CDWG",type:String,sortable:!0},{name:"current_step",label:"Current Step",type:Number,sortable:!0,resolveValue:function(e){return e.isCompleted?"Completed":e.current_step},resolveSort:function(e){return e.isCompleted?5:e.current_step}},{name:"latest_log_entry.created_at",label:"Last Activity",type:String,sortable:!0,resolveValue:function(e){return e&&e.latest_log_entry?Object(p["a"])(e.latest_log_entry.created_at):null},colspan:2,headerClass:["max-w-sm"],class:["min-w-28"]},{name:"latest_log_entry.description",label:"Last Activity",type:String,hideHeader:!0,class:["max-w-48","truncate"]},{name:"latest_pending_next_action.entry",label:"Next Action",type:String,sortable:!1,class:["min-w-28","max-w-xs","truncate"]}],allInfoFields:[{name:"contacts",label:"Contacts",type:Array,sortable:!1,class:["min-w-40"],step:1},{name:"first_scope_document.date_received",label:2==this.epTypeId?"Step 1 Received":"Application Received",type:Date,sortable:!0,class:["min-w-28"],step:1},{name:"approval_dates.step 1",label:2==this.epTypeId?"Step 1 Approved":"Application Approved",type:Date,sortable:!0,class:["min-w-28"],step:1},{name:"approval_dates.step 2",label:"Step 2 Approved",type:Date,sortable:!0,class:["min-w-28"],step:2},{name:"approval_dates.step 3",label:"Step 3 Approved",type:Date,sortable:!0,class:["min-w-28"],step:3},{name:"first_final_document.date_received",label:"Step 4 Received",type:Date,sortable:!0,class:["min-w-28"],step:4},{name:"approval_dates.step 4",label:"Step 4 Approved",type:Date,sortable:!0,class:["min-w-28"],step:4}]}},computed:Object(d["a"])(Object(d["a"])({},Object(u["b"])({applications:"applications/all"})),{},{filteredData:function(){var e=this;return this.applications.filter((function(t){return!e.epTypeId||t.ep_type_id==e.epTypeId})).filter((function(t){return!!e.showCompleted||null==t.date_completed}))},showCompleted:{set:function(e){var t=this.$route.query,n=this.$route.path,r=Object(d["a"])({},t);e?r=Object(d["a"])(Object(d["a"])({},t),{"show-completed":1}):delete r["show-completed"],this.$router.replace({path:n,query:r})},get:function(){return Boolean(parseInt(this.$route.query["show-completed"]))},immediate:!0},selectedFields:function(){if(1==this.showAllInfo){var e=2==this.epTypeId?[1,2,3,4]:[1],t=this.allInfoFields.filter((function(t){return e.includes(t.step)}));return[].concat(Object(s["a"])(this.fields),Object(s["a"])(t))}return this.fields},showAllInfo:{immediate:!0,get:function(){return Object.keys(this.$route.query).includes("showAllInfo")?this.$route.query.showAllInfo:0},set:function(e){var t=Object(d["a"])({},this.$route.query);t.showAllInfo=e,this.$router.replace({path:this.$route.path,query:t})}},remainingHeight:function(){return{height:"calc(100vh - 220px)"}}}),methods:{getApplications:function(){var e={with:["latestLogEntry","latestPendingNextAction","type","contacts","firstScopeDocument","firstFinalDocument"]},t={};Object.keys(t).length>0&&(e.where=t),this.$store.dispatch("applications/getApplications",e)},goToApplication:function(e){this.$router.push({name:"ApplicationDetail",params:{uuid:e.uuid}})}},mounted:function(){this.getApplications()},setup:function(){var e=Object(b["a"])(),t=e.sort,n=e.filter;return{sort:t,filter:n}}};f.render=l;t["a"]=f}}]);
//# sourceMappingURL=application-index.5571652d.js.map