{"version":3,"sources":["webpack:///./src/composables/router_aware_sort_and_filter.js","webpack:///./src/views/institutions/InstitutionList.vue","webpack:///./src/components/institutions/InstitutionApprovalForm.vue","webpack:///./src/components/institutions/InstitutionApprovalForm.vue?5b8a","webpack:///./src/components/institutions/InstitutionUpdateForm.vue","webpack:///./src/components/institutions/InstitutionUpdateForm.vue?4489","webpack:///./src/components/institutions/InstitutionMergeForm.vue","webpack:///./src/components/institutions/InstitutionMergeForm.vue?6f81","webpack:///./src/views/institutions/InstitutionList.vue?e8a9"],"names":["defaultSort","router","useRouter","route","useRoute","console","log","field","desc","sort","computed","immediate","get","Object","keys","query","includes","Boolean","parseInt","set","sortObj","newSortQuery","newQuery","replace","path","filter","value","currentQuery","currentPath","updatedQuery","_createElementVNode","class","_createElementBlock","_hoisted_1","_createVNode","_component_data_table","paginated","data","$options","fields","$data","$setup","$event","header","type","cell-actions","_withCtx","item","_component_dropdown_menu","hide-cheveron","label","_hoisted_3","_component_dropdown_item","onClick","_createBlock","_Teleport","to","_component_modal_dialog","title","name","_component_institution_approval_form","onSaved","onCanceled","_component_institution_update_form","_component_institution_merge_form","obsoletes","_component_dictionary_row","$props","abbreviation","url","country","_component_button_row","submit-text","onSubmitted","onCancel","props","modelValue","required","emits","methods","approve","markApproved","updatedInst","$emit","cancelApproval","this","__exports__","_component_data_form","errors","save","initErrors","updateInstitution","workingCopy","newInst","isValidationError","response","cancel","initInstitution","setup","context","setupMirror","getCountries","countries","mounted","_component_input_row","vertical","_component_note","_component_institution_search_select","model-value","allow-add","authority_id","authority","Array","default","authorityId","obsoleteIds","watch","handler","id","deep","map","o","handleObsoleteUpdate","commitMerge","mergeInstitutions","cancelMerge","components","InstitutionUpdateForm","InstitutionApprovalForm","InstitutionMergeForm","items","Number","sortable","String","resolveValue","approved","resolveSort","currentItem","showApproveDialog","showEditDialog","showMergeDialog","filteredItems","pattern","RegExp","match","edit","initApprove","initMerge","getInstitutions","getAllInstitutions","handleSaved","updateItem","handleCancel","handleMerge","currentIdx","findIndex","i","sortAndFilter","render"],"mappings":"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","file":"js/institution-list.e13c8276.js","sourcesContent":["import { useRouter, useRoute } from 'vue-router'\nimport {computed} from 'vue'\n\nexport default function (defaultSort = null) {\n    const router = useRouter()\n    const route = useRoute()\n    if (!defaultSort){\n        console.log('Warning: defaultSort is deprecated.  Please provide a sort object: {field: \"fieldname\", desc: boolean}')\n        defaultSort = (defaultSort) ? defaultSort : {field: 'name', desc: false}\n    }\n    \n    const sort = computed({\n        immediate: true,\n        get() {\n            if (Object.keys(route.query).includes('sort-field')) {\n                return {\n                    field: route.query['sort-field'],\n                    desc: Boolean(parseInt(route.query['sort-desc']))\n                }\n            }\n            return defaultSort;\n        },\n        set(sortObj) {\n            const newSortQuery = {'sort-field': sortObj.field, 'sort-desc': sortObj.desc ? 1 : 0}\n    \n            const newQuery = {\n                ...route.query, \n                ...newSortQuery\n            };\n    \n            router.replace({path: route.path, query: newQuery})\n        }\n    });\n    \n    const filter = computed({\n        set(value) {\n            let currentQuery = route.query;\n            let currentPath = route.path;\n    \n            let updatedQuery = {...currentQuery};\n    \n            if (!value) {\n                delete updatedQuery.filter;\n            } else {\n                updatedQuery = {...currentQuery, ...{'filter': value} };\n            }\n    \n            router.replace({path: currentPath, query: updatedQuery})\n        },\n        get() {\n            return route.query.filter\n        },\n        immediate: true\n    });\n\n    return {\n        sort,\n        filter\n    }\n}\n","<template>\n    <div>\n        <h1>Institutions</h1>\n        <data-table paginated :data=\"filteredItems\" :fields=\"fields\" v-model:sort=\"sort\">\n            <template v-slot:header>\n                <label>\n                    Filter:\n                    <input type=\"text\" v-model=\"filter\">\n                </label>\n            </template>\n            <template v-slot:cell-actions=\"{item}\">\n                <dropdown-menu hide-cheveron>\n                    <template v-slot:label>\n                        <button class=\"btn btn-xs\">&hellip;</button>\n                    </template>\n                    \n                    <dropdown-item @click=\"edit(item)\">Edit</dropdown-item>\n                    <dropdown-item @click=\"initApprove(item)\">Approve</dropdown-item>\n                    <dropdown-item @click=\"initMerge(item)\">Merge into another</dropdown-item>\n                </dropdown-menu>\n            </template>\n        </data-table>\n        <teleport to=\"body\">\n            <modal-dialog v-model=\"showApproveDialog\" :title=\"`Approve ${currentItem.name}`\">\n                <institution-approval-form v-model=\"currentItem\" @saved=\"handleSaved\" @canceled=\"handleCancel\" />\n            </modal-dialog>\n            <modal-dialog v-model=\"showEditDialog\" :title=\"`Edit ${currentItem.name}`\">\n                <institution-update-form v-model=\"currentItem\" @saved=\"handleSaved\" @canceled=\"handleCancel\" />\n            </modal-dialog>\n            <modal-dialog v-model=\"showMergeDialog\" title=\"Merge Institutions\">\n                <institution-merge-form :obsoletes=\"[currentItem]\" @saved=\"handleMerge\" @canceled=\"showMergeDialog = false\" />\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nimport sortAndFilter from '@/composables/router_aware_sort_and_filter';\nimport {getAllInstitutions} from '@/forms/institution_form'\nimport InstitutionApprovalForm from '@/components/institutions/InstitutionApprovalForm'\nimport InstitutionUpdateForm from '@/components/institutions/InstitutionUpdateForm'\nimport InstitutionMergeForm from '@/components/institutions/InstitutionMergeForm'\n\nexport default {\n    name: 'InstitutionList',\n    components: {\n        InstitutionUpdateForm,\n        InstitutionApprovalForm,\n        InstitutionMergeForm,\n    },\n    data() {\n        return {\n            items: [],\n            fields: [\n                {\n                    name: 'id', \n                    label: 'ID',\n                    type: Number,\n                    sortable: true,\n                },\n                {\n                    name: 'name',\n                    type: String,\n                    sortable: true\n                },\n                {\n                    name: 'abbreviation',\n                    type: String,\n                    sortable: true\n                },\n                {\n                    name: 'country.name',\n                    label: 'Country',\n                    type: String,\n                    sortable: true,\n                },\n                {\n                    name: 'people_count',\n                    label: '# People',\n                    type: Number,\n                    sortable: true\n                },\n                {\n                    name: 'approved',\n                    type: Boolean,\n                    sortable: true,\n                    resolveValue (item) {\n                        return item.approved ? 'Approved' : null;\n                    },\n                    resolveSort (item) {\n                        return item.approved;\n                    }\n                },\n                {\n                    name: 'actions',\n                    label: '',\n                    sortable: false\n                }\n\n            ],\n            currentItem: {country: {}},\n            showApproveDialog: false,\n            showEditDialog: false,\n            showMergeDialog: false,\n        }\n    },\n    computed: {\n        filteredItems () {\n            if (!this.filter) {\n                return this.items;\n            }\n            const pattern = new RegExp(`.*${this.filter}.*`, 'i');\n            return this.items.filter(item => {\n                return item.name.match(pattern)\n                    || (item.abbreviation && item.abbreviation.match(pattern))\n                    || (item.country && item.country.name.match(pattern));\n            })\n        }\n    },\n    methods: {\n        edit (item) {\n            this.showEditDialog = true;\n            this.currentItem = item;\n        },\n        initApprove (item) {\n            this.showApproveDialog = true;\n            this.currentItem = item;\n        },\n        initMerge (item) {\n            this.currentItem = item;\n            this.showMergeDialog = true;\n        },\n        async getInstitutions () {\n            this.items = await getAllInstitutions();\n        },\n        handleSaved() {\n            this.showApproveDialog = false;\n            this.showEditDialog = false;\n            // set the item at index and move clear currnet item\n            this.updateItem();\n            this.currentItem = {country: {}}\n        },\n        handleCancel() {\n            this.showApproveDialog = false;\n            this.showEditDialog = false;\n            this.updateItem();\n            this.currentItem = {country: {}}\n        },\n        handleMerge() {\n            this.getInstitutions(); \n            this.showMergeDialog = false;\n        },\n        updateItem() {\n            if (!this.currentItem.id) {\n                return;\n            }\n            const currentIdx = this.items.findIndex(i => i.id == this.currentItem.id);\n            if (currentIdx > -1) {\n                this.items[currentIdx] = {...this.currentItem}\n            }\n        }\n    },\n    setup() {\n        const {sort, filter} = sortAndFilter({field: 'name', desc: false});\n\n        return {\n            sort,\n            filter\n        }\n    },\n    mounted () {\n        this.getInstitutions();\n    }\n}\n</script>","<template>\n    <div>\n        Are you sure you want to approve this institution?\n        <dictionary-row label=\"Name\">\n            {{modelValue.name}}\n        </dictionary-row>\n        <dictionary-row label=\"Abbreviation\">{{modelValue.abbreviation || '--'}}</dictionary-row>\n        <dictionary-row label=\"URL\">{{modelValue.url || '--'}}</dictionary-row>\n        <dictionary-row label=\"Country\">{{modelValue.country ? modelValue.country.name : '--'}}</dictionary-row>\n        <button-row submit-text=\"Approve\" @submitted=\"approve\" @cancel=\"cancelApproval\" />\n    </div>\n</template>\n<script>\nimport {markApproved} from '@/forms/institution_form'\n\nexport default {\n    name: 'ComponentName',\n    props: {\n        modelValue: {\n            type: Object,\n            required: true\n        }\n    },\n    emits: [\n        'saved',\n        'canceled',\n        'update:modelValue'\n    ],\n    methods: {\n        async approve () {\n            const updatedInst = await markApproved(this.modelValue);\n            this.$emit('update:modelValue', updatedInst);\n            this.$emit('saved', updatedInst)\n        },\n        cancelApproval () {\n            this.$emit('canceled')\n        }\n    }\n}\n</script>","import { render } from \"./InstitutionApprovalForm.vue?vue&type=template&id=0af731d8\"\nimport script from \"./InstitutionApprovalForm.vue?vue&type=script&lang=js\"\nexport * from \"./InstitutionApprovalForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/new-epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>\n        <data-form :fields=\"fields\" :errors=\"errors\" v-model=\"workingCopy\" />\n        <button-row submit-text=\"Save\" @submitted=\"save\" @cancel=\"cancel\" />\n    </div>\n</template>\n<script>\nimport {setupMirror} from '@/composables/setup_working_mirror'\nimport {fields, getCountries, countries, updateInstitution} from '@/forms/institution_form'\nimport {isValidationError} from '@/http'\n\nexport default {\n    name: 'InstitutionCreateForm',\n    props: {\n        modelValue: {\n            type: Object,\n            required: true\n        }\n    },\n    emits: [\n        'update:modelValue',\n        'saved',\n        'canceled'\n    ],\n    data() {\n        return {\n            errors: {}\n        }\n    },\n    methods: {\n        async save () {\n            try {\n                this.initErrors();\n                const newInst = await this.updateInstitution(this.workingCopy);\n                this.$emit('update:modelValue', newInst);\n                this.$emit('saved', newInst)\n            } catch (error) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors\n                }\n            }\n        },\n        cancel () {\n            this.$emit('canceled')\n            this.initInstitution()\n        },\n        initErrors () {\n            this.errors = {};\n        }\n    },\n    setup(props, context) {\n        const {workingCopy} = setupMirror(props, context)\n        \n        return {\n            fields,\n            getCountries,\n            countries,\n            updateInstitution,\n            workingCopy\n        }\n    },\n    mounted () {\n        this.getCountries();\n    }\n}\n</script>","import { render } from \"./InstitutionUpdateForm.vue?vue&type=template&id=4fe24904\"\nimport script from \"./InstitutionUpdateForm.vue?vue&type=script&lang=js\"\nexport * from \"./InstitutionUpdateForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/new-epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>\n        <p class=\"mb-8\">\n            Merging institutions will do the following:\n            <ol class=\"list-decimal ml-6\">\n                <li>Transfer all people with the obsolete institution to the authoritiative institution.</li>\n                <li>Delete the obsolete institution.</li>\n            </ol>\n        </p>\n        <input-row label=\"Merge\" vertical>\n            <template v-slot:label>\n                Merge <note class=\"inline-block\">(Obsolete institution that will be deleted)</note>\n            </template>\n            <institution-search-select :model-value=\"obsoleteIds\" @update:modelValue=\"handleObsoleteUpdate\" :allow-add=\"false\"></institution-search-select>\n            \n        </input-row>\n        <input-row label=\"Into\" :errors=\"errors.authority_id\" vertical>\n            <template v-slot:label>Into <note class=\"inline\">(Authoritative institution)</note></template>\n            <institution-search-select v-model=\"authorityId\" :allow-add=\"false\"></institution-search-select>\n        </input-row>\n        <button-row submit-text=\"Merge\" @submitted=\"commitMerge\" @canceled=\"cancelMerge\" />\n    </div>\n</template>\n<script>\nimport {mergeInstitutions} from '@/forms/institution_form'\nimport { isValidationError } from '@/http';\n\nexport default {\n    name: 'InstitutionMergeForm',\n    props: {\n        authority: {\n            type: Object,\n            required: false\n        },\n        obsoletes: {\n            type: Array,\n            default: () => []\n        }\n    },\n    emits: [\n        'saved',\n        'canceled'\n    ],\n    data() {\n        return {\n            authorityId: null,\n            obsoleteIds: [],\n            errors: {}\n        }\n    },\n    watch: {\n        authority: {\n            immediate: true,\n            handler (to) {\n                if (!to) {\n                    return;\n                }\n                this.authorityId = to.id\n            }\n        },\n        obsoletes: {\n            immediate: true,\n            deep: true,\n            handler (to) {\n                this.obsoleteIds = to.map(o => o.id);\n            }\n        }\n    },\n    methods: {\n        handleObsoleteUpdate (value) {\n            if (!value) {\n                this.obsoleteIds = [];\n                return;\n            }\n            this.obsoleteIds = [value];\n        },\n        async commitMerge () {\n            try {\n                this.errors = {};\n                await mergeInstitutions(this.authorityId, this.obsoleteIds);\n                this.authorityId = null;\n                this.obsoleteIds = [];\n                this.$emit('saved');\n            } catch (error) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors;\n                }\n            }\n        },\n        cancelMerge () {\n            this.authorityId = null;\n            this.obsoleteIds = [];\n            this.$emit('canceled');\n        }\n    }\n}\n</script>","import { render } from \"./InstitutionMergeForm.vue?vue&type=template&id=9fc25b4c\"\nimport script from \"./InstitutionMergeForm.vue?vue&type=script&lang=js\"\nexport * from \"./InstitutionMergeForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/new-epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./InstitutionList.vue?vue&type=template&id=546b8f24\"\nimport script from \"./InstitutionList.vue?vue&type=script&lang=js\"\nexport * from \"./InstitutionList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/new-epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}