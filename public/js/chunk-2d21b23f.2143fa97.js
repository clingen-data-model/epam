(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21b23f"],{bf05:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i={class:"flex justify-between"},a=Object(r["createTextVNode"])("Admin"),o=Object(r["createElementVNode"])("h1",null,"Invites",-1),c=["onClick"],s=Object(r["createElementVNode"])("p",null,"This cannot be undone.",-1),l=Object(r["createElementVNode"])("p",null,"Do you want to reset the invite?",-1);function u(e,t,n,u,m,d){var b=Object(r["resolveComponent"])("note"),f=Object(r["resolveComponent"])("data-table"),p=Object(r["resolveComponent"])("button-row"),v=Object(r["resolveComponent"])("modal-dialog"),h=Object(r["resolveDirective"])("remaining-height");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("div",i,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[a]})),_:1}),o]),Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("pre",null,Object(r["toDisplayString"])(m.searchTerm),1),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return m.searchTerm=e}),placeholder:"filter by name or email"},null,512),[[r["vModelText"],m.searchTerm]])])]),Object(r["withDirectives"])(Object(r["createVNode"])(f,{data:d.filteredInvites,fields:m.fields,sort:m.tableSort,"onUpdate:sort":t[1]||(t[1]=function(e){return m.tableSort=e}),class:"text-sm"},{"cell-reset":Object(r["withCtx"])((function(e){var t=e.item;return[t.redeemed_at?(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",{key:0,class:"btn btn-xs",onClick:function(e){return d.confirmReset(t)}}," Reset ",8,c)):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["data","fields","sort"]),[[h]]),(Object(r["openBlock"])(),Object(r["createBlock"])(r["Teleport"],{to:"body"},[Object(r["createVNode"])(v,{title:"Reset Invite",modelValue:m.showConfirmation,"onUpdate:modelValue":t[3]||(t[3]=function(e){return m.showConfirmation=e})},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",null,"You are about to reset the invite for "+Object(r["toDisplayString"])(m.resettingInvite.first_name)+" "+Object(r["toDisplayString"])(m.resettingInvite.last_name)+".",1),s,l,Object(r["createVNode"])(p,{"submit-text":"Reset Invite",onSubmitted:t[2]||(t[2]=function(e){return d.resetInvite(m.resettingInvite)})})]})),_:1},8,["modelValue"])]))])}var m=n("1da1"),d=(n("96cf"),n("a9e3"),n("b0c0"),n("4d63"),n("ac1f"),n("25f0"),n("4de4"),n("466d"),n("99af"),n("c740"),n("db04")),b={name:"InviteAdmin",props:{},data:function(){return{resettingInvite:{},tableSort:{field:"id",desc:!1},invites:[],showConfirmation:!1,searchTerm:null,fields:[{name:"id",sortable:!0,type:Number},{name:"person.name",label:"Name",sortable:!0,type:String},{name:"person.email",label:"Email",sortable:!0,type:String},{name:"redeemed_at",sortable:!0,type:Date},{name:"inviter",sortable:!0,type:String,resolveValue:function(e){return e.inviter?e.inviter.name:null}},{name:"code",sortable:!1,type:String},{name:"reset",sortable:!1,type:String}]}},computed:{filteredInvites:function(){if(!this.searchTerm)return this.invites;var e=new RegExp(".*".concat(this.searchTerm,".*"));return this.invites.filter((function(t){return t.first_name.match(e)||t.last_name.match(e)||"".concat(t.first_name," ").concat(t.last_name).match(e)||t.email.match(e)}))}},methods:{getInvites:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].get("/api/people/invites").then((function(e){return e.data.data}));case 2:e.invites=t.sent;case 3:case"end":return t.stop()}}),t)})))()},resetInvite:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d["a"].put("/api/people/invites/".concat(e.code,"/reset"));case 3:r=n.sent,i=t.invites.findIndex((function(t){return t.id==e.id})),-1==i&&alert("what??"),t.invites[i]=r.data,n.next=14;break;case 9:if(n.prev=9,n.t0=n["catch"](0),!Object(d["b"])(n.t0)){n.next=14;break}return alert("Problem resetting invite!"),n.abrupt("return");case 14:t.showConfirmation=!1;case 15:case"end":return n.stop()}}),n,null,[[0,9]])})))()},confirmReset:function(e){this.resettingInvite=e,this.showConfirmation=!0}},mounted:function(){this.getInvites()}};b.render=u;t["default"]=b}}]);
//# sourceMappingURL=chunk-2d21b23f.2143fa97.js.map